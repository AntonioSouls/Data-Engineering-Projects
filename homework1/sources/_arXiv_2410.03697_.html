<!DOCTYPE html>
<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<title>Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders</title>
<!--Generated on Mon Sep 23 20:20:48 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css"/>
<link href="/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>
<script src="/static/browse/0.3.4/js/addons_new.js"></script>
<script src="/static/browse/0.3.4/js/feedbackOverlay.js"></script>
<meta content="Causal Inference,  Counterfactual Inference,  Importance Sampling,  Policy Estimation,  Bandits,  Optimization" lang="en" name="keywords"/>
<base href="/html/2410.03697v1/"/></head>
<body>
<nav class="ltx_page_navbar">
<nav class="ltx_TOC">
<ol class="ltx_toclist">
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S1" title="In Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S2" title="In Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Method</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S3" title="In Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Experiments and Results</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S4" title="In Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1" title="In Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Off-policy Estimators</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection">
<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS1" title="In Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1 </span>Open-box Simulator</span></a>
<ol class="ltx_toclist ltx_toclist_subsection">
<li class="ltx_tocentry ltx_tocentry_subsubsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS1.SSS1" title="In A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1.1 </span>Artificial User Sessions</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS2" title="In Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.2 </span>Importance Sampling</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A2" title="In Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Hyperparameter Considerations</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A2.SS1" title="In Appendix B Hyperparameter Considerations â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B.1 </span>Top-<math alttext="k" class="ltx_Math" display="inline"><semantics><mi>k</mi><annotation-xml encoding="MathML-Content"><ci>ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex">k</annotation><annotation encoding="application/x-llamapun">italic_k</annotation></semantics></math> Optimization</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A2.SS2" title="In Appendix B Hyperparameter Considerations â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B.2 </span>Number Of Iterations for IS Search</span></a></li>
</ol>
</li>
</ol></nav>
</nav>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line ltx_leqno">
<h1 class="ltx_title ltx_title_document">Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Kaushal Paneri
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_email"><a href="mailto:kapaneri@microsoft.com">kapaneri@microsoft.com</a>
</span>
<span class="ltx_contact ltx_role_orcid"><a class="ltx_ref" href="https://orcid.org/0000-0002-8785-0723" title="ORCID identifier">0000-0002-8785-0723</a></span>
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_country" id="id1.1.id1"></span>
</span></span></span>
<span class="ltx_author_before">,Â </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Michael J. Munje
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_email"><a href="mailto:michaelmunje@utexas.edu">michaelmunje@utexas.edu</a>
</span>
<span class="ltx_contact ltx_role_orcid"><a class="ltx_ref" href="https://orcid.org/0000-0002-9168-0923" title="ORCID identifier">0000-0002-9168-0923</a></span>
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_country" id="id2.1.id1"></span>
</span></span></span>
<span class="ltx_author_before">,Â </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Kailash Singh Maurya
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_email"><a href="mailto:kamaurya@microsoft.com">kamaurya@microsoft.com</a>
</span>
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_country" id="id3.1.id1"></span>
</span></span></span>
<span class="ltx_author_before">,Â </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Adith Swaminathan
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_email"><a href="mailto:adswamin@microsoft.com">adswamin@microsoft.com</a>
</span>
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_country" id="id4.1.id1"></span>
</span></span></span>
<span class="ltx_author_before">Â andÂ </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Yifan Shi
</span><span class="ltx_author_notes">
<span class="ltx_contact ltx_role_email"><a href="mailto:yifanshi@microsoft.com">yifanshi@microsoft.com</a>
</span>
<span class="ltx_contact ltx_role_affiliation"><span class="ltx_text ltx_affiliation_country" id="id5.1.id1"></span>
</span></span></span>
</div>
<div class="ltx_dates">(2024; 30 August 2024)</div>
<div class="ltx_keywords">Causal Inference, Counterfactual Inference, Importance Sampling, Policy Estimation, Bandits, Optimization
</div>
<span class="ltx_note ltx_note_frontmatter ltx_role_copyright" id="id1"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_type">copyright: </span>acmlicensed</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_journalyear" id="id2"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_type">journalyear: </span>2024</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_doi" id="id3"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_type">doi: </span>XXXXXXX.XXXXXXX</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_conference" id="id4"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_type">conference: </span>CONSEQUENCES Workshop at ACM RecSys (CONSEQUENCES@RecSysâ€™24); October 14, 2024; Bari, Italy</span></span></span><span class="ltx_note ltx_note_frontmatter ltx_role_isbn" id="id5"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">â€ </sup><span class="ltx_note_type">isbn: </span>978-1-4503-XXXX-X/18/06</span></span></span>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1. </span>Introduction</h2>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Growing scale of recommender systems require extensive tuning to respond to market dynamics and system changes.
Tunable system parameters are often continuous, influence ranking, and consequently key performance indicators (KPIs) such as revenue per thousand impressions (RPM), clicks, and impression yield (IY).
The exploding dimensions of tunable parameters coupled with scale of the system impose significant computational challenges.</p>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.4"><span class="ltx_text ltx_font_italic" id="S1.p2.4.1">Open-box simulators</span> <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib1" title="">bayir2018genieopenboxcounterfactual, </a>)</cite> have been successful in parameter tuning in complex systemsÂ <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib1" title="">bayir2018genieopenboxcounterfactual, </a>)</cite>.
By replaying user sessions along with simulated user behaviors in those sessions, the open-box simulators provide faithful estimates for KPIs under counterfactual parameters. Let <math alttext="A" class="ltx_Math" display="inline" id="S1.p2.1.m1.1"><semantics id="S1.p2.1.m1.1a"><mi id="S1.p2.1.m1.1.1" xref="S1.p2.1.m1.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S1.p2.1.m1.1b"><ci id="S1.p2.1.m1.1.1.cmml" xref="S1.p2.1.m1.1.1">ğ´</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.1.m1.1c">A</annotation><annotation encoding="application/x-llamapun" id="S1.p2.1.m1.1d">italic_A</annotation></semantics></math> be the parameter space, and <math alttext="f" class="ltx_Math" display="inline" id="S1.p2.2.m2.1"><semantics id="S1.p2.2.m2.1a"><mi id="S1.p2.2.m2.1.1" xref="S1.p2.2.m2.1.1.cmml">f</mi><annotation-xml encoding="MathML-Content" id="S1.p2.2.m2.1b"><ci id="S1.p2.2.m2.1.1.cmml" xref="S1.p2.2.m2.1.1">ğ‘“</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.2.m2.1c">f</annotation><annotation encoding="application/x-llamapun" id="S1.p2.2.m2.1d">italic_f</annotation></semantics></math> be a KPI (e.g., as estimated by a simulator). For parameter <math alttext="a\in A" class="ltx_Math" display="inline" id="S1.p2.3.m3.1"><semantics id="S1.p2.3.m3.1a"><mrow id="S1.p2.3.m3.1.1" xref="S1.p2.3.m3.1.1.cmml"><mi id="S1.p2.3.m3.1.1.2" xref="S1.p2.3.m3.1.1.2.cmml">a</mi><mo id="S1.p2.3.m3.1.1.1" xref="S1.p2.3.m3.1.1.1.cmml">âˆˆ</mo><mi id="S1.p2.3.m3.1.1.3" xref="S1.p2.3.m3.1.1.3.cmml">A</mi></mrow><annotation-xml encoding="MathML-Content" id="S1.p2.3.m3.1b"><apply id="S1.p2.3.m3.1.1.cmml" xref="S1.p2.3.m3.1.1"><in id="S1.p2.3.m3.1.1.1.cmml" xref="S1.p2.3.m3.1.1.1"></in><ci id="S1.p2.3.m3.1.1.2.cmml" xref="S1.p2.3.m3.1.1.2">ğ‘</ci><ci id="S1.p2.3.m3.1.1.3.cmml" xref="S1.p2.3.m3.1.1.3">ğ´</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.3.m3.1c">a\in A</annotation><annotation encoding="application/x-llamapun" id="S1.p2.3.m3.1d">italic_a âˆˆ italic_A</annotation></semantics></math>, The objective is to find <math alttext="\hat{a}" class="ltx_Math" display="inline" id="S1.p2.4.m4.1"><semantics id="S1.p2.4.m4.1a"><mover accent="true" id="S1.p2.4.m4.1.1" xref="S1.p2.4.m4.1.1.cmml"><mi id="S1.p2.4.m4.1.1.2" xref="S1.p2.4.m4.1.1.2.cmml">a</mi><mo id="S1.p2.4.m4.1.1.1" xref="S1.p2.4.m4.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S1.p2.4.m4.1b"><apply id="S1.p2.4.m4.1.1.cmml" xref="S1.p2.4.m4.1.1"><ci id="S1.p2.4.m4.1.1.1.cmml" xref="S1.p2.4.m4.1.1.1">^</ci><ci id="S1.p2.4.m4.1.1.2.cmml" xref="S1.p2.4.m4.1.1.2">ğ‘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.4.m4.1c">\hat{a}</annotation><annotation encoding="application/x-llamapun" id="S1.p2.4.m4.1d">over^ start_ARG italic_a end_ARG</annotation></semantics></math> such that</p>
<table class="ltx_equation ltx_eqn_table" id="S1.E1">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_left">(1)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="f(\hat{a})\approx max_{a\in A}f(a)" class="ltx_Math" display="block" id="S1.E1.m1.2"><semantics id="S1.E1.m1.2a"><mrow id="S1.E1.m1.2.3" xref="S1.E1.m1.2.3.cmml"><mrow id="S1.E1.m1.2.3.2" xref="S1.E1.m1.2.3.2.cmml"><mi id="S1.E1.m1.2.3.2.2" xref="S1.E1.m1.2.3.2.2.cmml">f</mi><mo id="S1.E1.m1.2.3.2.1" xref="S1.E1.m1.2.3.2.1.cmml">â¢</mo><mrow id="S1.E1.m1.2.3.2.3.2" xref="S1.E1.m1.1.1.cmml"><mo id="S1.E1.m1.2.3.2.3.2.1" stretchy="false" xref="S1.E1.m1.1.1.cmml">(</mo><mover accent="true" id="S1.E1.m1.1.1" xref="S1.E1.m1.1.1.cmml"><mi id="S1.E1.m1.1.1.2" xref="S1.E1.m1.1.1.2.cmml">a</mi><mo id="S1.E1.m1.1.1.1" xref="S1.E1.m1.1.1.1.cmml">^</mo></mover><mo id="S1.E1.m1.2.3.2.3.2.2" stretchy="false" xref="S1.E1.m1.1.1.cmml">)</mo></mrow></mrow><mo id="S1.E1.m1.2.3.1" xref="S1.E1.m1.2.3.1.cmml">â‰ˆ</mo><mrow id="S1.E1.m1.2.3.3" xref="S1.E1.m1.2.3.3.cmml"><mi id="S1.E1.m1.2.3.3.2" xref="S1.E1.m1.2.3.3.2.cmml">m</mi><mo id="S1.E1.m1.2.3.3.1" xref="S1.E1.m1.2.3.3.1.cmml">â¢</mo><mi id="S1.E1.m1.2.3.3.3" xref="S1.E1.m1.2.3.3.3.cmml">a</mi><mo id="S1.E1.m1.2.3.3.1a" xref="S1.E1.m1.2.3.3.1.cmml">â¢</mo><msub id="S1.E1.m1.2.3.3.4" xref="S1.E1.m1.2.3.3.4.cmml"><mi id="S1.E1.m1.2.3.3.4.2" xref="S1.E1.m1.2.3.3.4.2.cmml">x</mi><mrow id="S1.E1.m1.2.3.3.4.3" xref="S1.E1.m1.2.3.3.4.3.cmml"><mi id="S1.E1.m1.2.3.3.4.3.2" xref="S1.E1.m1.2.3.3.4.3.2.cmml">a</mi><mo id="S1.E1.m1.2.3.3.4.3.1" xref="S1.E1.m1.2.3.3.4.3.1.cmml">âˆˆ</mo><mi id="S1.E1.m1.2.3.3.4.3.3" xref="S1.E1.m1.2.3.3.4.3.3.cmml">A</mi></mrow></msub><mo id="S1.E1.m1.2.3.3.1b" xref="S1.E1.m1.2.3.3.1.cmml">â¢</mo><mi id="S1.E1.m1.2.3.3.5" xref="S1.E1.m1.2.3.3.5.cmml">f</mi><mo id="S1.E1.m1.2.3.3.1c" xref="S1.E1.m1.2.3.3.1.cmml">â¢</mo><mrow id="S1.E1.m1.2.3.3.6.2" xref="S1.E1.m1.2.3.3.cmml"><mo id="S1.E1.m1.2.3.3.6.2.1" stretchy="false" xref="S1.E1.m1.2.3.3.cmml">(</mo><mi id="S1.E1.m1.2.2" xref="S1.E1.m1.2.2.cmml">a</mi><mo id="S1.E1.m1.2.3.3.6.2.2" stretchy="false" xref="S1.E1.m1.2.3.3.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.E1.m1.2b"><apply id="S1.E1.m1.2.3.cmml" xref="S1.E1.m1.2.3"><approx id="S1.E1.m1.2.3.1.cmml" xref="S1.E1.m1.2.3.1"></approx><apply id="S1.E1.m1.2.3.2.cmml" xref="S1.E1.m1.2.3.2"><times id="S1.E1.m1.2.3.2.1.cmml" xref="S1.E1.m1.2.3.2.1"></times><ci id="S1.E1.m1.2.3.2.2.cmml" xref="S1.E1.m1.2.3.2.2">ğ‘“</ci><apply id="S1.E1.m1.1.1.cmml" xref="S1.E1.m1.2.3.2.3.2"><ci id="S1.E1.m1.1.1.1.cmml" xref="S1.E1.m1.1.1.1">^</ci><ci id="S1.E1.m1.1.1.2.cmml" xref="S1.E1.m1.1.1.2">ğ‘</ci></apply></apply><apply id="S1.E1.m1.2.3.3.cmml" xref="S1.E1.m1.2.3.3"><times id="S1.E1.m1.2.3.3.1.cmml" xref="S1.E1.m1.2.3.3.1"></times><ci id="S1.E1.m1.2.3.3.2.cmml" xref="S1.E1.m1.2.3.3.2">ğ‘š</ci><ci id="S1.E1.m1.2.3.3.3.cmml" xref="S1.E1.m1.2.3.3.3">ğ‘</ci><apply id="S1.E1.m1.2.3.3.4.cmml" xref="S1.E1.m1.2.3.3.4"><csymbol cd="ambiguous" id="S1.E1.m1.2.3.3.4.1.cmml" xref="S1.E1.m1.2.3.3.4">subscript</csymbol><ci id="S1.E1.m1.2.3.3.4.2.cmml" xref="S1.E1.m1.2.3.3.4.2">ğ‘¥</ci><apply id="S1.E1.m1.2.3.3.4.3.cmml" xref="S1.E1.m1.2.3.3.4.3"><in id="S1.E1.m1.2.3.3.4.3.1.cmml" xref="S1.E1.m1.2.3.3.4.3.1"></in><ci id="S1.E1.m1.2.3.3.4.3.2.cmml" xref="S1.E1.m1.2.3.3.4.3.2">ğ‘</ci><ci id="S1.E1.m1.2.3.3.4.3.3.cmml" xref="S1.E1.m1.2.3.3.4.3.3">ğ´</ci></apply></apply><ci id="S1.E1.m1.2.3.3.5.cmml" xref="S1.E1.m1.2.3.3.5">ğ‘“</ci><ci id="S1.E1.m1.2.2.cmml" xref="S1.E1.m1.2.2">ğ‘</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.E1.m1.2c">f(\hat{a})\approx max_{a\in A}f(a)</annotation><annotation encoding="application/x-llamapun" id="S1.E1.m1.2d">italic_f ( over^ start_ARG italic_a end_ARG ) â‰ˆ italic_m italic_a italic_x start_POSTSUBSCRIPT italic_a âˆˆ italic_A end_POSTSUBSCRIPT italic_f ( italic_a )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
<p class="ltx_p" id="S1.p2.14">This baseline approach using simulator and finds <math alttext="\hat{a}" class="ltx_Math" display="inline" id="S1.p2.5.m1.1"><semantics id="S1.p2.5.m1.1a"><mover accent="true" id="S1.p2.5.m1.1.1" xref="S1.p2.5.m1.1.1.cmml"><mi id="S1.p2.5.m1.1.1.2" xref="S1.p2.5.m1.1.1.2.cmml">a</mi><mo id="S1.p2.5.m1.1.1.1" xref="S1.p2.5.m1.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S1.p2.5.m1.1b"><apply id="S1.p2.5.m1.1.1.cmml" xref="S1.p2.5.m1.1.1"><ci id="S1.p2.5.m1.1.1.1.cmml" xref="S1.p2.5.m1.1.1.1">^</ci><ci id="S1.p2.5.m1.1.1.2.cmml" xref="S1.p2.5.m1.1.1.2">ğ‘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.5.m1.1c">\hat{a}</annotation><annotation encoding="application/x-llamapun" id="S1.p2.5.m1.1d">over^ start_ARG italic_a end_ARG</annotation></semantics></math> by enumerating all <math alttext="a\in A" class="ltx_Math" display="inline" id="S1.p2.6.m2.1"><semantics id="S1.p2.6.m2.1a"><mrow id="S1.p2.6.m2.1.1" xref="S1.p2.6.m2.1.1.cmml"><mi id="S1.p2.6.m2.1.1.2" xref="S1.p2.6.m2.1.1.2.cmml">a</mi><mo id="S1.p2.6.m2.1.1.1" xref="S1.p2.6.m2.1.1.1.cmml">âˆˆ</mo><mi id="S1.p2.6.m2.1.1.3" xref="S1.p2.6.m2.1.1.3.cmml">A</mi></mrow><annotation-xml encoding="MathML-Content" id="S1.p2.6.m2.1b"><apply id="S1.p2.6.m2.1.1.cmml" xref="S1.p2.6.m2.1.1"><in id="S1.p2.6.m2.1.1.1.cmml" xref="S1.p2.6.m2.1.1.1"></in><ci id="S1.p2.6.m2.1.1.2.cmml" xref="S1.p2.6.m2.1.1.2">ğ‘</ci><ci id="S1.p2.6.m2.1.1.3.cmml" xref="S1.p2.6.m2.1.1.3">ğ´</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.6.m2.1c">a\in A</annotation><annotation encoding="application/x-llamapun" id="S1.p2.6.m2.1d">italic_a âˆˆ italic_A</annotation></semantics></math> (discretizing <math alttext="A" class="ltx_Math" display="inline" id="S1.p2.7.m3.1"><semantics id="S1.p2.7.m3.1a"><mi id="S1.p2.7.m3.1.1" xref="S1.p2.7.m3.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S1.p2.7.m3.1b"><ci id="S1.p2.7.m3.1.1.cmml" xref="S1.p2.7.m3.1.1">ğ´</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.7.m3.1c">A</annotation><annotation encoding="application/x-llamapun" id="S1.p2.7.m3.1d">italic_A</annotation></semantics></math> if the parameters are continuous).
For a complex system like for ads recommendation, <math alttext="f" class="ltx_Math" display="inline" id="S1.p2.8.m4.1"><semantics id="S1.p2.8.m4.1a"><mi id="S1.p2.8.m4.1.1" xref="S1.p2.8.m4.1.1.cmml">f</mi><annotation-xml encoding="MathML-Content" id="S1.p2.8.m4.1b"><ci id="S1.p2.8.m4.1.1.cmml" xref="S1.p2.8.m4.1.1">ğ‘“</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.8.m4.1c">f</annotation><annotation encoding="application/x-llamapun" id="S1.p2.8.m4.1d">italic_f</annotation></semantics></math> can be very expensive to evaluate.
Given <math alttext="N" class="ltx_Math" display="inline" id="S1.p2.9.m5.1"><semantics id="S1.p2.9.m5.1a"><mi id="S1.p2.9.m5.1.1" xref="S1.p2.9.m5.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S1.p2.9.m5.1b"><ci id="S1.p2.9.m5.1.1.cmml" xref="S1.p2.9.m5.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.9.m5.1c">N</annotation><annotation encoding="application/x-llamapun" id="S1.p2.9.m5.1d">italic_N</annotation></semantics></math> as number of sessions to be replayed (in order of Millions in case of large-scale systems), <math alttext="s" class="ltx_Math" display="inline" id="S1.p2.10.m6.1"><semantics id="S1.p2.10.m6.1a"><mi id="S1.p2.10.m6.1.1" xref="S1.p2.10.m6.1.1.cmml">s</mi><annotation-xml encoding="MathML-Content" id="S1.p2.10.m6.1b"><ci id="S1.p2.10.m6.1.1.cmml" xref="S1.p2.10.m6.1.1">ğ‘ </ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.10.m6.1c">s</annotation><annotation encoding="application/x-llamapun" id="S1.p2.10.m6.1d">italic_s</annotation></semantics></math> be the cost of replaying each session, and <math alttext="A" class="ltx_Math" display="inline" id="S1.p2.11.m7.1"><semantics id="S1.p2.11.m7.1a"><mi id="S1.p2.11.m7.1.1" xref="S1.p2.11.m7.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S1.p2.11.m7.1b"><ci id="S1.p2.11.m7.1.1.cmml" xref="S1.p2.11.m7.1.1">ğ´</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.11.m7.1c">A</annotation><annotation encoding="application/x-llamapun" id="S1.p2.11.m7.1d">italic_A</annotation></semantics></math> be the number of candidate parameters to be evaluated, the cost is <math alttext="O(ANs)" class="ltx_Math" display="inline" id="S1.p2.12.m8.1"><semantics id="S1.p2.12.m8.1a"><mrow id="S1.p2.12.m8.1.1" xref="S1.p2.12.m8.1.1.cmml"><mi id="S1.p2.12.m8.1.1.3" xref="S1.p2.12.m8.1.1.3.cmml">O</mi><mo id="S1.p2.12.m8.1.1.2" xref="S1.p2.12.m8.1.1.2.cmml">â¢</mo><mrow id="S1.p2.12.m8.1.1.1.1" xref="S1.p2.12.m8.1.1.1.1.1.cmml"><mo id="S1.p2.12.m8.1.1.1.1.2" stretchy="false" xref="S1.p2.12.m8.1.1.1.1.1.cmml">(</mo><mrow id="S1.p2.12.m8.1.1.1.1.1" xref="S1.p2.12.m8.1.1.1.1.1.cmml"><mi id="S1.p2.12.m8.1.1.1.1.1.2" xref="S1.p2.12.m8.1.1.1.1.1.2.cmml">A</mi><mo id="S1.p2.12.m8.1.1.1.1.1.1" xref="S1.p2.12.m8.1.1.1.1.1.1.cmml">â¢</mo><mi id="S1.p2.12.m8.1.1.1.1.1.3" xref="S1.p2.12.m8.1.1.1.1.1.3.cmml">N</mi><mo id="S1.p2.12.m8.1.1.1.1.1.1a" xref="S1.p2.12.m8.1.1.1.1.1.1.cmml">â¢</mo><mi id="S1.p2.12.m8.1.1.1.1.1.4" xref="S1.p2.12.m8.1.1.1.1.1.4.cmml">s</mi></mrow><mo id="S1.p2.12.m8.1.1.1.1.3" stretchy="false" xref="S1.p2.12.m8.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p2.12.m8.1b"><apply id="S1.p2.12.m8.1.1.cmml" xref="S1.p2.12.m8.1.1"><times id="S1.p2.12.m8.1.1.2.cmml" xref="S1.p2.12.m8.1.1.2"></times><ci id="S1.p2.12.m8.1.1.3.cmml" xref="S1.p2.12.m8.1.1.3">ğ‘‚</ci><apply id="S1.p2.12.m8.1.1.1.1.1.cmml" xref="S1.p2.12.m8.1.1.1.1"><times id="S1.p2.12.m8.1.1.1.1.1.1.cmml" xref="S1.p2.12.m8.1.1.1.1.1.1"></times><ci id="S1.p2.12.m8.1.1.1.1.1.2.cmml" xref="S1.p2.12.m8.1.1.1.1.1.2">ğ´</ci><ci id="S1.p2.12.m8.1.1.1.1.1.3.cmml" xref="S1.p2.12.m8.1.1.1.1.1.3">ğ‘</ci><ci id="S1.p2.12.m8.1.1.1.1.1.4.cmml" xref="S1.p2.12.m8.1.1.1.1.1.4">ğ‘ </ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.12.m8.1c">O(ANs)</annotation><annotation encoding="application/x-llamapun" id="S1.p2.12.m8.1d">italic_O ( italic_A italic_N italic_s )</annotation></semantics></math>.
Stochastic sampling can be used to reduce effective <math alttext="N" class="ltx_Math" display="inline" id="S1.p2.13.m9.1"><semantics id="S1.p2.13.m9.1a"><mi id="S1.p2.13.m9.1.1" xref="S1.p2.13.m9.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S1.p2.13.m9.1b"><ci id="S1.p2.13.m9.1.1.cmml" xref="S1.p2.13.m9.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.13.m9.1c">N</annotation><annotation encoding="application/x-llamapun" id="S1.p2.13.m9.1d">italic_N</annotation></semantics></math>, but when there are plenty of continuous parameters to tune, <math alttext="A" class="ltx_Math" display="inline" id="S1.p2.14.m10.1"><semantics id="S1.p2.14.m10.1a"><mi id="S1.p2.14.m10.1.1" xref="S1.p2.14.m10.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S1.p2.14.m10.1b"><ci id="S1.p2.14.m10.1.1.cmml" xref="S1.p2.14.m10.1.1">ğ´</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p2.14.m10.1c">A</annotation><annotation encoding="application/x-llamapun" id="S1.p2.14.m10.1d">italic_A</annotation></semantics></math> can be prohibitively large.</p>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.9"><span class="ltx_text ltx_font_italic" id="S1.p3.9.1">Importance sampling</span> (IS) is another popular approach which offers a cheap surrogate to evaluate many counterfactual parameters efficiently <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib2" title="">JMLR:v14:bottou13a, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib4" title="">gorurautomated, </a>)</cite>.
The idea is to randomize the parameters chosen for a subset of traffic, so as to capture the effects of changing the parameters.<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>Note that this is different from importance sampling to estimate a black-box function <math alttext="f(a)" class="ltx_Math" display="inline" id="footnote1.m1.1"><semantics id="footnote1.m1.1b"><mrow id="footnote1.m1.1.2" xref="footnote1.m1.1.2.cmml"><mi id="footnote1.m1.1.2.2" xref="footnote1.m1.1.2.2.cmml">f</mi><mo id="footnote1.m1.1.2.1" xref="footnote1.m1.1.2.1.cmml">â¢</mo><mrow id="footnote1.m1.1.2.3.2" xref="footnote1.m1.1.2.cmml"><mo id="footnote1.m1.1.2.3.2.1" stretchy="false" xref="footnote1.m1.1.2.cmml">(</mo><mi id="footnote1.m1.1.1" xref="footnote1.m1.1.1.cmml">a</mi><mo id="footnote1.m1.1.2.3.2.2" stretchy="false" xref="footnote1.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="footnote1.m1.1c"><apply id="footnote1.m1.1.2.cmml" xref="footnote1.m1.1.2"><times id="footnote1.m1.1.2.1.cmml" xref="footnote1.m1.1.2.1"></times><ci id="footnote1.m1.1.2.2.cmml" xref="footnote1.m1.1.2.2">ğ‘“</ci><ci id="footnote1.m1.1.1.cmml" xref="footnote1.m1.1.1">ğ‘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="footnote1.m1.1d">f(a)</annotation><annotation encoding="application/x-llamapun" id="footnote1.m1.1e">italic_f ( italic_a )</annotation></semantics></math>. Specifically, since <math alttext="f(a)=\frac{1}{N}\sum_{i}f(a\mid x_{i})" class="ltx_Math" display="inline" id="footnote1.m2.2"><semantics id="footnote1.m2.2b"><mrow id="footnote1.m2.2.2" xref="footnote1.m2.2.2.cmml"><mrow id="footnote1.m2.2.2.3" xref="footnote1.m2.2.2.3.cmml"><mi id="footnote1.m2.2.2.3.2" xref="footnote1.m2.2.2.3.2.cmml">f</mi><mo id="footnote1.m2.2.2.3.1" xref="footnote1.m2.2.2.3.1.cmml">â¢</mo><mrow id="footnote1.m2.2.2.3.3.2" xref="footnote1.m2.2.2.3.cmml"><mo id="footnote1.m2.2.2.3.3.2.1" stretchy="false" xref="footnote1.m2.2.2.3.cmml">(</mo><mi id="footnote1.m2.1.1" xref="footnote1.m2.1.1.cmml">a</mi><mo id="footnote1.m2.2.2.3.3.2.2" stretchy="false" xref="footnote1.m2.2.2.3.cmml">)</mo></mrow></mrow><mo id="footnote1.m2.2.2.2" xref="footnote1.m2.2.2.2.cmml">=</mo><mrow id="footnote1.m2.2.2.1" xref="footnote1.m2.2.2.1.cmml"><mfrac id="footnote1.m2.2.2.1.3" xref="footnote1.m2.2.2.1.3.cmml"><mn id="footnote1.m2.2.2.1.3.2" xref="footnote1.m2.2.2.1.3.2.cmml">1</mn><mi id="footnote1.m2.2.2.1.3.3" xref="footnote1.m2.2.2.1.3.3.cmml">N</mi></mfrac><mo id="footnote1.m2.2.2.1.2" xref="footnote1.m2.2.2.1.2.cmml">â¢</mo><mrow id="footnote1.m2.2.2.1.1" xref="footnote1.m2.2.2.1.1.cmml"><msub id="footnote1.m2.2.2.1.1.2" xref="footnote1.m2.2.2.1.1.2.cmml"><mo id="footnote1.m2.2.2.1.1.2.2" xref="footnote1.m2.2.2.1.1.2.2.cmml">âˆ‘</mo><mi id="footnote1.m2.2.2.1.1.2.3" xref="footnote1.m2.2.2.1.1.2.3.cmml">i</mi></msub><mrow id="footnote1.m2.2.2.1.1.1" xref="footnote1.m2.2.2.1.1.1.cmml"><mi id="footnote1.m2.2.2.1.1.1.3" xref="footnote1.m2.2.2.1.1.1.3.cmml">f</mi><mo id="footnote1.m2.2.2.1.1.1.2" xref="footnote1.m2.2.2.1.1.1.2.cmml">â¢</mo><mrow id="footnote1.m2.2.2.1.1.1.1.1" xref="footnote1.m2.2.2.1.1.1.1.1.1.cmml"><mo id="footnote1.m2.2.2.1.1.1.1.1.2" stretchy="false" xref="footnote1.m2.2.2.1.1.1.1.1.1.cmml">(</mo><mrow id="footnote1.m2.2.2.1.1.1.1.1.1" xref="footnote1.m2.2.2.1.1.1.1.1.1.cmml"><mi id="footnote1.m2.2.2.1.1.1.1.1.1.2" xref="footnote1.m2.2.2.1.1.1.1.1.1.2.cmml">a</mi><mo id="footnote1.m2.2.2.1.1.1.1.1.1.1" xref="footnote1.m2.2.2.1.1.1.1.1.1.1.cmml">âˆ£</mo><msub id="footnote1.m2.2.2.1.1.1.1.1.1.3" xref="footnote1.m2.2.2.1.1.1.1.1.1.3.cmml"><mi id="footnote1.m2.2.2.1.1.1.1.1.1.3.2" xref="footnote1.m2.2.2.1.1.1.1.1.1.3.2.cmml">x</mi><mi id="footnote1.m2.2.2.1.1.1.1.1.1.3.3" xref="footnote1.m2.2.2.1.1.1.1.1.1.3.3.cmml">i</mi></msub></mrow><mo id="footnote1.m2.2.2.1.1.1.1.1.3" stretchy="false" xref="footnote1.m2.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="footnote1.m2.2c"><apply id="footnote1.m2.2.2.cmml" xref="footnote1.m2.2.2"><eq id="footnote1.m2.2.2.2.cmml" xref="footnote1.m2.2.2.2"></eq><apply id="footnote1.m2.2.2.3.cmml" xref="footnote1.m2.2.2.3"><times id="footnote1.m2.2.2.3.1.cmml" xref="footnote1.m2.2.2.3.1"></times><ci id="footnote1.m2.2.2.3.2.cmml" xref="footnote1.m2.2.2.3.2">ğ‘“</ci><ci id="footnote1.m2.1.1.cmml" xref="footnote1.m2.1.1">ğ‘</ci></apply><apply id="footnote1.m2.2.2.1.cmml" xref="footnote1.m2.2.2.1"><times id="footnote1.m2.2.2.1.2.cmml" xref="footnote1.m2.2.2.1.2"></times><apply id="footnote1.m2.2.2.1.3.cmml" xref="footnote1.m2.2.2.1.3"><divide id="footnote1.m2.2.2.1.3.1.cmml" xref="footnote1.m2.2.2.1.3"></divide><cn id="footnote1.m2.2.2.1.3.2.cmml" type="integer" xref="footnote1.m2.2.2.1.3.2">1</cn><ci id="footnote1.m2.2.2.1.3.3.cmml" xref="footnote1.m2.2.2.1.3.3">ğ‘</ci></apply><apply id="footnote1.m2.2.2.1.1.cmml" xref="footnote1.m2.2.2.1.1"><apply id="footnote1.m2.2.2.1.1.2.cmml" xref="footnote1.m2.2.2.1.1.2"><csymbol cd="ambiguous" id="footnote1.m2.2.2.1.1.2.1.cmml" xref="footnote1.m2.2.2.1.1.2">subscript</csymbol><sum id="footnote1.m2.2.2.1.1.2.2.cmml" xref="footnote1.m2.2.2.1.1.2.2"></sum><ci id="footnote1.m2.2.2.1.1.2.3.cmml" xref="footnote1.m2.2.2.1.1.2.3">ğ‘–</ci></apply><apply id="footnote1.m2.2.2.1.1.1.cmml" xref="footnote1.m2.2.2.1.1.1"><times id="footnote1.m2.2.2.1.1.1.2.cmml" xref="footnote1.m2.2.2.1.1.1.2"></times><ci id="footnote1.m2.2.2.1.1.1.3.cmml" xref="footnote1.m2.2.2.1.1.1.3">ğ‘“</ci><apply id="footnote1.m2.2.2.1.1.1.1.1.1.cmml" xref="footnote1.m2.2.2.1.1.1.1.1"><csymbol cd="latexml" id="footnote1.m2.2.2.1.1.1.1.1.1.1.cmml" xref="footnote1.m2.2.2.1.1.1.1.1.1.1">conditional</csymbol><ci id="footnote1.m2.2.2.1.1.1.1.1.1.2.cmml" xref="footnote1.m2.2.2.1.1.1.1.1.1.2">ğ‘</ci><apply id="footnote1.m2.2.2.1.1.1.1.1.1.3.cmml" xref="footnote1.m2.2.2.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="footnote1.m2.2.2.1.1.1.1.1.1.3.1.cmml" xref="footnote1.m2.2.2.1.1.1.1.1.1.3">subscript</csymbol><ci id="footnote1.m2.2.2.1.1.1.1.1.1.3.2.cmml" xref="footnote1.m2.2.2.1.1.1.1.1.1.3.2">ğ‘¥</ci><ci id="footnote1.m2.2.2.1.1.1.1.1.1.3.3.cmml" xref="footnote1.m2.2.2.1.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="footnote1.m2.2d">f(a)=\frac{1}{N}\sum_{i}f(a\mid x_{i})</annotation><annotation encoding="application/x-llamapun" id="footnote1.m2.2e">italic_f ( italic_a ) = divide start_ARG 1 end_ARG start_ARG italic_N end_ARG âˆ‘ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT italic_f ( italic_a âˆ£ italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math> averages over user sessions <math alttext="x_{i}" class="ltx_Math" display="inline" id="footnote1.m3.1"><semantics id="footnote1.m3.1b"><msub id="footnote1.m3.1.1" xref="footnote1.m3.1.1.cmml"><mi id="footnote1.m3.1.1.2" xref="footnote1.m3.1.1.2.cmml">x</mi><mi id="footnote1.m3.1.1.3" xref="footnote1.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="footnote1.m3.1c"><apply id="footnote1.m3.1.1.cmml" xref="footnote1.m3.1.1"><csymbol cd="ambiguous" id="footnote1.m3.1.1.1.cmml" xref="footnote1.m3.1.1">subscript</csymbol><ci id="footnote1.m3.1.1.2.cmml" xref="footnote1.m3.1.1.2">ğ‘¥</ci><ci id="footnote1.m3.1.1.3.cmml" xref="footnote1.m3.1.1.3">ğ‘–</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="footnote1.m3.1d">x_{i}</annotation><annotation encoding="application/x-llamapun" id="footnote1.m3.1e">italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, we can importance sample using sessions, rather than treat <math alttext="f(a):a\sim A" class="ltx_Math" display="inline" id="footnote1.m4.1"><semantics id="footnote1.m4.1b"><mrow id="footnote1.m4.1.2" xref="footnote1.m4.1.2.cmml"><mrow id="footnote1.m4.1.2.2" xref="footnote1.m4.1.2.2.cmml"><mi id="footnote1.m4.1.2.2.2" xref="footnote1.m4.1.2.2.2.cmml">f</mi><mo id="footnote1.m4.1.2.2.1" xref="footnote1.m4.1.2.2.1.cmml">â¢</mo><mrow id="footnote1.m4.1.2.2.3.2" xref="footnote1.m4.1.2.2.cmml"><mo id="footnote1.m4.1.2.2.3.2.1" stretchy="false" xref="footnote1.m4.1.2.2.cmml">(</mo><mi id="footnote1.m4.1.1" xref="footnote1.m4.1.1.cmml">a</mi><mo id="footnote1.m4.1.2.2.3.2.2" rspace="0.278em" stretchy="false" xref="footnote1.m4.1.2.2.cmml">)</mo></mrow></mrow><mo id="footnote1.m4.1.2.1" rspace="0.278em" xref="footnote1.m4.1.2.1.cmml">:</mo><mrow id="footnote1.m4.1.2.3" xref="footnote1.m4.1.2.3.cmml"><mi id="footnote1.m4.1.2.3.2" xref="footnote1.m4.1.2.3.2.cmml">a</mi><mo id="footnote1.m4.1.2.3.1" xref="footnote1.m4.1.2.3.1.cmml">âˆ¼</mo><mi id="footnote1.m4.1.2.3.3" xref="footnote1.m4.1.2.3.3.cmml">A</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="footnote1.m4.1c"><apply id="footnote1.m4.1.2.cmml" xref="footnote1.m4.1.2"><ci id="footnote1.m4.1.2.1.cmml" xref="footnote1.m4.1.2.1">:</ci><apply id="footnote1.m4.1.2.2.cmml" xref="footnote1.m4.1.2.2"><times id="footnote1.m4.1.2.2.1.cmml" xref="footnote1.m4.1.2.2.1"></times><ci id="footnote1.m4.1.2.2.2.cmml" xref="footnote1.m4.1.2.2.2">ğ‘“</ci><ci id="footnote1.m4.1.1.cmml" xref="footnote1.m4.1.1">ğ‘</ci></apply><apply id="footnote1.m4.1.2.3.cmml" xref="footnote1.m4.1.2.3"><csymbol cd="latexml" id="footnote1.m4.1.2.3.1.cmml" xref="footnote1.m4.1.2.3.1">similar-to</csymbol><ci id="footnote1.m4.1.2.3.2.cmml" xref="footnote1.m4.1.2.3.2">ğ‘</ci><ci id="footnote1.m4.1.2.3.3.cmml" xref="footnote1.m4.1.2.3.3">ğ´</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="footnote1.m4.1d">f(a):a\sim A</annotation><annotation encoding="application/x-llamapun" id="footnote1.m4.1e">italic_f ( italic_a ) : italic_a âˆ¼ italic_A</annotation></semantics></math> as a sample.</span></span></span>
Let <math alttext="a_{0}" class="ltx_Math" display="inline" id="S1.p3.1.m1.1"><semantics id="S1.p3.1.m1.1a"><msub id="S1.p3.1.m1.1.1" xref="S1.p3.1.m1.1.1.cmml"><mi id="S1.p3.1.m1.1.1.2" xref="S1.p3.1.m1.1.1.2.cmml">a</mi><mn id="S1.p3.1.m1.1.1.3" xref="S1.p3.1.m1.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S1.p3.1.m1.1b"><apply id="S1.p3.1.m1.1.1.cmml" xref="S1.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S1.p3.1.m1.1.1.1.cmml" xref="S1.p3.1.m1.1.1">subscript</csymbol><ci id="S1.p3.1.m1.1.1.2.cmml" xref="S1.p3.1.m1.1.1.2">ğ‘</ci><cn id="S1.p3.1.m1.1.1.3.cmml" type="integer" xref="S1.p3.1.m1.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.1.m1.1c">a_{0}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.1.m1.1d">italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> be an initial parameter, and <math alttext="q" class="ltx_Math" display="inline" id="S1.p3.2.m2.1"><semantics id="S1.p3.2.m2.1a"><mi id="S1.p3.2.m2.1.1" xref="S1.p3.2.m2.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S1.p3.2.m2.1b"><ci id="S1.p3.2.m2.1.1.cmml" xref="S1.p3.2.m2.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.2.m2.1c">q</annotation><annotation encoding="application/x-llamapun" id="S1.p3.2.m2.1d">italic_q</annotation></semantics></math> be a distribution imposed to randomize around <math alttext="a_{0}" class="ltx_Math" display="inline" id="S1.p3.3.m3.1"><semantics id="S1.p3.3.m3.1a"><msub id="S1.p3.3.m3.1.1" xref="S1.p3.3.m3.1.1.cmml"><mi id="S1.p3.3.m3.1.1.2" xref="S1.p3.3.m3.1.1.2.cmml">a</mi><mn id="S1.p3.3.m3.1.1.3" xref="S1.p3.3.m3.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S1.p3.3.m3.1b"><apply id="S1.p3.3.m3.1.1.cmml" xref="S1.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S1.p3.3.m3.1.1.1.cmml" xref="S1.p3.3.m3.1.1">subscript</csymbol><ci id="S1.p3.3.m3.1.1.2.cmml" xref="S1.p3.3.m3.1.1.2">ğ‘</ci><cn id="S1.p3.3.m3.1.1.3.cmml" type="integer" xref="S1.p3.3.m3.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.3.m3.1c">a_{0}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.3.m3.1d">italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> (e.g. Gaussian), i.e. <math alttext="a\sim q(a_{0})" class="ltx_Math" display="inline" id="S1.p3.4.m4.1"><semantics id="S1.p3.4.m4.1a"><mrow id="S1.p3.4.m4.1.1" xref="S1.p3.4.m4.1.1.cmml"><mi id="S1.p3.4.m4.1.1.3" xref="S1.p3.4.m4.1.1.3.cmml">a</mi><mo id="S1.p3.4.m4.1.1.2" xref="S1.p3.4.m4.1.1.2.cmml">âˆ¼</mo><mrow id="S1.p3.4.m4.1.1.1" xref="S1.p3.4.m4.1.1.1.cmml"><mi id="S1.p3.4.m4.1.1.1.3" xref="S1.p3.4.m4.1.1.1.3.cmml">q</mi><mo id="S1.p3.4.m4.1.1.1.2" xref="S1.p3.4.m4.1.1.1.2.cmml">â¢</mo><mrow id="S1.p3.4.m4.1.1.1.1.1" xref="S1.p3.4.m4.1.1.1.1.1.1.cmml"><mo id="S1.p3.4.m4.1.1.1.1.1.2" stretchy="false" xref="S1.p3.4.m4.1.1.1.1.1.1.cmml">(</mo><msub id="S1.p3.4.m4.1.1.1.1.1.1" xref="S1.p3.4.m4.1.1.1.1.1.1.cmml"><mi id="S1.p3.4.m4.1.1.1.1.1.1.2" xref="S1.p3.4.m4.1.1.1.1.1.1.2.cmml">a</mi><mn id="S1.p3.4.m4.1.1.1.1.1.1.3" xref="S1.p3.4.m4.1.1.1.1.1.1.3.cmml">0</mn></msub><mo id="S1.p3.4.m4.1.1.1.1.1.3" stretchy="false" xref="S1.p3.4.m4.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p3.4.m4.1b"><apply id="S1.p3.4.m4.1.1.cmml" xref="S1.p3.4.m4.1.1"><csymbol cd="latexml" id="S1.p3.4.m4.1.1.2.cmml" xref="S1.p3.4.m4.1.1.2">similar-to</csymbol><ci id="S1.p3.4.m4.1.1.3.cmml" xref="S1.p3.4.m4.1.1.3">ğ‘</ci><apply id="S1.p3.4.m4.1.1.1.cmml" xref="S1.p3.4.m4.1.1.1"><times id="S1.p3.4.m4.1.1.1.2.cmml" xref="S1.p3.4.m4.1.1.1.2"></times><ci id="S1.p3.4.m4.1.1.1.3.cmml" xref="S1.p3.4.m4.1.1.1.3">ğ‘</ci><apply id="S1.p3.4.m4.1.1.1.1.1.1.cmml" xref="S1.p3.4.m4.1.1.1.1.1"><csymbol cd="ambiguous" id="S1.p3.4.m4.1.1.1.1.1.1.1.cmml" xref="S1.p3.4.m4.1.1.1.1.1">subscript</csymbol><ci id="S1.p3.4.m4.1.1.1.1.1.1.2.cmml" xref="S1.p3.4.m4.1.1.1.1.1.1.2">ğ‘</ci><cn id="S1.p3.4.m4.1.1.1.1.1.1.3.cmml" type="integer" xref="S1.p3.4.m4.1.1.1.1.1.1.3">0</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.4.m4.1c">a\sim q(a_{0})</annotation><annotation encoding="application/x-llamapun" id="S1.p3.4.m4.1d">italic_a âˆ¼ italic_q ( italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT )</annotation></semantics></math>. Importance sampling returns an unbiased surrogate <math alttext="\hat{f}(a^{\prime})=\frac{1}{N}\sum_{i}f(a_{i}\mid x_{i})\frac{q(a_{i}\mid a^{%
\prime})}{q(a_{i}\mid a_{0})}" class="ltx_Math" display="inline" id="S1.p3.5.m5.4"><semantics id="S1.p3.5.m5.4a"><mrow id="S1.p3.5.m5.4.4" xref="S1.p3.5.m5.4.4.cmml"><mrow id="S1.p3.5.m5.3.3.1" xref="S1.p3.5.m5.3.3.1.cmml"><mover accent="true" id="S1.p3.5.m5.3.3.1.3" xref="S1.p3.5.m5.3.3.1.3.cmml"><mi id="S1.p3.5.m5.3.3.1.3.2" xref="S1.p3.5.m5.3.3.1.3.2.cmml">f</mi><mo id="S1.p3.5.m5.3.3.1.3.1" xref="S1.p3.5.m5.3.3.1.3.1.cmml">^</mo></mover><mo id="S1.p3.5.m5.3.3.1.2" xref="S1.p3.5.m5.3.3.1.2.cmml">â¢</mo><mrow id="S1.p3.5.m5.3.3.1.1.1" xref="S1.p3.5.m5.3.3.1.1.1.1.cmml"><mo id="S1.p3.5.m5.3.3.1.1.1.2" stretchy="false" xref="S1.p3.5.m5.3.3.1.1.1.1.cmml">(</mo><msup id="S1.p3.5.m5.3.3.1.1.1.1" xref="S1.p3.5.m5.3.3.1.1.1.1.cmml"><mi id="S1.p3.5.m5.3.3.1.1.1.1.2" xref="S1.p3.5.m5.3.3.1.1.1.1.2.cmml">a</mi><mo id="S1.p3.5.m5.3.3.1.1.1.1.3" xref="S1.p3.5.m5.3.3.1.1.1.1.3.cmml">â€²</mo></msup><mo id="S1.p3.5.m5.3.3.1.1.1.3" stretchy="false" xref="S1.p3.5.m5.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S1.p3.5.m5.4.4.3" xref="S1.p3.5.m5.4.4.3.cmml">=</mo><mrow id="S1.p3.5.m5.4.4.2" xref="S1.p3.5.m5.4.4.2.cmml"><mfrac id="S1.p3.5.m5.4.4.2.3" xref="S1.p3.5.m5.4.4.2.3.cmml"><mn id="S1.p3.5.m5.4.4.2.3.2" xref="S1.p3.5.m5.4.4.2.3.2.cmml">1</mn><mi id="S1.p3.5.m5.4.4.2.3.3" xref="S1.p3.5.m5.4.4.2.3.3.cmml">N</mi></mfrac><mo id="S1.p3.5.m5.4.4.2.2" xref="S1.p3.5.m5.4.4.2.2.cmml">â¢</mo><mrow id="S1.p3.5.m5.4.4.2.1" xref="S1.p3.5.m5.4.4.2.1.cmml"><msub id="S1.p3.5.m5.4.4.2.1.2" xref="S1.p3.5.m5.4.4.2.1.2.cmml"><mo id="S1.p3.5.m5.4.4.2.1.2.2" xref="S1.p3.5.m5.4.4.2.1.2.2.cmml">âˆ‘</mo><mi id="S1.p3.5.m5.4.4.2.1.2.3" xref="S1.p3.5.m5.4.4.2.1.2.3.cmml">i</mi></msub><mrow id="S1.p3.5.m5.4.4.2.1.1" xref="S1.p3.5.m5.4.4.2.1.1.cmml"><mi id="S1.p3.5.m5.4.4.2.1.1.3" xref="S1.p3.5.m5.4.4.2.1.1.3.cmml">f</mi><mo id="S1.p3.5.m5.4.4.2.1.1.2" xref="S1.p3.5.m5.4.4.2.1.1.2.cmml">â¢</mo><mrow id="S1.p3.5.m5.4.4.2.1.1.1.1" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.cmml"><mo id="S1.p3.5.m5.4.4.2.1.1.1.1.2" stretchy="false" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.cmml">(</mo><mrow id="S1.p3.5.m5.4.4.2.1.1.1.1.1" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.cmml"><msub id="S1.p3.5.m5.4.4.2.1.1.1.1.1.2" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.cmml"><mi id="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.2" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.2.cmml">a</mi><mi id="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.3" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.3.cmml">i</mi></msub><mo id="S1.p3.5.m5.4.4.2.1.1.1.1.1.1" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.1.cmml">âˆ£</mo><msub id="S1.p3.5.m5.4.4.2.1.1.1.1.1.3" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.cmml"><mi id="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.2" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.2.cmml">x</mi><mi id="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.3" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.3.cmml">i</mi></msub></mrow><mo id="S1.p3.5.m5.4.4.2.1.1.1.1.3" stretchy="false" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.cmml">)</mo></mrow><mo id="S1.p3.5.m5.4.4.2.1.1.2a" xref="S1.p3.5.m5.4.4.2.1.1.2.cmml">â¢</mo><mfrac id="S1.p3.5.m5.2.2" xref="S1.p3.5.m5.2.2.cmml"><mrow id="S1.p3.5.m5.1.1.1" xref="S1.p3.5.m5.1.1.1.cmml"><mi id="S1.p3.5.m5.1.1.1.3" xref="S1.p3.5.m5.1.1.1.3.cmml">q</mi><mo id="S1.p3.5.m5.1.1.1.2" xref="S1.p3.5.m5.1.1.1.2.cmml">â¢</mo><mrow id="S1.p3.5.m5.1.1.1.1.1" xref="S1.p3.5.m5.1.1.1.1.1.1.cmml"><mo id="S1.p3.5.m5.1.1.1.1.1.2" stretchy="false" xref="S1.p3.5.m5.1.1.1.1.1.1.cmml">(</mo><mrow id="S1.p3.5.m5.1.1.1.1.1.1" xref="S1.p3.5.m5.1.1.1.1.1.1.cmml"><msub id="S1.p3.5.m5.1.1.1.1.1.1.2" xref="S1.p3.5.m5.1.1.1.1.1.1.2.cmml"><mi id="S1.p3.5.m5.1.1.1.1.1.1.2.2" xref="S1.p3.5.m5.1.1.1.1.1.1.2.2.cmml">a</mi><mi id="S1.p3.5.m5.1.1.1.1.1.1.2.3" xref="S1.p3.5.m5.1.1.1.1.1.1.2.3.cmml">i</mi></msub><mo id="S1.p3.5.m5.1.1.1.1.1.1.1" xref="S1.p3.5.m5.1.1.1.1.1.1.1.cmml">âˆ£</mo><msup id="S1.p3.5.m5.1.1.1.1.1.1.3" xref="S1.p3.5.m5.1.1.1.1.1.1.3.cmml"><mi id="S1.p3.5.m5.1.1.1.1.1.1.3.2" xref="S1.p3.5.m5.1.1.1.1.1.1.3.2.cmml">a</mi><mo id="S1.p3.5.m5.1.1.1.1.1.1.3.3" xref="S1.p3.5.m5.1.1.1.1.1.1.3.3.cmml">â€²</mo></msup></mrow><mo id="S1.p3.5.m5.1.1.1.1.1.3" stretchy="false" xref="S1.p3.5.m5.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="S1.p3.5.m5.2.2.2" xref="S1.p3.5.m5.2.2.2.cmml"><mi id="S1.p3.5.m5.2.2.2.3" xref="S1.p3.5.m5.2.2.2.3.cmml">q</mi><mo id="S1.p3.5.m5.2.2.2.2" xref="S1.p3.5.m5.2.2.2.2.cmml">â¢</mo><mrow id="S1.p3.5.m5.2.2.2.1.1" xref="S1.p3.5.m5.2.2.2.1.1.1.cmml"><mo id="S1.p3.5.m5.2.2.2.1.1.2" stretchy="false" xref="S1.p3.5.m5.2.2.2.1.1.1.cmml">(</mo><mrow id="S1.p3.5.m5.2.2.2.1.1.1" xref="S1.p3.5.m5.2.2.2.1.1.1.cmml"><msub id="S1.p3.5.m5.2.2.2.1.1.1.2" xref="S1.p3.5.m5.2.2.2.1.1.1.2.cmml"><mi id="S1.p3.5.m5.2.2.2.1.1.1.2.2" xref="S1.p3.5.m5.2.2.2.1.1.1.2.2.cmml">a</mi><mi id="S1.p3.5.m5.2.2.2.1.1.1.2.3" xref="S1.p3.5.m5.2.2.2.1.1.1.2.3.cmml">i</mi></msub><mo id="S1.p3.5.m5.2.2.2.1.1.1.1" xref="S1.p3.5.m5.2.2.2.1.1.1.1.cmml">âˆ£</mo><msub id="S1.p3.5.m5.2.2.2.1.1.1.3" xref="S1.p3.5.m5.2.2.2.1.1.1.3.cmml"><mi id="S1.p3.5.m5.2.2.2.1.1.1.3.2" xref="S1.p3.5.m5.2.2.2.1.1.1.3.2.cmml">a</mi><mn id="S1.p3.5.m5.2.2.2.1.1.1.3.3" xref="S1.p3.5.m5.2.2.2.1.1.1.3.3.cmml">0</mn></msub></mrow><mo id="S1.p3.5.m5.2.2.2.1.1.3" stretchy="false" xref="S1.p3.5.m5.2.2.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p3.5.m5.4b"><apply id="S1.p3.5.m5.4.4.cmml" xref="S1.p3.5.m5.4.4"><eq id="S1.p3.5.m5.4.4.3.cmml" xref="S1.p3.5.m5.4.4.3"></eq><apply id="S1.p3.5.m5.3.3.1.cmml" xref="S1.p3.5.m5.3.3.1"><times id="S1.p3.5.m5.3.3.1.2.cmml" xref="S1.p3.5.m5.3.3.1.2"></times><apply id="S1.p3.5.m5.3.3.1.3.cmml" xref="S1.p3.5.m5.3.3.1.3"><ci id="S1.p3.5.m5.3.3.1.3.1.cmml" xref="S1.p3.5.m5.3.3.1.3.1">^</ci><ci id="S1.p3.5.m5.3.3.1.3.2.cmml" xref="S1.p3.5.m5.3.3.1.3.2">ğ‘“</ci></apply><apply id="S1.p3.5.m5.3.3.1.1.1.1.cmml" xref="S1.p3.5.m5.3.3.1.1.1"><csymbol cd="ambiguous" id="S1.p3.5.m5.3.3.1.1.1.1.1.cmml" xref="S1.p3.5.m5.3.3.1.1.1">superscript</csymbol><ci id="S1.p3.5.m5.3.3.1.1.1.1.2.cmml" xref="S1.p3.5.m5.3.3.1.1.1.1.2">ğ‘</ci><ci id="S1.p3.5.m5.3.3.1.1.1.1.3.cmml" xref="S1.p3.5.m5.3.3.1.1.1.1.3">â€²</ci></apply></apply><apply id="S1.p3.5.m5.4.4.2.cmml" xref="S1.p3.5.m5.4.4.2"><times id="S1.p3.5.m5.4.4.2.2.cmml" xref="S1.p3.5.m5.4.4.2.2"></times><apply id="S1.p3.5.m5.4.4.2.3.cmml" xref="S1.p3.5.m5.4.4.2.3"><divide id="S1.p3.5.m5.4.4.2.3.1.cmml" xref="S1.p3.5.m5.4.4.2.3"></divide><cn id="S1.p3.5.m5.4.4.2.3.2.cmml" type="integer" xref="S1.p3.5.m5.4.4.2.3.2">1</cn><ci id="S1.p3.5.m5.4.4.2.3.3.cmml" xref="S1.p3.5.m5.4.4.2.3.3">ğ‘</ci></apply><apply id="S1.p3.5.m5.4.4.2.1.cmml" xref="S1.p3.5.m5.4.4.2.1"><apply id="S1.p3.5.m5.4.4.2.1.2.cmml" xref="S1.p3.5.m5.4.4.2.1.2"><csymbol cd="ambiguous" id="S1.p3.5.m5.4.4.2.1.2.1.cmml" xref="S1.p3.5.m5.4.4.2.1.2">subscript</csymbol><sum id="S1.p3.5.m5.4.4.2.1.2.2.cmml" xref="S1.p3.5.m5.4.4.2.1.2.2"></sum><ci id="S1.p3.5.m5.4.4.2.1.2.3.cmml" xref="S1.p3.5.m5.4.4.2.1.2.3">ğ‘–</ci></apply><apply id="S1.p3.5.m5.4.4.2.1.1.cmml" xref="S1.p3.5.m5.4.4.2.1.1"><times id="S1.p3.5.m5.4.4.2.1.1.2.cmml" xref="S1.p3.5.m5.4.4.2.1.1.2"></times><ci id="S1.p3.5.m5.4.4.2.1.1.3.cmml" xref="S1.p3.5.m5.4.4.2.1.1.3">ğ‘“</ci><apply id="S1.p3.5.m5.4.4.2.1.1.1.1.1.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1"><csymbol cd="latexml" id="S1.p3.5.m5.4.4.2.1.1.1.1.1.1.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.1">conditional</csymbol><apply id="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.1.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.2">subscript</csymbol><ci id="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.2.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.2">ğ‘</ci><ci id="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.3.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.2.3">ğ‘–</ci></apply><apply id="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.1.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.3">subscript</csymbol><ci id="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.2.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.2">ğ‘¥</ci><ci id="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.3.cmml" xref="S1.p3.5.m5.4.4.2.1.1.1.1.1.3.3">ğ‘–</ci></apply></apply><apply id="S1.p3.5.m5.2.2.cmml" xref="S1.p3.5.m5.2.2"><divide id="S1.p3.5.m5.2.2.3.cmml" xref="S1.p3.5.m5.2.2"></divide><apply id="S1.p3.5.m5.1.1.1.cmml" xref="S1.p3.5.m5.1.1.1"><times id="S1.p3.5.m5.1.1.1.2.cmml" xref="S1.p3.5.m5.1.1.1.2"></times><ci id="S1.p3.5.m5.1.1.1.3.cmml" xref="S1.p3.5.m5.1.1.1.3">ğ‘</ci><apply id="S1.p3.5.m5.1.1.1.1.1.1.cmml" xref="S1.p3.5.m5.1.1.1.1.1"><csymbol cd="latexml" id="S1.p3.5.m5.1.1.1.1.1.1.1.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.1">conditional</csymbol><apply id="S1.p3.5.m5.1.1.1.1.1.1.2.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S1.p3.5.m5.1.1.1.1.1.1.2.1.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.2">subscript</csymbol><ci id="S1.p3.5.m5.1.1.1.1.1.1.2.2.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.2.2">ğ‘</ci><ci id="S1.p3.5.m5.1.1.1.1.1.1.2.3.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.2.3">ğ‘–</ci></apply><apply id="S1.p3.5.m5.1.1.1.1.1.1.3.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S1.p3.5.m5.1.1.1.1.1.1.3.1.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.3">superscript</csymbol><ci id="S1.p3.5.m5.1.1.1.1.1.1.3.2.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.3.2">ğ‘</ci><ci id="S1.p3.5.m5.1.1.1.1.1.1.3.3.cmml" xref="S1.p3.5.m5.1.1.1.1.1.1.3.3">â€²</ci></apply></apply></apply><apply id="S1.p3.5.m5.2.2.2.cmml" xref="S1.p3.5.m5.2.2.2"><times id="S1.p3.5.m5.2.2.2.2.cmml" xref="S1.p3.5.m5.2.2.2.2"></times><ci id="S1.p3.5.m5.2.2.2.3.cmml" xref="S1.p3.5.m5.2.2.2.3">ğ‘</ci><apply id="S1.p3.5.m5.2.2.2.1.1.1.cmml" xref="S1.p3.5.m5.2.2.2.1.1"><csymbol cd="latexml" id="S1.p3.5.m5.2.2.2.1.1.1.1.cmml" xref="S1.p3.5.m5.2.2.2.1.1.1.1">conditional</csymbol><apply id="S1.p3.5.m5.2.2.2.1.1.1.2.cmml" xref="S1.p3.5.m5.2.2.2.1.1.1.2"><csymbol cd="ambiguous" id="S1.p3.5.m5.2.2.2.1.1.1.2.1.cmml" xref="S1.p3.5.m5.2.2.2.1.1.1.2">subscript</csymbol><ci id="S1.p3.5.m5.2.2.2.1.1.1.2.2.cmml" xref="S1.p3.5.m5.2.2.2.1.1.1.2.2">ğ‘</ci><ci id="S1.p3.5.m5.2.2.2.1.1.1.2.3.cmml" xref="S1.p3.5.m5.2.2.2.1.1.1.2.3">ğ‘–</ci></apply><apply id="S1.p3.5.m5.2.2.2.1.1.1.3.cmml" xref="S1.p3.5.m5.2.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S1.p3.5.m5.2.2.2.1.1.1.3.1.cmml" xref="S1.p3.5.m5.2.2.2.1.1.1.3">subscript</csymbol><ci id="S1.p3.5.m5.2.2.2.1.1.1.3.2.cmml" xref="S1.p3.5.m5.2.2.2.1.1.1.3.2">ğ‘</ci><cn id="S1.p3.5.m5.2.2.2.1.1.1.3.3.cmml" type="integer" xref="S1.p3.5.m5.2.2.2.1.1.1.3.3">0</cn></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.5.m5.4c">\hat{f}(a^{\prime})=\frac{1}{N}\sum_{i}f(a_{i}\mid x_{i})\frac{q(a_{i}\mid a^{%
\prime})}{q(a_{i}\mid a_{0})}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.5.m5.4d">over^ start_ARG italic_f end_ARG ( italic_a start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT ) = divide start_ARG 1 end_ARG start_ARG italic_N end_ARG âˆ‘ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT italic_f ( italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT âˆ£ italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) divide start_ARG italic_q ( italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT âˆ£ italic_a start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT ) end_ARG start_ARG italic_q ( italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT âˆ£ italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT ) end_ARG</annotation></semantics></math> for <math alttext="a^{\prime}" class="ltx_Math" display="inline" id="S1.p3.6.m6.1"><semantics id="S1.p3.6.m6.1a"><msup id="S1.p3.6.m6.1.1" xref="S1.p3.6.m6.1.1.cmml"><mi id="S1.p3.6.m6.1.1.2" xref="S1.p3.6.m6.1.1.2.cmml">a</mi><mo id="S1.p3.6.m6.1.1.3" xref="S1.p3.6.m6.1.1.3.cmml">â€²</mo></msup><annotation-xml encoding="MathML-Content" id="S1.p3.6.m6.1b"><apply id="S1.p3.6.m6.1.1.cmml" xref="S1.p3.6.m6.1.1"><csymbol cd="ambiguous" id="S1.p3.6.m6.1.1.1.cmml" xref="S1.p3.6.m6.1.1">superscript</csymbol><ci id="S1.p3.6.m6.1.1.2.cmml" xref="S1.p3.6.m6.1.1.2">ğ‘</ci><ci id="S1.p3.6.m6.1.1.3.cmml" xref="S1.p3.6.m6.1.1.3">â€²</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.6.m6.1c">a^{\prime}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.6.m6.1d">italic_a start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT</annotation></semantics></math> â€œclose toâ€ <math alttext="a_{0}" class="ltx_Math" display="inline" id="S1.p3.7.m7.1"><semantics id="S1.p3.7.m7.1a"><msub id="S1.p3.7.m7.1.1" xref="S1.p3.7.m7.1.1.cmml"><mi id="S1.p3.7.m7.1.1.2" xref="S1.p3.7.m7.1.1.2.cmml">a</mi><mn id="S1.p3.7.m7.1.1.3" xref="S1.p3.7.m7.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S1.p3.7.m7.1b"><apply id="S1.p3.7.m7.1.1.cmml" xref="S1.p3.7.m7.1.1"><csymbol cd="ambiguous" id="S1.p3.7.m7.1.1.1.cmml" xref="S1.p3.7.m7.1.1">subscript</csymbol><ci id="S1.p3.7.m7.1.1.2.cmml" xref="S1.p3.7.m7.1.1.2">ğ‘</ci><cn id="S1.p3.7.m7.1.1.3.cmml" type="integer" xref="S1.p3.7.m7.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.7.m7.1c">a_{0}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.7.m7.1d">italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>Â <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib2" title="">JMLR:v14:bottou13a, </a>; <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib5" title="">mcbook, </a>)</cite>.
FigÂ <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S3.F2" title="Figure 2 â€£ 3. Experiments and Results â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">2</span></a> shows empirically that in our application the IS estimates <math alttext="\hat{f}" class="ltx_Math" display="inline" id="S1.p3.8.m8.1"><semantics id="S1.p3.8.m8.1a"><mover accent="true" id="S1.p3.8.m8.1.1" xref="S1.p3.8.m8.1.1.cmml"><mi id="S1.p3.8.m8.1.1.2" xref="S1.p3.8.m8.1.1.2.cmml">f</mi><mo id="S1.p3.8.m8.1.1.1" xref="S1.p3.8.m8.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="S1.p3.8.m8.1b"><apply id="S1.p3.8.m8.1.1.cmml" xref="S1.p3.8.m8.1.1"><ci id="S1.p3.8.m8.1.1.1.cmml" xref="S1.p3.8.m8.1.1.1">^</ci><ci id="S1.p3.8.m8.1.1.2.cmml" xref="S1.p3.8.m8.1.1.2">ğ‘“</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.8.m8.1c">\hat{f}</annotation><annotation encoding="application/x-llamapun" id="S1.p3.8.m8.1d">over^ start_ARG italic_f end_ARG</annotation></semantics></math> correlate well with true <math alttext="f" class="ltx_Math" display="inline" id="S1.p3.9.m9.1"><semantics id="S1.p3.9.m9.1a"><mi id="S1.p3.9.m9.1.1" xref="S1.p3.9.m9.1.1.cmml">f</mi><annotation-xml encoding="MathML-Content" id="S1.p3.9.m9.1b"><ci id="S1.p3.9.m9.1.1.cmml" xref="S1.p3.9.m9.1.1">ğ‘“</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p3.9.m9.1c">f</annotation><annotation encoding="application/x-llamapun" id="S1.p3.9.m9.1d">italic_f</annotation></semantics></math> evaluations.
IS can therefore be used to maximize</p>
<table class="ltx_equation ltx_eqn_table" id="S1.E2">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_left">(2)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="\hat{a}=max_{a^{\prime}\in\{a_{0}+\delta\}}\hat{f}(a^{\prime})," class="ltx_Math" display="block" id="S1.E2.m1.2"><semantics id="S1.E2.m1.2a"><mrow id="S1.E2.m1.2.2.1" xref="S1.E2.m1.2.2.1.1.cmml"><mrow id="S1.E2.m1.2.2.1.1" xref="S1.E2.m1.2.2.1.1.cmml"><mover accent="true" id="S1.E2.m1.2.2.1.1.3" xref="S1.E2.m1.2.2.1.1.3.cmml"><mi id="S1.E2.m1.2.2.1.1.3.2" xref="S1.E2.m1.2.2.1.1.3.2.cmml">a</mi><mo id="S1.E2.m1.2.2.1.1.3.1" xref="S1.E2.m1.2.2.1.1.3.1.cmml">^</mo></mover><mo id="S1.E2.m1.2.2.1.1.2" xref="S1.E2.m1.2.2.1.1.2.cmml">=</mo><mrow id="S1.E2.m1.2.2.1.1.1" xref="S1.E2.m1.2.2.1.1.1.cmml"><mi id="S1.E2.m1.2.2.1.1.1.3" xref="S1.E2.m1.2.2.1.1.1.3.cmml">m</mi><mo id="S1.E2.m1.2.2.1.1.1.2" xref="S1.E2.m1.2.2.1.1.1.2.cmml">â¢</mo><mi id="S1.E2.m1.2.2.1.1.1.4" xref="S1.E2.m1.2.2.1.1.1.4.cmml">a</mi><mo id="S1.E2.m1.2.2.1.1.1.2a" xref="S1.E2.m1.2.2.1.1.1.2.cmml">â¢</mo><msub id="S1.E2.m1.2.2.1.1.1.5" xref="S1.E2.m1.2.2.1.1.1.5.cmml"><mi id="S1.E2.m1.2.2.1.1.1.5.2" xref="S1.E2.m1.2.2.1.1.1.5.2.cmml">x</mi><mrow id="S1.E2.m1.1.1.1" xref="S1.E2.m1.1.1.1.cmml"><msup id="S1.E2.m1.1.1.1.3" xref="S1.E2.m1.1.1.1.3.cmml"><mi id="S1.E2.m1.1.1.1.3.2" xref="S1.E2.m1.1.1.1.3.2.cmml">a</mi><mo id="S1.E2.m1.1.1.1.3.3" xref="S1.E2.m1.1.1.1.3.3.cmml">â€²</mo></msup><mo id="S1.E2.m1.1.1.1.2" xref="S1.E2.m1.1.1.1.2.cmml">âˆˆ</mo><mrow id="S1.E2.m1.1.1.1.1.1" xref="S1.E2.m1.1.1.1.1.2.cmml"><mo id="S1.E2.m1.1.1.1.1.1.2" stretchy="false" xref="S1.E2.m1.1.1.1.1.2.cmml">{</mo><mrow id="S1.E2.m1.1.1.1.1.1.1" xref="S1.E2.m1.1.1.1.1.1.1.cmml"><msub id="S1.E2.m1.1.1.1.1.1.1.2" xref="S1.E2.m1.1.1.1.1.1.1.2.cmml"><mi id="S1.E2.m1.1.1.1.1.1.1.2.2" xref="S1.E2.m1.1.1.1.1.1.1.2.2.cmml">a</mi><mn id="S1.E2.m1.1.1.1.1.1.1.2.3" xref="S1.E2.m1.1.1.1.1.1.1.2.3.cmml">0</mn></msub><mo id="S1.E2.m1.1.1.1.1.1.1.1" xref="S1.E2.m1.1.1.1.1.1.1.1.cmml">+</mo><mi id="S1.E2.m1.1.1.1.1.1.1.3" xref="S1.E2.m1.1.1.1.1.1.1.3.cmml">Î´</mi></mrow><mo id="S1.E2.m1.1.1.1.1.1.3" stretchy="false" xref="S1.E2.m1.1.1.1.1.2.cmml">}</mo></mrow></mrow></msub><mo id="S1.E2.m1.2.2.1.1.1.2b" xref="S1.E2.m1.2.2.1.1.1.2.cmml">â¢</mo><mover accent="true" id="S1.E2.m1.2.2.1.1.1.6" xref="S1.E2.m1.2.2.1.1.1.6.cmml"><mi id="S1.E2.m1.2.2.1.1.1.6.2" xref="S1.E2.m1.2.2.1.1.1.6.2.cmml">f</mi><mo id="S1.E2.m1.2.2.1.1.1.6.1" xref="S1.E2.m1.2.2.1.1.1.6.1.cmml">^</mo></mover><mo id="S1.E2.m1.2.2.1.1.1.2c" xref="S1.E2.m1.2.2.1.1.1.2.cmml">â¢</mo><mrow id="S1.E2.m1.2.2.1.1.1.1.1" xref="S1.E2.m1.2.2.1.1.1.1.1.1.cmml"><mo id="S1.E2.m1.2.2.1.1.1.1.1.2" stretchy="false" xref="S1.E2.m1.2.2.1.1.1.1.1.1.cmml">(</mo><msup id="S1.E2.m1.2.2.1.1.1.1.1.1" xref="S1.E2.m1.2.2.1.1.1.1.1.1.cmml"><mi id="S1.E2.m1.2.2.1.1.1.1.1.1.2" xref="S1.E2.m1.2.2.1.1.1.1.1.1.2.cmml">a</mi><mo id="S1.E2.m1.2.2.1.1.1.1.1.1.3" xref="S1.E2.m1.2.2.1.1.1.1.1.1.3.cmml">â€²</mo></msup><mo id="S1.E2.m1.2.2.1.1.1.1.1.3" stretchy="false" xref="S1.E2.m1.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S1.E2.m1.2.2.1.2" xref="S1.E2.m1.2.2.1.1.cmml">,</mo></mrow><annotation-xml encoding="MathML-Content" id="S1.E2.m1.2b"><apply id="S1.E2.m1.2.2.1.1.cmml" xref="S1.E2.m1.2.2.1"><eq id="S1.E2.m1.2.2.1.1.2.cmml" xref="S1.E2.m1.2.2.1.1.2"></eq><apply id="S1.E2.m1.2.2.1.1.3.cmml" xref="S1.E2.m1.2.2.1.1.3"><ci id="S1.E2.m1.2.2.1.1.3.1.cmml" xref="S1.E2.m1.2.2.1.1.3.1">^</ci><ci id="S1.E2.m1.2.2.1.1.3.2.cmml" xref="S1.E2.m1.2.2.1.1.3.2">ğ‘</ci></apply><apply id="S1.E2.m1.2.2.1.1.1.cmml" xref="S1.E2.m1.2.2.1.1.1"><times id="S1.E2.m1.2.2.1.1.1.2.cmml" xref="S1.E2.m1.2.2.1.1.1.2"></times><ci id="S1.E2.m1.2.2.1.1.1.3.cmml" xref="S1.E2.m1.2.2.1.1.1.3">ğ‘š</ci><ci id="S1.E2.m1.2.2.1.1.1.4.cmml" xref="S1.E2.m1.2.2.1.1.1.4">ğ‘</ci><apply id="S1.E2.m1.2.2.1.1.1.5.cmml" xref="S1.E2.m1.2.2.1.1.1.5"><csymbol cd="ambiguous" id="S1.E2.m1.2.2.1.1.1.5.1.cmml" xref="S1.E2.m1.2.2.1.1.1.5">subscript</csymbol><ci id="S1.E2.m1.2.2.1.1.1.5.2.cmml" xref="S1.E2.m1.2.2.1.1.1.5.2">ğ‘¥</ci><apply id="S1.E2.m1.1.1.1.cmml" xref="S1.E2.m1.1.1.1"><in id="S1.E2.m1.1.1.1.2.cmml" xref="S1.E2.m1.1.1.1.2"></in><apply id="S1.E2.m1.1.1.1.3.cmml" xref="S1.E2.m1.1.1.1.3"><csymbol cd="ambiguous" id="S1.E2.m1.1.1.1.3.1.cmml" xref="S1.E2.m1.1.1.1.3">superscript</csymbol><ci id="S1.E2.m1.1.1.1.3.2.cmml" xref="S1.E2.m1.1.1.1.3.2">ğ‘</ci><ci id="S1.E2.m1.1.1.1.3.3.cmml" xref="S1.E2.m1.1.1.1.3.3">â€²</ci></apply><set id="S1.E2.m1.1.1.1.1.2.cmml" xref="S1.E2.m1.1.1.1.1.1"><apply id="S1.E2.m1.1.1.1.1.1.1.cmml" xref="S1.E2.m1.1.1.1.1.1.1"><plus id="S1.E2.m1.1.1.1.1.1.1.1.cmml" xref="S1.E2.m1.1.1.1.1.1.1.1"></plus><apply id="S1.E2.m1.1.1.1.1.1.1.2.cmml" xref="S1.E2.m1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S1.E2.m1.1.1.1.1.1.1.2.1.cmml" xref="S1.E2.m1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S1.E2.m1.1.1.1.1.1.1.2.2.cmml" xref="S1.E2.m1.1.1.1.1.1.1.2.2">ğ‘</ci><cn id="S1.E2.m1.1.1.1.1.1.1.2.3.cmml" type="integer" xref="S1.E2.m1.1.1.1.1.1.1.2.3">0</cn></apply><ci id="S1.E2.m1.1.1.1.1.1.1.3.cmml" xref="S1.E2.m1.1.1.1.1.1.1.3">ğ›¿</ci></apply></set></apply></apply><apply id="S1.E2.m1.2.2.1.1.1.6.cmml" xref="S1.E2.m1.2.2.1.1.1.6"><ci id="S1.E2.m1.2.2.1.1.1.6.1.cmml" xref="S1.E2.m1.2.2.1.1.1.6.1">^</ci><ci id="S1.E2.m1.2.2.1.1.1.6.2.cmml" xref="S1.E2.m1.2.2.1.1.1.6.2">ğ‘“</ci></apply><apply id="S1.E2.m1.2.2.1.1.1.1.1.1.cmml" xref="S1.E2.m1.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S1.E2.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S1.E2.m1.2.2.1.1.1.1.1">superscript</csymbol><ci id="S1.E2.m1.2.2.1.1.1.1.1.1.2.cmml" xref="S1.E2.m1.2.2.1.1.1.1.1.1.2">ğ‘</ci><ci id="S1.E2.m1.2.2.1.1.1.1.1.1.3.cmml" xref="S1.E2.m1.2.2.1.1.1.1.1.1.3">â€²</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.E2.m1.2c">\hat{a}=max_{a^{\prime}\in\{a_{0}+\delta\}}\hat{f}(a^{\prime}),</annotation><annotation encoding="application/x-llamapun" id="S1.E2.m1.2d">over^ start_ARG italic_a end_ARG = italic_m italic_a italic_x start_POSTSUBSCRIPT italic_a start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT âˆˆ { italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT + italic_Î´ } end_POSTSUBSCRIPT over^ start_ARG italic_f end_ARG ( italic_a start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT ) ,</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.16">where <math alttext="\{a_{0}+\delta\}" class="ltx_Math" display="inline" id="S1.p4.1.m1.1"><semantics id="S1.p4.1.m1.1a"><mrow id="S1.p4.1.m1.1.1.1" xref="S1.p4.1.m1.1.1.2.cmml"><mo id="S1.p4.1.m1.1.1.1.2" stretchy="false" xref="S1.p4.1.m1.1.1.2.cmml">{</mo><mrow id="S1.p4.1.m1.1.1.1.1" xref="S1.p4.1.m1.1.1.1.1.cmml"><msub id="S1.p4.1.m1.1.1.1.1.2" xref="S1.p4.1.m1.1.1.1.1.2.cmml"><mi id="S1.p4.1.m1.1.1.1.1.2.2" xref="S1.p4.1.m1.1.1.1.1.2.2.cmml">a</mi><mn id="S1.p4.1.m1.1.1.1.1.2.3" xref="S1.p4.1.m1.1.1.1.1.2.3.cmml">0</mn></msub><mo id="S1.p4.1.m1.1.1.1.1.1" xref="S1.p4.1.m1.1.1.1.1.1.cmml">+</mo><mi id="S1.p4.1.m1.1.1.1.1.3" xref="S1.p4.1.m1.1.1.1.1.3.cmml">Î´</mi></mrow><mo id="S1.p4.1.m1.1.1.1.3" stretchy="false" xref="S1.p4.1.m1.1.1.2.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.1.m1.1b"><set id="S1.p4.1.m1.1.1.2.cmml" xref="S1.p4.1.m1.1.1.1"><apply id="S1.p4.1.m1.1.1.1.1.cmml" xref="S1.p4.1.m1.1.1.1.1"><plus id="S1.p4.1.m1.1.1.1.1.1.cmml" xref="S1.p4.1.m1.1.1.1.1.1"></plus><apply id="S1.p4.1.m1.1.1.1.1.2.cmml" xref="S1.p4.1.m1.1.1.1.1.2"><csymbol cd="ambiguous" id="S1.p4.1.m1.1.1.1.1.2.1.cmml" xref="S1.p4.1.m1.1.1.1.1.2">subscript</csymbol><ci id="S1.p4.1.m1.1.1.1.1.2.2.cmml" xref="S1.p4.1.m1.1.1.1.1.2.2">ğ‘</ci><cn id="S1.p4.1.m1.1.1.1.1.2.3.cmml" type="integer" xref="S1.p4.1.m1.1.1.1.1.2.3">0</cn></apply><ci id="S1.p4.1.m1.1.1.1.1.3.cmml" xref="S1.p4.1.m1.1.1.1.1.3">ğ›¿</ci></apply></set></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.1.m1.1c">\{a_{0}+\delta\}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.1.m1.1d">{ italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT + italic_Î´ }</annotation></semantics></math> denotes the effective coverage of parameter values through importance sampling (the effective neighborhood <math alttext="\delta" class="ltx_Math" display="inline" id="S1.p4.2.m2.1"><semantics id="S1.p4.2.m2.1a"><mi id="S1.p4.2.m2.1.1" xref="S1.p4.2.m2.1.1.cmml">Î´</mi><annotation-xml encoding="MathML-Content" id="S1.p4.2.m2.1b"><ci id="S1.p4.2.m2.1.1.cmml" xref="S1.p4.2.m2.1.1">ğ›¿</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.2.m2.1c">\delta</annotation><annotation encoding="application/x-llamapun" id="S1.p4.2.m2.1d">italic_Î´</annotation></semantics></math> depends on <math alttext="N" class="ltx_Math" display="inline" id="S1.p4.3.m3.1"><semantics id="S1.p4.3.m3.1a"><mi id="S1.p4.3.m3.1.1" xref="S1.p4.3.m3.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S1.p4.3.m3.1b"><ci id="S1.p4.3.m3.1.1.cmml" xref="S1.p4.3.m3.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.3.m3.1c">N</annotation><annotation encoding="application/x-llamapun" id="S1.p4.3.m3.1d">italic_N</annotation></semantics></math>, randomization <math alttext="q" class="ltx_Math" display="inline" id="S1.p4.4.m4.1"><semantics id="S1.p4.4.m4.1a"><mi id="S1.p4.4.m4.1.1" xref="S1.p4.4.m4.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="S1.p4.4.m4.1b"><ci id="S1.p4.4.m4.1.1.cmml" xref="S1.p4.4.m4.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.4.m4.1c">q</annotation><annotation encoding="application/x-llamapun" id="S1.p4.4.m4.1d">italic_q</annotation></semantics></math>, variability of <math alttext="f" class="ltx_Math" display="inline" id="S1.p4.5.m5.1"><semantics id="S1.p4.5.m5.1a"><mi id="S1.p4.5.m5.1.1" xref="S1.p4.5.m5.1.1.cmml">f</mi><annotation-xml encoding="MathML-Content" id="S1.p4.5.m5.1b"><ci id="S1.p4.5.m5.1.1.cmml" xref="S1.p4.5.m5.1.1">ğ‘“</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.5.m5.1c">f</annotation><annotation encoding="application/x-llamapun" id="S1.p4.5.m5.1d">italic_f</annotation></semantics></math> across <math alttext="x_{i}" class="ltx_Math" display="inline" id="S1.p4.6.m6.1"><semantics id="S1.p4.6.m6.1a"><msub id="S1.p4.6.m6.1.1" xref="S1.p4.6.m6.1.1.cmml"><mi id="S1.p4.6.m6.1.1.2" xref="S1.p4.6.m6.1.1.2.cmml">x</mi><mi id="S1.p4.6.m6.1.1.3" xref="S1.p4.6.m6.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S1.p4.6.m6.1b"><apply id="S1.p4.6.m6.1.1.cmml" xref="S1.p4.6.m6.1.1"><csymbol cd="ambiguous" id="S1.p4.6.m6.1.1.1.cmml" xref="S1.p4.6.m6.1.1">subscript</csymbol><ci id="S1.p4.6.m6.1.1.2.cmml" xref="S1.p4.6.m6.1.1.2">ğ‘¥</ci><ci id="S1.p4.6.m6.1.1.3.cmml" xref="S1.p4.6.m6.1.1.3">ğ‘–</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.6.m6.1c">x_{i}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.6.m6.1d">italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>, etc.). This suggests another practical baseline approach for our original problem:
Initialize <math alttext="a_{0}" class="ltx_Math" display="inline" id="S1.p4.7.m7.1"><semantics id="S1.p4.7.m7.1a"><msub id="S1.p4.7.m7.1.1" xref="S1.p4.7.m7.1.1.cmml"><mi id="S1.p4.7.m7.1.1.2" xref="S1.p4.7.m7.1.1.2.cmml">a</mi><mn id="S1.p4.7.m7.1.1.3" xref="S1.p4.7.m7.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S1.p4.7.m7.1b"><apply id="S1.p4.7.m7.1.1.cmml" xref="S1.p4.7.m7.1.1"><csymbol cd="ambiguous" id="S1.p4.7.m7.1.1.1.cmml" xref="S1.p4.7.m7.1.1">subscript</csymbol><ci id="S1.p4.7.m7.1.1.2.cmml" xref="S1.p4.7.m7.1.1.2">ğ‘</ci><cn id="S1.p4.7.m7.1.1.3.cmml" type="integer" xref="S1.p4.7.m7.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.7.m7.1c">a_{0}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.7.m7.1d">italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math> and iteratively improve it using <math alttext="a_{i+1}=argmax_{a^{\prime}\in\{a_{i}+\delta\}}\hat{f}(a^{\prime})" class="ltx_Math" display="inline" id="S1.p4.8.m8.2"><semantics id="S1.p4.8.m8.2a"><mrow id="S1.p4.8.m8.2.2" xref="S1.p4.8.m8.2.2.cmml"><msub id="S1.p4.8.m8.2.2.3" xref="S1.p4.8.m8.2.2.3.cmml"><mi id="S1.p4.8.m8.2.2.3.2" xref="S1.p4.8.m8.2.2.3.2.cmml">a</mi><mrow id="S1.p4.8.m8.2.2.3.3" xref="S1.p4.8.m8.2.2.3.3.cmml"><mi id="S1.p4.8.m8.2.2.3.3.2" xref="S1.p4.8.m8.2.2.3.3.2.cmml">i</mi><mo id="S1.p4.8.m8.2.2.3.3.1" xref="S1.p4.8.m8.2.2.3.3.1.cmml">+</mo><mn id="S1.p4.8.m8.2.2.3.3.3" xref="S1.p4.8.m8.2.2.3.3.3.cmml">1</mn></mrow></msub><mo id="S1.p4.8.m8.2.2.2" xref="S1.p4.8.m8.2.2.2.cmml">=</mo><mrow id="S1.p4.8.m8.2.2.1" xref="S1.p4.8.m8.2.2.1.cmml"><mi id="S1.p4.8.m8.2.2.1.3" xref="S1.p4.8.m8.2.2.1.3.cmml">a</mi><mo id="S1.p4.8.m8.2.2.1.2" xref="S1.p4.8.m8.2.2.1.2.cmml">â¢</mo><mi id="S1.p4.8.m8.2.2.1.4" xref="S1.p4.8.m8.2.2.1.4.cmml">r</mi><mo id="S1.p4.8.m8.2.2.1.2a" xref="S1.p4.8.m8.2.2.1.2.cmml">â¢</mo><mi id="S1.p4.8.m8.2.2.1.5" xref="S1.p4.8.m8.2.2.1.5.cmml">g</mi><mo id="S1.p4.8.m8.2.2.1.2b" xref="S1.p4.8.m8.2.2.1.2.cmml">â¢</mo><mi id="S1.p4.8.m8.2.2.1.6" xref="S1.p4.8.m8.2.2.1.6.cmml">m</mi><mo id="S1.p4.8.m8.2.2.1.2c" xref="S1.p4.8.m8.2.2.1.2.cmml">â¢</mo><mi id="S1.p4.8.m8.2.2.1.7" xref="S1.p4.8.m8.2.2.1.7.cmml">a</mi><mo id="S1.p4.8.m8.2.2.1.2d" xref="S1.p4.8.m8.2.2.1.2.cmml">â¢</mo><msub id="S1.p4.8.m8.2.2.1.8" xref="S1.p4.8.m8.2.2.1.8.cmml"><mi id="S1.p4.8.m8.2.2.1.8.2" xref="S1.p4.8.m8.2.2.1.8.2.cmml">x</mi><mrow id="S1.p4.8.m8.1.1.1" xref="S1.p4.8.m8.1.1.1.cmml"><msup id="S1.p4.8.m8.1.1.1.3" xref="S1.p4.8.m8.1.1.1.3.cmml"><mi id="S1.p4.8.m8.1.1.1.3.2" xref="S1.p4.8.m8.1.1.1.3.2.cmml">a</mi><mo id="S1.p4.8.m8.1.1.1.3.3" xref="S1.p4.8.m8.1.1.1.3.3.cmml">â€²</mo></msup><mo id="S1.p4.8.m8.1.1.1.2" xref="S1.p4.8.m8.1.1.1.2.cmml">âˆˆ</mo><mrow id="S1.p4.8.m8.1.1.1.1.1" xref="S1.p4.8.m8.1.1.1.1.2.cmml"><mo id="S1.p4.8.m8.1.1.1.1.1.2" stretchy="false" xref="S1.p4.8.m8.1.1.1.1.2.cmml">{</mo><mrow id="S1.p4.8.m8.1.1.1.1.1.1" xref="S1.p4.8.m8.1.1.1.1.1.1.cmml"><msub id="S1.p4.8.m8.1.1.1.1.1.1.2" xref="S1.p4.8.m8.1.1.1.1.1.1.2.cmml"><mi id="S1.p4.8.m8.1.1.1.1.1.1.2.2" xref="S1.p4.8.m8.1.1.1.1.1.1.2.2.cmml">a</mi><mi id="S1.p4.8.m8.1.1.1.1.1.1.2.3" xref="S1.p4.8.m8.1.1.1.1.1.1.2.3.cmml">i</mi></msub><mo id="S1.p4.8.m8.1.1.1.1.1.1.1" xref="S1.p4.8.m8.1.1.1.1.1.1.1.cmml">+</mo><mi id="S1.p4.8.m8.1.1.1.1.1.1.3" xref="S1.p4.8.m8.1.1.1.1.1.1.3.cmml">Î´</mi></mrow><mo id="S1.p4.8.m8.1.1.1.1.1.3" stretchy="false" xref="S1.p4.8.m8.1.1.1.1.2.cmml">}</mo></mrow></mrow></msub><mo id="S1.p4.8.m8.2.2.1.2e" xref="S1.p4.8.m8.2.2.1.2.cmml">â¢</mo><mover accent="true" id="S1.p4.8.m8.2.2.1.9" xref="S1.p4.8.m8.2.2.1.9.cmml"><mi id="S1.p4.8.m8.2.2.1.9.2" xref="S1.p4.8.m8.2.2.1.9.2.cmml">f</mi><mo id="S1.p4.8.m8.2.2.1.9.1" xref="S1.p4.8.m8.2.2.1.9.1.cmml">^</mo></mover><mo id="S1.p4.8.m8.2.2.1.2f" xref="S1.p4.8.m8.2.2.1.2.cmml">â¢</mo><mrow id="S1.p4.8.m8.2.2.1.1.1" xref="S1.p4.8.m8.2.2.1.1.1.1.cmml"><mo id="S1.p4.8.m8.2.2.1.1.1.2" stretchy="false" xref="S1.p4.8.m8.2.2.1.1.1.1.cmml">(</mo><msup id="S1.p4.8.m8.2.2.1.1.1.1" xref="S1.p4.8.m8.2.2.1.1.1.1.cmml"><mi id="S1.p4.8.m8.2.2.1.1.1.1.2" xref="S1.p4.8.m8.2.2.1.1.1.1.2.cmml">a</mi><mo id="S1.p4.8.m8.2.2.1.1.1.1.3" xref="S1.p4.8.m8.2.2.1.1.1.1.3.cmml">â€²</mo></msup><mo id="S1.p4.8.m8.2.2.1.1.1.3" stretchy="false" xref="S1.p4.8.m8.2.2.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.8.m8.2b"><apply id="S1.p4.8.m8.2.2.cmml" xref="S1.p4.8.m8.2.2"><eq id="S1.p4.8.m8.2.2.2.cmml" xref="S1.p4.8.m8.2.2.2"></eq><apply id="S1.p4.8.m8.2.2.3.cmml" xref="S1.p4.8.m8.2.2.3"><csymbol cd="ambiguous" id="S1.p4.8.m8.2.2.3.1.cmml" xref="S1.p4.8.m8.2.2.3">subscript</csymbol><ci id="S1.p4.8.m8.2.2.3.2.cmml" xref="S1.p4.8.m8.2.2.3.2">ğ‘</ci><apply id="S1.p4.8.m8.2.2.3.3.cmml" xref="S1.p4.8.m8.2.2.3.3"><plus id="S1.p4.8.m8.2.2.3.3.1.cmml" xref="S1.p4.8.m8.2.2.3.3.1"></plus><ci id="S1.p4.8.m8.2.2.3.3.2.cmml" xref="S1.p4.8.m8.2.2.3.3.2">ğ‘–</ci><cn id="S1.p4.8.m8.2.2.3.3.3.cmml" type="integer" xref="S1.p4.8.m8.2.2.3.3.3">1</cn></apply></apply><apply id="S1.p4.8.m8.2.2.1.cmml" xref="S1.p4.8.m8.2.2.1"><times id="S1.p4.8.m8.2.2.1.2.cmml" xref="S1.p4.8.m8.2.2.1.2"></times><ci id="S1.p4.8.m8.2.2.1.3.cmml" xref="S1.p4.8.m8.2.2.1.3">ğ‘</ci><ci id="S1.p4.8.m8.2.2.1.4.cmml" xref="S1.p4.8.m8.2.2.1.4">ğ‘Ÿ</ci><ci id="S1.p4.8.m8.2.2.1.5.cmml" xref="S1.p4.8.m8.2.2.1.5">ğ‘”</ci><ci id="S1.p4.8.m8.2.2.1.6.cmml" xref="S1.p4.8.m8.2.2.1.6">ğ‘š</ci><ci id="S1.p4.8.m8.2.2.1.7.cmml" xref="S1.p4.8.m8.2.2.1.7">ğ‘</ci><apply id="S1.p4.8.m8.2.2.1.8.cmml" xref="S1.p4.8.m8.2.2.1.8"><csymbol cd="ambiguous" id="S1.p4.8.m8.2.2.1.8.1.cmml" xref="S1.p4.8.m8.2.2.1.8">subscript</csymbol><ci id="S1.p4.8.m8.2.2.1.8.2.cmml" xref="S1.p4.8.m8.2.2.1.8.2">ğ‘¥</ci><apply id="S1.p4.8.m8.1.1.1.cmml" xref="S1.p4.8.m8.1.1.1"><in id="S1.p4.8.m8.1.1.1.2.cmml" xref="S1.p4.8.m8.1.1.1.2"></in><apply id="S1.p4.8.m8.1.1.1.3.cmml" xref="S1.p4.8.m8.1.1.1.3"><csymbol cd="ambiguous" id="S1.p4.8.m8.1.1.1.3.1.cmml" xref="S1.p4.8.m8.1.1.1.3">superscript</csymbol><ci id="S1.p4.8.m8.1.1.1.3.2.cmml" xref="S1.p4.8.m8.1.1.1.3.2">ğ‘</ci><ci id="S1.p4.8.m8.1.1.1.3.3.cmml" xref="S1.p4.8.m8.1.1.1.3.3">â€²</ci></apply><set id="S1.p4.8.m8.1.1.1.1.2.cmml" xref="S1.p4.8.m8.1.1.1.1.1"><apply id="S1.p4.8.m8.1.1.1.1.1.1.cmml" xref="S1.p4.8.m8.1.1.1.1.1.1"><plus id="S1.p4.8.m8.1.1.1.1.1.1.1.cmml" xref="S1.p4.8.m8.1.1.1.1.1.1.1"></plus><apply id="S1.p4.8.m8.1.1.1.1.1.1.2.cmml" xref="S1.p4.8.m8.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S1.p4.8.m8.1.1.1.1.1.1.2.1.cmml" xref="S1.p4.8.m8.1.1.1.1.1.1.2">subscript</csymbol><ci id="S1.p4.8.m8.1.1.1.1.1.1.2.2.cmml" xref="S1.p4.8.m8.1.1.1.1.1.1.2.2">ğ‘</ci><ci id="S1.p4.8.m8.1.1.1.1.1.1.2.3.cmml" xref="S1.p4.8.m8.1.1.1.1.1.1.2.3">ğ‘–</ci></apply><ci id="S1.p4.8.m8.1.1.1.1.1.1.3.cmml" xref="S1.p4.8.m8.1.1.1.1.1.1.3">ğ›¿</ci></apply></set></apply></apply><apply id="S1.p4.8.m8.2.2.1.9.cmml" xref="S1.p4.8.m8.2.2.1.9"><ci id="S1.p4.8.m8.2.2.1.9.1.cmml" xref="S1.p4.8.m8.2.2.1.9.1">^</ci><ci id="S1.p4.8.m8.2.2.1.9.2.cmml" xref="S1.p4.8.m8.2.2.1.9.2">ğ‘“</ci></apply><apply id="S1.p4.8.m8.2.2.1.1.1.1.cmml" xref="S1.p4.8.m8.2.2.1.1.1"><csymbol cd="ambiguous" id="S1.p4.8.m8.2.2.1.1.1.1.1.cmml" xref="S1.p4.8.m8.2.2.1.1.1">superscript</csymbol><ci id="S1.p4.8.m8.2.2.1.1.1.1.2.cmml" xref="S1.p4.8.m8.2.2.1.1.1.1.2">ğ‘</ci><ci id="S1.p4.8.m8.2.2.1.1.1.1.3.cmml" xref="S1.p4.8.m8.2.2.1.1.1.1.3">â€²</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.8.m8.2c">a_{i+1}=argmax_{a^{\prime}\in\{a_{i}+\delta\}}\hat{f}(a^{\prime})</annotation><annotation encoding="application/x-llamapun" id="S1.p4.8.m8.2d">italic_a start_POSTSUBSCRIPT italic_i + 1 end_POSTSUBSCRIPT = italic_a italic_r italic_g italic_m italic_a italic_x start_POSTSUBSCRIPT italic_a start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT âˆˆ { italic_a start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT + italic_Î´ } end_POSTSUBSCRIPT over^ start_ARG italic_f end_ARG ( italic_a start_POSTSUPERSCRIPT â€² end_POSTSUPERSCRIPT )</annotation></semantics></math>.
We can evaluate the iterates found by IS using the true <math alttext="f" class="ltx_Math" display="inline" id="S1.p4.9.m9.1"><semantics id="S1.p4.9.m9.1a"><mi id="S1.p4.9.m9.1.1" xref="S1.p4.9.m9.1.1.cmml">f</mi><annotation-xml encoding="MathML-Content" id="S1.p4.9.m9.1b"><ci id="S1.p4.9.m9.1.1.cmml" xref="S1.p4.9.m9.1.1">ğ‘“</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.9.m9.1c">f</annotation><annotation encoding="application/x-llamapun" id="S1.p4.9.m9.1d">italic_f</annotation></semantics></math> to detect progress. For <math alttext="T" class="ltx_Math" display="inline" id="S1.p4.10.m10.1"><semantics id="S1.p4.10.m10.1a"><mi id="S1.p4.10.m10.1.1" xref="S1.p4.10.m10.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S1.p4.10.m10.1b"><ci id="S1.p4.10.m10.1.1.cmml" xref="S1.p4.10.m10.1.1">ğ‘‡</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.10.m10.1c">T</annotation><annotation encoding="application/x-llamapun" id="S1.p4.10.m10.1d">italic_T</annotation></semantics></math> iterations, the cost of this approach is <math alttext="O(T*(s+NA_{\delta}))" class="ltx_Math" display="inline" id="S1.p4.11.m11.1"><semantics id="S1.p4.11.m11.1a"><mrow id="S1.p4.11.m11.1.1" xref="S1.p4.11.m11.1.1.cmml"><mi id="S1.p4.11.m11.1.1.3" xref="S1.p4.11.m11.1.1.3.cmml">O</mi><mo id="S1.p4.11.m11.1.1.2" xref="S1.p4.11.m11.1.1.2.cmml">â¢</mo><mrow id="S1.p4.11.m11.1.1.1.1" xref="S1.p4.11.m11.1.1.1.1.1.cmml"><mo id="S1.p4.11.m11.1.1.1.1.2" stretchy="false" xref="S1.p4.11.m11.1.1.1.1.1.cmml">(</mo><mrow id="S1.p4.11.m11.1.1.1.1.1" xref="S1.p4.11.m11.1.1.1.1.1.cmml"><mi id="S1.p4.11.m11.1.1.1.1.1.3" xref="S1.p4.11.m11.1.1.1.1.1.3.cmml">T</mi><mo id="S1.p4.11.m11.1.1.1.1.1.2" lspace="0.222em" rspace="0.222em" xref="S1.p4.11.m11.1.1.1.1.1.2.cmml">âˆ—</mo><mrow id="S1.p4.11.m11.1.1.1.1.1.1.1" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.cmml"><mo id="S1.p4.11.m11.1.1.1.1.1.1.1.2" stretchy="false" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S1.p4.11.m11.1.1.1.1.1.1.1.1" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.cmml"><mi id="S1.p4.11.m11.1.1.1.1.1.1.1.1.2" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.2.cmml">s</mi><mo id="S1.p4.11.m11.1.1.1.1.1.1.1.1.1" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.1.cmml">+</mo><mrow id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.cmml"><mi id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.2" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.2.cmml">N</mi><mo id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.1" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.1.cmml">â¢</mo><msub id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.cmml"><mi id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.2" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.2.cmml">A</mi><mi id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.3" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.3.cmml">Î´</mi></msub></mrow></mrow><mo id="S1.p4.11.m11.1.1.1.1.1.1.1.3" stretchy="false" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S1.p4.11.m11.1.1.1.1.3" stretchy="false" xref="S1.p4.11.m11.1.1.1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.11.m11.1b"><apply id="S1.p4.11.m11.1.1.cmml" xref="S1.p4.11.m11.1.1"><times id="S1.p4.11.m11.1.1.2.cmml" xref="S1.p4.11.m11.1.1.2"></times><ci id="S1.p4.11.m11.1.1.3.cmml" xref="S1.p4.11.m11.1.1.3">ğ‘‚</ci><apply id="S1.p4.11.m11.1.1.1.1.1.cmml" xref="S1.p4.11.m11.1.1.1.1"><times id="S1.p4.11.m11.1.1.1.1.1.2.cmml" xref="S1.p4.11.m11.1.1.1.1.1.2"></times><ci id="S1.p4.11.m11.1.1.1.1.1.3.cmml" xref="S1.p4.11.m11.1.1.1.1.1.3">ğ‘‡</ci><apply id="S1.p4.11.m11.1.1.1.1.1.1.1.1.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1"><plus id="S1.p4.11.m11.1.1.1.1.1.1.1.1.1.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.1"></plus><ci id="S1.p4.11.m11.1.1.1.1.1.1.1.1.2.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.2">ğ‘ </ci><apply id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3"><times id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.1.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.1"></times><ci id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.2.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.2">ğ‘</ci><apply id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3">subscript</csymbol><ci id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.2.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.2">ğ´</ci><ci id="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S1.p4.11.m11.1.1.1.1.1.1.1.1.3.3.3">ğ›¿</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.11.m11.1c">O(T*(s+NA_{\delta}))</annotation><annotation encoding="application/x-llamapun" id="S1.p4.11.m11.1d">italic_O ( italic_T âˆ— ( italic_s + italic_N italic_A start_POSTSUBSCRIPT italic_Î´ end_POSTSUBSCRIPT ) )</annotation></semantics></math>. Since <math alttext="A_{\delta}" class="ltx_Math" display="inline" id="S1.p4.12.m12.1"><semantics id="S1.p4.12.m12.1a"><msub id="S1.p4.12.m12.1.1" xref="S1.p4.12.m12.1.1.cmml"><mi id="S1.p4.12.m12.1.1.2" xref="S1.p4.12.m12.1.1.2.cmml">A</mi><mi id="S1.p4.12.m12.1.1.3" xref="S1.p4.12.m12.1.1.3.cmml">Î´</mi></msub><annotation-xml encoding="MathML-Content" id="S1.p4.12.m12.1b"><apply id="S1.p4.12.m12.1.1.cmml" xref="S1.p4.12.m12.1.1"><csymbol cd="ambiguous" id="S1.p4.12.m12.1.1.1.cmml" xref="S1.p4.12.m12.1.1">subscript</csymbol><ci id="S1.p4.12.m12.1.1.2.cmml" xref="S1.p4.12.m12.1.1.2">ğ´</ci><ci id="S1.p4.12.m12.1.1.3.cmml" xref="S1.p4.12.m12.1.1.3">ğ›¿</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.12.m12.1c">A_{\delta}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.12.m12.1d">italic_A start_POSTSUBSCRIPT italic_Î´ end_POSTSUBSCRIPT</annotation></semantics></math> (the effective number of parameters searched in each iteration) can be much smaller than <math alttext="A" class="ltx_Math" display="inline" id="S1.p4.13.m13.1"><semantics id="S1.p4.13.m13.1a"><mi id="S1.p4.13.m13.1.1" xref="S1.p4.13.m13.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="S1.p4.13.m13.1b"><ci id="S1.p4.13.m13.1.1.cmml" xref="S1.p4.13.m13.1.1">ğ´</ci></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.13.m13.1c">A</annotation><annotation encoding="application/x-llamapun" id="S1.p4.13.m13.1d">italic_A</annotation></semantics></math>, and re-weighting samples can be much faster than <math alttext="O(s)" class="ltx_Math" display="inline" id="S1.p4.14.m14.1"><semantics id="S1.p4.14.m14.1a"><mrow id="S1.p4.14.m14.1.2" xref="S1.p4.14.m14.1.2.cmml"><mi id="S1.p4.14.m14.1.2.2" xref="S1.p4.14.m14.1.2.2.cmml">O</mi><mo id="S1.p4.14.m14.1.2.1" xref="S1.p4.14.m14.1.2.1.cmml">â¢</mo><mrow id="S1.p4.14.m14.1.2.3.2" xref="S1.p4.14.m14.1.2.cmml"><mo id="S1.p4.14.m14.1.2.3.2.1" stretchy="false" xref="S1.p4.14.m14.1.2.cmml">(</mo><mi id="S1.p4.14.m14.1.1" xref="S1.p4.14.m14.1.1.cmml">s</mi><mo id="S1.p4.14.m14.1.2.3.2.2" stretchy="false" xref="S1.p4.14.m14.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.14.m14.1b"><apply id="S1.p4.14.m14.1.2.cmml" xref="S1.p4.14.m14.1.2"><times id="S1.p4.14.m14.1.2.1.cmml" xref="S1.p4.14.m14.1.2.1"></times><ci id="S1.p4.14.m14.1.2.2.cmml" xref="S1.p4.14.m14.1.2.2">ğ‘‚</ci><ci id="S1.p4.14.m14.1.1.cmml" xref="S1.p4.14.m14.1.1">ğ‘ </ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.14.m14.1c">O(s)</annotation><annotation encoding="application/x-llamapun" id="S1.p4.14.m14.1d">italic_O ( italic_s )</annotation></semantics></math>, this approach is typically computationally efficient compared to enumerating all <math alttext="a\in A" class="ltx_Math" display="inline" id="S1.p4.15.m15.1"><semantics id="S1.p4.15.m15.1a"><mrow id="S1.p4.15.m15.1.1" xref="S1.p4.15.m15.1.1.cmml"><mi id="S1.p4.15.m15.1.1.2" xref="S1.p4.15.m15.1.1.2.cmml">a</mi><mo id="S1.p4.15.m15.1.1.1" xref="S1.p4.15.m15.1.1.1.cmml">âˆˆ</mo><mi id="S1.p4.15.m15.1.1.3" xref="S1.p4.15.m15.1.1.3.cmml">A</mi></mrow><annotation-xml encoding="MathML-Content" id="S1.p4.15.m15.1b"><apply id="S1.p4.15.m15.1.1.cmml" xref="S1.p4.15.m15.1.1"><in id="S1.p4.15.m15.1.1.1.cmml" xref="S1.p4.15.m15.1.1.1"></in><ci id="S1.p4.15.m15.1.1.2.cmml" xref="S1.p4.15.m15.1.1.2">ğ‘</ci><ci id="S1.p4.15.m15.1.1.3.cmml" xref="S1.p4.15.m15.1.1.3">ğ´</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.15.m15.1c">a\in A</annotation><annotation encoding="application/x-llamapun" id="S1.p4.15.m15.1d">italic_a âˆˆ italic_A</annotation></semantics></math>, however it is sensitive to the choice of <math alttext="a_{0}" class="ltx_Math" display="inline" id="S1.p4.16.m16.1"><semantics id="S1.p4.16.m16.1a"><msub id="S1.p4.16.m16.1.1" xref="S1.p4.16.m16.1.1.cmml"><mi id="S1.p4.16.m16.1.1.2" xref="S1.p4.16.m16.1.1.2.cmml">a</mi><mn id="S1.p4.16.m16.1.1.3" xref="S1.p4.16.m16.1.1.3.cmml">0</mn></msub><annotation-xml encoding="MathML-Content" id="S1.p4.16.m16.1b"><apply id="S1.p4.16.m16.1.1.cmml" xref="S1.p4.16.m16.1.1"><csymbol cd="ambiguous" id="S1.p4.16.m16.1.1.1.cmml" xref="S1.p4.16.m16.1.1">subscript</csymbol><ci id="S1.p4.16.m16.1.1.2.cmml" xref="S1.p4.16.m16.1.1.2">ğ‘</ci><cn id="S1.p4.16.m16.1.1.3.cmml" type="integer" xref="S1.p4.16.m16.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S1.p4.16.m16.1c">a_{0}</annotation><annotation encoding="application/x-llamapun" id="S1.p4.16.m16.1d">italic_a start_POSTSUBSCRIPT 0 end_POSTSUBSCRIPT</annotation></semantics></math>.</p>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">We propose <span class="ltx_text ltx_font_italic" id="S1.p5.1.1">Simulator-Guided Importance Sampling</span> (<span class="ltx_text ltx_font_bold" id="S1.p5.1.2">SGIS</span>), which leverages strengths of both simulations and IS.
Other approaches (e.g. doubly robust estimatorsÂ <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib3" title="">dudik2011doubly, </a>)</cite>) that combine simulations and IS are motivated by a bias-variance trade-off (offsetting the potential bias of simulator using an unbiased IS alternative); whereas we are motivated to combine two unbiased estimators of KPIs to achieve a computation trade-off.
Using real-world A/B tests, we show that <span class="ltx_text ltx_font_bold" id="S1.p5.1.3">SGIS</span> driven parameter tuning perform significantly better than open-box simulator, while keeping lower computation cost.</p>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2. </span>Method</h2>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.3">Considering <math alttext="m" class="ltx_Math" display="inline" id="S2.p1.1.m1.1"><semantics id="S2.p1.1.m1.1a"><mi id="S2.p1.1.m1.1.1" xref="S2.p1.1.m1.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="S2.p1.1.m1.1b"><ci id="S2.p1.1.m1.1.1.cmml" xref="S2.p1.1.m1.1.1">ğ‘š</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.1.m1.1c">m</annotation><annotation encoding="application/x-llamapun" id="S2.p1.1.m1.1d">italic_m</annotation></semantics></math> continuous parameters to tune, a parameter setting is a vector in the subspace of <math alttext="\mathbb{R}^{m}" class="ltx_Math" display="inline" id="S2.p1.2.m2.1"><semantics id="S2.p1.2.m2.1a"><msup id="S2.p1.2.m2.1.1" xref="S2.p1.2.m2.1.1.cmml"><mi id="S2.p1.2.m2.1.1.2" xref="S2.p1.2.m2.1.1.2.cmml">â„</mi><mi id="S2.p1.2.m2.1.1.3" xref="S2.p1.2.m2.1.1.3.cmml">m</mi></msup><annotation-xml encoding="MathML-Content" id="S2.p1.2.m2.1b"><apply id="S2.p1.2.m2.1.1.cmml" xref="S2.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S2.p1.2.m2.1.1.1.cmml" xref="S2.p1.2.m2.1.1">superscript</csymbol><ci id="S2.p1.2.m2.1.1.2.cmml" xref="S2.p1.2.m2.1.1.2">â„</ci><ci id="S2.p1.2.m2.1.1.3.cmml" xref="S2.p1.2.m2.1.1.3">ğ‘š</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.2.m2.1c">\mathbb{R}^{m}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.2.m2.1d">blackboard_R start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT</annotation></semantics></math>.
As this space can be very large, we first generate a grid on every component of the vector to do a coarse search.
Let <span class="ltx_text ltx_markedasmath ltx_font_bold" id="S2.p1.3.1">C</span> be a coarse grid after partitioning all the parameters.</p>
</div>
<div class="ltx_para" id="S2.p2">
<p class="ltx_p" id="S2.p2.4">We use simulator to get KPIs for each grid point using eq. <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S1.E1" title="In 1. Introduction â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">1</span></a>.
Details about simulator is mentioned in Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS1" title="A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">A.1</span></a>.
We rank parameter settings using an objective function <math alttext="\mathcal{L}:\mathbb{R}^{m}\to\mathbb{R}" class="ltx_Math" display="inline" id="S2.p2.1.m1.1"><semantics id="S2.p2.1.m1.1a"><mrow id="S2.p2.1.m1.1.1" xref="S2.p2.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S2.p2.1.m1.1.1.2" xref="S2.p2.1.m1.1.1.2.cmml">â„’</mi><mo id="S2.p2.1.m1.1.1.1" lspace="0.278em" rspace="0.278em" xref="S2.p2.1.m1.1.1.1.cmml">:</mo><mrow id="S2.p2.1.m1.1.1.3" xref="S2.p2.1.m1.1.1.3.cmml"><msup id="S2.p2.1.m1.1.1.3.2" xref="S2.p2.1.m1.1.1.3.2.cmml"><mi id="S2.p2.1.m1.1.1.3.2.2" xref="S2.p2.1.m1.1.1.3.2.2.cmml">â„</mi><mi id="S2.p2.1.m1.1.1.3.2.3" xref="S2.p2.1.m1.1.1.3.2.3.cmml">m</mi></msup><mo id="S2.p2.1.m1.1.1.3.1" stretchy="false" xref="S2.p2.1.m1.1.1.3.1.cmml">â†’</mo><mi id="S2.p2.1.m1.1.1.3.3" xref="S2.p2.1.m1.1.1.3.3.cmml">â„</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.p2.1.m1.1b"><apply id="S2.p2.1.m1.1.1.cmml" xref="S2.p2.1.m1.1.1"><ci id="S2.p2.1.m1.1.1.1.cmml" xref="S2.p2.1.m1.1.1.1">:</ci><ci id="S2.p2.1.m1.1.1.2.cmml" xref="S2.p2.1.m1.1.1.2">â„’</ci><apply id="S2.p2.1.m1.1.1.3.cmml" xref="S2.p2.1.m1.1.1.3"><ci id="S2.p2.1.m1.1.1.3.1.cmml" xref="S2.p2.1.m1.1.1.3.1">â†’</ci><apply id="S2.p2.1.m1.1.1.3.2.cmml" xref="S2.p2.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="S2.p2.1.m1.1.1.3.2.1.cmml" xref="S2.p2.1.m1.1.1.3.2">superscript</csymbol><ci id="S2.p2.1.m1.1.1.3.2.2.cmml" xref="S2.p2.1.m1.1.1.3.2.2">â„</ci><ci id="S2.p2.1.m1.1.1.3.2.3.cmml" xref="S2.p2.1.m1.1.1.3.2.3">ğ‘š</ci></apply><ci id="S2.p2.1.m1.1.1.3.3.cmml" xref="S2.p2.1.m1.1.1.3.3">â„</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.1.m1.1c">\mathcal{L}:\mathbb{R}^{m}\to\mathbb{R}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.1.m1.1d">caligraphic_L : blackboard_R start_POSTSUPERSCRIPT italic_m end_POSTSUPERSCRIPT â†’ blackboard_R</annotation></semantics></math> with score <math alttext="r" class="ltx_Math" display="inline" id="S2.p2.2.m2.1"><semantics id="S2.p2.2.m2.1a"><mi id="S2.p2.2.m2.1.1" xref="S2.p2.2.m2.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S2.p2.2.m2.1b"><ci id="S2.p2.2.m2.1.1.cmml" xref="S2.p2.2.m2.1.1">ğ‘Ÿ</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.2.m2.1c">r</annotation><annotation encoding="application/x-llamapun" id="S2.p2.2.m2.1d">italic_r</annotation></semantics></math> (Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A2.SS1" title="B.1. Top-ğ‘˜ Optimization â€£ Appendix B Hyperparameter Considerations â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">B.1</span></a>).
For each of the top <math alttext="k" class="ltx_Math" display="inline" id="S2.p2.3.m3.1"><semantics id="S2.p2.3.m3.1a"><mi id="S2.p2.3.m3.1.1" xref="S2.p2.3.m3.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S2.p2.3.m3.1b"><ci id="S2.p2.3.m3.1.1.cmml" xref="S2.p2.3.m3.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.3.m3.1c">k</annotation><annotation encoding="application/x-llamapun" id="S2.p2.3.m3.1d">italic_k</annotation></semantics></math> settings ranked by <math alttext="\mathcal{L}" class="ltx_Math" display="inline" id="S2.p2.4.m4.1"><semantics id="S2.p2.4.m4.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p2.4.m4.1.1" xref="S2.p2.4.m4.1.1.cmml">â„’</mi><annotation-xml encoding="MathML-Content" id="S2.p2.4.m4.1b"><ci id="S2.p2.4.m4.1.1.cmml" xref="S2.p2.4.m4.1.1">â„’</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p2.4.m4.1c">\mathcal{L}</annotation><annotation encoding="application/x-llamapun" id="S2.p2.4.m4.1d">caligraphic_L</annotation></semantics></math>, simulator generated artificial user sessions are used to perform importance sampling according to eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S1.E2" title="In 1. Introduction â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">2</span></a> (Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS1.SSS1" title="A.1.1. Artificial User Sessions â€£ A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">A.1.1</span></a>, <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS2" title="A.2. Importance Sampling â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">A.2</span></a>).</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> Simulator-Guided Importance Sampling (SGIS) </figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="alg1.l1">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l1.1.1.1" style="font-size:80%;">1:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l1.2">procedure</span>Â <span class="ltx_text ltx_font_smallcaps" id="alg1.l1.3">SGIS</span>(<span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg1.l1.4">X</span>,<math alttext="c" class="ltx_Math" display="inline" id="alg1.l1.m2.1"><semantics id="alg1.l1.m2.1a"><mi id="alg1.l1.m2.1.1" xref="alg1.l1.m2.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m2.1b"><ci id="alg1.l1.m2.1.1.cmml" xref="alg1.l1.m2.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m2.1c">c</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m2.1d">italic_c</annotation></semantics></math>,<math alttext="d" class="ltx_Math" display="inline" id="alg1.l1.m3.1"><semantics id="alg1.l1.m3.1a"><mi id="alg1.l1.m3.1.1" xref="alg1.l1.m3.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m3.1b"><ci id="alg1.l1.m3.1.1.cmml" xref="alg1.l1.m3.1.1">ğ‘‘</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m3.1c">d</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m3.1d">italic_d</annotation></semantics></math>,<math alttext="m" class="ltx_Math" display="inline" id="alg1.l1.m4.1"><semantics id="alg1.l1.m4.1a"><mi id="alg1.l1.m4.1.1" xref="alg1.l1.m4.1.1.cmml">m</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m4.1b"><ci id="alg1.l1.m4.1.1.cmml" xref="alg1.l1.m4.1.1">ğ‘š</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m4.1c">m</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m4.1d">italic_m</annotation></semantics></math>,<math alttext="k" class="ltx_Math" display="inline" id="alg1.l1.m5.1"><semantics id="alg1.l1.m5.1a"><mi id="alg1.l1.m5.1.1" xref="alg1.l1.m5.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m5.1b"><ci id="alg1.l1.m5.1.1.cmml" xref="alg1.l1.m5.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m5.1c">k</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m5.1d">italic_k</annotation></semantics></math>,<math alttext="u" class="ltx_Math" display="inline" id="alg1.l1.m6.1"><semantics id="alg1.l1.m6.1a"><mi id="alg1.l1.m6.1.1" xref="alg1.l1.m6.1.1.cmml">u</mi><annotation-xml encoding="MathML-Content" id="alg1.l1.m6.1b"><ci id="alg1.l1.m6.1.1.cmml" xref="alg1.l1.m6.1.1">ğ‘¢</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l1.m6.1c">u</annotation><annotation encoding="application/x-llamapun" id="alg1.l1.m6.1d">italic_u</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg1.l2">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l2.1.1.1" style="font-size:80%;">2:</span></span>Â Â Â Â Â Construct initial coarse grid <span class="ltx_text ltx_font_bold" id="alg1.l2.2">C</span>
</div>
<div class="ltx_listingline" id="alg1.l3">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l3.2.1.1" style="font-size:80%;">3:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l3.3">S</span> <math alttext="=Simulate(\textbf{X},\textbf{C})" class="ltx_Math" display="inline" id="alg1.l3.m1.2"><semantics id="alg1.l3.m1.2a"><mrow id="alg1.l3.m1.2.3" xref="alg1.l3.m1.2.3.cmml"><mi id="alg1.l3.m1.2.3.2" xref="alg1.l3.m1.2.3.2.cmml"></mi><mo id="alg1.l3.m1.2.3.1" xref="alg1.l3.m1.2.3.1.cmml">=</mo><mrow id="alg1.l3.m1.2.3.3" xref="alg1.l3.m1.2.3.3.cmml"><mi id="alg1.l3.m1.2.3.3.2" xref="alg1.l3.m1.2.3.3.2.cmml">S</mi><mo id="alg1.l3.m1.2.3.3.1" xref="alg1.l3.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l3.m1.2.3.3.3" xref="alg1.l3.m1.2.3.3.3.cmml">i</mi><mo id="alg1.l3.m1.2.3.3.1a" xref="alg1.l3.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l3.m1.2.3.3.4" xref="alg1.l3.m1.2.3.3.4.cmml">m</mi><mo id="alg1.l3.m1.2.3.3.1b" xref="alg1.l3.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l3.m1.2.3.3.5" xref="alg1.l3.m1.2.3.3.5.cmml">u</mi><mo id="alg1.l3.m1.2.3.3.1c" xref="alg1.l3.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l3.m1.2.3.3.6" xref="alg1.l3.m1.2.3.3.6.cmml">l</mi><mo id="alg1.l3.m1.2.3.3.1d" xref="alg1.l3.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l3.m1.2.3.3.7" xref="alg1.l3.m1.2.3.3.7.cmml">a</mi><mo id="alg1.l3.m1.2.3.3.1e" xref="alg1.l3.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l3.m1.2.3.3.8" xref="alg1.l3.m1.2.3.3.8.cmml">t</mi><mo id="alg1.l3.m1.2.3.3.1f" xref="alg1.l3.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l3.m1.2.3.3.9" xref="alg1.l3.m1.2.3.3.9.cmml">e</mi><mo id="alg1.l3.m1.2.3.3.1g" xref="alg1.l3.m1.2.3.3.1.cmml">â¢</mo><mrow id="alg1.l3.m1.2.3.3.10.2" xref="alg1.l3.m1.2.3.3.10.1.cmml"><mo id="alg1.l3.m1.2.3.3.10.2.1" stretchy="false" xref="alg1.l3.m1.2.3.3.10.1.cmml">(</mo><mtext class="ltx_mathvariant_bold" id="alg1.l3.m1.1.1" xref="alg1.l3.m1.1.1a.cmml">X</mtext><mo id="alg1.l3.m1.2.3.3.10.2.2" xref="alg1.l3.m1.2.3.3.10.1.cmml">,</mo><mtext class="ltx_mathvariant_bold" id="alg1.l3.m1.2.2" xref="alg1.l3.m1.2.2a.cmml">C</mtext><mo id="alg1.l3.m1.2.3.3.10.2.3" stretchy="false" xref="alg1.l3.m1.2.3.3.10.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l3.m1.2b"><apply id="alg1.l3.m1.2.3.cmml" xref="alg1.l3.m1.2.3"><eq id="alg1.l3.m1.2.3.1.cmml" xref="alg1.l3.m1.2.3.1"></eq><csymbol cd="latexml" id="alg1.l3.m1.2.3.2.cmml" xref="alg1.l3.m1.2.3.2">absent</csymbol><apply id="alg1.l3.m1.2.3.3.cmml" xref="alg1.l3.m1.2.3.3"><times id="alg1.l3.m1.2.3.3.1.cmml" xref="alg1.l3.m1.2.3.3.1"></times><ci id="alg1.l3.m1.2.3.3.2.cmml" xref="alg1.l3.m1.2.3.3.2">ğ‘†</ci><ci id="alg1.l3.m1.2.3.3.3.cmml" xref="alg1.l3.m1.2.3.3.3">ğ‘–</ci><ci id="alg1.l3.m1.2.3.3.4.cmml" xref="alg1.l3.m1.2.3.3.4">ğ‘š</ci><ci id="alg1.l3.m1.2.3.3.5.cmml" xref="alg1.l3.m1.2.3.3.5">ğ‘¢</ci><ci id="alg1.l3.m1.2.3.3.6.cmml" xref="alg1.l3.m1.2.3.3.6">ğ‘™</ci><ci id="alg1.l3.m1.2.3.3.7.cmml" xref="alg1.l3.m1.2.3.3.7">ğ‘</ci><ci id="alg1.l3.m1.2.3.3.8.cmml" xref="alg1.l3.m1.2.3.3.8">ğ‘¡</ci><ci id="alg1.l3.m1.2.3.3.9.cmml" xref="alg1.l3.m1.2.3.3.9">ğ‘’</ci><interval closure="open" id="alg1.l3.m1.2.3.3.10.1.cmml" xref="alg1.l3.m1.2.3.3.10.2"><ci id="alg1.l3.m1.1.1a.cmml" xref="alg1.l3.m1.1.1"><mtext class="ltx_mathvariant_bold" id="alg1.l3.m1.1.1.cmml" xref="alg1.l3.m1.1.1">X</mtext></ci><ci id="alg1.l3.m1.2.2a.cmml" xref="alg1.l3.m1.2.2"><mtext class="ltx_mathvariant_bold" id="alg1.l3.m1.2.2.cmml" xref="alg1.l3.m1.2.2">C</mtext></ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.m1.2c">=Simulate(\textbf{X},\textbf{C})</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.m1.2d">= italic_S italic_i italic_m italic_u italic_l italic_a italic_t italic_e ( X , C )</annotation></semantics></math> <span class="ltx_text" id="alg1.l3.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l3.1.m1.1"><semantics id="alg1.l3.1.m1.1a"><mo id="alg1.l3.1.m1.1.1" xref="alg1.l3.1.m1.1.1.cmml">â–·</mo><annotation-xml encoding="MathML-Content" id="alg1.l3.1.m1.1b"><ci id="alg1.l3.1.m1.1.1.cmml" xref="alg1.l3.1.m1.1.1">â–·</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l3.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="alg1.l3.1.m1.1d">â–·</annotation></semantics></math> Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS1" title="A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">A.1</span></a> Algo <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#alg2" title="Algorithm 2 â€£ A.1.1. Artificial User Sessions â€£ A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">2</span></a>
</span>
</div>
<div class="ltx_listingline" id="alg1.l4">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l4.1.1.1" style="font-size:80%;">4:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l4.2">S</span> = top-<math alttext="k" class="ltx_Math" display="inline" id="alg1.l4.m1.1"><semantics id="alg1.l4.m1.1a"><mi id="alg1.l4.m1.1.1" xref="alg1.l4.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="alg1.l4.m1.1b"><ci id="alg1.l4.m1.1.1.cmml" xref="alg1.l4.m1.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m1.1d">italic_k</annotation></semantics></math>(<span class="ltx_text ltx_font_bold" id="alg1.l4.3">S</span>, <math alttext="\mathcal{L}" class="ltx_Math" display="inline" id="alg1.l4.m2.1"><semantics id="alg1.l4.m2.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.l4.m2.1.1" xref="alg1.l4.m2.1.1.cmml">â„’</mi><annotation-xml encoding="MathML-Content" id="alg1.l4.m2.1b"><ci id="alg1.l4.m2.1.1.cmml" xref="alg1.l4.m2.1.1">â„’</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m2.1c">\mathcal{L}</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m2.1d">caligraphic_L</annotation></semantics></math>, <math alttext="k" class="ltx_Math" display="inline" id="alg1.l4.m3.1"><semantics id="alg1.l4.m3.1a"><mi id="alg1.l4.m3.1.1" xref="alg1.l4.m3.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="alg1.l4.m3.1b"><ci id="alg1.l4.m3.1.1.cmml" xref="alg1.l4.m3.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l4.m3.1c">k</annotation><annotation encoding="application/x-llamapun" id="alg1.l4.m3.1d">italic_k</annotation></semantics></math>) 

</div>
<div class="ltx_listingline" id="alg1.l5">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l5.1.1.1" style="font-size:80%;">5:</span></span>Â Â Â Â Â Initialize <math alttext="\textbf{S}^{*}" class="ltx_Math" display="inline" id="alg1.l5.m1.1"><semantics id="alg1.l5.m1.1a"><msup id="alg1.l5.m1.1.1" xref="alg1.l5.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="alg1.l5.m1.1.1.2" xref="alg1.l5.m1.1.1.2a.cmml">S</mtext><mo id="alg1.l5.m1.1.1.3" xref="alg1.l5.m1.1.1.3.cmml">âˆ—</mo></msup><annotation-xml encoding="MathML-Content" id="alg1.l5.m1.1b"><apply id="alg1.l5.m1.1.1.cmml" xref="alg1.l5.m1.1.1"><csymbol cd="ambiguous" id="alg1.l5.m1.1.1.1.cmml" xref="alg1.l5.m1.1.1">superscript</csymbol><ci id="alg1.l5.m1.1.1.2a.cmml" xref="alg1.l5.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="alg1.l5.m1.1.1.2.cmml" xref="alg1.l5.m1.1.1.2">S</mtext></ci><times id="alg1.l5.m1.1.1.3.cmml" xref="alg1.l5.m1.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l5.m1.1c">\textbf{S}^{*}</annotation><annotation encoding="application/x-llamapun" id="alg1.l5.m1.1d">S start_POSTSUPERSCRIPT âˆ— end_POSTSUPERSCRIPT</annotation></semantics></math> with <span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg1.l5.2">S</span>
</div>
<div class="ltx_listingline" id="alg1.l6">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l6.1.1.1" style="font-size:80%;">6:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l6.2">for</span>Â <math alttext="\{1,\ldots,u\}" class="ltx_Math" display="inline" id="alg1.l6.m1.3"><semantics id="alg1.l6.m1.3a"><mrow id="alg1.l6.m1.3.4.2" xref="alg1.l6.m1.3.4.1.cmml"><mo id="alg1.l6.m1.3.4.2.1" stretchy="false" xref="alg1.l6.m1.3.4.1.cmml">{</mo><mn id="alg1.l6.m1.1.1" xref="alg1.l6.m1.1.1.cmml">1</mn><mo id="alg1.l6.m1.3.4.2.2" xref="alg1.l6.m1.3.4.1.cmml">,</mo><mi id="alg1.l6.m1.2.2" mathvariant="normal" xref="alg1.l6.m1.2.2.cmml">â€¦</mi><mo id="alg1.l6.m1.3.4.2.3" xref="alg1.l6.m1.3.4.1.cmml">,</mo><mi id="alg1.l6.m1.3.3" xref="alg1.l6.m1.3.3.cmml">u</mi><mo id="alg1.l6.m1.3.4.2.4" stretchy="false" xref="alg1.l6.m1.3.4.1.cmml">}</mo></mrow><annotation-xml encoding="MathML-Content" id="alg1.l6.m1.3b"><set id="alg1.l6.m1.3.4.1.cmml" xref="alg1.l6.m1.3.4.2"><cn id="alg1.l6.m1.1.1.cmml" type="integer" xref="alg1.l6.m1.1.1">1</cn><ci id="alg1.l6.m1.2.2.cmml" xref="alg1.l6.m1.2.2">â€¦</ci><ci id="alg1.l6.m1.3.3.cmml" xref="alg1.l6.m1.3.3">ğ‘¢</ci></set></annotation-xml><annotation encoding="application/x-tex" id="alg1.l6.m1.3c">\{1,\ldots,u\}</annotation><annotation encoding="application/x-llamapun" id="alg1.l6.m1.3d">{ 1 , â€¦ , italic_u }</annotation></semantics></math>Â <span class="ltx_text ltx_font_bold" id="alg1.l6.3">do</span>
</div>
<div class="ltx_listingline" id="alg1.l7">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l7.1.1.1" style="font-size:80%;">7:</span></span>Â Â Â Â Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l7.2">for</span>Â <math alttext="[\hat{X}_{i},r_{i}]_{i=1}^{k}" class="ltx_Math" display="inline" id="alg1.l7.m1.2"><semantics id="alg1.l7.m1.2a"><msubsup id="alg1.l7.m1.2.2" xref="alg1.l7.m1.2.2.cmml"><mrow id="alg1.l7.m1.2.2.2.2.2" xref="alg1.l7.m1.2.2.2.2.3.cmml"><mo id="alg1.l7.m1.2.2.2.2.2.3" stretchy="false" xref="alg1.l7.m1.2.2.2.2.3.cmml">[</mo><msub id="alg1.l7.m1.1.1.1.1.1.1" xref="alg1.l7.m1.1.1.1.1.1.1.cmml"><mover accent="true" id="alg1.l7.m1.1.1.1.1.1.1.2" xref="alg1.l7.m1.1.1.1.1.1.1.2.cmml"><mi id="alg1.l7.m1.1.1.1.1.1.1.2.2" xref="alg1.l7.m1.1.1.1.1.1.1.2.2.cmml">X</mi><mo id="alg1.l7.m1.1.1.1.1.1.1.2.1" xref="alg1.l7.m1.1.1.1.1.1.1.2.1.cmml">^</mo></mover><mi id="alg1.l7.m1.1.1.1.1.1.1.3" xref="alg1.l7.m1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l7.m1.2.2.2.2.2.4" xref="alg1.l7.m1.2.2.2.2.3.cmml">,</mo><msub id="alg1.l7.m1.2.2.2.2.2.2" xref="alg1.l7.m1.2.2.2.2.2.2.cmml"><mi id="alg1.l7.m1.2.2.2.2.2.2.2" xref="alg1.l7.m1.2.2.2.2.2.2.2.cmml">r</mi><mi id="alg1.l7.m1.2.2.2.2.2.2.3" xref="alg1.l7.m1.2.2.2.2.2.2.3.cmml">i</mi></msub><mo id="alg1.l7.m1.2.2.2.2.2.5" stretchy="false" xref="alg1.l7.m1.2.2.2.2.3.cmml">]</mo></mrow><mrow id="alg1.l7.m1.2.2.2.4" xref="alg1.l7.m1.2.2.2.4.cmml"><mi id="alg1.l7.m1.2.2.2.4.2" xref="alg1.l7.m1.2.2.2.4.2.cmml">i</mi><mo id="alg1.l7.m1.2.2.2.4.1" xref="alg1.l7.m1.2.2.2.4.1.cmml">=</mo><mn id="alg1.l7.m1.2.2.2.4.3" xref="alg1.l7.m1.2.2.2.4.3.cmml">1</mn></mrow><mi id="alg1.l7.m1.2.2.4" xref="alg1.l7.m1.2.2.4.cmml">k</mi></msubsup><annotation-xml encoding="MathML-Content" id="alg1.l7.m1.2b"><apply id="alg1.l7.m1.2.2.cmml" xref="alg1.l7.m1.2.2"><csymbol cd="ambiguous" id="alg1.l7.m1.2.2.3.cmml" xref="alg1.l7.m1.2.2">superscript</csymbol><apply id="alg1.l7.m1.2.2.2.cmml" xref="alg1.l7.m1.2.2"><csymbol cd="ambiguous" id="alg1.l7.m1.2.2.2.3.cmml" xref="alg1.l7.m1.2.2">subscript</csymbol><interval closure="closed" id="alg1.l7.m1.2.2.2.2.3.cmml" xref="alg1.l7.m1.2.2.2.2.2"><apply id="alg1.l7.m1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l7.m1.1.1.1.1.1.1.1.cmml" xref="alg1.l7.m1.1.1.1.1.1.1">subscript</csymbol><apply id="alg1.l7.m1.1.1.1.1.1.1.2.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.2"><ci id="alg1.l7.m1.1.1.1.1.1.1.2.1.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.2.1">^</ci><ci id="alg1.l7.m1.1.1.1.1.1.1.2.2.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.2.2">ğ‘‹</ci></apply><ci id="alg1.l7.m1.1.1.1.1.1.1.3.cmml" xref="alg1.l7.m1.1.1.1.1.1.1.3">ğ‘–</ci></apply><apply id="alg1.l7.m1.2.2.2.2.2.2.cmml" xref="alg1.l7.m1.2.2.2.2.2.2"><csymbol cd="ambiguous" id="alg1.l7.m1.2.2.2.2.2.2.1.cmml" xref="alg1.l7.m1.2.2.2.2.2.2">subscript</csymbol><ci id="alg1.l7.m1.2.2.2.2.2.2.2.cmml" xref="alg1.l7.m1.2.2.2.2.2.2.2">ğ‘Ÿ</ci><ci id="alg1.l7.m1.2.2.2.2.2.2.3.cmml" xref="alg1.l7.m1.2.2.2.2.2.2.3">ğ‘–</ci></apply></interval><apply id="alg1.l7.m1.2.2.2.4.cmml" xref="alg1.l7.m1.2.2.2.4"><eq id="alg1.l7.m1.2.2.2.4.1.cmml" xref="alg1.l7.m1.2.2.2.4.1"></eq><ci id="alg1.l7.m1.2.2.2.4.2.cmml" xref="alg1.l7.m1.2.2.2.4.2">ğ‘–</ci><cn id="alg1.l7.m1.2.2.2.4.3.cmml" type="integer" xref="alg1.l7.m1.2.2.2.4.3">1</cn></apply></apply><ci id="alg1.l7.m1.2.2.4.cmml" xref="alg1.l7.m1.2.2.4">ğ‘˜</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l7.m1.2c">[\hat{X}_{i},r_{i}]_{i=1}^{k}</annotation><annotation encoding="application/x-llamapun" id="alg1.l7.m1.2d">[ over^ start_ARG italic_X end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_r start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ] start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_k end_POSTSUPERSCRIPT</annotation></semantics></math> in <span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg1.l7.3">S</span>Â <span class="ltx_text ltx_font_bold" id="alg1.l7.4">do</span>
</div>
<div class="ltx_listingline" id="alg1.l8">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l8.2.1.1" style="font-size:80%;">8:</span></span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â <math alttext="\textbf{S}_{i}=ISArt(\hat{X}_{i},i)" class="ltx_Math" display="inline" id="alg1.l8.m1.2"><semantics id="alg1.l8.m1.2a"><mrow id="alg1.l8.m1.2.2" xref="alg1.l8.m1.2.2.cmml"><msub id="alg1.l8.m1.2.2.3" xref="alg1.l8.m1.2.2.3.cmml"><mtext class="ltx_mathvariant_bold" id="alg1.l8.m1.2.2.3.2" xref="alg1.l8.m1.2.2.3.2a.cmml">S</mtext><mi id="alg1.l8.m1.2.2.3.3" xref="alg1.l8.m1.2.2.3.3.cmml">i</mi></msub><mo id="alg1.l8.m1.2.2.2" xref="alg1.l8.m1.2.2.2.cmml">=</mo><mrow id="alg1.l8.m1.2.2.1" xref="alg1.l8.m1.2.2.1.cmml"><mi id="alg1.l8.m1.2.2.1.3" xref="alg1.l8.m1.2.2.1.3.cmml">I</mi><mo id="alg1.l8.m1.2.2.1.2" xref="alg1.l8.m1.2.2.1.2.cmml">â¢</mo><mi id="alg1.l8.m1.2.2.1.4" xref="alg1.l8.m1.2.2.1.4.cmml">S</mi><mo id="alg1.l8.m1.2.2.1.2a" xref="alg1.l8.m1.2.2.1.2.cmml">â¢</mo><mi id="alg1.l8.m1.2.2.1.5" xref="alg1.l8.m1.2.2.1.5.cmml">A</mi><mo id="alg1.l8.m1.2.2.1.2b" xref="alg1.l8.m1.2.2.1.2.cmml">â¢</mo><mi id="alg1.l8.m1.2.2.1.6" xref="alg1.l8.m1.2.2.1.6.cmml">r</mi><mo id="alg1.l8.m1.2.2.1.2c" xref="alg1.l8.m1.2.2.1.2.cmml">â¢</mo><mi id="alg1.l8.m1.2.2.1.7" xref="alg1.l8.m1.2.2.1.7.cmml">t</mi><mo id="alg1.l8.m1.2.2.1.2d" xref="alg1.l8.m1.2.2.1.2.cmml">â¢</mo><mrow id="alg1.l8.m1.2.2.1.1.1" xref="alg1.l8.m1.2.2.1.1.2.cmml"><mo id="alg1.l8.m1.2.2.1.1.1.2" stretchy="false" xref="alg1.l8.m1.2.2.1.1.2.cmml">(</mo><msub id="alg1.l8.m1.2.2.1.1.1.1" xref="alg1.l8.m1.2.2.1.1.1.1.cmml"><mover accent="true" id="alg1.l8.m1.2.2.1.1.1.1.2" xref="alg1.l8.m1.2.2.1.1.1.1.2.cmml"><mi id="alg1.l8.m1.2.2.1.1.1.1.2.2" xref="alg1.l8.m1.2.2.1.1.1.1.2.2.cmml">X</mi><mo id="alg1.l8.m1.2.2.1.1.1.1.2.1" xref="alg1.l8.m1.2.2.1.1.1.1.2.1.cmml">^</mo></mover><mi id="alg1.l8.m1.2.2.1.1.1.1.3" xref="alg1.l8.m1.2.2.1.1.1.1.3.cmml">i</mi></msub><mo id="alg1.l8.m1.2.2.1.1.1.3" xref="alg1.l8.m1.2.2.1.1.2.cmml">,</mo><mi id="alg1.l8.m1.1.1" xref="alg1.l8.m1.1.1.cmml">i</mi><mo id="alg1.l8.m1.2.2.1.1.1.4" stretchy="false" xref="alg1.l8.m1.2.2.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l8.m1.2b"><apply id="alg1.l8.m1.2.2.cmml" xref="alg1.l8.m1.2.2"><eq id="alg1.l8.m1.2.2.2.cmml" xref="alg1.l8.m1.2.2.2"></eq><apply id="alg1.l8.m1.2.2.3.cmml" xref="alg1.l8.m1.2.2.3"><csymbol cd="ambiguous" id="alg1.l8.m1.2.2.3.1.cmml" xref="alg1.l8.m1.2.2.3">subscript</csymbol><ci id="alg1.l8.m1.2.2.3.2a.cmml" xref="alg1.l8.m1.2.2.3.2"><mtext class="ltx_mathvariant_bold" id="alg1.l8.m1.2.2.3.2.cmml" xref="alg1.l8.m1.2.2.3.2">S</mtext></ci><ci id="alg1.l8.m1.2.2.3.3.cmml" xref="alg1.l8.m1.2.2.3.3">ğ‘–</ci></apply><apply id="alg1.l8.m1.2.2.1.cmml" xref="alg1.l8.m1.2.2.1"><times id="alg1.l8.m1.2.2.1.2.cmml" xref="alg1.l8.m1.2.2.1.2"></times><ci id="alg1.l8.m1.2.2.1.3.cmml" xref="alg1.l8.m1.2.2.1.3">ğ¼</ci><ci id="alg1.l8.m1.2.2.1.4.cmml" xref="alg1.l8.m1.2.2.1.4">ğ‘†</ci><ci id="alg1.l8.m1.2.2.1.5.cmml" xref="alg1.l8.m1.2.2.1.5">ğ´</ci><ci id="alg1.l8.m1.2.2.1.6.cmml" xref="alg1.l8.m1.2.2.1.6">ğ‘Ÿ</ci><ci id="alg1.l8.m1.2.2.1.7.cmml" xref="alg1.l8.m1.2.2.1.7">ğ‘¡</ci><interval closure="open" id="alg1.l8.m1.2.2.1.1.2.cmml" xref="alg1.l8.m1.2.2.1.1.1"><apply id="alg1.l8.m1.2.2.1.1.1.1.cmml" xref="alg1.l8.m1.2.2.1.1.1.1"><csymbol cd="ambiguous" id="alg1.l8.m1.2.2.1.1.1.1.1.cmml" xref="alg1.l8.m1.2.2.1.1.1.1">subscript</csymbol><apply id="alg1.l8.m1.2.2.1.1.1.1.2.cmml" xref="alg1.l8.m1.2.2.1.1.1.1.2"><ci id="alg1.l8.m1.2.2.1.1.1.1.2.1.cmml" xref="alg1.l8.m1.2.2.1.1.1.1.2.1">^</ci><ci id="alg1.l8.m1.2.2.1.1.1.1.2.2.cmml" xref="alg1.l8.m1.2.2.1.1.1.1.2.2">ğ‘‹</ci></apply><ci id="alg1.l8.m1.2.2.1.1.1.1.3.cmml" xref="alg1.l8.m1.2.2.1.1.1.1.3">ğ‘–</ci></apply><ci id="alg1.l8.m1.1.1.cmml" xref="alg1.l8.m1.1.1">ğ‘–</ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.m1.2c">\textbf{S}_{i}=ISArt(\hat{X}_{i},i)</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.m1.2d">S start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT = italic_I italic_S italic_A italic_r italic_t ( over^ start_ARG italic_X end_ARG start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_i )</annotation></semantics></math> <span class="ltx_text" id="alg1.l8.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="alg1.l8.1.m1.1"><semantics id="alg1.l8.1.m1.1a"><mo id="alg1.l8.1.m1.1.1" xref="alg1.l8.1.m1.1.1.cmml">â–·</mo><annotation-xml encoding="MathML-Content" id="alg1.l8.1.m1.1b"><ci id="alg1.l8.1.m1.1.1.cmml" xref="alg1.l8.1.m1.1.1">â–·</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l8.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="alg1.l8.1.m1.1d">â–·</annotation></semantics></math> Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS2" title="A.2. Importance Sampling â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">A.2</span></a> Algo <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#alg3" title="Algorithm 3 â€£ A.2. Importance Sampling â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">3</span></a>
</span>
</div>
<div class="ltx_listingline" id="alg1.l9">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l9.1.1.1" style="font-size:80%;">9:</span></span>Â Â Â Â Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l9.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg1.l9.3">for</span>
</div>
<div class="ltx_listingline" id="alg1.l10">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l10.1.1.1" style="font-size:80%;">10:</span></span>Â Â Â Â Â Â Â Â Â <math alttext="\textbf{S}=\bigcup_{i}\textbf{S}_{i}" class="ltx_Math" display="inline" id="alg1.l10.m1.1"><semantics id="alg1.l10.m1.1a"><mrow id="alg1.l10.m1.1.1" xref="alg1.l10.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="alg1.l10.m1.1.1.2" xref="alg1.l10.m1.1.1.2a.cmml">S</mtext><mo id="alg1.l10.m1.1.1.1" rspace="0.111em" xref="alg1.l10.m1.1.1.1.cmml">=</mo><mrow id="alg1.l10.m1.1.1.3" xref="alg1.l10.m1.1.1.3.cmml"><msub id="alg1.l10.m1.1.1.3.1" xref="alg1.l10.m1.1.1.3.1.cmml"><mo id="alg1.l10.m1.1.1.3.1.2" xref="alg1.l10.m1.1.1.3.1.2.cmml">â‹ƒ</mo><mi id="alg1.l10.m1.1.1.3.1.3" xref="alg1.l10.m1.1.1.3.1.3.cmml">i</mi></msub><msub id="alg1.l10.m1.1.1.3.2" xref="alg1.l10.m1.1.1.3.2.cmml"><mtext class="ltx_mathvariant_bold" id="alg1.l10.m1.1.1.3.2.2" xref="alg1.l10.m1.1.1.3.2.2a.cmml">S</mtext><mi id="alg1.l10.m1.1.1.3.2.3" xref="alg1.l10.m1.1.1.3.2.3.cmml">i</mi></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l10.m1.1b"><apply id="alg1.l10.m1.1.1.cmml" xref="alg1.l10.m1.1.1"><eq id="alg1.l10.m1.1.1.1.cmml" xref="alg1.l10.m1.1.1.1"></eq><ci id="alg1.l10.m1.1.1.2a.cmml" xref="alg1.l10.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="alg1.l10.m1.1.1.2.cmml" xref="alg1.l10.m1.1.1.2">S</mtext></ci><apply id="alg1.l10.m1.1.1.3.cmml" xref="alg1.l10.m1.1.1.3"><apply id="alg1.l10.m1.1.1.3.1.cmml" xref="alg1.l10.m1.1.1.3.1"><csymbol cd="ambiguous" id="alg1.l10.m1.1.1.3.1.1.cmml" xref="alg1.l10.m1.1.1.3.1">subscript</csymbol><union id="alg1.l10.m1.1.1.3.1.2.cmml" xref="alg1.l10.m1.1.1.3.1.2"></union><ci id="alg1.l10.m1.1.1.3.1.3.cmml" xref="alg1.l10.m1.1.1.3.1.3">ğ‘–</ci></apply><apply id="alg1.l10.m1.1.1.3.2.cmml" xref="alg1.l10.m1.1.1.3.2"><csymbol cd="ambiguous" id="alg1.l10.m1.1.1.3.2.1.cmml" xref="alg1.l10.m1.1.1.3.2">subscript</csymbol><ci id="alg1.l10.m1.1.1.3.2.2a.cmml" xref="alg1.l10.m1.1.1.3.2.2"><mtext class="ltx_mathvariant_bold" id="alg1.l10.m1.1.1.3.2.2.cmml" xref="alg1.l10.m1.1.1.3.2.2">S</mtext></ci><ci id="alg1.l10.m1.1.1.3.2.3.cmml" xref="alg1.l10.m1.1.1.3.2.3">ğ‘–</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l10.m1.1c">\textbf{S}=\bigcup_{i}\textbf{S}_{i}</annotation><annotation encoding="application/x-llamapun" id="alg1.l10.m1.1d">S = â‹ƒ start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT S start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l11">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l11.1.1.1" style="font-size:80%;">11:</span></span>Â Â Â Â Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l11.2">S</span> = top-<math alttext="k" class="ltx_Math" display="inline" id="alg1.l11.m1.1"><semantics id="alg1.l11.m1.1a"><mi id="alg1.l11.m1.1.1" xref="alg1.l11.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="alg1.l11.m1.1b"><ci id="alg1.l11.m1.1.1.cmml" xref="alg1.l11.m1.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m1.1c">k</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m1.1d">italic_k</annotation></semantics></math>(<span class="ltx_text ltx_font_bold" id="alg1.l11.3">S</span>, <math alttext="\mathcal{L}" class="ltx_Math" display="inline" id="alg1.l11.m2.1"><semantics id="alg1.l11.m2.1a"><mi class="ltx_font_mathcaligraphic" id="alg1.l11.m2.1.1" xref="alg1.l11.m2.1.1.cmml">â„’</mi><annotation-xml encoding="MathML-Content" id="alg1.l11.m2.1b"><ci id="alg1.l11.m2.1.1.cmml" xref="alg1.l11.m2.1.1">â„’</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m2.1c">\mathcal{L}</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m2.1d">caligraphic_L</annotation></semantics></math>, <math alttext="k" class="ltx_Math" display="inline" id="alg1.l11.m3.1"><semantics id="alg1.l11.m3.1a"><mi id="alg1.l11.m3.1.1" xref="alg1.l11.m3.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="alg1.l11.m3.1b"><ci id="alg1.l11.m3.1.1.cmml" xref="alg1.l11.m3.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l11.m3.1c">k</annotation><annotation encoding="application/x-llamapun" id="alg1.l11.m3.1d">italic_k</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg1.l12">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l12.1.1.1" style="font-size:80%;">12:</span></span>Â Â Â Â Â Â Â Â Â Update <math alttext="\textbf{S}^{*}" class="ltx_Math" display="inline" id="alg1.l12.m1.1"><semantics id="alg1.l12.m1.1a"><msup id="alg1.l12.m1.1.1" xref="alg1.l12.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="alg1.l12.m1.1.1.2" xref="alg1.l12.m1.1.1.2a.cmml">S</mtext><mo id="alg1.l12.m1.1.1.3" xref="alg1.l12.m1.1.1.3.cmml">âˆ—</mo></msup><annotation-xml encoding="MathML-Content" id="alg1.l12.m1.1b"><apply id="alg1.l12.m1.1.1.cmml" xref="alg1.l12.m1.1.1"><csymbol cd="ambiguous" id="alg1.l12.m1.1.1.1.cmml" xref="alg1.l12.m1.1.1">superscript</csymbol><ci id="alg1.l12.m1.1.1.2a.cmml" xref="alg1.l12.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="alg1.l12.m1.1.1.2.cmml" xref="alg1.l12.m1.1.1.2">S</mtext></ci><times id="alg1.l12.m1.1.1.3.cmml" xref="alg1.l12.m1.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l12.m1.1c">\textbf{S}^{*}</annotation><annotation encoding="application/x-llamapun" id="alg1.l12.m1.1d">S start_POSTSUPERSCRIPT âˆ— end_POSTSUPERSCRIPT</annotation></semantics></math> with top-<math alttext="k" class="ltx_Math" display="inline" id="alg1.l12.m2.1"><semantics id="alg1.l12.m2.1a"><mi id="alg1.l12.m2.1.1" xref="alg1.l12.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="alg1.l12.m2.1b"><ci id="alg1.l12.m2.1.1.cmml" xref="alg1.l12.m2.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="alg1.l12.m2.1c">k</annotation><annotation encoding="application/x-llamapun" id="alg1.l12.m2.1d">italic_k</annotation></semantics></math> solutions found so far.

</div>
<div class="ltx_listingline" id="alg1.l13">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l13.1.1.1" style="font-size:80%;">13:</span></span>Â Â Â Â Â Â Â Â Â Construct a grid <span class="ltx_text ltx_font_bold" id="alg1.l13.2">C</span> with settings in <span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg1.l13.3">S</span>
</div>
<div class="ltx_listingline" id="alg1.l14">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l14.1.1.1" style="font-size:80%;">14:</span></span>Â Â Â Â Â Â Â Â Â <math alttext="\textbf{S}=Simulate(\textbf{X},\textbf{C})" class="ltx_Math" display="inline" id="alg1.l14.m1.2"><semantics id="alg1.l14.m1.2a"><mrow id="alg1.l14.m1.2.3" xref="alg1.l14.m1.2.3.cmml"><mtext class="ltx_mathvariant_bold" id="alg1.l14.m1.2.3.2" xref="alg1.l14.m1.2.3.2a.cmml">S</mtext><mo id="alg1.l14.m1.2.3.1" xref="alg1.l14.m1.2.3.1.cmml">=</mo><mrow id="alg1.l14.m1.2.3.3" xref="alg1.l14.m1.2.3.3.cmml"><mi id="alg1.l14.m1.2.3.3.2" xref="alg1.l14.m1.2.3.3.2.cmml">S</mi><mo id="alg1.l14.m1.2.3.3.1" xref="alg1.l14.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l14.m1.2.3.3.3" xref="alg1.l14.m1.2.3.3.3.cmml">i</mi><mo id="alg1.l14.m1.2.3.3.1a" xref="alg1.l14.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l14.m1.2.3.3.4" xref="alg1.l14.m1.2.3.3.4.cmml">m</mi><mo id="alg1.l14.m1.2.3.3.1b" xref="alg1.l14.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l14.m1.2.3.3.5" xref="alg1.l14.m1.2.3.3.5.cmml">u</mi><mo id="alg1.l14.m1.2.3.3.1c" xref="alg1.l14.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l14.m1.2.3.3.6" xref="alg1.l14.m1.2.3.3.6.cmml">l</mi><mo id="alg1.l14.m1.2.3.3.1d" xref="alg1.l14.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l14.m1.2.3.3.7" xref="alg1.l14.m1.2.3.3.7.cmml">a</mi><mo id="alg1.l14.m1.2.3.3.1e" xref="alg1.l14.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l14.m1.2.3.3.8" xref="alg1.l14.m1.2.3.3.8.cmml">t</mi><mo id="alg1.l14.m1.2.3.3.1f" xref="alg1.l14.m1.2.3.3.1.cmml">â¢</mo><mi id="alg1.l14.m1.2.3.3.9" xref="alg1.l14.m1.2.3.3.9.cmml">e</mi><mo id="alg1.l14.m1.2.3.3.1g" xref="alg1.l14.m1.2.3.3.1.cmml">â¢</mo><mrow id="alg1.l14.m1.2.3.3.10.2" xref="alg1.l14.m1.2.3.3.10.1.cmml"><mo id="alg1.l14.m1.2.3.3.10.2.1" stretchy="false" xref="alg1.l14.m1.2.3.3.10.1.cmml">(</mo><mtext class="ltx_mathvariant_bold" id="alg1.l14.m1.1.1" xref="alg1.l14.m1.1.1a.cmml">X</mtext><mo id="alg1.l14.m1.2.3.3.10.2.2" xref="alg1.l14.m1.2.3.3.10.1.cmml">,</mo><mtext class="ltx_mathvariant_bold" id="alg1.l14.m1.2.2" xref="alg1.l14.m1.2.2a.cmml">C</mtext><mo id="alg1.l14.m1.2.3.3.10.2.3" stretchy="false" xref="alg1.l14.m1.2.3.3.10.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg1.l14.m1.2b"><apply id="alg1.l14.m1.2.3.cmml" xref="alg1.l14.m1.2.3"><eq id="alg1.l14.m1.2.3.1.cmml" xref="alg1.l14.m1.2.3.1"></eq><ci id="alg1.l14.m1.2.3.2a.cmml" xref="alg1.l14.m1.2.3.2"><mtext class="ltx_mathvariant_bold" id="alg1.l14.m1.2.3.2.cmml" xref="alg1.l14.m1.2.3.2">S</mtext></ci><apply id="alg1.l14.m1.2.3.3.cmml" xref="alg1.l14.m1.2.3.3"><times id="alg1.l14.m1.2.3.3.1.cmml" xref="alg1.l14.m1.2.3.3.1"></times><ci id="alg1.l14.m1.2.3.3.2.cmml" xref="alg1.l14.m1.2.3.3.2">ğ‘†</ci><ci id="alg1.l14.m1.2.3.3.3.cmml" xref="alg1.l14.m1.2.3.3.3">ğ‘–</ci><ci id="alg1.l14.m1.2.3.3.4.cmml" xref="alg1.l14.m1.2.3.3.4">ğ‘š</ci><ci id="alg1.l14.m1.2.3.3.5.cmml" xref="alg1.l14.m1.2.3.3.5">ğ‘¢</ci><ci id="alg1.l14.m1.2.3.3.6.cmml" xref="alg1.l14.m1.2.3.3.6">ğ‘™</ci><ci id="alg1.l14.m1.2.3.3.7.cmml" xref="alg1.l14.m1.2.3.3.7">ğ‘</ci><ci id="alg1.l14.m1.2.3.3.8.cmml" xref="alg1.l14.m1.2.3.3.8">ğ‘¡</ci><ci id="alg1.l14.m1.2.3.3.9.cmml" xref="alg1.l14.m1.2.3.3.9">ğ‘’</ci><interval closure="open" id="alg1.l14.m1.2.3.3.10.1.cmml" xref="alg1.l14.m1.2.3.3.10.2"><ci id="alg1.l14.m1.1.1a.cmml" xref="alg1.l14.m1.1.1"><mtext class="ltx_mathvariant_bold" id="alg1.l14.m1.1.1.cmml" xref="alg1.l14.m1.1.1">X</mtext></ci><ci id="alg1.l14.m1.2.2a.cmml" xref="alg1.l14.m1.2.2"><mtext class="ltx_mathvariant_bold" id="alg1.l14.m1.2.2.cmml" xref="alg1.l14.m1.2.2">C</mtext></ci></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l14.m1.2c">\textbf{S}=Simulate(\textbf{X},\textbf{C})</annotation><annotation encoding="application/x-llamapun" id="alg1.l14.m1.2d">S = italic_S italic_i italic_m italic_u italic_l italic_a italic_t italic_e ( X , C )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l15">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l15.1.1.1" style="font-size:80%;">15:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l15.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg1.l15.3">for</span>
</div>
<div class="ltx_listingline" id="alg1.l16">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l16.1.1.1" style="font-size:80%;">16:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg1.l16.2">return</span> <math alttext="\textbf{S}^{*}" class="ltx_Math" display="inline" id="alg1.l16.m1.1"><semantics id="alg1.l16.m1.1a"><msup id="alg1.l16.m1.1.1" xref="alg1.l16.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="alg1.l16.m1.1.1.2" xref="alg1.l16.m1.1.1.2a.cmml">S</mtext><mo id="alg1.l16.m1.1.1.3" xref="alg1.l16.m1.1.1.3.cmml">âˆ—</mo></msup><annotation-xml encoding="MathML-Content" id="alg1.l16.m1.1b"><apply id="alg1.l16.m1.1.1.cmml" xref="alg1.l16.m1.1.1"><csymbol cd="ambiguous" id="alg1.l16.m1.1.1.1.cmml" xref="alg1.l16.m1.1.1">superscript</csymbol><ci id="alg1.l16.m1.1.1.2a.cmml" xref="alg1.l16.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="alg1.l16.m1.1.1.2.cmml" xref="alg1.l16.m1.1.1.2">S</mtext></ci><times id="alg1.l16.m1.1.1.3.cmml" xref="alg1.l16.m1.1.1.3"></times></apply></annotation-xml><annotation encoding="application/x-tex" id="alg1.l16.m1.1c">\textbf{S}^{*}</annotation><annotation encoding="application/x-llamapun" id="alg1.l16.m1.1d">S start_POSTSUPERSCRIPT âˆ— end_POSTSUPERSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg1.l17">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg1.l17.1.1.1" style="font-size:80%;">17:</span></span><span class="ltx_text ltx_font_bold" id="alg1.l17.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg1.l17.3">procedure</span>
</div>
</div>
</figure>
<figure class="ltx_figure" id="S2.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="354" id="S2.F1.g1" src="extracted/5874277/simipsdemo.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1. </span>SGIS example in 2-d</figcaption>
</figure>
<div class="ltx_para" id="S2.p3">
<p class="ltx_p" id="S2.p3.1">Fig. <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S2.F1" title="Figure 1 â€£ 2. Method â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">1</span></a> demonstrates SGIS with a simple example with two parameters.
The red dots are part of coarse grid evaluated by the simulator, where the blue dot denotes the initial parameter setting.
Let the green dot be the optimal setting in this space, it is possible that the coarse grid will miss this point and will settle with a suboptimal setting.
If we apply IS estimator search with randomization at the initial setting, it will be restricted to the blue region and will need multiple iterations to reach optimal policy (and require collecting randomization data at each iteration).
If the global optimal point is within the range of randomization applied when collecting artificial user session data from simulator, SGIS search with artificial user sessions can reach the optimal point.
So, our proposed approach only requires that the optimal setting is within the randomization range of at least one of the coarse grid points.
In AppendixÂ <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A2.SS2" title="B.2. Number Of Iterations for IS Search â€£ Appendix B Hyperparameter Considerations â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">B.2</span></a> we discuss the hyper-parameters and trade-offs of our proposal (the coarseness of the grid for enumerative search via eq.Â <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S1.E1" title="In 1. Introduction â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">1</span></a> vs. the number of iterations for SGIS search.</p>
</div>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3. </span>Experiments and Results</h2>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.3">For a real-world ad recommendation system, we consider <math alttext="m=3,c=15,d=25,k=5" class="ltx_Math" display="inline" id="S3.p1.1.m1.2"><semantics id="S3.p1.1.m1.2a"><mrow id="S3.p1.1.m1.2.2.2" xref="S3.p1.1.m1.2.2.3.cmml"><mrow id="S3.p1.1.m1.1.1.1.1" xref="S3.p1.1.m1.1.1.1.1.cmml"><mi id="S3.p1.1.m1.1.1.1.1.2" xref="S3.p1.1.m1.1.1.1.1.2.cmml">m</mi><mo id="S3.p1.1.m1.1.1.1.1.1" xref="S3.p1.1.m1.1.1.1.1.1.cmml">=</mo><mn id="S3.p1.1.m1.1.1.1.1.3" xref="S3.p1.1.m1.1.1.1.1.3.cmml">3</mn></mrow><mo id="S3.p1.1.m1.2.2.2.3" xref="S3.p1.1.m1.2.2.3a.cmml">,</mo><mrow id="S3.p1.1.m1.2.2.2.2.2" xref="S3.p1.1.m1.2.2.2.2.3.cmml"><mrow id="S3.p1.1.m1.2.2.2.2.1.1" xref="S3.p1.1.m1.2.2.2.2.1.1.cmml"><mi id="S3.p1.1.m1.2.2.2.2.1.1.2" xref="S3.p1.1.m1.2.2.2.2.1.1.2.cmml">c</mi><mo id="S3.p1.1.m1.2.2.2.2.1.1.1" xref="S3.p1.1.m1.2.2.2.2.1.1.1.cmml">=</mo><mn id="S3.p1.1.m1.2.2.2.2.1.1.3" xref="S3.p1.1.m1.2.2.2.2.1.1.3.cmml">15</mn></mrow><mo id="S3.p1.1.m1.2.2.2.2.2.3" xref="S3.p1.1.m1.2.2.2.2.3a.cmml">,</mo><mrow id="S3.p1.1.m1.2.2.2.2.2.2.2" xref="S3.p1.1.m1.2.2.2.2.2.2.3.cmml"><mrow id="S3.p1.1.m1.2.2.2.2.2.2.1.1" xref="S3.p1.1.m1.2.2.2.2.2.2.1.1.cmml"><mi id="S3.p1.1.m1.2.2.2.2.2.2.1.1.2" xref="S3.p1.1.m1.2.2.2.2.2.2.1.1.2.cmml">d</mi><mo id="S3.p1.1.m1.2.2.2.2.2.2.1.1.1" xref="S3.p1.1.m1.2.2.2.2.2.2.1.1.1.cmml">=</mo><mn id="S3.p1.1.m1.2.2.2.2.2.2.1.1.3" xref="S3.p1.1.m1.2.2.2.2.2.2.1.1.3.cmml">25</mn></mrow><mo id="S3.p1.1.m1.2.2.2.2.2.2.2.3" xref="S3.p1.1.m1.2.2.2.2.2.2.3a.cmml">,</mo><mrow id="S3.p1.1.m1.2.2.2.2.2.2.2.2" xref="S3.p1.1.m1.2.2.2.2.2.2.2.2.cmml"><mi id="S3.p1.1.m1.2.2.2.2.2.2.2.2.2" xref="S3.p1.1.m1.2.2.2.2.2.2.2.2.2.cmml">k</mi><mo id="S3.p1.1.m1.2.2.2.2.2.2.2.2.1" xref="S3.p1.1.m1.2.2.2.2.2.2.2.2.1.cmml">=</mo><mn id="S3.p1.1.m1.2.2.2.2.2.2.2.2.3" xref="S3.p1.1.m1.2.2.2.2.2.2.2.2.3.cmml">5</mn></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.1.m1.2b"><apply id="S3.p1.1.m1.2.2.3.cmml" xref="S3.p1.1.m1.2.2.2"><csymbol cd="ambiguous" id="S3.p1.1.m1.2.2.3a.cmml" xref="S3.p1.1.m1.2.2.2.3">formulae-sequence</csymbol><apply id="S3.p1.1.m1.1.1.1.1.cmml" xref="S3.p1.1.m1.1.1.1.1"><eq id="S3.p1.1.m1.1.1.1.1.1.cmml" xref="S3.p1.1.m1.1.1.1.1.1"></eq><ci id="S3.p1.1.m1.1.1.1.1.2.cmml" xref="S3.p1.1.m1.1.1.1.1.2">ğ‘š</ci><cn id="S3.p1.1.m1.1.1.1.1.3.cmml" type="integer" xref="S3.p1.1.m1.1.1.1.1.3">3</cn></apply><apply id="S3.p1.1.m1.2.2.2.2.3.cmml" xref="S3.p1.1.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.p1.1.m1.2.2.2.2.3a.cmml" xref="S3.p1.1.m1.2.2.2.2.2.3">formulae-sequence</csymbol><apply id="S3.p1.1.m1.2.2.2.2.1.1.cmml" xref="S3.p1.1.m1.2.2.2.2.1.1"><eq id="S3.p1.1.m1.2.2.2.2.1.1.1.cmml" xref="S3.p1.1.m1.2.2.2.2.1.1.1"></eq><ci id="S3.p1.1.m1.2.2.2.2.1.1.2.cmml" xref="S3.p1.1.m1.2.2.2.2.1.1.2">ğ‘</ci><cn id="S3.p1.1.m1.2.2.2.2.1.1.3.cmml" type="integer" xref="S3.p1.1.m1.2.2.2.2.1.1.3">15</cn></apply><apply id="S3.p1.1.m1.2.2.2.2.2.2.3.cmml" xref="S3.p1.1.m1.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.p1.1.m1.2.2.2.2.2.2.3a.cmml" xref="S3.p1.1.m1.2.2.2.2.2.2.2.3">formulae-sequence</csymbol><apply id="S3.p1.1.m1.2.2.2.2.2.2.1.1.cmml" xref="S3.p1.1.m1.2.2.2.2.2.2.1.1"><eq id="S3.p1.1.m1.2.2.2.2.2.2.1.1.1.cmml" xref="S3.p1.1.m1.2.2.2.2.2.2.1.1.1"></eq><ci id="S3.p1.1.m1.2.2.2.2.2.2.1.1.2.cmml" xref="S3.p1.1.m1.2.2.2.2.2.2.1.1.2">ğ‘‘</ci><cn id="S3.p1.1.m1.2.2.2.2.2.2.1.1.3.cmml" type="integer" xref="S3.p1.1.m1.2.2.2.2.2.2.1.1.3">25</cn></apply><apply id="S3.p1.1.m1.2.2.2.2.2.2.2.2.cmml" xref="S3.p1.1.m1.2.2.2.2.2.2.2.2"><eq id="S3.p1.1.m1.2.2.2.2.2.2.2.2.1.cmml" xref="S3.p1.1.m1.2.2.2.2.2.2.2.2.1"></eq><ci id="S3.p1.1.m1.2.2.2.2.2.2.2.2.2.cmml" xref="S3.p1.1.m1.2.2.2.2.2.2.2.2.2">ğ‘˜</ci><cn id="S3.p1.1.m1.2.2.2.2.2.2.2.2.3.cmml" type="integer" xref="S3.p1.1.m1.2.2.2.2.2.2.2.2.3">5</cn></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.1.m1.2c">m=3,c=15,d=25,k=5</annotation><annotation encoding="application/x-llamapun" id="S3.p1.1.m1.2d">italic_m = 3 , italic_c = 15 , italic_d = 25 , italic_k = 5</annotation></semantics></math>.
Assuming parameters following Gaussian distribution to collect randomized data for SGIS search, the grid for IS search is specified in terms of the sigma multiplier of each parameter.
We select 25 equal distance values from <math alttext="[-1*\sigma,1*\sigma]" class="ltx_Math" display="inline" id="S3.p1.2.m2.2"><semantics id="S3.p1.2.m2.2a"><mrow id="S3.p1.2.m2.2.2.2" xref="S3.p1.2.m2.2.2.3.cmml"><mo id="S3.p1.2.m2.2.2.2.3" stretchy="false" xref="S3.p1.2.m2.2.2.3.cmml">[</mo><mrow id="S3.p1.2.m2.1.1.1.1" xref="S3.p1.2.m2.1.1.1.1.cmml"><mo id="S3.p1.2.m2.1.1.1.1a" xref="S3.p1.2.m2.1.1.1.1.cmml">âˆ’</mo><mrow id="S3.p1.2.m2.1.1.1.1.2" xref="S3.p1.2.m2.1.1.1.1.2.cmml"><mn id="S3.p1.2.m2.1.1.1.1.2.2" xref="S3.p1.2.m2.1.1.1.1.2.2.cmml">1</mn><mo id="S3.p1.2.m2.1.1.1.1.2.1" lspace="0.222em" rspace="0.222em" xref="S3.p1.2.m2.1.1.1.1.2.1.cmml">âˆ—</mo><mi id="S3.p1.2.m2.1.1.1.1.2.3" xref="S3.p1.2.m2.1.1.1.1.2.3.cmml">Ïƒ</mi></mrow></mrow><mo id="S3.p1.2.m2.2.2.2.4" xref="S3.p1.2.m2.2.2.3.cmml">,</mo><mrow id="S3.p1.2.m2.2.2.2.2" xref="S3.p1.2.m2.2.2.2.2.cmml"><mn id="S3.p1.2.m2.2.2.2.2.2" xref="S3.p1.2.m2.2.2.2.2.2.cmml">1</mn><mo id="S3.p1.2.m2.2.2.2.2.1" lspace="0.222em" rspace="0.222em" xref="S3.p1.2.m2.2.2.2.2.1.cmml">âˆ—</mo><mi id="S3.p1.2.m2.2.2.2.2.3" xref="S3.p1.2.m2.2.2.2.2.3.cmml">Ïƒ</mi></mrow><mo id="S3.p1.2.m2.2.2.2.5" stretchy="false" xref="S3.p1.2.m2.2.2.3.cmml">]</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.2.m2.2b"><interval closure="closed" id="S3.p1.2.m2.2.2.3.cmml" xref="S3.p1.2.m2.2.2.2"><apply id="S3.p1.2.m2.1.1.1.1.cmml" xref="S3.p1.2.m2.1.1.1.1"><minus id="S3.p1.2.m2.1.1.1.1.1.cmml" xref="S3.p1.2.m2.1.1.1.1"></minus><apply id="S3.p1.2.m2.1.1.1.1.2.cmml" xref="S3.p1.2.m2.1.1.1.1.2"><times id="S3.p1.2.m2.1.1.1.1.2.1.cmml" xref="S3.p1.2.m2.1.1.1.1.2.1"></times><cn id="S3.p1.2.m2.1.1.1.1.2.2.cmml" type="integer" xref="S3.p1.2.m2.1.1.1.1.2.2">1</cn><ci id="S3.p1.2.m2.1.1.1.1.2.3.cmml" xref="S3.p1.2.m2.1.1.1.1.2.3">ğœ</ci></apply></apply><apply id="S3.p1.2.m2.2.2.2.2.cmml" xref="S3.p1.2.m2.2.2.2.2"><times id="S3.p1.2.m2.2.2.2.2.1.cmml" xref="S3.p1.2.m2.2.2.2.2.1"></times><cn id="S3.p1.2.m2.2.2.2.2.2.cmml" type="integer" xref="S3.p1.2.m2.2.2.2.2.2">1</cn><ci id="S3.p1.2.m2.2.2.2.2.3.cmml" xref="S3.p1.2.m2.2.2.2.2.3">ğœ</ci></apply></interval></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.2.m2.2c">[-1*\sigma,1*\sigma]</annotation><annotation encoding="application/x-llamapun" id="S3.p1.2.m2.2d">[ - 1 âˆ— italic_Ïƒ , 1 âˆ— italic_Ïƒ ]</annotation></semantics></math>.
SGIS search is done through a capped-weighted importance sampling estimator (Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS2" title="A.2. Importance Sampling â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">A.2</span></a>)) <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib4" title="">gorurautomated, </a>)</cite>.
For this experiment, we keep iterations for SGIS search to be <math alttext="m=1" class="ltx_Math" display="inline" id="S3.p1.3.m3.1"><semantics id="S3.p1.3.m3.1a"><mrow id="S3.p1.3.m3.1.1" xref="S3.p1.3.m3.1.1.cmml"><mi id="S3.p1.3.m3.1.1.2" xref="S3.p1.3.m3.1.1.2.cmml">m</mi><mo id="S3.p1.3.m3.1.1.1" xref="S3.p1.3.m3.1.1.1.cmml">=</mo><mn id="S3.p1.3.m3.1.1.3" xref="S3.p1.3.m3.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.3.m3.1b"><apply id="S3.p1.3.m3.1.1.cmml" xref="S3.p1.3.m3.1.1"><eq id="S3.p1.3.m3.1.1.1.cmml" xref="S3.p1.3.m3.1.1.1"></eq><ci id="S3.p1.3.m3.1.1.2.cmml" xref="S3.p1.3.m3.1.1.2">ğ‘š</ci><cn id="S3.p1.3.m3.1.1.3.cmml" type="integer" xref="S3.p1.3.m3.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.3.m3.1c">m=1</annotation><annotation encoding="application/x-llamapun" id="S3.p1.3.m3.1d">italic_m = 1</annotation></semantics></math>.
If cost of coarse search is too high, more iterations can be used to reach to an optimal point. (Appendix <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A2.SS2" title="B.2. Number Of Iterations for IS Search â€£ Appendix B Hyperparameter Considerations â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">B.2</span></a>)</p>
</div>
<div class="ltx_para" id="S3.p2">
<p class="ltx_p" id="S3.p2.2">Fig <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S3.F2" title="Figure 2 â€£ 3. Experiments and Results â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">2</span></a> shows SGIS predicted <math alttext="\Delta IY" class="ltx_Math" display="inline" id="S3.p2.1.m1.1"><semantics id="S3.p2.1.m1.1a"><mrow id="S3.p2.1.m1.1.1" xref="S3.p2.1.m1.1.1.cmml"><mi id="S3.p2.1.m1.1.1.2" mathvariant="normal" xref="S3.p2.1.m1.1.1.2.cmml">Î”</mi><mo id="S3.p2.1.m1.1.1.1" xref="S3.p2.1.m1.1.1.1.cmml">â¢</mo><mi id="S3.p2.1.m1.1.1.3" xref="S3.p2.1.m1.1.1.3.cmml">I</mi><mo id="S3.p2.1.m1.1.1.1a" xref="S3.p2.1.m1.1.1.1.cmml">â¢</mo><mi id="S3.p2.1.m1.1.1.4" xref="S3.p2.1.m1.1.1.4.cmml">Y</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.p2.1.m1.1b"><apply id="S3.p2.1.m1.1.1.cmml" xref="S3.p2.1.m1.1.1"><times id="S3.p2.1.m1.1.1.1.cmml" xref="S3.p2.1.m1.1.1.1"></times><ci id="S3.p2.1.m1.1.1.2.cmml" xref="S3.p2.1.m1.1.1.2">Î”</ci><ci id="S3.p2.1.m1.1.1.3.cmml" xref="S3.p2.1.m1.1.1.3">ğ¼</ci><ci id="S3.p2.1.m1.1.1.4.cmml" xref="S3.p2.1.m1.1.1.4">ğ‘Œ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p2.1.m1.1c">\Delta IY</annotation><annotation encoding="application/x-llamapun" id="S3.p2.1.m1.1d">roman_Î” italic_I italic_Y</annotation></semantics></math> on x-axis and open-box simulator predicted <math alttext="\Delta IY" class="ltx_Math" display="inline" id="S3.p2.2.m2.1"><semantics id="S3.p2.2.m2.1a"><mrow id="S3.p2.2.m2.1.1" xref="S3.p2.2.m2.1.1.cmml"><mi id="S3.p2.2.m2.1.1.2" mathvariant="normal" xref="S3.p2.2.m2.1.1.2.cmml">Î”</mi><mo id="S3.p2.2.m2.1.1.1" xref="S3.p2.2.m2.1.1.1.cmml">â¢</mo><mi id="S3.p2.2.m2.1.1.3" xref="S3.p2.2.m2.1.1.3.cmml">I</mi><mo id="S3.p2.2.m2.1.1.1a" xref="S3.p2.2.m2.1.1.1.cmml">â¢</mo><mi id="S3.p2.2.m2.1.1.4" xref="S3.p2.2.m2.1.1.4.cmml">Y</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.p2.2.m2.1b"><apply id="S3.p2.2.m2.1.1.cmml" xref="S3.p2.2.m2.1.1"><times id="S3.p2.2.m2.1.1.1.cmml" xref="S3.p2.2.m2.1.1.1"></times><ci id="S3.p2.2.m2.1.1.2.cmml" xref="S3.p2.2.m2.1.1.2">Î”</ci><ci id="S3.p2.2.m2.1.1.3.cmml" xref="S3.p2.2.m2.1.1.3">ğ¼</ci><ci id="S3.p2.2.m2.1.1.4.cmml" xref="S3.p2.2.m2.1.1.4">ğ‘Œ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p2.2.m2.1c">\Delta IY</annotation><annotation encoding="application/x-llamapun" id="S3.p2.2.m2.1d">roman_Î” italic_I italic_Y</annotation></semantics></math> on y-axis on randomly sampled settings from first iteration.
With the high correlation between the two estimators, we note that the SGIS estimator can plausibly rank parameters similar to if we had evaluated all settings with the simulator (Eq. <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S1.E1" title="In 1. Introduction â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">1</span></a>). This observation motivates our AlgorithmÂ <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#alg1" title="Algorithm 1 â€£ 2. Method â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">1</span></a>.
We consider open-box simulations performed for parameter settings with coarse grid in Algo <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#alg1" title="Algorithm 1 â€£ 2. Method â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">1</span></a> step <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#alg1.l4" title="In Algorithm 1 â€£ 2. Method â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">4</span></a> as baseline.</p>
</div>
<figure class="ltx_figure" id="S3.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="361" id="S3.F2.g1" src="extracted/5874277/ipsvalidation.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2. </span>Baseline <math alttext="\Delta IY" class="ltx_Math" display="inline" id="S3.F2.3.m1.1"><semantics id="S3.F2.3.m1.1b"><mrow id="S3.F2.3.m1.1.1" xref="S3.F2.3.m1.1.1.cmml"><mi id="S3.F2.3.m1.1.1.2" mathvariant="normal" xref="S3.F2.3.m1.1.1.2.cmml">Î”</mi><mo id="S3.F2.3.m1.1.1.1" xref="S3.F2.3.m1.1.1.1.cmml">â¢</mo><mi id="S3.F2.3.m1.1.1.3" xref="S3.F2.3.m1.1.1.3.cmml">I</mi><mo id="S3.F2.3.m1.1.1.1b" xref="S3.F2.3.m1.1.1.1.cmml">â¢</mo><mi id="S3.F2.3.m1.1.1.4" xref="S3.F2.3.m1.1.1.4.cmml">Y</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.F2.3.m1.1c"><apply id="S3.F2.3.m1.1.1.cmml" xref="S3.F2.3.m1.1.1"><times id="S3.F2.3.m1.1.1.1.cmml" xref="S3.F2.3.m1.1.1.1"></times><ci id="S3.F2.3.m1.1.1.2.cmml" xref="S3.F2.3.m1.1.1.2">Î”</ci><ci id="S3.F2.3.m1.1.1.3.cmml" xref="S3.F2.3.m1.1.1.3">ğ¼</ci><ci id="S3.F2.3.m1.1.1.4.cmml" xref="S3.F2.3.m1.1.1.4">ğ‘Œ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F2.3.m1.1d">\Delta IY</annotation><annotation encoding="application/x-llamapun" id="S3.F2.3.m1.1e">roman_Î” italic_I italic_Y</annotation></semantics></math> vs. SGIS <math alttext="\Delta IY" class="ltx_Math" display="inline" id="S3.F2.4.m2.1"><semantics id="S3.F2.4.m2.1b"><mrow id="S3.F2.4.m2.1.1" xref="S3.F2.4.m2.1.1.cmml"><mi id="S3.F2.4.m2.1.1.2" mathvariant="normal" xref="S3.F2.4.m2.1.1.2.cmml">Î”</mi><mo id="S3.F2.4.m2.1.1.1" xref="S3.F2.4.m2.1.1.1.cmml">â¢</mo><mi id="S3.F2.4.m2.1.1.3" xref="S3.F2.4.m2.1.1.3.cmml">I</mi><mo id="S3.F2.4.m2.1.1.1b" xref="S3.F2.4.m2.1.1.1.cmml">â¢</mo><mi id="S3.F2.4.m2.1.1.4" xref="S3.F2.4.m2.1.1.4.cmml">Y</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.F2.4.m2.1c"><apply id="S3.F2.4.m2.1.1.cmml" xref="S3.F2.4.m2.1.1"><times id="S3.F2.4.m2.1.1.1.cmml" xref="S3.F2.4.m2.1.1.1"></times><ci id="S3.F2.4.m2.1.1.2.cmml" xref="S3.F2.4.m2.1.1.2">Î”</ci><ci id="S3.F2.4.m2.1.1.3.cmml" xref="S3.F2.4.m2.1.1.3">ğ¼</ci><ci id="S3.F2.4.m2.1.1.4.cmml" xref="S3.F2.4.m2.1.1.4">ğ‘Œ</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.F2.4.m2.1d">\Delta IY</annotation><annotation encoding="application/x-llamapun" id="S3.F2.4.m2.1e">roman_Î” italic_I italic_Y</annotation></semantics></math></figcaption>
</figure>
<div class="ltx_para" id="S3.p3">
<p class="ltx_p" id="S3.p3.4">In TableÂ <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S3.T1" title="Table 1 â€£ 3. Experiments and Results â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">1</span></a>, we report the results for parameter optimization when the objective function for ranking candidate settings is <math alttext="\max_{a}\Delta_{a}RPM" class="ltx_Math" display="inline" id="S3.p3.1.m1.1"><semantics id="S3.p3.1.m1.1a"><mrow id="S3.p3.1.m1.1.1" xref="S3.p3.1.m1.1.1.cmml"><msub id="S3.p3.1.m1.1.1.1" xref="S3.p3.1.m1.1.1.1.cmml"><mi id="S3.p3.1.m1.1.1.1.2" xref="S3.p3.1.m1.1.1.1.2.cmml">max</mi><mi id="S3.p3.1.m1.1.1.1.3" xref="S3.p3.1.m1.1.1.1.3.cmml">a</mi></msub><mo id="S3.p3.1.m1.1.1a" lspace="0.167em" xref="S3.p3.1.m1.1.1.cmml">â¡</mo><mrow id="S3.p3.1.m1.1.1.2" xref="S3.p3.1.m1.1.1.2.cmml"><msub id="S3.p3.1.m1.1.1.2.2" xref="S3.p3.1.m1.1.1.2.2.cmml"><mi id="S3.p3.1.m1.1.1.2.2.2" mathvariant="normal" xref="S3.p3.1.m1.1.1.2.2.2.cmml">Î”</mi><mi id="S3.p3.1.m1.1.1.2.2.3" xref="S3.p3.1.m1.1.1.2.2.3.cmml">a</mi></msub><mo id="S3.p3.1.m1.1.1.2.1" xref="S3.p3.1.m1.1.1.2.1.cmml">â¢</mo><mi id="S3.p3.1.m1.1.1.2.3" xref="S3.p3.1.m1.1.1.2.3.cmml">R</mi><mo id="S3.p3.1.m1.1.1.2.1a" xref="S3.p3.1.m1.1.1.2.1.cmml">â¢</mo><mi id="S3.p3.1.m1.1.1.2.4" xref="S3.p3.1.m1.1.1.2.4.cmml">P</mi><mo id="S3.p3.1.m1.1.1.2.1b" xref="S3.p3.1.m1.1.1.2.1.cmml">â¢</mo><mi id="S3.p3.1.m1.1.1.2.5" xref="S3.p3.1.m1.1.1.2.5.cmml">M</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p3.1.m1.1b"><apply id="S3.p3.1.m1.1.1.cmml" xref="S3.p3.1.m1.1.1"><apply id="S3.p3.1.m1.1.1.1.cmml" xref="S3.p3.1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.p3.1.m1.1.1.1.1.cmml" xref="S3.p3.1.m1.1.1.1">subscript</csymbol><max id="S3.p3.1.m1.1.1.1.2.cmml" xref="S3.p3.1.m1.1.1.1.2"></max><ci id="S3.p3.1.m1.1.1.1.3.cmml" xref="S3.p3.1.m1.1.1.1.3">ğ‘</ci></apply><apply id="S3.p3.1.m1.1.1.2.cmml" xref="S3.p3.1.m1.1.1.2"><times id="S3.p3.1.m1.1.1.2.1.cmml" xref="S3.p3.1.m1.1.1.2.1"></times><apply id="S3.p3.1.m1.1.1.2.2.cmml" xref="S3.p3.1.m1.1.1.2.2"><csymbol cd="ambiguous" id="S3.p3.1.m1.1.1.2.2.1.cmml" xref="S3.p3.1.m1.1.1.2.2">subscript</csymbol><ci id="S3.p3.1.m1.1.1.2.2.2.cmml" xref="S3.p3.1.m1.1.1.2.2.2">Î”</ci><ci id="S3.p3.1.m1.1.1.2.2.3.cmml" xref="S3.p3.1.m1.1.1.2.2.3">ğ‘</ci></apply><ci id="S3.p3.1.m1.1.1.2.3.cmml" xref="S3.p3.1.m1.1.1.2.3">ğ‘…</ci><ci id="S3.p3.1.m1.1.1.2.4.cmml" xref="S3.p3.1.m1.1.1.2.4">ğ‘ƒ</ci><ci id="S3.p3.1.m1.1.1.2.5.cmml" xref="S3.p3.1.m1.1.1.2.5">ğ‘€</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p3.1.m1.1c">\max_{a}\Delta_{a}RPM</annotation><annotation encoding="application/x-llamapun" id="S3.p3.1.m1.1d">roman_max start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT roman_Î” start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT italic_R italic_P italic_M</annotation></semantics></math>, s.t. <math alttext="\Delta_{a}IY\leq 0\%" class="ltx_Math" display="inline" id="S3.p3.2.m2.1"><semantics id="S3.p3.2.m2.1a"><mrow id="S3.p3.2.m2.1.1" xref="S3.p3.2.m2.1.1.cmml"><mrow id="S3.p3.2.m2.1.1.2" xref="S3.p3.2.m2.1.1.2.cmml"><msub id="S3.p3.2.m2.1.1.2.2" xref="S3.p3.2.m2.1.1.2.2.cmml"><mi id="S3.p3.2.m2.1.1.2.2.2" mathvariant="normal" xref="S3.p3.2.m2.1.1.2.2.2.cmml">Î”</mi><mi id="S3.p3.2.m2.1.1.2.2.3" xref="S3.p3.2.m2.1.1.2.2.3.cmml">a</mi></msub><mo id="S3.p3.2.m2.1.1.2.1" xref="S3.p3.2.m2.1.1.2.1.cmml">â¢</mo><mi id="S3.p3.2.m2.1.1.2.3" xref="S3.p3.2.m2.1.1.2.3.cmml">I</mi><mo id="S3.p3.2.m2.1.1.2.1a" xref="S3.p3.2.m2.1.1.2.1.cmml">â¢</mo><mi id="S3.p3.2.m2.1.1.2.4" xref="S3.p3.2.m2.1.1.2.4.cmml">Y</mi></mrow><mo id="S3.p3.2.m2.1.1.1" xref="S3.p3.2.m2.1.1.1.cmml">â‰¤</mo><mrow id="S3.p3.2.m2.1.1.3" xref="S3.p3.2.m2.1.1.3.cmml"><mn id="S3.p3.2.m2.1.1.3.2" xref="S3.p3.2.m2.1.1.3.2.cmml">0</mn><mo id="S3.p3.2.m2.1.1.3.1" xref="S3.p3.2.m2.1.1.3.1.cmml">%</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p3.2.m2.1b"><apply id="S3.p3.2.m2.1.1.cmml" xref="S3.p3.2.m2.1.1"><leq id="S3.p3.2.m2.1.1.1.cmml" xref="S3.p3.2.m2.1.1.1"></leq><apply id="S3.p3.2.m2.1.1.2.cmml" xref="S3.p3.2.m2.1.1.2"><times id="S3.p3.2.m2.1.1.2.1.cmml" xref="S3.p3.2.m2.1.1.2.1"></times><apply id="S3.p3.2.m2.1.1.2.2.cmml" xref="S3.p3.2.m2.1.1.2.2"><csymbol cd="ambiguous" id="S3.p3.2.m2.1.1.2.2.1.cmml" xref="S3.p3.2.m2.1.1.2.2">subscript</csymbol><ci id="S3.p3.2.m2.1.1.2.2.2.cmml" xref="S3.p3.2.m2.1.1.2.2.2">Î”</ci><ci id="S3.p3.2.m2.1.1.2.2.3.cmml" xref="S3.p3.2.m2.1.1.2.2.3">ğ‘</ci></apply><ci id="S3.p3.2.m2.1.1.2.3.cmml" xref="S3.p3.2.m2.1.1.2.3">ğ¼</ci><ci id="S3.p3.2.m2.1.1.2.4.cmml" xref="S3.p3.2.m2.1.1.2.4">ğ‘Œ</ci></apply><apply id="S3.p3.2.m2.1.1.3.cmml" xref="S3.p3.2.m2.1.1.3"><csymbol cd="latexml" id="S3.p3.2.m2.1.1.3.1.cmml" xref="S3.p3.2.m2.1.1.3.1">percent</csymbol><cn id="S3.p3.2.m2.1.1.3.2.cmml" type="integer" xref="S3.p3.2.m2.1.1.3.2">0</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p3.2.m2.1c">\Delta_{a}IY\leq 0\%</annotation><annotation encoding="application/x-llamapun" id="S3.p3.2.m2.1d">roman_Î” start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT italic_I italic_Y â‰¤ 0 %</annotation></semantics></math> (where <math alttext="\Delta" class="ltx_Math" display="inline" id="S3.p3.3.m3.1"><semantics id="S3.p3.3.m3.1a"><mi id="S3.p3.3.m3.1.1" mathvariant="normal" xref="S3.p3.3.m3.1.1.cmml">Î”</mi><annotation-xml encoding="MathML-Content" id="S3.p3.3.m3.1b"><ci id="S3.p3.3.m3.1.1.cmml" xref="S3.p3.3.m3.1.1">Î”</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p3.3.m3.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S3.p3.3.m3.1d">roman_Î”</annotation></semantics></math> denotes differences in KPI relative to a current parameter in deployment).
We pick the best ranking setting obtained from baseline, and compare with the best ranking setting obtained with SGIS.
The <math alttext="\Delta" class="ltx_Math" display="inline" id="S3.p3.4.m4.1"><semantics id="S3.p3.4.m4.1a"><mi id="S3.p3.4.m4.1.1" mathvariant="normal" xref="S3.p3.4.m4.1.1.cmml">Î”</mi><annotation-xml encoding="MathML-Content" id="S3.p3.4.m4.1b"><ci id="S3.p3.4.m4.1.1.cmml" xref="S3.p3.4.m4.1.1">Î”</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p3.4.m4.1c">\Delta</annotation><annotation encoding="application/x-llamapun" id="S3.p3.4.m4.1d">roman_Î”</annotation></semantics></math> KPI in this table refers to the difference between control and treatment KPIs recorded with A/B experiments ran on a major search engine platform.</p>
</div>
<figure class="ltx_table" id="S3.T1">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="S3.T1.1">
<thead class="ltx_thead">
<tr class="ltx_tr" id="S3.T1.1.1.1">
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_l ltx_border_r ltx_border_t" id="S3.T1.1.1.1.1">Experiment</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T1.1.1.1.2">Revenue</th>
<th class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t" id="S3.T1.1.1.1.3">IY</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="S3.T1.1.2.1">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t" id="S3.T1.1.2.1.1">Simulator Proposed Setting</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.2.1.2">0.55%</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t" id="S3.T1.1.2.1.3">-1.67%</td>
</tr>
<tr class="ltx_tr" id="S3.T1.1.3.2">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t" id="S3.T1.1.3.2.1">SGIS Proposed Setting</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T1.1.3.2.2">1.11%</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" id="S3.T1.1.3.2.3">-0.74%</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1. </span>A/B Test Performance Comparison</figcaption>
</figure>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4. </span>Conclusion</h2>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1">We propose an off-policy evaluator <span class="ltx_text ltx_font_bold" id="S4.p1.1.1">SGIS</span> that uses expensive simulator to guide a cheap IS search; and show using simulations and real world A/B tests that our evaluator lowers the computation cost for off-policy optimization while maintaining performance.
</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(1)</span>
<span class="ltx_bibblock">
<span class="ltx_text ltx_font_smallcaps" id="bib.bib1.1.1">Bayir, M.Â A., Xu, M., Zhu, Y., and Shi, Y.</span>
</span>
<span class="ltx_bibblock">Genie: An open box counterfactual policy estimator for optimizing sponsored search marketplace, 2018.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(2)</span>
<span class="ltx_bibblock">
<span class="ltx_text ltx_font_smallcaps" id="bib.bib2.1.1">Bottou, L., Peters, J., QuiÃ±onero-Candela, J., Charles, D.Â X., Chickering, D.Â M., Portugaly, E., Ray, D., Simard, P., and Snelson, E.</span>
</span>
<span class="ltx_bibblock">Counterfactual reasoning and learning systems: The example of computational advertising.

</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib2.2.1">Journal of Machine Learning Research 14</span>, 101 (2013), 3207â€“3260.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(3)</span>
<span class="ltx_bibblock">
<span class="ltx_text ltx_font_smallcaps" id="bib.bib3.1.1">DudÃ­k, M., Langford, J., and Li, L.</span>
</span>
<span class="ltx_bibblock">Doubly robust policy evaluation and learning.

</span>
<span class="ltx_bibblock">In <span class="ltx_text ltx_font_italic" id="bib.bib3.2.1">ICML</span> (2011), pp.Â 1097â€“1104.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(4)</span>
<span class="ltx_bibblock">
<span class="ltx_text ltx_font_smallcaps" id="bib.bib4.1.1">Gorur, D., Sengupta, D., Boyles, L., Jordan, P., Manavoglu, E., Portugaly, E., Wei, M., and Zhu, Y.</span>
</span>
<span class="ltx_bibblock">Automated tuning of ad auctions, 2016.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">(5)</span>
<span class="ltx_bibblock">
<span class="ltx_text ltx_font_smallcaps" id="bib.bib5.1.1">Owen, A.Â B.</span>
</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_font_italic" id="bib.bib5.2.1">Monte Carlo theory, methods and examples</span>.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_url ltx_font_typewriter" href="https://artowen.su.domains/mc/" title="">https://artowen.su.domains/mc/</a>, 2013.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Off-policy Estimators</h2>
<section class="ltx_subsection" id="A1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1. </span>Open-box Simulator</h3>
<div class="ltx_para" id="A1.SS1.p1">
<p class="ltx_p" id="A1.SS1.p1.1">Open-box monte-carlo simulators replaying user sessions are widely used for parameter tuning in complex systems. <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib1" title="">bayir2018genieopenboxcounterfactual, </a>)</cite>.
They use historical user sessions and replay them by running the exact binary that online system runs.
Machine learning models are then used to estimate user response signals.</p>
</div>
<div class="ltx_para" id="A1.SS1.p2">
<p class="ltx_p" id="A1.SS1.p2.1">As shown in Fig <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.F3" title="Figure 3 â€£ A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">3</span></a>, given a recommender system laid out as a causal graph that can be replayed by a simulator, combined with a user response model, can be used to evaluate different parameter settings and capture their effect on various KPIs.
As open-box simulations depict the true underlying data generating processes, they provide faithful counterfactual estimates that hold in A/B experiments.</p>
</div>
<figure class="ltx_figure" id="A1.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="527" id="A1.F3.g1" src="extracted/5874277/simulator.png" width="598"/>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3. </span>For each parameter setting, simulator can re-run the causal graph in offline fashion to evaluate its effect on KPIs (e.g. RPM, Clicks, IY)</figcaption>
</figure>
<div class="ltx_para" id="A1.SS1.p3">
<p class="ltx_p" id="A1.SS1.p3.8">Let <math alttext="\textbf{X}=[x_{1},\ldots,x_{M}]" class="ltx_Math" display="inline" id="A1.SS1.p3.1.m1.3"><semantics id="A1.SS1.p3.1.m1.3a"><mrow id="A1.SS1.p3.1.m1.3.3" xref="A1.SS1.p3.1.m1.3.3.cmml"><mtext class="ltx_mathvariant_bold" id="A1.SS1.p3.1.m1.3.3.4" xref="A1.SS1.p3.1.m1.3.3.4a.cmml">X</mtext><mo id="A1.SS1.p3.1.m1.3.3.3" xref="A1.SS1.p3.1.m1.3.3.3.cmml">=</mo><mrow id="A1.SS1.p3.1.m1.3.3.2.2" xref="A1.SS1.p3.1.m1.3.3.2.3.cmml"><mo id="A1.SS1.p3.1.m1.3.3.2.2.3" stretchy="false" xref="A1.SS1.p3.1.m1.3.3.2.3.cmml">[</mo><msub id="A1.SS1.p3.1.m1.2.2.1.1.1" xref="A1.SS1.p3.1.m1.2.2.1.1.1.cmml"><mi id="A1.SS1.p3.1.m1.2.2.1.1.1.2" xref="A1.SS1.p3.1.m1.2.2.1.1.1.2.cmml">x</mi><mn id="A1.SS1.p3.1.m1.2.2.1.1.1.3" xref="A1.SS1.p3.1.m1.2.2.1.1.1.3.cmml">1</mn></msub><mo id="A1.SS1.p3.1.m1.3.3.2.2.4" xref="A1.SS1.p3.1.m1.3.3.2.3.cmml">,</mo><mi id="A1.SS1.p3.1.m1.1.1" mathvariant="normal" xref="A1.SS1.p3.1.m1.1.1.cmml">â€¦</mi><mo id="A1.SS1.p3.1.m1.3.3.2.2.5" xref="A1.SS1.p3.1.m1.3.3.2.3.cmml">,</mo><msub id="A1.SS1.p3.1.m1.3.3.2.2.2" xref="A1.SS1.p3.1.m1.3.3.2.2.2.cmml"><mi id="A1.SS1.p3.1.m1.3.3.2.2.2.2" xref="A1.SS1.p3.1.m1.3.3.2.2.2.2.cmml">x</mi><mi id="A1.SS1.p3.1.m1.3.3.2.2.2.3" xref="A1.SS1.p3.1.m1.3.3.2.2.2.3.cmml">M</mi></msub><mo id="A1.SS1.p3.1.m1.3.3.2.2.6" stretchy="false" xref="A1.SS1.p3.1.m1.3.3.2.3.cmml">]</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.SS1.p3.1.m1.3b"><apply id="A1.SS1.p3.1.m1.3.3.cmml" xref="A1.SS1.p3.1.m1.3.3"><eq id="A1.SS1.p3.1.m1.3.3.3.cmml" xref="A1.SS1.p3.1.m1.3.3.3"></eq><ci id="A1.SS1.p3.1.m1.3.3.4a.cmml" xref="A1.SS1.p3.1.m1.3.3.4"><mtext class="ltx_mathvariant_bold" id="A1.SS1.p3.1.m1.3.3.4.cmml" xref="A1.SS1.p3.1.m1.3.3.4">X</mtext></ci><list id="A1.SS1.p3.1.m1.3.3.2.3.cmml" xref="A1.SS1.p3.1.m1.3.3.2.2"><apply id="A1.SS1.p3.1.m1.2.2.1.1.1.cmml" xref="A1.SS1.p3.1.m1.2.2.1.1.1"><csymbol cd="ambiguous" id="A1.SS1.p3.1.m1.2.2.1.1.1.1.cmml" xref="A1.SS1.p3.1.m1.2.2.1.1.1">subscript</csymbol><ci id="A1.SS1.p3.1.m1.2.2.1.1.1.2.cmml" xref="A1.SS1.p3.1.m1.2.2.1.1.1.2">ğ‘¥</ci><cn id="A1.SS1.p3.1.m1.2.2.1.1.1.3.cmml" type="integer" xref="A1.SS1.p3.1.m1.2.2.1.1.1.3">1</cn></apply><ci id="A1.SS1.p3.1.m1.1.1.cmml" xref="A1.SS1.p3.1.m1.1.1">â€¦</ci><apply id="A1.SS1.p3.1.m1.3.3.2.2.2.cmml" xref="A1.SS1.p3.1.m1.3.3.2.2.2"><csymbol cd="ambiguous" id="A1.SS1.p3.1.m1.3.3.2.2.2.1.cmml" xref="A1.SS1.p3.1.m1.3.3.2.2.2">subscript</csymbol><ci id="A1.SS1.p3.1.m1.3.3.2.2.2.2.cmml" xref="A1.SS1.p3.1.m1.3.3.2.2.2.2">ğ‘¥</ci><ci id="A1.SS1.p3.1.m1.3.3.2.2.2.3.cmml" xref="A1.SS1.p3.1.m1.3.3.2.2.2.3">ğ‘€</ci></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.p3.1.m1.3c">\textbf{X}=[x_{1},\ldots,x_{M}]</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.p3.1.m1.3d">X = [ italic_x start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT , â€¦ , italic_x start_POSTSUBSCRIPT italic_M end_POSTSUBSCRIPT ]</annotation></semantics></math> be historical user sessions.
We first learn a model <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="A1.SS1.p3.2.m2.1"><semantics id="A1.SS1.p3.2.m2.1a"><mi class="ltx_font_mathcaligraphic" id="A1.SS1.p3.2.m2.1.1" xref="A1.SS1.p3.2.m2.1.1.cmml">â„³</mi><annotation-xml encoding="MathML-Content" id="A1.SS1.p3.2.m2.1b"><ci id="A1.SS1.p3.2.m2.1.1.cmml" xref="A1.SS1.p3.2.m2.1.1">â„³</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.p3.2.m2.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.p3.2.m2.1d">caligraphic_M</annotation></semantics></math> from <span class="ltx_text ltx_markedasmath ltx_font_bold" id="A1.SS1.p3.8.1">X</span> to predict user responses for the simulations.
For each policy <math alttext="a\in\textbf{A}" class="ltx_Math" display="inline" id="A1.SS1.p3.4.m4.1"><semantics id="A1.SS1.p3.4.m4.1a"><mrow id="A1.SS1.p3.4.m4.1.1" xref="A1.SS1.p3.4.m4.1.1.cmml"><mi id="A1.SS1.p3.4.m4.1.1.2" xref="A1.SS1.p3.4.m4.1.1.2.cmml">a</mi><mo id="A1.SS1.p3.4.m4.1.1.1" xref="A1.SS1.p3.4.m4.1.1.1.cmml">âˆˆ</mo><mtext class="ltx_mathvariant_bold" id="A1.SS1.p3.4.m4.1.1.3" xref="A1.SS1.p3.4.m4.1.1.3a.cmml">A</mtext></mrow><annotation-xml encoding="MathML-Content" id="A1.SS1.p3.4.m4.1b"><apply id="A1.SS1.p3.4.m4.1.1.cmml" xref="A1.SS1.p3.4.m4.1.1"><in id="A1.SS1.p3.4.m4.1.1.1.cmml" xref="A1.SS1.p3.4.m4.1.1.1"></in><ci id="A1.SS1.p3.4.m4.1.1.2.cmml" xref="A1.SS1.p3.4.m4.1.1.2">ğ‘</ci><ci id="A1.SS1.p3.4.m4.1.1.3a.cmml" xref="A1.SS1.p3.4.m4.1.1.3"><mtext class="ltx_mathvariant_bold" id="A1.SS1.p3.4.m4.1.1.3.cmml" xref="A1.SS1.p3.4.m4.1.1.3">A</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.p3.4.m4.1c">a\in\textbf{A}</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.p3.4.m4.1d">italic_a âˆˆ A</annotation></semantics></math>, each user session <math alttext="x" class="ltx_Math" display="inline" id="A1.SS1.p3.5.m5.1"><semantics id="A1.SS1.p3.5.m5.1a"><mi id="A1.SS1.p3.5.m5.1.1" xref="A1.SS1.p3.5.m5.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="A1.SS1.p3.5.m5.1b"><ci id="A1.SS1.p3.5.m5.1.1.cmml" xref="A1.SS1.p3.5.m5.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.p3.5.m5.1c">x</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.p3.5.m5.1d">italic_x</annotation></semantics></math> is replayed to generate a counterfactual session <math alttext="\hat{x}" class="ltx_Math" display="inline" id="A1.SS1.p3.6.m6.1"><semantics id="A1.SS1.p3.6.m6.1a"><mover accent="true" id="A1.SS1.p3.6.m6.1.1" xref="A1.SS1.p3.6.m6.1.1.cmml"><mi id="A1.SS1.p3.6.m6.1.1.2" xref="A1.SS1.p3.6.m6.1.1.2.cmml">x</mi><mo id="A1.SS1.p3.6.m6.1.1.1" xref="A1.SS1.p3.6.m6.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="A1.SS1.p3.6.m6.1b"><apply id="A1.SS1.p3.6.m6.1.1.cmml" xref="A1.SS1.p3.6.m6.1.1"><ci id="A1.SS1.p3.6.m6.1.1.1.cmml" xref="A1.SS1.p3.6.m6.1.1.1">^</ci><ci id="A1.SS1.p3.6.m6.1.1.2.cmml" xref="A1.SS1.p3.6.m6.1.1.2">ğ‘¥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.p3.6.m6.1c">\hat{x}</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.p3.6.m6.1d">over^ start_ARG italic_x end_ARG</annotation></semantics></math>, which in conjunction with the model <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="A1.SS1.p3.7.m7.1"><semantics id="A1.SS1.p3.7.m7.1a"><mi class="ltx_font_mathcaligraphic" id="A1.SS1.p3.7.m7.1.1" xref="A1.SS1.p3.7.m7.1.1.cmml">â„³</mi><annotation-xml encoding="MathML-Content" id="A1.SS1.p3.7.m7.1b"><ci id="A1.SS1.p3.7.m7.1.1.cmml" xref="A1.SS1.p3.7.m7.1.1">â„³</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.p3.7.m7.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.p3.7.m7.1d">caligraphic_M</annotation></semantics></math> is used to calculate KPIs.
Let <span class="ltx_text ltx_markedasmath ltx_font_bold" id="A1.SS1.p3.8.2">p</span> be a vector containing each KPI, it is aggregated all sessions to produce score vector for each policy.
This score vector can be used to perform multi-objective constrained optimization.</p>
</div>
<section class="ltx_subsubsection" id="A1.SS1.SSS1">
<h4 class="ltx_title ltx_title_subsubsection">
<span class="ltx_tag ltx_tag_subsubsection">A.1.1. </span>Artificial User Sessions</h4>
<div class="ltx_para" id="A1.SS1.SSS1.p1">
<p class="ltx_p" id="A1.SS1.SSS1.p1.5">Step <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#alg2.l5" title="In Algorithm 2 â€£ A.1.1. Artificial User Sessions â€£ A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">5</span></a> in the algorithm generating a counterfactual user session <math alttext="\hat{x}" class="ltx_Math" display="inline" id="A1.SS1.SSS1.p1.1.m1.1"><semantics id="A1.SS1.SSS1.p1.1.m1.1a"><mover accent="true" id="A1.SS1.SSS1.p1.1.m1.1.1" xref="A1.SS1.SSS1.p1.1.m1.1.1.cmml"><mi id="A1.SS1.SSS1.p1.1.m1.1.1.2" xref="A1.SS1.SSS1.p1.1.m1.1.1.2.cmml">x</mi><mo id="A1.SS1.SSS1.p1.1.m1.1.1.1" xref="A1.SS1.SSS1.p1.1.m1.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="A1.SS1.SSS1.p1.1.m1.1b"><apply id="A1.SS1.SSS1.p1.1.m1.1.1.cmml" xref="A1.SS1.SSS1.p1.1.m1.1.1"><ci id="A1.SS1.SSS1.p1.1.m1.1.1.1.cmml" xref="A1.SS1.SSS1.p1.1.m1.1.1.1">^</ci><ci id="A1.SS1.SSS1.p1.1.m1.1.1.2.cmml" xref="A1.SS1.SSS1.p1.1.m1.1.1.2">ğ‘¥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.SSS1.p1.1.m1.1c">\hat{x}</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.SSS1.p1.1.m1.1d">over^ start_ARG italic_x end_ARG</annotation></semantics></math> can be collected for all historical logs in <math alttext="X" class="ltx_Math" display="inline" id="A1.SS1.SSS1.p1.2.m2.1"><semantics id="A1.SS1.SSS1.p1.2.m2.1a"><mi id="A1.SS1.SSS1.p1.2.m2.1.1" xref="A1.SS1.SSS1.p1.2.m2.1.1.cmml">X</mi><annotation-xml encoding="MathML-Content" id="A1.SS1.SSS1.p1.2.m2.1b"><ci id="A1.SS1.SSS1.p1.2.m2.1.1.cmml" xref="A1.SS1.SSS1.p1.2.m2.1.1">ğ‘‹</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.SSS1.p1.2.m2.1c">X</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.SSS1.p1.2.m2.1d">italic_X</annotation></semantics></math> for a parameter setting <math alttext="a" class="ltx_Math" display="inline" id="A1.SS1.SSS1.p1.3.m3.1"><semantics id="A1.SS1.SSS1.p1.3.m3.1a"><mi id="A1.SS1.SSS1.p1.3.m3.1.1" xref="A1.SS1.SSS1.p1.3.m3.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="A1.SS1.SSS1.p1.3.m3.1b"><ci id="A1.SS1.SSS1.p1.3.m3.1.1.cmml" xref="A1.SS1.SSS1.p1.3.m3.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.SSS1.p1.3.m3.1c">a</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.SSS1.p1.3.m3.1d">italic_a</annotation></semantics></math>.
Considering <math alttext="a" class="ltx_Math" display="inline" id="A1.SS1.SSS1.p1.4.m4.1"><semantics id="A1.SS1.SSS1.p1.4.m4.1a"><mi id="A1.SS1.SSS1.p1.4.m4.1.1" xref="A1.SS1.SSS1.p1.4.m4.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="A1.SS1.SSS1.p1.4.m4.1b"><ci id="A1.SS1.SSS1.p1.4.m4.1.1.cmml" xref="A1.SS1.SSS1.p1.4.m4.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.SSS1.p1.4.m4.1c">a</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.SSS1.p1.4.m4.1d">italic_a</annotation></semantics></math> has been randomized to capture small region <math alttext="\delta" class="ltx_Math" display="inline" id="A1.SS1.SSS1.p1.5.m5.1"><semantics id="A1.SS1.SSS1.p1.5.m5.1a"><mi id="A1.SS1.SSS1.p1.5.m5.1.1" xref="A1.SS1.SSS1.p1.5.m5.1.1.cmml">Î´</mi><annotation-xml encoding="MathML-Content" id="A1.SS1.SSS1.p1.5.m5.1b"><ci id="A1.SS1.SSS1.p1.5.m5.1.1.cmml" xref="A1.SS1.SSS1.p1.5.m5.1.1">ğ›¿</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS1.SSS1.p1.5.m5.1c">\delta</annotation><annotation encoding="application/x-llamapun" id="A1.SS1.SSS1.p1.5.m5.1d">italic_Î´</annotation></semantics></math>, these simulated sessions can be used to perform importance sampling to cheaply evaluate lots of parameter settings.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg2">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg2.2.1.1">Algorithm 2</span> </span> Simulate</figcaption>
<div class="ltx_listing ltx_listing" id="alg2.3">
<div class="ltx_listingline" id="alg2.l1">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l1.1.1.1" style="font-size:80%;">1:</span></span><span class="ltx_text ltx_font_bold" id="alg2.l1.2">procedure</span>Â <span class="ltx_text ltx_font_smallcaps" id="alg2.l1.3">Simulate</span>(<span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg2.l1.4">X</span>, <span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg2.l1.5">A</span>)

</div>
<div class="ltx_listingline" id="alg2.l2">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l2.1.1.1" style="font-size:80%;">2:</span></span>Â Â Â Â Â Learn a model <math alttext="\mathcal{M}" class="ltx_Math" display="inline" id="alg2.l2.m1.1"><semantics id="alg2.l2.m1.1a"><mi class="ltx_font_mathcaligraphic" id="alg2.l2.m1.1.1" xref="alg2.l2.m1.1.1.cmml">â„³</mi><annotation-xml encoding="MathML-Content" id="alg2.l2.m1.1b"><ci id="alg2.l2.m1.1.1.cmml" xref="alg2.l2.m1.1.1">â„³</ci></annotation-xml><annotation encoding="application/x-tex" id="alg2.l2.m1.1c">\mathcal{M}</annotation><annotation encoding="application/x-llamapun" id="alg2.l2.m1.1d">caligraphic_M</annotation></semantics></math> to predict user responses using <span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg2.l2.2">U</span>.

</div>
<div class="ltx_listingline" id="alg2.l3">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l3.1.1.1" style="font-size:80%;">3:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg2.l3.2">for</span>Â <math alttext="a" class="ltx_Math" display="inline" id="alg2.l3.m1.1"><semantics id="alg2.l3.m1.1a"><mi id="alg2.l3.m1.1.1" xref="alg2.l3.m1.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="alg2.l3.m1.1b"><ci id="alg2.l3.m1.1.1.cmml" xref="alg2.l3.m1.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="alg2.l3.m1.1c">a</annotation><annotation encoding="application/x-llamapun" id="alg2.l3.m1.1d">italic_a</annotation></semantics></math> in <span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg2.l3.3">A</span>Â <span class="ltx_text ltx_font_bold" id="alg2.l3.4">do</span>
</div>
<div class="ltx_listingline" id="alg2.l4">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l4.1.1.1" style="font-size:80%;">4:</span></span>Â Â Â Â Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg2.l4.2">for</span>Â <math alttext="x" class="ltx_Math" display="inline" id="alg2.l4.m1.1"><semantics id="alg2.l4.m1.1a"><mi id="alg2.l4.m1.1.1" xref="alg2.l4.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="alg2.l4.m1.1b"><ci id="alg2.l4.m1.1.1.cmml" xref="alg2.l4.m1.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="alg2.l4.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="alg2.l4.m1.1d">italic_x</annotation></semantics></math> in <span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg2.l4.3">X</span>Â <span class="ltx_text ltx_font_bold" id="alg2.l4.4">do</span>
</div>
<div class="ltx_listingline" id="alg2.l5">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l5.1.1.1" style="font-size:80%;">5:</span></span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â Replay user session <math alttext="x" class="ltx_Math" display="inline" id="alg2.l5.m1.1"><semantics id="alg2.l5.m1.1a"><mi id="alg2.l5.m1.1.1" xref="alg2.l5.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="alg2.l5.m1.1b"><ci id="alg2.l5.m1.1.1.cmml" xref="alg2.l5.m1.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="alg2.l5.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="alg2.l5.m1.1d">italic_x</annotation></semantics></math> with setting <math alttext="a" class="ltx_Math" display="inline" id="alg2.l5.m2.1"><semantics id="alg2.l5.m2.1a"><mi id="alg2.l5.m2.1.1" xref="alg2.l5.m2.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="alg2.l5.m2.1b"><ci id="alg2.l5.m2.1.1.cmml" xref="alg2.l5.m2.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="alg2.l5.m2.1c">a</annotation><annotation encoding="application/x-llamapun" id="alg2.l5.m2.1d">italic_a</annotation></semantics></math> to get <math alttext="\hat{x}" class="ltx_Math" display="inline" id="alg2.l5.m3.1"><semantics id="alg2.l5.m3.1a"><mover accent="true" id="alg2.l5.m3.1.1" xref="alg2.l5.m3.1.1.cmml"><mi id="alg2.l5.m3.1.1.2" xref="alg2.l5.m3.1.1.2.cmml">x</mi><mo id="alg2.l5.m3.1.1.1" xref="alg2.l5.m3.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="alg2.l5.m3.1b"><apply id="alg2.l5.m3.1.1.cmml" xref="alg2.l5.m3.1.1"><ci id="alg2.l5.m3.1.1.1.cmml" xref="alg2.l5.m3.1.1.1">^</ci><ci id="alg2.l5.m3.1.1.2.cmml" xref="alg2.l5.m3.1.1.2">ğ‘¥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l5.m3.1c">\hat{x}</annotation><annotation encoding="application/x-llamapun" id="alg2.l5.m3.1d">over^ start_ARG italic_x end_ARG</annotation></semantics></math>. 

</div>
<div class="ltx_listingline" id="alg2.l6">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l6.1.1.1" style="font-size:80%;">6:</span></span>Â Â Â Â Â Â Â Â Â Â Â Â Â Â <math alttext="\textbf{p}_{xa}=f(\mathcal{M}(\hat{x}),\hat{x})" class="ltx_Math" display="inline" id="alg2.l6.m1.3"><semantics id="alg2.l6.m1.3a"><mrow id="alg2.l6.m1.3.3" xref="alg2.l6.m1.3.3.cmml"><msub id="alg2.l6.m1.3.3.3" xref="alg2.l6.m1.3.3.3.cmml"><mtext class="ltx_mathvariant_bold" id="alg2.l6.m1.3.3.3.2" xref="alg2.l6.m1.3.3.3.2a.cmml">p</mtext><mrow id="alg2.l6.m1.3.3.3.3" xref="alg2.l6.m1.3.3.3.3.cmml"><mi id="alg2.l6.m1.3.3.3.3.2" xref="alg2.l6.m1.3.3.3.3.2.cmml">x</mi><mo id="alg2.l6.m1.3.3.3.3.1" xref="alg2.l6.m1.3.3.3.3.1.cmml">â¢</mo><mi id="alg2.l6.m1.3.3.3.3.3" xref="alg2.l6.m1.3.3.3.3.3.cmml">a</mi></mrow></msub><mo id="alg2.l6.m1.3.3.2" xref="alg2.l6.m1.3.3.2.cmml">=</mo><mrow id="alg2.l6.m1.3.3.1" xref="alg2.l6.m1.3.3.1.cmml"><mi id="alg2.l6.m1.3.3.1.3" xref="alg2.l6.m1.3.3.1.3.cmml">f</mi><mo id="alg2.l6.m1.3.3.1.2" xref="alg2.l6.m1.3.3.1.2.cmml">â¢</mo><mrow id="alg2.l6.m1.3.3.1.1.1" xref="alg2.l6.m1.3.3.1.1.2.cmml"><mo id="alg2.l6.m1.3.3.1.1.1.2" stretchy="false" xref="alg2.l6.m1.3.3.1.1.2.cmml">(</mo><mrow id="alg2.l6.m1.3.3.1.1.1.1" xref="alg2.l6.m1.3.3.1.1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="alg2.l6.m1.3.3.1.1.1.1.2" xref="alg2.l6.m1.3.3.1.1.1.1.2.cmml">â„³</mi><mo id="alg2.l6.m1.3.3.1.1.1.1.1" xref="alg2.l6.m1.3.3.1.1.1.1.1.cmml">â¢</mo><mrow id="alg2.l6.m1.3.3.1.1.1.1.3.2" xref="alg2.l6.m1.1.1.cmml"><mo id="alg2.l6.m1.3.3.1.1.1.1.3.2.1" stretchy="false" xref="alg2.l6.m1.1.1.cmml">(</mo><mover accent="true" id="alg2.l6.m1.1.1" xref="alg2.l6.m1.1.1.cmml"><mi id="alg2.l6.m1.1.1.2" xref="alg2.l6.m1.1.1.2.cmml">x</mi><mo id="alg2.l6.m1.1.1.1" xref="alg2.l6.m1.1.1.1.cmml">^</mo></mover><mo id="alg2.l6.m1.3.3.1.1.1.1.3.2.2" stretchy="false" xref="alg2.l6.m1.1.1.cmml">)</mo></mrow></mrow><mo id="alg2.l6.m1.3.3.1.1.1.3" xref="alg2.l6.m1.3.3.1.1.2.cmml">,</mo><mover accent="true" id="alg2.l6.m1.2.2" xref="alg2.l6.m1.2.2.cmml"><mi id="alg2.l6.m1.2.2.2" xref="alg2.l6.m1.2.2.2.cmml">x</mi><mo id="alg2.l6.m1.2.2.1" xref="alg2.l6.m1.2.2.1.cmml">^</mo></mover><mo id="alg2.l6.m1.3.3.1.1.1.4" stretchy="false" xref="alg2.l6.m1.3.3.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l6.m1.3b"><apply id="alg2.l6.m1.3.3.cmml" xref="alg2.l6.m1.3.3"><eq id="alg2.l6.m1.3.3.2.cmml" xref="alg2.l6.m1.3.3.2"></eq><apply id="alg2.l6.m1.3.3.3.cmml" xref="alg2.l6.m1.3.3.3"><csymbol cd="ambiguous" id="alg2.l6.m1.3.3.3.1.cmml" xref="alg2.l6.m1.3.3.3">subscript</csymbol><ci id="alg2.l6.m1.3.3.3.2a.cmml" xref="alg2.l6.m1.3.3.3.2"><mtext class="ltx_mathvariant_bold" id="alg2.l6.m1.3.3.3.2.cmml" xref="alg2.l6.m1.3.3.3.2">p</mtext></ci><apply id="alg2.l6.m1.3.3.3.3.cmml" xref="alg2.l6.m1.3.3.3.3"><times id="alg2.l6.m1.3.3.3.3.1.cmml" xref="alg2.l6.m1.3.3.3.3.1"></times><ci id="alg2.l6.m1.3.3.3.3.2.cmml" xref="alg2.l6.m1.3.3.3.3.2">ğ‘¥</ci><ci id="alg2.l6.m1.3.3.3.3.3.cmml" xref="alg2.l6.m1.3.3.3.3.3">ğ‘</ci></apply></apply><apply id="alg2.l6.m1.3.3.1.cmml" xref="alg2.l6.m1.3.3.1"><times id="alg2.l6.m1.3.3.1.2.cmml" xref="alg2.l6.m1.3.3.1.2"></times><ci id="alg2.l6.m1.3.3.1.3.cmml" xref="alg2.l6.m1.3.3.1.3">ğ‘“</ci><interval closure="open" id="alg2.l6.m1.3.3.1.1.2.cmml" xref="alg2.l6.m1.3.3.1.1.1"><apply id="alg2.l6.m1.3.3.1.1.1.1.cmml" xref="alg2.l6.m1.3.3.1.1.1.1"><times id="alg2.l6.m1.3.3.1.1.1.1.1.cmml" xref="alg2.l6.m1.3.3.1.1.1.1.1"></times><ci id="alg2.l6.m1.3.3.1.1.1.1.2.cmml" xref="alg2.l6.m1.3.3.1.1.1.1.2">â„³</ci><apply id="alg2.l6.m1.1.1.cmml" xref="alg2.l6.m1.3.3.1.1.1.1.3.2"><ci id="alg2.l6.m1.1.1.1.cmml" xref="alg2.l6.m1.1.1.1">^</ci><ci id="alg2.l6.m1.1.1.2.cmml" xref="alg2.l6.m1.1.1.2">ğ‘¥</ci></apply></apply><apply id="alg2.l6.m1.2.2.cmml" xref="alg2.l6.m1.2.2"><ci id="alg2.l6.m1.2.2.1.cmml" xref="alg2.l6.m1.2.2.1">^</ci><ci id="alg2.l6.m1.2.2.2.cmml" xref="alg2.l6.m1.2.2.2">ğ‘¥</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l6.m1.3c">\textbf{p}_{xa}=f(\mathcal{M}(\hat{x}),\hat{x})</annotation><annotation encoding="application/x-llamapun" id="alg2.l6.m1.3d">p start_POSTSUBSCRIPT italic_x italic_a end_POSTSUBSCRIPT = italic_f ( caligraphic_M ( over^ start_ARG italic_x end_ARG ) , over^ start_ARG italic_x end_ARG )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l7">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l7.1.1.1" style="font-size:80%;">7:</span></span>Â Â Â Â Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg2.l7.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg2.l7.3">for</span>
</div>
<div class="ltx_listingline" id="alg2.l8">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l8.1.1.1" style="font-size:80%;">8:</span></span>Â Â Â Â Â Â Â Â Â <math alttext="\textbf{p}_{a}=\sum_{i=1}^{x}\textbf{p}_{xa}" class="ltx_Math" display="inline" id="alg2.l8.m1.1"><semantics id="alg2.l8.m1.1a"><mrow id="alg2.l8.m1.1.1" xref="alg2.l8.m1.1.1.cmml"><msub id="alg2.l8.m1.1.1.2" xref="alg2.l8.m1.1.1.2.cmml"><mtext class="ltx_mathvariant_bold" id="alg2.l8.m1.1.1.2.2" xref="alg2.l8.m1.1.1.2.2a.cmml">p</mtext><mi id="alg2.l8.m1.1.1.2.3" xref="alg2.l8.m1.1.1.2.3.cmml">a</mi></msub><mo id="alg2.l8.m1.1.1.1" rspace="0.111em" xref="alg2.l8.m1.1.1.1.cmml">=</mo><mrow id="alg2.l8.m1.1.1.3" xref="alg2.l8.m1.1.1.3.cmml"><msubsup id="alg2.l8.m1.1.1.3.1" xref="alg2.l8.m1.1.1.3.1.cmml"><mo id="alg2.l8.m1.1.1.3.1.2.2" xref="alg2.l8.m1.1.1.3.1.2.2.cmml">âˆ‘</mo><mrow id="alg2.l8.m1.1.1.3.1.2.3" xref="alg2.l8.m1.1.1.3.1.2.3.cmml"><mi id="alg2.l8.m1.1.1.3.1.2.3.2" xref="alg2.l8.m1.1.1.3.1.2.3.2.cmml">i</mi><mo id="alg2.l8.m1.1.1.3.1.2.3.1" xref="alg2.l8.m1.1.1.3.1.2.3.1.cmml">=</mo><mn id="alg2.l8.m1.1.1.3.1.2.3.3" xref="alg2.l8.m1.1.1.3.1.2.3.3.cmml">1</mn></mrow><mi id="alg2.l8.m1.1.1.3.1.3" xref="alg2.l8.m1.1.1.3.1.3.cmml">x</mi></msubsup><msub id="alg2.l8.m1.1.1.3.2" xref="alg2.l8.m1.1.1.3.2.cmml"><mtext class="ltx_mathvariant_bold" id="alg2.l8.m1.1.1.3.2.2" xref="alg2.l8.m1.1.1.3.2.2a.cmml">p</mtext><mrow id="alg2.l8.m1.1.1.3.2.3" xref="alg2.l8.m1.1.1.3.2.3.cmml"><mi id="alg2.l8.m1.1.1.3.2.3.2" xref="alg2.l8.m1.1.1.3.2.3.2.cmml">x</mi><mo id="alg2.l8.m1.1.1.3.2.3.1" xref="alg2.l8.m1.1.1.3.2.3.1.cmml">â¢</mo><mi id="alg2.l8.m1.1.1.3.2.3.3" xref="alg2.l8.m1.1.1.3.2.3.3.cmml">a</mi></mrow></msub></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg2.l8.m1.1b"><apply id="alg2.l8.m1.1.1.cmml" xref="alg2.l8.m1.1.1"><eq id="alg2.l8.m1.1.1.1.cmml" xref="alg2.l8.m1.1.1.1"></eq><apply id="alg2.l8.m1.1.1.2.cmml" xref="alg2.l8.m1.1.1.2"><csymbol cd="ambiguous" id="alg2.l8.m1.1.1.2.1.cmml" xref="alg2.l8.m1.1.1.2">subscript</csymbol><ci id="alg2.l8.m1.1.1.2.2a.cmml" xref="alg2.l8.m1.1.1.2.2"><mtext class="ltx_mathvariant_bold" id="alg2.l8.m1.1.1.2.2.cmml" xref="alg2.l8.m1.1.1.2.2">p</mtext></ci><ci id="alg2.l8.m1.1.1.2.3.cmml" xref="alg2.l8.m1.1.1.2.3">ğ‘</ci></apply><apply id="alg2.l8.m1.1.1.3.cmml" xref="alg2.l8.m1.1.1.3"><apply id="alg2.l8.m1.1.1.3.1.cmml" xref="alg2.l8.m1.1.1.3.1"><csymbol cd="ambiguous" id="alg2.l8.m1.1.1.3.1.1.cmml" xref="alg2.l8.m1.1.1.3.1">superscript</csymbol><apply id="alg2.l8.m1.1.1.3.1.2.cmml" xref="alg2.l8.m1.1.1.3.1"><csymbol cd="ambiguous" id="alg2.l8.m1.1.1.3.1.2.1.cmml" xref="alg2.l8.m1.1.1.3.1">subscript</csymbol><sum id="alg2.l8.m1.1.1.3.1.2.2.cmml" xref="alg2.l8.m1.1.1.3.1.2.2"></sum><apply id="alg2.l8.m1.1.1.3.1.2.3.cmml" xref="alg2.l8.m1.1.1.3.1.2.3"><eq id="alg2.l8.m1.1.1.3.1.2.3.1.cmml" xref="alg2.l8.m1.1.1.3.1.2.3.1"></eq><ci id="alg2.l8.m1.1.1.3.1.2.3.2.cmml" xref="alg2.l8.m1.1.1.3.1.2.3.2">ğ‘–</ci><cn id="alg2.l8.m1.1.1.3.1.2.3.3.cmml" type="integer" xref="alg2.l8.m1.1.1.3.1.2.3.3">1</cn></apply></apply><ci id="alg2.l8.m1.1.1.3.1.3.cmml" xref="alg2.l8.m1.1.1.3.1.3">ğ‘¥</ci></apply><apply id="alg2.l8.m1.1.1.3.2.cmml" xref="alg2.l8.m1.1.1.3.2"><csymbol cd="ambiguous" id="alg2.l8.m1.1.1.3.2.1.cmml" xref="alg2.l8.m1.1.1.3.2">subscript</csymbol><ci id="alg2.l8.m1.1.1.3.2.2a.cmml" xref="alg2.l8.m1.1.1.3.2.2"><mtext class="ltx_mathvariant_bold" id="alg2.l8.m1.1.1.3.2.2.cmml" xref="alg2.l8.m1.1.1.3.2.2">p</mtext></ci><apply id="alg2.l8.m1.1.1.3.2.3.cmml" xref="alg2.l8.m1.1.1.3.2.3"><times id="alg2.l8.m1.1.1.3.2.3.1.cmml" xref="alg2.l8.m1.1.1.3.2.3.1"></times><ci id="alg2.l8.m1.1.1.3.2.3.2.cmml" xref="alg2.l8.m1.1.1.3.2.3.2">ğ‘¥</ci><ci id="alg2.l8.m1.1.1.3.2.3.3.cmml" xref="alg2.l8.m1.1.1.3.2.3.3">ğ‘</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l8.m1.1c">\textbf{p}_{a}=\sum_{i=1}^{x}\textbf{p}_{xa}</annotation><annotation encoding="application/x-llamapun" id="alg2.l8.m1.1d">p start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT = âˆ‘ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_x end_POSTSUPERSCRIPT p start_POSTSUBSCRIPT italic_x italic_a end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l9">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l9.1.1.1" style="font-size:80%;">9:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg2.l9.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg2.l9.3">for</span>
</div>
<div class="ltx_listingline" id="alg2.l10">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l10.1.1.1" style="font-size:80%;">10:</span></span>Â Â Â Â Â <math alttext="\hat{X}_{a}=[\hat{x}_{a}]_{\forall a\in\textbf{A}}" class="ltx_Math" display="inline" id="alg2.l10.m1.1"><semantics id="alg2.l10.m1.1a"><mrow id="alg2.l10.m1.1.1" xref="alg2.l10.m1.1.1.cmml"><msub id="alg2.l10.m1.1.1.3" xref="alg2.l10.m1.1.1.3.cmml"><mover accent="true" id="alg2.l10.m1.1.1.3.2" xref="alg2.l10.m1.1.1.3.2.cmml"><mi id="alg2.l10.m1.1.1.3.2.2" xref="alg2.l10.m1.1.1.3.2.2.cmml">X</mi><mo id="alg2.l10.m1.1.1.3.2.1" xref="alg2.l10.m1.1.1.3.2.1.cmml">^</mo></mover><mi id="alg2.l10.m1.1.1.3.3" xref="alg2.l10.m1.1.1.3.3.cmml">a</mi></msub><mo id="alg2.l10.m1.1.1.2" xref="alg2.l10.m1.1.1.2.cmml">=</mo><msub id="alg2.l10.m1.1.1.1" xref="alg2.l10.m1.1.1.1.cmml"><mrow id="alg2.l10.m1.1.1.1.1.1" xref="alg2.l10.m1.1.1.1.1.2.cmml"><mo id="alg2.l10.m1.1.1.1.1.1.2" stretchy="false" xref="alg2.l10.m1.1.1.1.1.2.1.cmml">[</mo><msub id="alg2.l10.m1.1.1.1.1.1.1" xref="alg2.l10.m1.1.1.1.1.1.1.cmml"><mover accent="true" id="alg2.l10.m1.1.1.1.1.1.1.2" xref="alg2.l10.m1.1.1.1.1.1.1.2.cmml"><mi id="alg2.l10.m1.1.1.1.1.1.1.2.2" xref="alg2.l10.m1.1.1.1.1.1.1.2.2.cmml">x</mi><mo id="alg2.l10.m1.1.1.1.1.1.1.2.1" xref="alg2.l10.m1.1.1.1.1.1.1.2.1.cmml">^</mo></mover><mi id="alg2.l10.m1.1.1.1.1.1.1.3" xref="alg2.l10.m1.1.1.1.1.1.1.3.cmml">a</mi></msub><mo id="alg2.l10.m1.1.1.1.1.1.3" stretchy="false" xref="alg2.l10.m1.1.1.1.1.2.1.cmml">]</mo></mrow><mrow id="alg2.l10.m1.1.1.1.3" xref="alg2.l10.m1.1.1.1.3.cmml"><mrow id="alg2.l10.m1.1.1.1.3.2" xref="alg2.l10.m1.1.1.1.3.2.cmml"><mo id="alg2.l10.m1.1.1.1.3.2.1" rspace="0.167em" xref="alg2.l10.m1.1.1.1.3.2.1.cmml">âˆ€</mo><mi id="alg2.l10.m1.1.1.1.3.2.2" xref="alg2.l10.m1.1.1.1.3.2.2.cmml">a</mi></mrow><mo id="alg2.l10.m1.1.1.1.3.1" xref="alg2.l10.m1.1.1.1.3.1.cmml">âˆˆ</mo><mtext class="ltx_mathvariant_bold" id="alg2.l10.m1.1.1.1.3.3" xref="alg2.l10.m1.1.1.1.3.3a.cmml">A</mtext></mrow></msub></mrow><annotation-xml encoding="MathML-Content" id="alg2.l10.m1.1b"><apply id="alg2.l10.m1.1.1.cmml" xref="alg2.l10.m1.1.1"><eq id="alg2.l10.m1.1.1.2.cmml" xref="alg2.l10.m1.1.1.2"></eq><apply id="alg2.l10.m1.1.1.3.cmml" xref="alg2.l10.m1.1.1.3"><csymbol cd="ambiguous" id="alg2.l10.m1.1.1.3.1.cmml" xref="alg2.l10.m1.1.1.3">subscript</csymbol><apply id="alg2.l10.m1.1.1.3.2.cmml" xref="alg2.l10.m1.1.1.3.2"><ci id="alg2.l10.m1.1.1.3.2.1.cmml" xref="alg2.l10.m1.1.1.3.2.1">^</ci><ci id="alg2.l10.m1.1.1.3.2.2.cmml" xref="alg2.l10.m1.1.1.3.2.2">ğ‘‹</ci></apply><ci id="alg2.l10.m1.1.1.3.3.cmml" xref="alg2.l10.m1.1.1.3.3">ğ‘</ci></apply><apply id="alg2.l10.m1.1.1.1.cmml" xref="alg2.l10.m1.1.1.1"><csymbol cd="ambiguous" id="alg2.l10.m1.1.1.1.2.cmml" xref="alg2.l10.m1.1.1.1">subscript</csymbol><apply id="alg2.l10.m1.1.1.1.1.2.cmml" xref="alg2.l10.m1.1.1.1.1.1"><csymbol cd="latexml" id="alg2.l10.m1.1.1.1.1.2.1.cmml" xref="alg2.l10.m1.1.1.1.1.1.2">delimited-[]</csymbol><apply id="alg2.l10.m1.1.1.1.1.1.1.cmml" xref="alg2.l10.m1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg2.l10.m1.1.1.1.1.1.1.1.cmml" xref="alg2.l10.m1.1.1.1.1.1.1">subscript</csymbol><apply id="alg2.l10.m1.1.1.1.1.1.1.2.cmml" xref="alg2.l10.m1.1.1.1.1.1.1.2"><ci id="alg2.l10.m1.1.1.1.1.1.1.2.1.cmml" xref="alg2.l10.m1.1.1.1.1.1.1.2.1">^</ci><ci id="alg2.l10.m1.1.1.1.1.1.1.2.2.cmml" xref="alg2.l10.m1.1.1.1.1.1.1.2.2">ğ‘¥</ci></apply><ci id="alg2.l10.m1.1.1.1.1.1.1.3.cmml" xref="alg2.l10.m1.1.1.1.1.1.1.3">ğ‘</ci></apply></apply><apply id="alg2.l10.m1.1.1.1.3.cmml" xref="alg2.l10.m1.1.1.1.3"><in id="alg2.l10.m1.1.1.1.3.1.cmml" xref="alg2.l10.m1.1.1.1.3.1"></in><apply id="alg2.l10.m1.1.1.1.3.2.cmml" xref="alg2.l10.m1.1.1.1.3.2"><csymbol cd="latexml" id="alg2.l10.m1.1.1.1.3.2.1.cmml" xref="alg2.l10.m1.1.1.1.3.2.1">for-all</csymbol><ci id="alg2.l10.m1.1.1.1.3.2.2.cmml" xref="alg2.l10.m1.1.1.1.3.2.2">ğ‘</ci></apply><ci id="alg2.l10.m1.1.1.1.3.3a.cmml" xref="alg2.l10.m1.1.1.1.3.3"><mtext class="ltx_mathvariant_bold" id="alg2.l10.m1.1.1.1.3.3.cmml" mathsize="70%" xref="alg2.l10.m1.1.1.1.3.3">A</mtext></ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l10.m1.1c">\hat{X}_{a}=[\hat{x}_{a}]_{\forall a\in\textbf{A}}</annotation><annotation encoding="application/x-llamapun" id="alg2.l10.m1.1d">over^ start_ARG italic_X end_ARG start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT = [ over^ start_ARG italic_x end_ARG start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT ] start_POSTSUBSCRIPT âˆ€ italic_a âˆˆ A end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l11">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l11.1.1.1" style="font-size:80%;">11:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg2.l11.2">return</span> <math alttext="[\hat{X}_{a},p_{a}]_{\forall a\in\textbf{A}}" class="ltx_Math" display="inline" id="alg2.l11.m1.2"><semantics id="alg2.l11.m1.2a"><msub id="alg2.l11.m1.2.2" xref="alg2.l11.m1.2.2.cmml"><mrow id="alg2.l11.m1.2.2.2.2" xref="alg2.l11.m1.2.2.2.3.cmml"><mo id="alg2.l11.m1.2.2.2.2.3" stretchy="false" xref="alg2.l11.m1.2.2.2.3.cmml">[</mo><msub id="alg2.l11.m1.1.1.1.1.1" xref="alg2.l11.m1.1.1.1.1.1.cmml"><mover accent="true" id="alg2.l11.m1.1.1.1.1.1.2" xref="alg2.l11.m1.1.1.1.1.1.2.cmml"><mi id="alg2.l11.m1.1.1.1.1.1.2.2" xref="alg2.l11.m1.1.1.1.1.1.2.2.cmml">X</mi><mo id="alg2.l11.m1.1.1.1.1.1.2.1" xref="alg2.l11.m1.1.1.1.1.1.2.1.cmml">^</mo></mover><mi id="alg2.l11.m1.1.1.1.1.1.3" xref="alg2.l11.m1.1.1.1.1.1.3.cmml">a</mi></msub><mo id="alg2.l11.m1.2.2.2.2.4" xref="alg2.l11.m1.2.2.2.3.cmml">,</mo><msub id="alg2.l11.m1.2.2.2.2.2" xref="alg2.l11.m1.2.2.2.2.2.cmml"><mi id="alg2.l11.m1.2.2.2.2.2.2" xref="alg2.l11.m1.2.2.2.2.2.2.cmml">p</mi><mi id="alg2.l11.m1.2.2.2.2.2.3" xref="alg2.l11.m1.2.2.2.2.2.3.cmml">a</mi></msub><mo id="alg2.l11.m1.2.2.2.2.5" stretchy="false" xref="alg2.l11.m1.2.2.2.3.cmml">]</mo></mrow><mrow id="alg2.l11.m1.2.2.4" xref="alg2.l11.m1.2.2.4.cmml"><mrow id="alg2.l11.m1.2.2.4.2" xref="alg2.l11.m1.2.2.4.2.cmml"><mo id="alg2.l11.m1.2.2.4.2.1" rspace="0.167em" xref="alg2.l11.m1.2.2.4.2.1.cmml">âˆ€</mo><mi id="alg2.l11.m1.2.2.4.2.2" xref="alg2.l11.m1.2.2.4.2.2.cmml">a</mi></mrow><mo id="alg2.l11.m1.2.2.4.1" xref="alg2.l11.m1.2.2.4.1.cmml">âˆˆ</mo><mtext class="ltx_mathvariant_bold" id="alg2.l11.m1.2.2.4.3" xref="alg2.l11.m1.2.2.4.3a.cmml">A</mtext></mrow></msub><annotation-xml encoding="MathML-Content" id="alg2.l11.m1.2b"><apply id="alg2.l11.m1.2.2.cmml" xref="alg2.l11.m1.2.2"><csymbol cd="ambiguous" id="alg2.l11.m1.2.2.3.cmml" xref="alg2.l11.m1.2.2">subscript</csymbol><interval closure="closed" id="alg2.l11.m1.2.2.2.3.cmml" xref="alg2.l11.m1.2.2.2.2"><apply id="alg2.l11.m1.1.1.1.1.1.cmml" xref="alg2.l11.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg2.l11.m1.1.1.1.1.1.1.cmml" xref="alg2.l11.m1.1.1.1.1.1">subscript</csymbol><apply id="alg2.l11.m1.1.1.1.1.1.2.cmml" xref="alg2.l11.m1.1.1.1.1.1.2"><ci id="alg2.l11.m1.1.1.1.1.1.2.1.cmml" xref="alg2.l11.m1.1.1.1.1.1.2.1">^</ci><ci id="alg2.l11.m1.1.1.1.1.1.2.2.cmml" xref="alg2.l11.m1.1.1.1.1.1.2.2">ğ‘‹</ci></apply><ci id="alg2.l11.m1.1.1.1.1.1.3.cmml" xref="alg2.l11.m1.1.1.1.1.1.3">ğ‘</ci></apply><apply id="alg2.l11.m1.2.2.2.2.2.cmml" xref="alg2.l11.m1.2.2.2.2.2"><csymbol cd="ambiguous" id="alg2.l11.m1.2.2.2.2.2.1.cmml" xref="alg2.l11.m1.2.2.2.2.2">subscript</csymbol><ci id="alg2.l11.m1.2.2.2.2.2.2.cmml" xref="alg2.l11.m1.2.2.2.2.2.2">ğ‘</ci><ci id="alg2.l11.m1.2.2.2.2.2.3.cmml" xref="alg2.l11.m1.2.2.2.2.2.3">ğ‘</ci></apply></interval><apply id="alg2.l11.m1.2.2.4.cmml" xref="alg2.l11.m1.2.2.4"><in id="alg2.l11.m1.2.2.4.1.cmml" xref="alg2.l11.m1.2.2.4.1"></in><apply id="alg2.l11.m1.2.2.4.2.cmml" xref="alg2.l11.m1.2.2.4.2"><csymbol cd="latexml" id="alg2.l11.m1.2.2.4.2.1.cmml" xref="alg2.l11.m1.2.2.4.2.1">for-all</csymbol><ci id="alg2.l11.m1.2.2.4.2.2.cmml" xref="alg2.l11.m1.2.2.4.2.2">ğ‘</ci></apply><ci id="alg2.l11.m1.2.2.4.3a.cmml" xref="alg2.l11.m1.2.2.4.3"><mtext class="ltx_mathvariant_bold" id="alg2.l11.m1.2.2.4.3.cmml" mathsize="70%" xref="alg2.l11.m1.2.2.4.3">A</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg2.l11.m1.2c">[\hat{X}_{a},p_{a}]_{\forall a\in\textbf{A}}</annotation><annotation encoding="application/x-llamapun" id="alg2.l11.m1.2d">[ over^ start_ARG italic_X end_ARG start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT , italic_p start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT ] start_POSTSUBSCRIPT âˆ€ italic_a âˆˆ A end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg2.l12">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg2.l12.1.1.1" style="font-size:80%;">12:</span></span><span class="ltx_text ltx_font_bold" id="alg2.l12.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg2.l12.3">procedure</span>
</div>
</div>
</figure>
</section>
</section>
<section class="ltx_subsection" id="A1.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.2. </span>Importance Sampling</h3>
<div class="ltx_para" id="A1.SS2.p1">
<p class="ltx_p" id="A1.SS2.p1.4">Observational approaches like importance sampling is used for iterative tuning of large-scale recommender systems.
The portion of traffic is randomized to capture the effect of changing parameters.
A popular choice for randomization is imposing a Gaussian distribution <cite class="ltx_cite ltx_citemacro_citep">(<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#bib.bib4" title="">gorurautomated, </a>)</cite>.
The randomization is controlled with the variance of the proposal distribution <math alttext="q" class="ltx_Math" display="inline" id="A1.SS2.p1.1.m1.1"><semantics id="A1.SS2.p1.1.m1.1a"><mi id="A1.SS2.p1.1.m1.1.1" xref="A1.SS2.p1.1.m1.1.1.cmml">q</mi><annotation-xml encoding="MathML-Content" id="A1.SS2.p1.1.m1.1b"><ci id="A1.SS2.p1.1.m1.1.1.cmml" xref="A1.SS2.p1.1.m1.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS2.p1.1.m1.1c">q</annotation><annotation encoding="application/x-llamapun" id="A1.SS2.p1.1.m1.1d">italic_q</annotation></semantics></math>, importance sampling is used to evaluate the effect of changing proposal to a candidate distribution <math alttext="a" class="ltx_Math" display="inline" id="A1.SS2.p1.2.m2.1"><semantics id="A1.SS2.p1.2.m2.1a"><mi id="A1.SS2.p1.2.m2.1.1" xref="A1.SS2.p1.2.m2.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="A1.SS2.p1.2.m2.1b"><ci id="A1.SS2.p1.2.m2.1.1.cmml" xref="A1.SS2.p1.2.m2.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS2.p1.2.m2.1c">a</annotation><annotation encoding="application/x-llamapun" id="A1.SS2.p1.2.m2.1d">italic_a</annotation></semantics></math>.
Let <math alttext="x" class="ltx_Math" display="inline" id="A1.SS2.p1.3.m3.1"><semantics id="A1.SS2.p1.3.m3.1a"><mi id="A1.SS2.p1.3.m3.1.1" xref="A1.SS2.p1.3.m3.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="A1.SS2.p1.3.m3.1b"><ci id="A1.SS2.p1.3.m3.1.1.cmml" xref="A1.SS2.p1.3.m3.1.1">ğ‘¥</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS2.p1.3.m3.1c">x</annotation><annotation encoding="application/x-llamapun" id="A1.SS2.p1.3.m3.1d">italic_x</annotation></semantics></math> be a user session and <math alttext="f" class="ltx_Math" display="inline" id="A1.SS2.p1.4.m4.1"><semantics id="A1.SS2.p1.4.m4.1a"><mi id="A1.SS2.p1.4.m4.1.1" xref="A1.SS2.p1.4.m4.1.1.cmml">f</mi><annotation-xml encoding="MathML-Content" id="A1.SS2.p1.4.m4.1b"><ci id="A1.SS2.p1.4.m4.1.1.cmml" xref="A1.SS2.p1.4.m4.1.1">ğ‘“</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS2.p1.4.m4.1c">f</annotation><annotation encoding="application/x-llamapun" id="A1.SS2.p1.4.m4.1d">italic_f</annotation></semantics></math> be a KPI function, the effect of candidate distribution can be captured in the following way.</p>
</div>
<div class="ltx_para" id="A1.SS2.p2">
<table class="ltx_equation ltx_eqn_table" id="A1.E3">
<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_left" rowspan="1"><span class="ltx_tag ltx_tag_equation ltx_align_left">(3)</span></td>
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math alttext="E_{a}[f(X)]=E_{q}\big{[}f(X)\frac{a(x)}{q(x)}\big{]}\approx\frac{1}{N}\sum_{i=%
1}^{N}f(x_{i})\frac{a(x_{i})}{q(x_{i})}" class="ltx_Math" display="block" id="A1.E3.m1.9"><semantics id="A1.E3.m1.9a"><mrow id="A1.E3.m1.9.9" xref="A1.E3.m1.9.9.cmml"><mrow id="A1.E3.m1.7.7.1" xref="A1.E3.m1.7.7.1.cmml"><msub id="A1.E3.m1.7.7.1.3" xref="A1.E3.m1.7.7.1.3.cmml"><mi id="A1.E3.m1.7.7.1.3.2" xref="A1.E3.m1.7.7.1.3.2.cmml">E</mi><mi id="A1.E3.m1.7.7.1.3.3" xref="A1.E3.m1.7.7.1.3.3.cmml">a</mi></msub><mo id="A1.E3.m1.7.7.1.2" xref="A1.E3.m1.7.7.1.2.cmml">â¢</mo><mrow id="A1.E3.m1.7.7.1.1.1" xref="A1.E3.m1.7.7.1.1.2.cmml"><mo id="A1.E3.m1.7.7.1.1.1.2" stretchy="false" xref="A1.E3.m1.7.7.1.1.2.1.cmml">[</mo><mrow id="A1.E3.m1.7.7.1.1.1.1" xref="A1.E3.m1.7.7.1.1.1.1.cmml"><mi id="A1.E3.m1.7.7.1.1.1.1.2" xref="A1.E3.m1.7.7.1.1.1.1.2.cmml">f</mi><mo id="A1.E3.m1.7.7.1.1.1.1.1" xref="A1.E3.m1.7.7.1.1.1.1.1.cmml">â¢</mo><mrow id="A1.E3.m1.7.7.1.1.1.1.3.2" xref="A1.E3.m1.7.7.1.1.1.1.cmml"><mo id="A1.E3.m1.7.7.1.1.1.1.3.2.1" stretchy="false" xref="A1.E3.m1.7.7.1.1.1.1.cmml">(</mo><mi id="A1.E3.m1.5.5" xref="A1.E3.m1.5.5.cmml">X</mi><mo id="A1.E3.m1.7.7.1.1.1.1.3.2.2" stretchy="false" xref="A1.E3.m1.7.7.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="A1.E3.m1.7.7.1.1.1.3" stretchy="false" xref="A1.E3.m1.7.7.1.1.2.1.cmml">]</mo></mrow></mrow><mo id="A1.E3.m1.9.9.5" xref="A1.E3.m1.9.9.5.cmml">=</mo><mrow id="A1.E3.m1.8.8.2" xref="A1.E3.m1.8.8.2.cmml"><msub id="A1.E3.m1.8.8.2.3" xref="A1.E3.m1.8.8.2.3.cmml"><mi id="A1.E3.m1.8.8.2.3.2" xref="A1.E3.m1.8.8.2.3.2.cmml">E</mi><mi id="A1.E3.m1.8.8.2.3.3" xref="A1.E3.m1.8.8.2.3.3.cmml">q</mi></msub><mo id="A1.E3.m1.8.8.2.2" xref="A1.E3.m1.8.8.2.2.cmml">â¢</mo><mrow id="A1.E3.m1.8.8.2.1.1" xref="A1.E3.m1.8.8.2.1.2.cmml"><mo id="A1.E3.m1.8.8.2.1.1.2" maxsize="120%" minsize="120%" xref="A1.E3.m1.8.8.2.1.2.1.cmml">[</mo><mrow id="A1.E3.m1.8.8.2.1.1.1" xref="A1.E3.m1.8.8.2.1.1.1.cmml"><mi id="A1.E3.m1.8.8.2.1.1.1.2" xref="A1.E3.m1.8.8.2.1.1.1.2.cmml">f</mi><mo id="A1.E3.m1.8.8.2.1.1.1.1" xref="A1.E3.m1.8.8.2.1.1.1.1.cmml">â¢</mo><mrow id="A1.E3.m1.8.8.2.1.1.1.3.2" xref="A1.E3.m1.8.8.2.1.1.1.cmml"><mo id="A1.E3.m1.8.8.2.1.1.1.3.2.1" stretchy="false" xref="A1.E3.m1.8.8.2.1.1.1.cmml">(</mo><mi id="A1.E3.m1.6.6" xref="A1.E3.m1.6.6.cmml">X</mi><mo id="A1.E3.m1.8.8.2.1.1.1.3.2.2" stretchy="false" xref="A1.E3.m1.8.8.2.1.1.1.cmml">)</mo></mrow><mo id="A1.E3.m1.8.8.2.1.1.1.1a" xref="A1.E3.m1.8.8.2.1.1.1.1.cmml">â¢</mo><mfrac id="A1.E3.m1.2.2" xref="A1.E3.m1.2.2.cmml"><mrow id="A1.E3.m1.1.1.1" xref="A1.E3.m1.1.1.1.cmml"><mi id="A1.E3.m1.1.1.1.3" xref="A1.E3.m1.1.1.1.3.cmml">a</mi><mo id="A1.E3.m1.1.1.1.2" xref="A1.E3.m1.1.1.1.2.cmml">â¢</mo><mrow id="A1.E3.m1.1.1.1.4.2" xref="A1.E3.m1.1.1.1.cmml"><mo id="A1.E3.m1.1.1.1.4.2.1" stretchy="false" xref="A1.E3.m1.1.1.1.cmml">(</mo><mi id="A1.E3.m1.1.1.1.1" xref="A1.E3.m1.1.1.1.1.cmml">x</mi><mo id="A1.E3.m1.1.1.1.4.2.2" stretchy="false" xref="A1.E3.m1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="A1.E3.m1.2.2.2" xref="A1.E3.m1.2.2.2.cmml"><mi id="A1.E3.m1.2.2.2.3" xref="A1.E3.m1.2.2.2.3.cmml">q</mi><mo id="A1.E3.m1.2.2.2.2" xref="A1.E3.m1.2.2.2.2.cmml">â¢</mo><mrow id="A1.E3.m1.2.2.2.4.2" xref="A1.E3.m1.2.2.2.cmml"><mo id="A1.E3.m1.2.2.2.4.2.1" stretchy="false" xref="A1.E3.m1.2.2.2.cmml">(</mo><mi id="A1.E3.m1.2.2.2.1" xref="A1.E3.m1.2.2.2.1.cmml">x</mi><mo id="A1.E3.m1.2.2.2.4.2.2" stretchy="false" xref="A1.E3.m1.2.2.2.cmml">)</mo></mrow></mrow></mfrac></mrow><mo id="A1.E3.m1.8.8.2.1.1.3" maxsize="120%" minsize="120%" xref="A1.E3.m1.8.8.2.1.2.1.cmml">]</mo></mrow></mrow><mo id="A1.E3.m1.9.9.6" xref="A1.E3.m1.9.9.6.cmml">â‰ˆ</mo><mrow id="A1.E3.m1.9.9.3" xref="A1.E3.m1.9.9.3.cmml"><mfrac id="A1.E3.m1.9.9.3.3" xref="A1.E3.m1.9.9.3.3.cmml"><mn id="A1.E3.m1.9.9.3.3.2" xref="A1.E3.m1.9.9.3.3.2.cmml">1</mn><mi id="A1.E3.m1.9.9.3.3.3" xref="A1.E3.m1.9.9.3.3.3.cmml">N</mi></mfrac><mo id="A1.E3.m1.9.9.3.2" xref="A1.E3.m1.9.9.3.2.cmml">â¢</mo><mrow id="A1.E3.m1.9.9.3.1" xref="A1.E3.m1.9.9.3.1.cmml"><munderover id="A1.E3.m1.9.9.3.1.2" xref="A1.E3.m1.9.9.3.1.2.cmml"><mo id="A1.E3.m1.9.9.3.1.2.2.2" movablelimits="false" xref="A1.E3.m1.9.9.3.1.2.2.2.cmml">âˆ‘</mo><mrow id="A1.E3.m1.9.9.3.1.2.2.3" xref="A1.E3.m1.9.9.3.1.2.2.3.cmml"><mi id="A1.E3.m1.9.9.3.1.2.2.3.2" xref="A1.E3.m1.9.9.3.1.2.2.3.2.cmml">i</mi><mo id="A1.E3.m1.9.9.3.1.2.2.3.1" xref="A1.E3.m1.9.9.3.1.2.2.3.1.cmml">=</mo><mn id="A1.E3.m1.9.9.3.1.2.2.3.3" xref="A1.E3.m1.9.9.3.1.2.2.3.3.cmml">1</mn></mrow><mi id="A1.E3.m1.9.9.3.1.2.3" xref="A1.E3.m1.9.9.3.1.2.3.cmml">N</mi></munderover><mrow id="A1.E3.m1.9.9.3.1.1" xref="A1.E3.m1.9.9.3.1.1.cmml"><mi id="A1.E3.m1.9.9.3.1.1.3" xref="A1.E3.m1.9.9.3.1.1.3.cmml">f</mi><mo id="A1.E3.m1.9.9.3.1.1.2" xref="A1.E3.m1.9.9.3.1.1.2.cmml">â¢</mo><mrow id="A1.E3.m1.9.9.3.1.1.1.1" xref="A1.E3.m1.9.9.3.1.1.1.1.1.cmml"><mo id="A1.E3.m1.9.9.3.1.1.1.1.2" stretchy="false" xref="A1.E3.m1.9.9.3.1.1.1.1.1.cmml">(</mo><msub id="A1.E3.m1.9.9.3.1.1.1.1.1" xref="A1.E3.m1.9.9.3.1.1.1.1.1.cmml"><mi id="A1.E3.m1.9.9.3.1.1.1.1.1.2" xref="A1.E3.m1.9.9.3.1.1.1.1.1.2.cmml">x</mi><mi id="A1.E3.m1.9.9.3.1.1.1.1.1.3" xref="A1.E3.m1.9.9.3.1.1.1.1.1.3.cmml">i</mi></msub><mo id="A1.E3.m1.9.9.3.1.1.1.1.3" stretchy="false" xref="A1.E3.m1.9.9.3.1.1.1.1.1.cmml">)</mo></mrow><mo id="A1.E3.m1.9.9.3.1.1.2a" xref="A1.E3.m1.9.9.3.1.1.2.cmml">â¢</mo><mfrac id="A1.E3.m1.4.4" xref="A1.E3.m1.4.4.cmml"><mrow id="A1.E3.m1.3.3.1" xref="A1.E3.m1.3.3.1.cmml"><mi id="A1.E3.m1.3.3.1.3" xref="A1.E3.m1.3.3.1.3.cmml">a</mi><mo id="A1.E3.m1.3.3.1.2" xref="A1.E3.m1.3.3.1.2.cmml">â¢</mo><mrow id="A1.E3.m1.3.3.1.1.1" xref="A1.E3.m1.3.3.1.1.1.1.cmml"><mo id="A1.E3.m1.3.3.1.1.1.2" stretchy="false" xref="A1.E3.m1.3.3.1.1.1.1.cmml">(</mo><msub id="A1.E3.m1.3.3.1.1.1.1" xref="A1.E3.m1.3.3.1.1.1.1.cmml"><mi id="A1.E3.m1.3.3.1.1.1.1.2" xref="A1.E3.m1.3.3.1.1.1.1.2.cmml">x</mi><mi id="A1.E3.m1.3.3.1.1.1.1.3" xref="A1.E3.m1.3.3.1.1.1.1.3.cmml">i</mi></msub><mo id="A1.E3.m1.3.3.1.1.1.3" stretchy="false" xref="A1.E3.m1.3.3.1.1.1.1.cmml">)</mo></mrow></mrow><mrow id="A1.E3.m1.4.4.2" xref="A1.E3.m1.4.4.2.cmml"><mi id="A1.E3.m1.4.4.2.3" xref="A1.E3.m1.4.4.2.3.cmml">q</mi><mo id="A1.E3.m1.4.4.2.2" xref="A1.E3.m1.4.4.2.2.cmml">â¢</mo><mrow id="A1.E3.m1.4.4.2.1.1" xref="A1.E3.m1.4.4.2.1.1.1.cmml"><mo id="A1.E3.m1.4.4.2.1.1.2" stretchy="false" xref="A1.E3.m1.4.4.2.1.1.1.cmml">(</mo><msub id="A1.E3.m1.4.4.2.1.1.1" xref="A1.E3.m1.4.4.2.1.1.1.cmml"><mi id="A1.E3.m1.4.4.2.1.1.1.2" xref="A1.E3.m1.4.4.2.1.1.1.2.cmml">x</mi><mi id="A1.E3.m1.4.4.2.1.1.1.3" xref="A1.E3.m1.4.4.2.1.1.1.3.cmml">i</mi></msub><mo id="A1.E3.m1.4.4.2.1.1.3" stretchy="false" xref="A1.E3.m1.4.4.2.1.1.1.cmml">)</mo></mrow></mrow></mfrac></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="A1.E3.m1.9b"><apply id="A1.E3.m1.9.9.cmml" xref="A1.E3.m1.9.9"><and id="A1.E3.m1.9.9a.cmml" xref="A1.E3.m1.9.9"></and><apply id="A1.E3.m1.9.9b.cmml" xref="A1.E3.m1.9.9"><eq id="A1.E3.m1.9.9.5.cmml" xref="A1.E3.m1.9.9.5"></eq><apply id="A1.E3.m1.7.7.1.cmml" xref="A1.E3.m1.7.7.1"><times id="A1.E3.m1.7.7.1.2.cmml" xref="A1.E3.m1.7.7.1.2"></times><apply id="A1.E3.m1.7.7.1.3.cmml" xref="A1.E3.m1.7.7.1.3"><csymbol cd="ambiguous" id="A1.E3.m1.7.7.1.3.1.cmml" xref="A1.E3.m1.7.7.1.3">subscript</csymbol><ci id="A1.E3.m1.7.7.1.3.2.cmml" xref="A1.E3.m1.7.7.1.3.2">ğ¸</ci><ci id="A1.E3.m1.7.7.1.3.3.cmml" xref="A1.E3.m1.7.7.1.3.3">ğ‘</ci></apply><apply id="A1.E3.m1.7.7.1.1.2.cmml" xref="A1.E3.m1.7.7.1.1.1"><csymbol cd="latexml" id="A1.E3.m1.7.7.1.1.2.1.cmml" xref="A1.E3.m1.7.7.1.1.1.2">delimited-[]</csymbol><apply id="A1.E3.m1.7.7.1.1.1.1.cmml" xref="A1.E3.m1.7.7.1.1.1.1"><times id="A1.E3.m1.7.7.1.1.1.1.1.cmml" xref="A1.E3.m1.7.7.1.1.1.1.1"></times><ci id="A1.E3.m1.7.7.1.1.1.1.2.cmml" xref="A1.E3.m1.7.7.1.1.1.1.2">ğ‘“</ci><ci id="A1.E3.m1.5.5.cmml" xref="A1.E3.m1.5.5">ğ‘‹</ci></apply></apply></apply><apply id="A1.E3.m1.8.8.2.cmml" xref="A1.E3.m1.8.8.2"><times id="A1.E3.m1.8.8.2.2.cmml" xref="A1.E3.m1.8.8.2.2"></times><apply id="A1.E3.m1.8.8.2.3.cmml" xref="A1.E3.m1.8.8.2.3"><csymbol cd="ambiguous" id="A1.E3.m1.8.8.2.3.1.cmml" xref="A1.E3.m1.8.8.2.3">subscript</csymbol><ci id="A1.E3.m1.8.8.2.3.2.cmml" xref="A1.E3.m1.8.8.2.3.2">ğ¸</ci><ci id="A1.E3.m1.8.8.2.3.3.cmml" xref="A1.E3.m1.8.8.2.3.3">ğ‘</ci></apply><apply id="A1.E3.m1.8.8.2.1.2.cmml" xref="A1.E3.m1.8.8.2.1.1"><csymbol cd="latexml" id="A1.E3.m1.8.8.2.1.2.1.cmml" xref="A1.E3.m1.8.8.2.1.1.2">delimited-[]</csymbol><apply id="A1.E3.m1.8.8.2.1.1.1.cmml" xref="A1.E3.m1.8.8.2.1.1.1"><times id="A1.E3.m1.8.8.2.1.1.1.1.cmml" xref="A1.E3.m1.8.8.2.1.1.1.1"></times><ci id="A1.E3.m1.8.8.2.1.1.1.2.cmml" xref="A1.E3.m1.8.8.2.1.1.1.2">ğ‘“</ci><ci id="A1.E3.m1.6.6.cmml" xref="A1.E3.m1.6.6">ğ‘‹</ci><apply id="A1.E3.m1.2.2.cmml" xref="A1.E3.m1.2.2"><divide id="A1.E3.m1.2.2.3.cmml" xref="A1.E3.m1.2.2"></divide><apply id="A1.E3.m1.1.1.1.cmml" xref="A1.E3.m1.1.1.1"><times id="A1.E3.m1.1.1.1.2.cmml" xref="A1.E3.m1.1.1.1.2"></times><ci id="A1.E3.m1.1.1.1.3.cmml" xref="A1.E3.m1.1.1.1.3">ğ‘</ci><ci id="A1.E3.m1.1.1.1.1.cmml" xref="A1.E3.m1.1.1.1.1">ğ‘¥</ci></apply><apply id="A1.E3.m1.2.2.2.cmml" xref="A1.E3.m1.2.2.2"><times id="A1.E3.m1.2.2.2.2.cmml" xref="A1.E3.m1.2.2.2.2"></times><ci id="A1.E3.m1.2.2.2.3.cmml" xref="A1.E3.m1.2.2.2.3">ğ‘</ci><ci id="A1.E3.m1.2.2.2.1.cmml" xref="A1.E3.m1.2.2.2.1">ğ‘¥</ci></apply></apply></apply></apply></apply></apply><apply id="A1.E3.m1.9.9c.cmml" xref="A1.E3.m1.9.9"><approx id="A1.E3.m1.9.9.6.cmml" xref="A1.E3.m1.9.9.6"></approx><share href="https://arxiv.org/html/2410.03697v1#A1.E3.m1.8.8.2.cmml" id="A1.E3.m1.9.9d.cmml" xref="A1.E3.m1.9.9"></share><apply id="A1.E3.m1.9.9.3.cmml" xref="A1.E3.m1.9.9.3"><times id="A1.E3.m1.9.9.3.2.cmml" xref="A1.E3.m1.9.9.3.2"></times><apply id="A1.E3.m1.9.9.3.3.cmml" xref="A1.E3.m1.9.9.3.3"><divide id="A1.E3.m1.9.9.3.3.1.cmml" xref="A1.E3.m1.9.9.3.3"></divide><cn id="A1.E3.m1.9.9.3.3.2.cmml" type="integer" xref="A1.E3.m1.9.9.3.3.2">1</cn><ci id="A1.E3.m1.9.9.3.3.3.cmml" xref="A1.E3.m1.9.9.3.3.3">ğ‘</ci></apply><apply id="A1.E3.m1.9.9.3.1.cmml" xref="A1.E3.m1.9.9.3.1"><apply id="A1.E3.m1.9.9.3.1.2.cmml" xref="A1.E3.m1.9.9.3.1.2"><csymbol cd="ambiguous" id="A1.E3.m1.9.9.3.1.2.1.cmml" xref="A1.E3.m1.9.9.3.1.2">superscript</csymbol><apply id="A1.E3.m1.9.9.3.1.2.2.cmml" xref="A1.E3.m1.9.9.3.1.2"><csymbol cd="ambiguous" id="A1.E3.m1.9.9.3.1.2.2.1.cmml" xref="A1.E3.m1.9.9.3.1.2">subscript</csymbol><sum id="A1.E3.m1.9.9.3.1.2.2.2.cmml" xref="A1.E3.m1.9.9.3.1.2.2.2"></sum><apply id="A1.E3.m1.9.9.3.1.2.2.3.cmml" xref="A1.E3.m1.9.9.3.1.2.2.3"><eq id="A1.E3.m1.9.9.3.1.2.2.3.1.cmml" xref="A1.E3.m1.9.9.3.1.2.2.3.1"></eq><ci id="A1.E3.m1.9.9.3.1.2.2.3.2.cmml" xref="A1.E3.m1.9.9.3.1.2.2.3.2">ğ‘–</ci><cn id="A1.E3.m1.9.9.3.1.2.2.3.3.cmml" type="integer" xref="A1.E3.m1.9.9.3.1.2.2.3.3">1</cn></apply></apply><ci id="A1.E3.m1.9.9.3.1.2.3.cmml" xref="A1.E3.m1.9.9.3.1.2.3">ğ‘</ci></apply><apply id="A1.E3.m1.9.9.3.1.1.cmml" xref="A1.E3.m1.9.9.3.1.1"><times id="A1.E3.m1.9.9.3.1.1.2.cmml" xref="A1.E3.m1.9.9.3.1.1.2"></times><ci id="A1.E3.m1.9.9.3.1.1.3.cmml" xref="A1.E3.m1.9.9.3.1.1.3">ğ‘“</ci><apply id="A1.E3.m1.9.9.3.1.1.1.1.1.cmml" xref="A1.E3.m1.9.9.3.1.1.1.1"><csymbol cd="ambiguous" id="A1.E3.m1.9.9.3.1.1.1.1.1.1.cmml" xref="A1.E3.m1.9.9.3.1.1.1.1">subscript</csymbol><ci id="A1.E3.m1.9.9.3.1.1.1.1.1.2.cmml" xref="A1.E3.m1.9.9.3.1.1.1.1.1.2">ğ‘¥</ci><ci id="A1.E3.m1.9.9.3.1.1.1.1.1.3.cmml" xref="A1.E3.m1.9.9.3.1.1.1.1.1.3">ğ‘–</ci></apply><apply id="A1.E3.m1.4.4.cmml" xref="A1.E3.m1.4.4"><divide id="A1.E3.m1.4.4.3.cmml" xref="A1.E3.m1.4.4"></divide><apply id="A1.E3.m1.3.3.1.cmml" xref="A1.E3.m1.3.3.1"><times id="A1.E3.m1.3.3.1.2.cmml" xref="A1.E3.m1.3.3.1.2"></times><ci id="A1.E3.m1.3.3.1.3.cmml" xref="A1.E3.m1.3.3.1.3">ğ‘</ci><apply id="A1.E3.m1.3.3.1.1.1.1.cmml" xref="A1.E3.m1.3.3.1.1.1"><csymbol cd="ambiguous" id="A1.E3.m1.3.3.1.1.1.1.1.cmml" xref="A1.E3.m1.3.3.1.1.1">subscript</csymbol><ci id="A1.E3.m1.3.3.1.1.1.1.2.cmml" xref="A1.E3.m1.3.3.1.1.1.1.2">ğ‘¥</ci><ci id="A1.E3.m1.3.3.1.1.1.1.3.cmml" xref="A1.E3.m1.3.3.1.1.1.1.3">ğ‘–</ci></apply></apply><apply id="A1.E3.m1.4.4.2.cmml" xref="A1.E3.m1.4.4.2"><times id="A1.E3.m1.4.4.2.2.cmml" xref="A1.E3.m1.4.4.2.2"></times><ci id="A1.E3.m1.4.4.2.3.cmml" xref="A1.E3.m1.4.4.2.3">ğ‘</ci><apply id="A1.E3.m1.4.4.2.1.1.1.cmml" xref="A1.E3.m1.4.4.2.1.1"><csymbol cd="ambiguous" id="A1.E3.m1.4.4.2.1.1.1.1.cmml" xref="A1.E3.m1.4.4.2.1.1">subscript</csymbol><ci id="A1.E3.m1.4.4.2.1.1.1.2.cmml" xref="A1.E3.m1.4.4.2.1.1.1.2">ğ‘¥</ci><ci id="A1.E3.m1.4.4.2.1.1.1.3.cmml" xref="A1.E3.m1.4.4.2.1.1.1.3">ğ‘–</ci></apply></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A1.E3.m1.9c">E_{a}[f(X)]=E_{q}\big{[}f(X)\frac{a(x)}{q(x)}\big{]}\approx\frac{1}{N}\sum_{i=%
1}^{N}f(x_{i})\frac{a(x_{i})}{q(x_{i})}</annotation><annotation encoding="application/x-llamapun" id="A1.E3.m1.9d">italic_E start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT [ italic_f ( italic_X ) ] = italic_E start_POSTSUBSCRIPT italic_q end_POSTSUBSCRIPT [ italic_f ( italic_X ) divide start_ARG italic_a ( italic_x ) end_ARG start_ARG italic_q ( italic_x ) end_ARG ] â‰ˆ divide start_ARG 1 end_ARG start_ARG italic_N end_ARG âˆ‘ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_N end_POSTSUPERSCRIPT italic_f ( italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) divide start_ARG italic_a ( italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_ARG start_ARG italic_q ( italic_x start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) end_ARG</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="A1.SS2.p3">
<p class="ltx_p" id="A1.SS2.p3.1">As randomization cost can become significant if it is imposed to real traffic, adaptive importance sampling is used in practice to iteratively come up with a better policies to reach an optimal point.</p>
</div>
<div class="ltx_para" id="A1.SS2.p4">
<p class="ltx_p" id="A1.SS2.p4.1">This approach is not restricted to be used only for real observational data.
If we have an accurate simulator representing true underlying processes, we can use it to generate such randomized data, and such iterative importance sampling can be done with no real randomization cost.</p>
</div>
<div class="ltx_para" id="A1.SS2.p5">
<p class="ltx_p" id="A1.SS2.p5.1">We use data collected by simulator for a setting <math alttext="a" class="ltx_Math" display="inline" id="A1.SS2.p5.1.m1.1"><semantics id="A1.SS2.p5.1.m1.1a"><mi id="A1.SS2.p5.1.m1.1.1" xref="A1.SS2.p5.1.m1.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="A1.SS2.p5.1.m1.1b"><ci id="A1.SS2.p5.1.m1.1.1.cmml" xref="A1.SS2.p5.1.m1.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS2.p5.1.m1.1c">a</annotation><annotation encoding="application/x-llamapun" id="A1.SS2.p5.1.m1.1d">italic_a</annotation></semantics></math> as explained in <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.SS1.SSS1" title="A.1.1. Artificial User Sessions â€£ A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">A.1.1</span></a> to perform importance sampling.</p>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg3">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg3.2.1.1">Algorithm 3</span> </span> Importance Sampling With Artificial User Sessions</figcaption>
<div class="ltx_listing ltx_listing" id="alg3.3">
<div class="ltx_listingline" id="alg3.l1">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg3.l1.1.1.1" style="font-size:80%;">1:</span></span><span class="ltx_text ltx_font_bold" id="alg3.l1.2">procedure</span>Â <span class="ltx_text ltx_font_smallcaps" id="alg3.l1.3">ISArt</span>(<math alttext="\hat{X}" class="ltx_Math" display="inline" id="alg3.l1.m1.1"><semantics id="alg3.l1.m1.1a"><mover accent="true" id="alg3.l1.m1.1.1" xref="alg3.l1.m1.1.1.cmml"><mi id="alg3.l1.m1.1.1.2" xref="alg3.l1.m1.1.1.2.cmml">X</mi><mo id="alg3.l1.m1.1.1.1" xref="alg3.l1.m1.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="alg3.l1.m1.1b"><apply id="alg3.l1.m1.1.1.cmml" xref="alg3.l1.m1.1.1"><ci id="alg3.l1.m1.1.1.1.cmml" xref="alg3.l1.m1.1.1.1">^</ci><ci id="alg3.l1.m1.1.1.2.cmml" xref="alg3.l1.m1.1.1.2">ğ‘‹</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l1.m1.1c">\hat{X}</annotation><annotation encoding="application/x-llamapun" id="alg3.l1.m1.1d">over^ start_ARG italic_X end_ARG</annotation></semantics></math>, <math alttext="a" class="ltx_Math" display="inline" id="alg3.l1.m2.1"><semantics id="alg3.l1.m2.1a"><mi id="alg3.l1.m2.1.1" xref="alg3.l1.m2.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="alg3.l1.m2.1b"><ci id="alg3.l1.m2.1.1.cmml" xref="alg3.l1.m2.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.l1.m2.1c">a</annotation><annotation encoding="application/x-llamapun" id="alg3.l1.m2.1d">italic_a</annotation></semantics></math>)

</div>
<div class="ltx_listingline" id="alg3.l2">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg3.l2.1.1.1" style="font-size:80%;">2:</span></span>Â Â Â Â Â Construct a dense grid <math alttext="A" class="ltx_Math" display="inline" id="alg3.l2.m1.1"><semantics id="alg3.l2.m1.1a"><mi id="alg3.l2.m1.1.1" xref="alg3.l2.m1.1.1.cmml">A</mi><annotation-xml encoding="MathML-Content" id="alg3.l2.m1.1b"><ci id="alg3.l2.m1.1.1.cmml" xref="alg3.l2.m1.1.1">ğ´</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.l2.m1.1c">A</annotation><annotation encoding="application/x-llamapun" id="alg3.l2.m1.1d">italic_A</annotation></semantics></math> around <math alttext="a\pm\delta" class="ltx_Math" display="inline" id="alg3.l2.m2.1"><semantics id="alg3.l2.m2.1a"><mrow id="alg3.l2.m2.1.1" xref="alg3.l2.m2.1.1.cmml"><mi id="alg3.l2.m2.1.1.2" xref="alg3.l2.m2.1.1.2.cmml">a</mi><mo id="alg3.l2.m2.1.1.1" xref="alg3.l2.m2.1.1.1.cmml">Â±</mo><mi id="alg3.l2.m2.1.1.3" xref="alg3.l2.m2.1.1.3.cmml">Î´</mi></mrow><annotation-xml encoding="MathML-Content" id="alg3.l2.m2.1b"><apply id="alg3.l2.m2.1.1.cmml" xref="alg3.l2.m2.1.1"><csymbol cd="latexml" id="alg3.l2.m2.1.1.1.cmml" xref="alg3.l2.m2.1.1.1">plus-or-minus</csymbol><ci id="alg3.l2.m2.1.1.2.cmml" xref="alg3.l2.m2.1.1.2">ğ‘</ci><ci id="alg3.l2.m2.1.1.3.cmml" xref="alg3.l2.m2.1.1.3">ğ›¿</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l2.m2.1c">a\pm\delta</annotation><annotation encoding="application/x-llamapun" id="alg3.l2.m2.1d">italic_a Â± italic_Î´</annotation></semantics></math>.

</div>
<div class="ltx_listingline" id="alg3.l3">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg3.l3.1.1.1" style="font-size:80%;">3:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg3.l3.2">for</span>Â <math alttext="a" class="ltx_Math" display="inline" id="alg3.l3.m1.1"><semantics id="alg3.l3.m1.1a"><mi id="alg3.l3.m1.1.1" xref="alg3.l3.m1.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="alg3.l3.m1.1b"><ci id="alg3.l3.m1.1.1.cmml" xref="alg3.l3.m1.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="alg3.l3.m1.1c">a</annotation><annotation encoding="application/x-llamapun" id="alg3.l3.m1.1d">italic_a</annotation></semantics></math> in <span class="ltx_text ltx_markedasmath ltx_font_bold" id="alg3.l3.3">A</span>Â <span class="ltx_text ltx_font_bold" id="alg3.l3.4">do</span>
</div>
<div class="ltx_listingline" id="alg3.l4">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg3.l4.1.1.1" style="font-size:80%;">4:</span></span>Â Â Â Â Â Â Â Â Â <math alttext="\textbf{p}_{a}=E_{a}[f(x)]" class="ltx_Math" display="inline" id="alg3.l4.m1.2"><semantics id="alg3.l4.m1.2a"><mrow id="alg3.l4.m1.2.2" xref="alg3.l4.m1.2.2.cmml"><msub id="alg3.l4.m1.2.2.3" xref="alg3.l4.m1.2.2.3.cmml"><mtext class="ltx_mathvariant_bold" id="alg3.l4.m1.2.2.3.2" xref="alg3.l4.m1.2.2.3.2a.cmml">p</mtext><mi id="alg3.l4.m1.2.2.3.3" xref="alg3.l4.m1.2.2.3.3.cmml">a</mi></msub><mo id="alg3.l4.m1.2.2.2" xref="alg3.l4.m1.2.2.2.cmml">=</mo><mrow id="alg3.l4.m1.2.2.1" xref="alg3.l4.m1.2.2.1.cmml"><msub id="alg3.l4.m1.2.2.1.3" xref="alg3.l4.m1.2.2.1.3.cmml"><mi id="alg3.l4.m1.2.2.1.3.2" xref="alg3.l4.m1.2.2.1.3.2.cmml">E</mi><mi id="alg3.l4.m1.2.2.1.3.3" xref="alg3.l4.m1.2.2.1.3.3.cmml">a</mi></msub><mo id="alg3.l4.m1.2.2.1.2" xref="alg3.l4.m1.2.2.1.2.cmml">â¢</mo><mrow id="alg3.l4.m1.2.2.1.1.1" xref="alg3.l4.m1.2.2.1.1.2.cmml"><mo id="alg3.l4.m1.2.2.1.1.1.2" stretchy="false" xref="alg3.l4.m1.2.2.1.1.2.1.cmml">[</mo><mrow id="alg3.l4.m1.2.2.1.1.1.1" xref="alg3.l4.m1.2.2.1.1.1.1.cmml"><mi id="alg3.l4.m1.2.2.1.1.1.1.2" xref="alg3.l4.m1.2.2.1.1.1.1.2.cmml">f</mi><mo id="alg3.l4.m1.2.2.1.1.1.1.1" xref="alg3.l4.m1.2.2.1.1.1.1.1.cmml">â¢</mo><mrow id="alg3.l4.m1.2.2.1.1.1.1.3.2" xref="alg3.l4.m1.2.2.1.1.1.1.cmml"><mo id="alg3.l4.m1.2.2.1.1.1.1.3.2.1" stretchy="false" xref="alg3.l4.m1.2.2.1.1.1.1.cmml">(</mo><mi id="alg3.l4.m1.1.1" xref="alg3.l4.m1.1.1.cmml">x</mi><mo id="alg3.l4.m1.2.2.1.1.1.1.3.2.2" stretchy="false" xref="alg3.l4.m1.2.2.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="alg3.l4.m1.2.2.1.1.1.3" stretchy="false" xref="alg3.l4.m1.2.2.1.1.2.1.cmml">]</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="alg3.l4.m1.2b"><apply id="alg3.l4.m1.2.2.cmml" xref="alg3.l4.m1.2.2"><eq id="alg3.l4.m1.2.2.2.cmml" xref="alg3.l4.m1.2.2.2"></eq><apply id="alg3.l4.m1.2.2.3.cmml" xref="alg3.l4.m1.2.2.3"><csymbol cd="ambiguous" id="alg3.l4.m1.2.2.3.1.cmml" xref="alg3.l4.m1.2.2.3">subscript</csymbol><ci id="alg3.l4.m1.2.2.3.2a.cmml" xref="alg3.l4.m1.2.2.3.2"><mtext class="ltx_mathvariant_bold" id="alg3.l4.m1.2.2.3.2.cmml" xref="alg3.l4.m1.2.2.3.2">p</mtext></ci><ci id="alg3.l4.m1.2.2.3.3.cmml" xref="alg3.l4.m1.2.2.3.3">ğ‘</ci></apply><apply id="alg3.l4.m1.2.2.1.cmml" xref="alg3.l4.m1.2.2.1"><times id="alg3.l4.m1.2.2.1.2.cmml" xref="alg3.l4.m1.2.2.1.2"></times><apply id="alg3.l4.m1.2.2.1.3.cmml" xref="alg3.l4.m1.2.2.1.3"><csymbol cd="ambiguous" id="alg3.l4.m1.2.2.1.3.1.cmml" xref="alg3.l4.m1.2.2.1.3">subscript</csymbol><ci id="alg3.l4.m1.2.2.1.3.2.cmml" xref="alg3.l4.m1.2.2.1.3.2">ğ¸</ci><ci id="alg3.l4.m1.2.2.1.3.3.cmml" xref="alg3.l4.m1.2.2.1.3.3">ğ‘</ci></apply><apply id="alg3.l4.m1.2.2.1.1.2.cmml" xref="alg3.l4.m1.2.2.1.1.1"><csymbol cd="latexml" id="alg3.l4.m1.2.2.1.1.2.1.cmml" xref="alg3.l4.m1.2.2.1.1.1.2">delimited-[]</csymbol><apply id="alg3.l4.m1.2.2.1.1.1.1.cmml" xref="alg3.l4.m1.2.2.1.1.1.1"><times id="alg3.l4.m1.2.2.1.1.1.1.1.cmml" xref="alg3.l4.m1.2.2.1.1.1.1.1"></times><ci id="alg3.l4.m1.2.2.1.1.1.1.2.cmml" xref="alg3.l4.m1.2.2.1.1.1.1.2">ğ‘“</ci><ci id="alg3.l4.m1.1.1.cmml" xref="alg3.l4.m1.1.1">ğ‘¥</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l4.m1.2c">\textbf{p}_{a}=E_{a}[f(x)]</annotation><annotation encoding="application/x-llamapun" id="alg3.l4.m1.2d">p start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT = italic_E start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT [ italic_f ( italic_x ) ]</annotation></semantics></math> using eq <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#A1.E3" title="In A.2. Importance Sampling â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">3</span></a>.

</div>
<div class="ltx_listingline" id="alg3.l5">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg3.l5.1.1.1" style="font-size:80%;">5:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg3.l5.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg3.l5.3">for</span>
</div>
<div class="ltx_listingline" id="alg3.l6">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg3.l6.1.1.1" style="font-size:80%;">6:</span></span>Â Â Â Â Â <span class="ltx_text ltx_font_bold" id="alg3.l6.2">return</span> <math alttext="[\textbf{p}_{a}]_{\forall a\in\textbf{A}}" class="ltx_Math" display="inline" id="alg3.l6.m1.1"><semantics id="alg3.l6.m1.1a"><msub id="alg3.l6.m1.1.1" xref="alg3.l6.m1.1.1.cmml"><mrow id="alg3.l6.m1.1.1.1.1" xref="alg3.l6.m1.1.1.1.2.cmml"><mo id="alg3.l6.m1.1.1.1.1.2" stretchy="false" xref="alg3.l6.m1.1.1.1.2.1.cmml">[</mo><msub id="alg3.l6.m1.1.1.1.1.1" xref="alg3.l6.m1.1.1.1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="alg3.l6.m1.1.1.1.1.1.2" xref="alg3.l6.m1.1.1.1.1.1.2a.cmml">p</mtext><mi id="alg3.l6.m1.1.1.1.1.1.3" xref="alg3.l6.m1.1.1.1.1.1.3.cmml">a</mi></msub><mo id="alg3.l6.m1.1.1.1.1.3" stretchy="false" xref="alg3.l6.m1.1.1.1.2.1.cmml">]</mo></mrow><mrow id="alg3.l6.m1.1.1.3" xref="alg3.l6.m1.1.1.3.cmml"><mrow id="alg3.l6.m1.1.1.3.2" xref="alg3.l6.m1.1.1.3.2.cmml"><mo id="alg3.l6.m1.1.1.3.2.1" rspace="0.167em" xref="alg3.l6.m1.1.1.3.2.1.cmml">âˆ€</mo><mi id="alg3.l6.m1.1.1.3.2.2" xref="alg3.l6.m1.1.1.3.2.2.cmml">a</mi></mrow><mo id="alg3.l6.m1.1.1.3.1" xref="alg3.l6.m1.1.1.3.1.cmml">âˆˆ</mo><mtext class="ltx_mathvariant_bold" id="alg3.l6.m1.1.1.3.3" xref="alg3.l6.m1.1.1.3.3a.cmml">A</mtext></mrow></msub><annotation-xml encoding="MathML-Content" id="alg3.l6.m1.1b"><apply id="alg3.l6.m1.1.1.cmml" xref="alg3.l6.m1.1.1"><csymbol cd="ambiguous" id="alg3.l6.m1.1.1.2.cmml" xref="alg3.l6.m1.1.1">subscript</csymbol><apply id="alg3.l6.m1.1.1.1.2.cmml" xref="alg3.l6.m1.1.1.1.1"><csymbol cd="latexml" id="alg3.l6.m1.1.1.1.2.1.cmml" xref="alg3.l6.m1.1.1.1.1.2">delimited-[]</csymbol><apply id="alg3.l6.m1.1.1.1.1.1.cmml" xref="alg3.l6.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="alg3.l6.m1.1.1.1.1.1.1.cmml" xref="alg3.l6.m1.1.1.1.1.1">subscript</csymbol><ci id="alg3.l6.m1.1.1.1.1.1.2a.cmml" xref="alg3.l6.m1.1.1.1.1.1.2"><mtext class="ltx_mathvariant_bold" id="alg3.l6.m1.1.1.1.1.1.2.cmml" xref="alg3.l6.m1.1.1.1.1.1.2">p</mtext></ci><ci id="alg3.l6.m1.1.1.1.1.1.3.cmml" xref="alg3.l6.m1.1.1.1.1.1.3">ğ‘</ci></apply></apply><apply id="alg3.l6.m1.1.1.3.cmml" xref="alg3.l6.m1.1.1.3"><in id="alg3.l6.m1.1.1.3.1.cmml" xref="alg3.l6.m1.1.1.3.1"></in><apply id="alg3.l6.m1.1.1.3.2.cmml" xref="alg3.l6.m1.1.1.3.2"><csymbol cd="latexml" id="alg3.l6.m1.1.1.3.2.1.cmml" xref="alg3.l6.m1.1.1.3.2.1">for-all</csymbol><ci id="alg3.l6.m1.1.1.3.2.2.cmml" xref="alg3.l6.m1.1.1.3.2.2">ğ‘</ci></apply><ci id="alg3.l6.m1.1.1.3.3a.cmml" xref="alg3.l6.m1.1.1.3.3"><mtext class="ltx_mathvariant_bold" id="alg3.l6.m1.1.1.3.3.cmml" mathsize="70%" xref="alg3.l6.m1.1.1.3.3">A</mtext></ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="alg3.l6.m1.1c">[\textbf{p}_{a}]_{\forall a\in\textbf{A}}</annotation><annotation encoding="application/x-llamapun" id="alg3.l6.m1.1d">[ p start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT ] start_POSTSUBSCRIPT âˆ€ italic_a âˆˆ A end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="alg3.l7">
<span class="ltx_tag ltx_tag_listingline"><span class="ltx_text" id="alg3.l7.1.1.1" style="font-size:80%;">7:</span></span><span class="ltx_text ltx_font_bold" id="alg3.l7.2">end</span>Â <span class="ltx_text ltx_font_bold" id="alg3.l7.3">procedure</span>
</div>
</div>
</figure>
</section>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Hyperparameter Considerations</h2>
<section class="ltx_subsection" id="A2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.1. </span>Top-<math alttext="k" class="ltx_Math" display="inline" id="A2.SS1.1.m1.1"><semantics id="A2.SS1.1.m1.1b"><mi id="A2.SS1.1.m1.1.1" xref="A2.SS1.1.m1.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.1.m1.1c"><ci id="A2.SS1.1.m1.1.1.cmml" xref="A2.SS1.1.m1.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.1.m1.1d">k</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.1.m1.1e">italic_k</annotation></semantics></math> Optimization</h3>
<div class="ltx_para" id="A2.SS1.p1">
<p class="ltx_p" id="A2.SS1.p1.5">Algorithms for Simulator (<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#alg2" title="Algorithm 2 â€£ A.1.1. Artificial User Sessions â€£ A.1. Open-box Simulator â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">2</span></a>) and importance sampling (<a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#alg3" title="Algorithm 3 â€£ A.2. Importance Sampling â€£ Appendix A Off-policy Estimators â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">3</span></a>) output a vector <math alttext="\textbf{p}_{a}" class="ltx_Math" display="inline" id="A2.SS1.p1.1.m1.1"><semantics id="A2.SS1.p1.1.m1.1a"><msub id="A2.SS1.p1.1.m1.1.1" xref="A2.SS1.p1.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="A2.SS1.p1.1.m1.1.1.2" xref="A2.SS1.p1.1.m1.1.1.2a.cmml">p</mtext><mi id="A2.SS1.p1.1.m1.1.1.3" xref="A2.SS1.p1.1.m1.1.1.3.cmml">a</mi></msub><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.1.m1.1b"><apply id="A2.SS1.p1.1.m1.1.1.cmml" xref="A2.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="A2.SS1.p1.1.m1.1.1.1.cmml" xref="A2.SS1.p1.1.m1.1.1">subscript</csymbol><ci id="A2.SS1.p1.1.m1.1.1.2a.cmml" xref="A2.SS1.p1.1.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="A2.SS1.p1.1.m1.1.1.2.cmml" xref="A2.SS1.p1.1.m1.1.1.2">p</mtext></ci><ci id="A2.SS1.p1.1.m1.1.1.3.cmml" xref="A2.SS1.p1.1.m1.1.1.3">ğ‘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.1.m1.1c">\textbf{p}_{a}</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.1.m1.1d">p start_POSTSUBSCRIPT italic_a end_POSTSUBSCRIPT</annotation></semantics></math> containing estimated KPIs like RPM, Clicks, IY for each <math alttext="a" class="ltx_Math" display="inline" id="A2.SS1.p1.2.m2.1"><semantics id="A2.SS1.p1.2.m2.1a"><mi id="A2.SS1.p1.2.m2.1.1" xref="A2.SS1.p1.2.m2.1.1.cmml">a</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.2.m2.1b"><ci id="A2.SS1.p1.2.m2.1.1.cmml" xref="A2.SS1.p1.2.m2.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.2.m2.1c">a</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.2.m2.1d">italic_a</annotation></semantics></math>.
This can be used to construct a multi-objective optimization.
Let <math alttext="\mathcal{L}:\textbf{p}\to r" class="ltx_Math" display="inline" id="A2.SS1.p1.3.m3.1"><semantics id="A2.SS1.p1.3.m3.1a"><mrow id="A2.SS1.p1.3.m3.1.1" xref="A2.SS1.p1.3.m3.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="A2.SS1.p1.3.m3.1.1.2" xref="A2.SS1.p1.3.m3.1.1.2.cmml">â„’</mi><mo id="A2.SS1.p1.3.m3.1.1.1" lspace="0.278em" rspace="0.278em" xref="A2.SS1.p1.3.m3.1.1.1.cmml">:</mo><mrow id="A2.SS1.p1.3.m3.1.1.3" xref="A2.SS1.p1.3.m3.1.1.3.cmml"><mtext class="ltx_mathvariant_bold" id="A2.SS1.p1.3.m3.1.1.3.2" xref="A2.SS1.p1.3.m3.1.1.3.2a.cmml">p</mtext><mo id="A2.SS1.p1.3.m3.1.1.3.1" stretchy="false" xref="A2.SS1.p1.3.m3.1.1.3.1.cmml">â†’</mo><mi id="A2.SS1.p1.3.m3.1.1.3.3" xref="A2.SS1.p1.3.m3.1.1.3.3.cmml">r</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.3.m3.1b"><apply id="A2.SS1.p1.3.m3.1.1.cmml" xref="A2.SS1.p1.3.m3.1.1"><ci id="A2.SS1.p1.3.m3.1.1.1.cmml" xref="A2.SS1.p1.3.m3.1.1.1">:</ci><ci id="A2.SS1.p1.3.m3.1.1.2.cmml" xref="A2.SS1.p1.3.m3.1.1.2">â„’</ci><apply id="A2.SS1.p1.3.m3.1.1.3.cmml" xref="A2.SS1.p1.3.m3.1.1.3"><ci id="A2.SS1.p1.3.m3.1.1.3.1.cmml" xref="A2.SS1.p1.3.m3.1.1.3.1">â†’</ci><ci id="A2.SS1.p1.3.m3.1.1.3.2a.cmml" xref="A2.SS1.p1.3.m3.1.1.3.2"><mtext class="ltx_mathvariant_bold" id="A2.SS1.p1.3.m3.1.1.3.2.cmml" xref="A2.SS1.p1.3.m3.1.1.3.2">p</mtext></ci><ci id="A2.SS1.p1.3.m3.1.1.3.3.cmml" xref="A2.SS1.p1.3.m3.1.1.3.3">ğ‘Ÿ</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.3.m3.1c">\mathcal{L}:\textbf{p}\to r</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.3.m3.1d">caligraphic_L : p â†’ italic_r</annotation></semantics></math> be an arbitrary objective function to rank all <math alttext="p" class="ltx_Math" display="inline" id="A2.SS1.p1.4.m4.1"><semantics id="A2.SS1.p1.4.m4.1a"><mi id="A2.SS1.p1.4.m4.1.1" xref="A2.SS1.p1.4.m4.1.1.cmml">p</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.4.m4.1b"><ci id="A2.SS1.p1.4.m4.1.1.cmml" xref="A2.SS1.p1.4.m4.1.1">ğ‘</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.4.m4.1c">p</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.4.m4.1d">italic_p</annotation></semantics></math>, we can use hyperparameter <math alttext="k" class="ltx_Math" display="inline" id="A2.SS1.p1.5.m5.1"><semantics id="A2.SS1.p1.5.m5.1a"><mi id="A2.SS1.p1.5.m5.1.1" xref="A2.SS1.p1.5.m5.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p1.5.m5.1b"><ci id="A2.SS1.p1.5.m5.1.1.cmml" xref="A2.SS1.p1.5.m5.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p1.5.m5.1c">k</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p1.5.m5.1d">italic_k</annotation></semantics></math> to select top-k parameter settings.</p>
</div>
<div class="ltx_para" id="A2.SS1.p2">
<p class="ltx_p" id="A2.SS1.p2.5">KPIs considered for <math alttext="\mathcal{L}" class="ltx_Math" display="inline" id="A2.SS1.p2.1.m1.1"><semantics id="A2.SS1.p2.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="A2.SS1.p2.1.m1.1.1" xref="A2.SS1.p2.1.m1.1.1.cmml">â„’</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.1.m1.1b"><ci id="A2.SS1.p2.1.m1.1.1.cmml" xref="A2.SS1.p2.1.m1.1.1">â„’</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.1.m1.1c">\mathcal{L}</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p2.1.m1.1d">caligraphic_L</annotation></semantics></math> influence choice of hyperparameters in algorithm <a class="ltx_ref ltx_markedasmath ltx_font_italic" href="https://arxiv.org/html/2410.03697v1#alg1" title="Algorithm 1 â€£ 2. Method â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">1</span></a>.
In our experiments, IY shows high correlation with simulations as shown in Fig <a class="ltx_ref" href="https://arxiv.org/html/2410.03697v1#S3.F2" title="Figure 2 â€£ 3. Experiments and Results â€£ Combining Open-box Simulation and Importance Sampling for Tuning Large-Scale Recommenders"><span class="ltx_text ltx_ref_tag">2</span></a>.
If <math alttext="\mathcal{L}" class="ltx_Math" display="inline" id="A2.SS1.p2.3.m3.1"><semantics id="A2.SS1.p2.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="A2.SS1.p2.3.m3.1.1" xref="A2.SS1.p2.3.m3.1.1.cmml">â„’</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.3.m3.1b"><ci id="A2.SS1.p2.3.m3.1.1.cmml" xref="A2.SS1.p2.3.m3.1.1">â„’</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.3.m3.1c">\mathcal{L}</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p2.3.m3.1d">caligraphic_L</annotation></semantics></math> is constructed only with KPIs that are highly correlated with simualtions, choosing <math alttext="k=1" class="ltx_Math" display="inline" id="A2.SS1.p2.4.m4.1"><semantics id="A2.SS1.p2.4.m4.1a"><mrow id="A2.SS1.p2.4.m4.1.1" xref="A2.SS1.p2.4.m4.1.1.cmml"><mi id="A2.SS1.p2.4.m4.1.1.2" xref="A2.SS1.p2.4.m4.1.1.2.cmml">k</mi><mo id="A2.SS1.p2.4.m4.1.1.1" xref="A2.SS1.p2.4.m4.1.1.1.cmml">=</mo><mn id="A2.SS1.p2.4.m4.1.1.3" xref="A2.SS1.p2.4.m4.1.1.3.cmml">1</mn></mrow><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.4.m4.1b"><apply id="A2.SS1.p2.4.m4.1.1.cmml" xref="A2.SS1.p2.4.m4.1.1"><eq id="A2.SS1.p2.4.m4.1.1.1.cmml" xref="A2.SS1.p2.4.m4.1.1.1"></eq><ci id="A2.SS1.p2.4.m4.1.1.2.cmml" xref="A2.SS1.p2.4.m4.1.1.2">ğ‘˜</ci><cn id="A2.SS1.p2.4.m4.1.1.3.cmml" type="integer" xref="A2.SS1.p2.4.m4.1.1.3">1</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.4.m4.1c">k=1</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p2.4.m4.1d">italic_k = 1</annotation></semantics></math> for each iteration works well.
However, KPIs including user-response model predictions like RPM or clicks can have lower correlation.
In such cases, one option is to choose higher <math alttext="k" class="ltx_Math" display="inline" id="A2.SS1.p2.5.m5.1"><semantics id="A2.SS1.p2.5.m5.1a"><mi id="A2.SS1.p2.5.m5.1.1" xref="A2.SS1.p2.5.m5.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="A2.SS1.p2.5.m5.1b"><ci id="A2.SS1.p2.5.m5.1.1.cmml" xref="A2.SS1.p2.5.m5.1.1">ğ‘˜</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS1.p2.5.m5.1c">k</annotation><annotation encoding="application/x-llamapun" id="A2.SS1.p2.5.m5.1d">italic_k</annotation></semantics></math> that allows more candidates to be evaluated with simulator at each iteration.
Another option is to collect large number of artificial user sessions to reduce variance of importance sampling.</p>
</div>
</section>
<section class="ltx_subsection" id="A2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">B.2. </span>Number Of Iterations for IS Search</h3>
<div class="ltx_para" id="A2.SS2.p1">
<p class="ltx_p" id="A2.SS2.p1.3">The number of iterations for importance sampling search <math alttext="u" class="ltx_Math" display="inline" id="A2.SS2.p1.1.m1.1"><semantics id="A2.SS2.p1.1.m1.1a"><mi id="A2.SS2.p1.1.m1.1.1" xref="A2.SS2.p1.1.m1.1.1.cmml">u</mi><annotation-xml encoding="MathML-Content" id="A2.SS2.p1.1.m1.1b"><ci id="A2.SS2.p1.1.m1.1.1.cmml" xref="A2.SS2.p1.1.m1.1.1">ğ‘¢</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS2.p1.1.m1.1c">u</annotation><annotation encoding="application/x-llamapun" id="A2.SS2.p1.1.m1.1d">italic_u</annotation></semantics></math> is used to tread-off compute cost of simulator and importance sampling estimator. If coarse grid is sparse due to large parameter space (many continuous parameters) or high cost of simulator, we would benefit with big <math alttext="u" class="ltx_Math" display="inline" id="A2.SS2.p1.2.m2.1"><semantics id="A2.SS2.p1.2.m2.1a"><mi id="A2.SS2.p1.2.m2.1.1" xref="A2.SS2.p1.2.m2.1.1.cmml">u</mi><annotation-xml encoding="MathML-Content" id="A2.SS2.p1.2.m2.1b"><ci id="A2.SS2.p1.2.m2.1.1.cmml" xref="A2.SS2.p1.2.m2.1.1">ğ‘¢</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS2.p1.2.m2.1c">u</annotation><annotation encoding="application/x-llamapun" id="A2.SS2.p1.2.m2.1d">italic_u</annotation></semantics></math> to reach to an optimal point.
We can also use early stopping if changes in parameter values or KPI gains are less than some <math alttext="\epsilon" class="ltx_Math" display="inline" id="A2.SS2.p1.3.m3.1"><semantics id="A2.SS2.p1.3.m3.1a"><mi id="A2.SS2.p1.3.m3.1.1" xref="A2.SS2.p1.3.m3.1.1.cmml">Ïµ</mi><annotation-xml encoding="MathML-Content" id="A2.SS2.p1.3.m3.1b"><ci id="A2.SS2.p1.3.m3.1.1.cmml" xref="A2.SS2.p1.3.m3.1.1">italic-Ïµ</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS2.p1.3.m3.1c">\epsilon</annotation><annotation encoding="application/x-llamapun" id="A2.SS2.p1.3.m3.1d">italic_Ïµ</annotation></semantics></math> with each iteration.</p>
</div>
<div class="ltx_para" id="A2.SS2.p2">
<p class="ltx_p" id="A2.SS2.p2.2">Choice of <math alttext="u" class="ltx_Math" display="inline" id="A2.SS2.p2.1.m1.1"><semantics id="A2.SS2.p2.1.m1.1a"><mi id="A2.SS2.p2.1.m1.1.1" xref="A2.SS2.p2.1.m1.1.1.cmml">u</mi><annotation-xml encoding="MathML-Content" id="A2.SS2.p2.1.m1.1b"><ci id="A2.SS2.p2.1.m1.1.1.cmml" xref="A2.SS2.p2.1.m1.1.1">ğ‘¢</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS2.p2.1.m1.1c">u</annotation><annotation encoding="application/x-llamapun" id="A2.SS2.p2.1.m1.1d">italic_u</annotation></semantics></math> also depends on randomization applied while collecting simulated user sessions.
As there is no online cost for randomizing simulated user sessions, large randomization can be applied to reduce the number of iterations <math alttext="u" class="ltx_Math" display="inline" id="A2.SS2.p2.2.m2.1"><semantics id="A2.SS2.p2.2.m2.1a"><mi id="A2.SS2.p2.2.m2.1.1" xref="A2.SS2.p2.2.m2.1.1.cmml">u</mi><annotation-xml encoding="MathML-Content" id="A2.SS2.p2.2.m2.1b"><ci id="A2.SS2.p2.2.m2.1.1.cmml" xref="A2.SS2.p2.2.m2.1.1">ğ‘¢</ci></annotation-xml><annotation encoding="application/x-tex" id="A2.SS2.p2.2.m2.1c">u</annotation><annotation encoding="application/x-llamapun" id="A2.SS2.p2.2.m2.1d">italic_u</annotation></semantics></math>.
Further study is required on the impact of large randomization applied to collect simulated user sessions on IS search.</p>
</div>
</section>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Mon Sep 23 20:20:48 2024 by <a class="ltx_LaTeXML_logo" href="http://dlmf.nist.gov/LaTeXML/"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img alt="Mascot Sammy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg=="/></a>
</div></footer>
</div>
</body>
</html>
