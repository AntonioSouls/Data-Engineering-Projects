<!DOCTYPE html><html lang="en" data-theme="light"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback</title>
<!--Generated on Sat Oct  5 07:19:14 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="https://arxiv.org/static/browse/0.3.4/css/ar5iv.0.7.9.min.css" rel="stylesheet" type="text/css">
<link href="https://arxiv.org/static/browse/0.3.4/css/ar5iv-fonts.0.7.9.min.css" rel="stylesheet" type="text/css">
<link href="https://arxiv.org/static/browse/0.3.4/css/latexml_styles.css" rel="stylesheet" type="text/css">




<base href="https://arxiv.org/html/2410.04064v1/"><link rel="stylesheet" href="https://use.typekit.net/rwr5zpx.css"><link rel="icon" type="image/png" href="https://static.arxiv.org/static/browse/0.3.4/images/icons/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="https://static.arxiv.org/static/browse/0.3.4/images/icons/favicon-32x32.png" sizes="32x32"></head>
<body><header class="mob_header">
    <div class="html-header-logo">
      <a href="https://arxiv.org/">
        <img alt="logo" class="logomark" role="presentation" width="100" src="https://services.dev.arxiv.org/html/static/arxiv-logomark-small-white.svg">
        <span class="sr-only">Back to arXiv</span>
      </a>
    </div>

    <!--TOC, dark mode, links-->
    <div class="html-header-nav">
      <!--back to abstract-->
      
        <a class="nav-link ar5iv-footer-button hover-effect" aria-label="Back to abstract page" href="https://arxiv.org/abs/2410.04064v1">
        <svg xmlns="http://www.w3.org/2000/svg" height="1.25em" viewBox="0 0 512 512" fill="#ffffff" aria-hidden="true">
            <path d="M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"></path>
        </svg>
        </a>
      <!--dark mode-->
      <a class="ar5iv-toggle-color-scheme" title="Toggle dark/light mode" aria-label="System preference">
        <label id="automatic-tog" class="toggle-icon" title="Switch to light mode" for="__palette_3">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"></path></svg>
        </label>
        
        
      </a>
      <!--nav-->
      <button class="navbar-toggler ar5iv-footer-button" type="button" data-bs-theme="dark" data-bs-toggle="collapse" aria-expanded="false" data-bs-target=".ltx_page_main >.ltx_TOC.mobile" aria-controls="navbarSupportedContent" aria-label="Toggle navigation" style="border:none; margin-right: 0em;">
        <svg xmlns="http://www.w3.org/2000/svg" height="1.25em" viewBox="0 0 448 512" aria-hidden="true" role="img" fill="#ffffff"><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"></path></svg>
      </button>
    </div>
    </header><header class="desktop_header">
    <div class="html-header-logo">
      <a href="https://arxiv.org/">
          <img alt="logo" class="logo" role="presentation" width="100" src="https://services.dev.arxiv.org/html/static/arxiv-logo-one-color-white.svg">
          <span class="sr-only">Back to arXiv</span>
      </a>
    </div>
    <div class="html-header-message" role="banner">
        <p>This is <strong>experimental HTML</strong> to improve accessibility. We invite you to report rendering errors. <span class="sr-only">Use Alt+Y to toggle on accessible reporting links and Alt+Shift+Y to toggle off.</span> Learn more <a href="https://info.arxiv.org/about/accessible_HTML.html" target="_blank">about this project</a> and <a href="https://info.arxiv.org/help/submit_latex_best_practices.html" target="_blank">help improve conversions</a>.
        </p>
    </div>
    <nav class="html-header-nav">
      <a class="ar5iv-footer-button hover-effect" href="https://info.arxiv.org/about/accessible_HTML.html" target="_blank">Why HTML?</a>
      <a class="ar5iv-footer-button hover-effect" target="_blank" href="https://arxiv.org/html/2410.04064v1/#myForm">Report Issue</a>
      <a class="ar5iv-footer-button hover-effect" href="https://arxiv.org/abs/2410.04064v1">Back to Abstract</a>
      <a class="ar5iv-footer-button hover-effect" href="https://arxiv.org/pdf/2410.04064v1" target="_blank">Download PDF</a>
      <a class="ar5iv-toggle-color-scheme" title="Toggle dark/light mode">
        <label id="automatic-tog" class="toggle-icon" title="Switch to light mode" for="__palette_3">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9h-1.9M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69m-9.15 3.96h2.3L12 9l-1.15 3.65Z"></path></svg>
        </label>
        
        
      </a>
    </nav></header>

<div class="ltx_page_main" id="main">
<nav class="ltx_TOC active" aria-labelledby="toc_header"><h2 id="toc_header" class="sr-only">Table of Contents</h2>

      <div id="listIcon" type="button" class="hide">
          <svg width="17px" height="17px" viewBox="0 0 512 512" style="pointer-events: none;">
          <path d="M40 48C26.7 48 16 58.7 16 72v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V232c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24H88c13.3 0 24-10.7 24-24V392c0-13.3-10.7-24-24-24H40z"></path>
          </svg>
      </div>
      <div id="arrowIcon" type="button">
          <svg width="17px" height="17px" viewBox="0 0 448 512" style="pointer-events: none;">
          <path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path>
          </svg>
      </div><ol class="ltx_toclist"><li class="ltx_tocentry ltx_tocentry_section">
    <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#abstract" title="Abstract">
      <span class="ltx_text ltx_ref_title">
        <span class="ltx_tag ltx_tag_ref"></span>
        Abstract
      </span>
    </a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S1" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">1 </span>Introduction</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S2" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2 </span>Text2Chart31 Dataset</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S2.SS1" title="In 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.1 </span>Task Definition</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S2.SS2" title="In 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.2 </span>Dataset Construction Pipeline</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S2.SS3" title="In 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">2.3 </span>Analysis of Text2Chart31 Dataset</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S3" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3 </span>Instruction Tuning Approach</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S3.SS1" title="In 3 Instruction Tuning Approach ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.1 </span>Supervised Fine-tuning</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S3.SS2" title="In 3 Instruction Tuning Approach ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">3.2 </span>RL via Automatic Feedback</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S4" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4 </span>Experiments</span></a>
<ol class="ltx_toclist ltx_toclist_section">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S4.SS1" title="In 4 Experiments ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.1 </span>Results of Description-to-Chart</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S4.SS2" title="In 4 Experiments ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.2 </span>Results of Raw Data-to-Chart</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S4.SS3" title="In 4 Experiments ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">4.3 </span>Results of Code-to-Description</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S5" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">5 </span>Related Work</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S6" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">6 </span>Conclusion</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A </span>Details of Text2Chart31 Dataset</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.SS1" title="In Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.1 </span>Categories and Examples</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.SS2" title="In Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.2 </span>Dataset Summary</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.SS3" title="In Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.3 </span>Topic Distribution</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.SS4" title="In Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.4 </span>Plot Type Distribution</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.SS5" title="In Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">A.5 </span>Example of Text2Chart31</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A2" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">B </span>Experimental Details</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_paragraph"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A2.SS0.SSS0.Px1" title="In Appendix B Experimental Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title">Training setup and hyperparameters</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A3" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">C </span>Cycle Consistency Details</span></a></li>
<li class="ltx_tocentry ltx_tocentry_appendix">
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D </span>Prompt Template</span></a>
<ol class="ltx_toclist ltx_toclist_appendix">
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.SS1" title="In Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.1 </span>Prompt Template used for Data Generation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_subsection"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.SS2" title="In Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">D.2 </span>Prompt Template for Tasks</span></a></li>
</ol>
</li>
<li class="ltx_tocentry ltx_tocentry_appendix"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A5" title="In Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_title"><span class="ltx_tag ltx_tag_ref">E </span>Details on Human Evaluation</span></a></li>
<li class="ltx_tocentry ltx_tocentry_section">
    <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib" title="References">
      <span class="ltx_text ltx_ref_title">
        <span class="ltx_tag ltx_tag_ref"></span>
        References
      </span>
    </a></li></ol></nav>

<div class="ltx_page_content"><div class="package-alerts ltx_document" role="status" aria-label="Conversion errors have been found">
      <button aria-label="Dismiss alert">
          <span aria-hidden="true"><svg role="presentation" width="20" height="20" viewBox="0 0 44 44" aria-hidden="true" focusable="false">
          <path d="M0.549989 4.44999L4.44999 0.549988L43.45 39.55L39.55 43.45L0.549989 4.44999Z"></path>
          <path d="M39.55 0.549988L43.45 4.44999L4.44999 43.45L0.549988 39.55L39.55 0.549988Z"></path>
          </svg></span>
      </button>
      <p>HTML conversions <a href="https://info.dev.arxiv.org/about/accessibility_html_error_messages.html" target="_blank">sometimes display errors</a> due to content that did not convert correctly from the source. This paper uses the following packages that are not yet supported by the HTML conversion tool. Feedback on these issues are not necessary; they are known and are being worked on.</p>
          <ul arial-label="Unsupported packages used in this paper">
              <li>failed: inconsolata</li>
          </ul>
      <p>Authors: achieve the best HTML results from your LaTeX submissions by following these <a href="https://info.arxiv.org/help/submit_latex_best_practices.html" target="_blank">best practices</a>.</p>
    </div><div id="target-section" class="section"><a id="license-tr" href="https://info.arxiv.org/help/license/index.html#licenses-available">License: arXiv.org perpetual non-exclusive license</a><div id="watermark-tr">arXiv:2410.04064v1 [cs.LG] 05 Oct 2024</div></div>
<article class="ltx_document">
<h1 class="ltx_title ltx_title_document">Text2Chart31: Instruction Tuning for Chart Generation 
<br class="ltx_break">with Automatic Feedback</h1><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">
<span class="ltx_text ltx_font_bold" id="id3.3.id1">Fatemeh Pesaran zadeh<sup class="ltx_sup" id="id3.3.id1.1">1</sup></span>  <span class="ltx_text ltx_font_bold" id="id1.1.1">Juyeon Kim<sup class="ltx_sup" id="id1.1.1.1">2</sup><sup class="ltx_sup" id="id1.1.1.2"><span class="ltx_text ltx_font_medium" id="id1.1.1.2.1">∗</span></sup></span>  <span class="ltx_text ltx_font_bold" id="id4.4.id2">Jin-Hwa Kim<sup class="ltx_sup" id="id4.4.id2.1">1,3</sup></span>  <span class="ltx_text ltx_font_bold" id="id2.2.2">Gunhee Kim<sup class="ltx_sup" id="id2.2.2.1">1</sup><sup class="ltx_sup" id="id2.2.2.2"><span class="ltx_text ltx_font_medium" id="id2.2.2.2.1">†</span></sup></span> 
<br class="ltx_break"><sup class="ltx_sup" id="id5.5.id3">1</sup>Seoul National University,
<sup class="ltx_sup" id="id6.6.id4">2</sup>KAIST AI,
<sup class="ltx_sup" id="id7.7.id5">3</sup>NAVER AI Lab

<br class="ltx_break"><span class="ltx_text ltx_font_typewriter" id="id8.8.id6">fatemehpesaran@vision.snu.ac.kr, juyeonkim@kaist.ac.kr,</span>
<br class="ltx_break"><span class="ltx_text ltx_font_typewriter" id="id9.9.id7">j1nhwa.kim@navercorp.com, gunhee@snu.ac.kr</span>
</span></span>
</div><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_abstract" id="abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<p class="ltx_p" id="id10.id1">Large language models (LLMs) have demonstrated strong capabilities across various language tasks, notably through instruction-tuning methods. However, LLMs face challenges in visualizing complex, real-world data through charts and plots.
Firstly, existing datasets rarely cover a full range of chart types, such as 3D, volumetric, and gridded charts.
Secondly, supervised fine-tuning methods do not fully leverage the intricate relationships within rich datasets, including text, code, and figures. To address these challenges, we propose a hierarchical pipeline and a new dataset for chart generation.
Our dataset, Text2Chart31, includes 31 unique plot types referring to the Matplotlib library, with 11.1K tuples of descriptions, code, data tables, and plots.
Moreover, we introduce a reinforcement learning-based instruction tuning technique for chart generation tasks without requiring human feedback.
Our experiments show that this approach significantly enhances the model performance, enabling smaller models to outperform larger open-source models and be comparable to state-of-the-art proprietary models in data visualization tasks.
We make the code and dataset available at <a class="ltx_ref ltx_url ltx_font_typewriter" href="https://github.com/fatemehpesaran310/Text2Chart31" title="">https://github.com/fatemehpesaran310/Text2Chart31</a>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para ltx_noindent" id="p1">
<div class="ltx_block ltx_align_bottom" id="p1.2">
<p class="ltx_p" id="p1.2.3"><span class="ltx_text ltx_font_bold" id="p1.2.3.1">Text2Chart31: Instruction Tuning for Chart Generation 
<br class="ltx_break">with Automatic Feedback</span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<br class="ltx_break ltx_centering">
<p class="ltx_p ltx_align_center" id="p1.2.2" style="width:433.6pt;"><span class="ltx_text ltx_inline-block" id="p1.2.2.2" style="width:0.0pt;">
<span class="ltx_tabular ltx_guessed_headers ltx_align_top" id="p1.2.2.2.2">
<span class="ltx_thead">
<span class="ltx_tr" id="p1.2.2.2.2.2">
<span class="ltx_td ltx_align_center ltx_th ltx_th_column" id="p1.2.2.2.2.2.2"><span class="ltx_text ltx_font_bold" id="p1.2.2.2.2.2.2.2">
Fatemeh Pesaran zadeh<sup class="ltx_sup" id="p1.2.2.2.2.2.2.2.1">1</sup>  Juyeon Kim<sup class="ltx_sup" id="p1.2.2.2.2.2.2.2.2">2</sup><sup class="ltx_sup" id="p1.2.2.2.2.2.2.2.3"><span class="ltx_text ltx_font_medium" id="p1.2.2.2.2.2.2.2.3.1">∗</span></sup>  Jin-Hwa Kim<sup class="ltx_sup" id="p1.2.2.2.2.2.2.2.4">1,3</sup>  Gunhee Kim<sup class="ltx_sup" id="p1.2.2.2.2.2.2.2.5">1</sup><sup class="ltx_sup" id="p1.2.2.2.2.2.2.2.6"><span class="ltx_text ltx_font_medium" id="p1.2.2.2.2.2.2.2.6.1">†</span></sup></span></span></span>
<span class="ltx_tr" id="p1.2.2.2.2.3.1">
<span class="ltx_td ltx_align_center ltx_th ltx_th_column" id="p1.2.2.2.2.3.1.1"><sup class="ltx_sup" id="p1.2.2.2.2.3.1.1.1">1</sup>Seoul National University,
<sup class="ltx_sup" id="p1.2.2.2.2.3.1.1.2">2</sup>KAIST AI,
<sup class="ltx_sup" id="p1.2.2.2.2.3.1.1.3">3</sup>NAVER AI Lab</span></span>
</span>
<span class="ltx_tbody">
<span class="ltx_tr" id="p1.2.2.2.2.4.1">
<span class="ltx_td ltx_align_center" id="p1.2.2.2.2.4.1.1"><span class="ltx_text ltx_font_typewriter" id="p1.2.2.2.2.4.1.1.1">fatemehpesaran@vision.snu.ac.kr, juyeonkim@kaist.ac.kr,</span></span></span>
<span class="ltx_tr" id="p1.2.2.2.2.5.2">
<span class="ltx_td ltx_align_center" id="p1.2.2.2.2.5.2.1"><span class="ltx_text ltx_font_typewriter" id="p1.2.2.2.2.5.2.1.1">j1nhwa.kim@navercorp.com, gunhee@snu.ac.kr</span></span></span>
</span>
</span></span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<br class="ltx_break ltx_centering">
</div>
</div>
<span class="ltx_note ltx_role_footnotetext" id="footnotex1"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">footnotetext: </span><math alttext="*" class="ltx_Math" display="inline" id="footnotex1.m1.1"><semantics id="footnotex1.m1.1b"><mo id="footnotex1.m1.1.1" xref="footnotex1.m1.1.1.cmml">∗</mo><annotation-xml encoding="MathML-Content" id="footnotex1.m1.1c"><times id="footnotex1.m1.1.1.cmml" xref="footnotex1.m1.1.1"></times></annotation-xml><annotation encoding="application/x-tex" id="footnotex1.m1.1d">*</annotation><annotation encoding="application/x-llamapun" id="footnotex1.m1.1e">∗</annotation></semantics></math> Work done as an intern at Seoul National University</span></span></span><span class="ltx_note ltx_role_footnotetext" id="footnotex2"><sup class="ltx_note_mark">†</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">†</sup><span class="ltx_note_type">footnotetext: </span><math alttext="\dagger" class="ltx_Math" display="inline" id="footnotex2.m1.1"><semantics id="footnotex2.m1.1b"><mo id="footnotex2.m1.1.1" xref="footnotex2.m1.1.1.cmml">†</mo><annotation-xml encoding="MathML-Content" id="footnotex2.m1.1c"><ci id="footnotex2.m1.1.1.cmml" xref="footnotex2.m1.1.1">†</ci></annotation-xml><annotation encoding="application/x-tex" id="footnotex2.m1.1d">\dagger</annotation><annotation encoding="application/x-llamapun" id="footnotex2.m1.1e">†</annotation></semantics></math> Corresponding author.</span></span></span>
<section class="ltx_section" id="S1">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="S1.F1"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="772" id="S1.F1.g1" src="https://arxiv.org/html/2410.04064v1/x1.png" width="830">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 1: </span>Illustration of the contributions of our method. (a): Existing datasets rarely cover a full range of chart types and primarily focus on QA tasks rather than chart generation. (b): Our dataset focuses on chart generation tasks and covers 31 unique plot types with tuples that combine descriptions, code, data tables, intermediate reasoning steps, and plots. (c): We further adopt RL-based instruction tuning method that leverage automated feedback and cycle consistency.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S1.p1">
<p class="ltx_p" id="S1.p1.1">Recently, a range of NLP tasks has been addressed by leveraging the remarkable ability of Large Language Models (LLMs). This advancement has been possible largely through the process of instruction-tuning <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib30" title="">2022</a>; Yoo et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib42" title="">2024</a>)</cite>, which fine-tunes LLMs to rely on intuitive natural language instructions and skillfully solve intricate tasks, encompassing fields like question answering <cite class="ltx_cite ltx_citemacro_citep">(Sanh et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib33" title="">2022</a>; Liu and Low, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib22" title="">2023</a>)</cite>, summarizing <cite class="ltx_cite ltx_citemacro_citep">(Goyal et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib10" title="">2023</a>; Fetahu et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib7" title="">2023</a>)</cite>, and sentiment analysis <cite class="ltx_cite ltx_citemacro_citep">(Varia et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib37" title="">2023</a>)</cite>. However, available LLMs continue to suffer from the difficult tasks of visualizing complex, fact-based, real-world data through charts and plots, mainly because of two challenges.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S1.p2">
<p class="ltx_p" id="S1.p2.1">Firstly, the current datasets <cite class="ltx_cite ltx_citemacro_citep">(Methani et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib26" title="">2020</a>; Masry et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib24" title="">2022</a>; Kahou et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib15" title="">2018</a>; Zhu et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib44" title="">2021</a>; Kantharaj et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib16" title="">2022</a>; Han et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib12" title="">2023</a>)</cite> primarily focus on QA in the chart domain rather than chart generation, and they rarely cover a full range of chart types and their varied applications. Several chart forms like 3D, volumetric, gridded, and irregularly gridded remain largely unexplored or insufficiently studied. These forms are important for evaluating the capabilities of LLMs in understanding multidimensional data, spatial data, and vector field data. Developing such instructional datasets typically entails significant expenses due to the complex nature of text-to-chart processes, incorporating various data components such as text, code, and data tables.
This complexity, along with the lack of specific online sources containing these plot types, makes their collection difficult and time-consuming. It necessitates human expert intervention to ensure quality, which drives up costs.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S1.p3">
<p class="ltx_p" id="S1.p3.1">Secondly, existing instruction-tuning methods based on supervised fine-tuning do not fully utilize the potential of rich datasets; for example, chart data include multiple components like text descriptions, code, and figures.
Supervised fine-tuning struggles to effectively extract and leverage all the intricate information and relationships within these components, leading to suboptimal performance.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S1.p4">
<p class="ltx_p" id="S1.p4.1">To address the first challenge, we propose a novel hierarchical pipeline for chart generation by leveraging the advanced linguistic skills of GPT-3.5-turbo <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib30" title="">2022</a>)</cite> and code generation and data analysis capabilities of GPT-4-0613 <cite class="ltx_cite ltx_citemacro_citep">(OpenAI, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib28" title="">2023</a>)</cite>. We contribute a dataset encompassing 31 unique plot types from the Matplotlib library <cite class="ltx_cite ltx_citemacro_citep">(Hunter, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib14" title="">2007</a>)</cite>, featuring 11.1K tuples that combine descriptions, code, data tables, and plots, covering a wide range of use cases.
Our pipeline is structured into the following steps: topic generation, description creation, code production, data table and reasoning step formulation, and cycle consistency verification.
This approach reduces biases towards common topics or plot types, and ensures consistent and accurate generation of multiple data elements.
By minimizing the human supervision in our proposed pipeline, we can generate a high-quality large-scale dataset that includes comprehensive descriptions, codes, data tables, reasoning steps, and illustrated graphs.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S1.p5">
<p class="ltx_p" id="S1.p5.1">We further propose a novel reinforcement learning-based instruction tuning technique to address the second challenge. This method is tailored for chart generation tasks without costly human feedback.
We propose two different reward functions: the preference reward and alignment reward.
For the preference reward, we construct a preference dataset from the supervised fine-tuned model’s output and the ground truth code.
For the alignment reward, we optimize the model to increase the similarity between ground truth description and regenerated description from the code, exploiting the cycle consistency between code and description.
We jointly optimize two sequential policy models using the PPO <cite class="ltx_cite ltx_citemacro_citep">(Schulman et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib34" title="">2017</a>)</cite>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S1.p6">
<p class="ltx_p" id="S1.p6.1">Finally, we make the following contributions:</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<ul class="ltx_itemize" id="S1.I1">
<li class="ltx_item" id="S1.I1.i1" style="list-style-type:none;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i1.p1">
<p class="ltx_p" id="S1.I1.i1.p1.1">We develop a novel dataset generation pipeline that populates data samples and filters out the low-quality ones, exploiting the cycle consistency in the task.
This approach is scalable to increase the volume of data as needed.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</li>
<li class="ltx_item" id="S1.I1.i2" style="list-style-type:none;padding-top:2.0pt;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i2.p1">
<p class="ltx_p" id="S1.I1.i2.p1.1">We introduce the Text2Chart31 dataset, comprising 31 plot types with 11.1K tuples that combine descriptions, code, data tables, intermediate reasoning steps, and plots, covering a wide range of use cases.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</li>
<li class="ltx_item" id="S1.I1.i3" style="list-style-type:none;padding-top:2.0pt;">
<span class="ltx_tag ltx_tag_item">•</span>
<div class="ltx_para" id="S1.I1.i3.p1">
<p class="ltx_p" id="S1.I1.i3.p1.1">We introduce an RL-based instruction tuning method that utilizes novel reward functions that leverage automated feedback and cycle consistency. The experiments demonstrate that our fine-tuned models outperform state-of-the-art open and closed-source models on data visualization tasks. To the best of our knowledge, this is the first work to adopt an RL-based instruction tuning approach for the chart generation task.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</li>
</ul>
</div>
</section>
<section class="ltx_section" id="S2">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Text2Chart31 Dataset</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S2.p1">
<p class="ltx_p" id="S2.p1.7">Our newly contributed Text2Chart31 dataset supports 31 plot types based on Matplotlib
with 11.1K data points. We outline its key characteristics in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S2.T1" title="In 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Table</span>&nbsp;<span class="ltx_text ltx_ref_tag">1</span></a> comparing with existing datasets in the data visualization domain. The Text2Chart31 dataset <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S2.p1.1.m1.1"><semantics id="S2.p1.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.p1.1.m1.1.1" xref="S2.p1.1.m1.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S2.p1.1.m1.1b"><ci id="S2.p1.1.m1.1.1.cmml" xref="S2.p1.1.m1.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.1.m1.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.1.m1.1d">caligraphic_D</annotation></semantics></math> consists of 11,128 data points, each of which contains a tuple of <math alttext="{(x,c,d,r,y)}" class="ltx_Math" display="inline" id="S2.p1.2.m2.5"><semantics id="S2.p1.2.m2.5a"><mrow id="S2.p1.2.m2.5.6.2" xref="S2.p1.2.m2.5.6.1.cmml"><mo id="S2.p1.2.m2.5.6.2.1" stretchy="false" xref="S2.p1.2.m2.5.6.1.cmml">(</mo><mi id="S2.p1.2.m2.1.1" xref="S2.p1.2.m2.1.1.cmml">x</mi><mo id="S2.p1.2.m2.5.6.2.2" xref="S2.p1.2.m2.5.6.1.cmml">,</mo><mi id="S2.p1.2.m2.2.2" xref="S2.p1.2.m2.2.2.cmml">c</mi><mo id="S2.p1.2.m2.5.6.2.3" xref="S2.p1.2.m2.5.6.1.cmml">,</mo><mi id="S2.p1.2.m2.3.3" xref="S2.p1.2.m2.3.3.cmml">d</mi><mo id="S2.p1.2.m2.5.6.2.4" xref="S2.p1.2.m2.5.6.1.cmml">,</mo><mi id="S2.p1.2.m2.4.4" xref="S2.p1.2.m2.4.4.cmml">r</mi><mo id="S2.p1.2.m2.5.6.2.5" xref="S2.p1.2.m2.5.6.1.cmml">,</mo><mi id="S2.p1.2.m2.5.5" xref="S2.p1.2.m2.5.5.cmml">y</mi><mo id="S2.p1.2.m2.5.6.2.6" stretchy="false" xref="S2.p1.2.m2.5.6.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.p1.2.m2.5b"><vector id="S2.p1.2.m2.5.6.1.cmml" xref="S2.p1.2.m2.5.6.2"><ci id="S2.p1.2.m2.1.1.cmml" xref="S2.p1.2.m2.1.1">𝑥</ci><ci id="S2.p1.2.m2.2.2.cmml" xref="S2.p1.2.m2.2.2">𝑐</ci><ci id="S2.p1.2.m2.3.3.cmml" xref="S2.p1.2.m2.3.3">𝑑</ci><ci id="S2.p1.2.m2.4.4.cmml" xref="S2.p1.2.m2.4.4">𝑟</ci><ci id="S2.p1.2.m2.5.5.cmml" xref="S2.p1.2.m2.5.5">𝑦</ci></vector></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.2.m2.5c">{(x,c,d,r,y)}</annotation><annotation encoding="application/x-llamapun" id="S2.p1.2.m2.5d">( italic_x , italic_c , italic_d , italic_r , italic_y )</annotation></semantics></math>: a textual plot description (<math alttext="x" class="ltx_Math" display="inline" id="S2.p1.3.m3.1"><semantics id="S2.p1.3.m3.1a"><mi id="S2.p1.3.m3.1.1" xref="S2.p1.3.m3.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.p1.3.m3.1b"><ci id="S2.p1.3.m3.1.1.cmml" xref="S2.p1.3.m3.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.3.m3.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.p1.3.m3.1d">italic_x</annotation></semantics></math>), its corresponding code (<math alttext="c" class="ltx_Math" display="inline" id="S2.p1.4.m4.1"><semantics id="S2.p1.4.m4.1a"><mi id="S2.p1.4.m4.1.1" xref="S2.p1.4.m4.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S2.p1.4.m4.1b"><ci id="S2.p1.4.m4.1.1.cmml" xref="S2.p1.4.m4.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.4.m4.1c">c</annotation><annotation encoding="application/x-llamapun" id="S2.p1.4.m4.1d">italic_c</annotation></semantics></math>), the resulting plots (<math alttext="y" class="ltx_Math" display="inline" id="S2.p1.5.m5.1"><semantics id="S2.p1.5.m5.1a"><mi id="S2.p1.5.m5.1.1" xref="S2.p1.5.m5.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.p1.5.m5.1b"><ci id="S2.p1.5.m5.1.1.cmml" xref="S2.p1.5.m5.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.5.m5.1c">y</annotation><annotation encoding="application/x-llamapun" id="S2.p1.5.m5.1d">italic_y</annotation></semantics></math>).
For 8,166 data points, we additionally include a raw data table (<math alttext="d" class="ltx_Math" display="inline" id="S2.p1.6.m6.1"><semantics id="S2.p1.6.m6.1a"><mi id="S2.p1.6.m6.1.1" xref="S2.p1.6.m6.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S2.p1.6.m6.1b"><ci id="S2.p1.6.m6.1.1.cmml" xref="S2.p1.6.m6.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.6.m6.1c">d</annotation><annotation encoding="application/x-llamapun" id="S2.p1.6.m6.1d">italic_d</annotation></semantics></math>) and intermediate reasoning steps (<math alttext="r" class="ltx_Math" display="inline" id="S2.p1.7.m7.1"><semantics id="S2.p1.7.m7.1a"><mi id="S2.p1.7.m7.1.1" xref="S2.p1.7.m7.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S2.p1.7.m7.1b"><ci id="S2.p1.7.m7.1.1.cmml" xref="S2.p1.7.m7.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.p1.7.m7.1c">r</annotation><annotation encoding="application/x-llamapun" id="S2.p1.7.m7.1d">italic_r</annotation></semantics></math>) to generate descriptions.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S2.p2">
<p class="ltx_p" id="S2.p2.1">For the dataset, we develop a hierarchical plot generation pipeline leveraging GPT-3.5-turbo and GPT-4.
Despite their impressive capabilities for text and code generation, collecting high-quality data points is challenging for two primary reasons: (1) GPT-3.5-turbo exhibits bias towards particular topics or narrow plot types that are commonly represented in its training data, and (2) the text-to-chart data involves multiple data elements including descriptions, code, and data tables, making it difficult to generate accurate and consistent data points in a single step. Consequently, we claim that a hierarchical approach is essential for producing higher-quality chart-generation data points. This pipeline is illustrated in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S2.F2" title="In 2.1 Task Definition ‣ 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">2</span></a>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_table" id="S2.T1">
<p class="ltx_p ltx_align_center" id="S2.T1.3"><span class="ltx_text" id="S2.T1.3.3">
<span class="ltx_inline-block ltx_transformed_outer" id="S2.T1.3.3.3" style="width:676.7pt;height:225.1pt;vertical-align:-1.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="S2.T1.3.3.3.3"><span class="ltx_text" id="S2.T1.3.3.3.3.3">
<span class="ltx_tabular ltx_align_middle" id="S2.T1.3.3.3.3.3.3">
<span class="ltx_tbody">
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.4.1">
<span class="ltx_td ltx_border_tt" id="S2.T1.3.3.3.3.3.3.4.1.1"></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_4" id="S2.T1.3.3.3.3.3.3.4.1.2"># Data</span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_4" id="S2.T1.3.3.3.3.3.3.4.1.3"># Plot Type</span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S2.T1.3.3.3.3.3.3.4.1.4">Quality Analysis</span></span>
<span class="ltx_tr" id="S2.T1.2.2.2.2.2.2.2">
<span class="ltx_td ltx_align_left ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.3">Dataset</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.4">Figures</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.5">
<span class="ltx_inline-block" id="S2.T1.2.2.2.2.2.2.2.5.1">
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.5.1.1">Instruction</span>
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.5.1.2">Tuning</span>
</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.6">
<span class="ltx_inline-block" id="S2.T1.2.2.2.2.2.2.2.6.1">
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.6.1.1">Description</span>
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.6.1.2">to Code</span>
</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.7">
<span class="ltx_inline-block" id="S2.T1.2.2.2.2.2.2.2.7.1">
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.7.1.1">Raw Data</span>
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.7.1.2">to Description</span>
</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.8">
<span class="ltx_inline-block" id="S2.T1.2.2.2.2.2.2.2.8.1">
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.8.1.1">Pairwise&amp;</span>
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.8.1.2">Stat. Dist.</span>
</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.9">
<span class="ltx_inline-block" id="S2.T1.2.2.2.2.2.2.2.9.1">
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.9.1.1">(Irregularly)</span>
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.9.1.2">Gridded</span>
</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.10">
<span class="ltx_inline-block" id="S2.T1.2.2.2.2.2.2.2.10.1">
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.10.1.1">3D &amp;</span>
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.10.1.2">Volumetric</span>
</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.11">Total</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.1.1.1.1.1.1.1.1">
<span class="ltx_inline-block" id="S2.T1.1.1.1.1.1.1.1.1.1">
<span class="ltx_p" id="S2.T1.1.1.1.1.1.1.1.1.1.2">Dataset</span>
<span class="ltx_p" id="S2.T1.1.1.1.1.1.1.1.1.1.1">Balance<sup class="ltx_sup" id="S2.T1.1.1.1.1.1.1.1.1.1.1.1">†</sup></span>
</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.2.2.2.2.2.2.2.2">
<span class="ltx_inline-block" id="S2.T1.2.2.2.2.2.2.2.2.1">
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.2.1.2">Content</span>
<span class="ltx_p" id="S2.T1.2.2.2.2.2.2.2.2.1.1">Diversity<sup class="ltx_sup" id="S2.T1.2.2.2.2.2.2.2.2.1.1.1">‡</sup></span>
</span></span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.5.2">
<span class="ltx_td ltx_align_left ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.1">PlotQA</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.2">224.3K</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.3">28.9M</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.4">✗</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.5">✗</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.6">3</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.7">✗</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.8">✗</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.9">3</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.10">0.786</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.5.2.11">0.038</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.6.3">
<span class="ltx_td ltx_align_left" id="S2.T1.3.3.3.3.3.3.6.3.1">ChartQA</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.2">21.9K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.3">32.7K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.4">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.5">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.6">3</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.7">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.8">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.9">2</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.10">0.422</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.6.3.11">-</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.7.4">
<span class="ltx_td ltx_align_left" id="S2.T1.3.3.3.3.3.3.7.4.1">FigureQA</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.2">180K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.3">2.3M</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.4">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.5">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.6">4</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.7">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.8">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.9">4</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.10">0.960</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.7.4.11">-</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.8.5">
<span class="ltx_td ltx_align_left" id="S2.T1.3.3.3.3.3.3.8.5.1">Unichart</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.2">611K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.3">7M</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.4">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.5">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.6">3</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.7">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.8">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.9">3</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.10">0.821</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.8.5.11">0.157</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.9.6">
<span class="ltx_td ltx_align_left" id="S2.T1.3.3.3.3.3.3.9.6.1">AutoChart</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.2">10.2K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.3">23.5K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.4">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.5">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.6">3</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.7">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.8">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.9">3</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.10">0.978</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.9.6.11">0.027</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.10.7">
<span class="ltx_td ltx_align_left" id="S2.T1.3.3.3.3.3.3.10.7.1">Chart-to-Text</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.2">44K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.3">44K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.4">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.5">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.6">5</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.7">1</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.8">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.9">6</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.10">0.327</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.10.7.11">0.421</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.11.8">
<span class="ltx_td ltx_align_left" id="S2.T1.3.3.3.3.3.3.11.8.1">ChartLlama</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.2">11K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.3">160K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.4">7.8K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.5">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.6">8</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.7">2</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.8">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.9">10</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.10">0.738</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.11.8.11">-</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.12.9">
<span class="ltx_td ltx_align_left" id="S2.T1.3.3.3.3.3.3.12.9.1">ChartX</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.2">6K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.3">48K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.4">6K</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.5">✗</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.6">13</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.7">2</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.8">1</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.9">16</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.10">0.953</span>
<span class="ltx_td ltx_align_center" id="S2.T1.3.3.3.3.3.3.12.9.11">0.534</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.13.10">
<span class="ltx_td ltx_align_left ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.1">Text2Chart31</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.2">11.1K</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.3">19.3K</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.4"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.13.10.4.1">11.1K</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.13.10.5.1">8.2K</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.6"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.13.10.6.1">16</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.7"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.13.10.7.1">10</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.13.10.8.1">5</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.9"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.13.10.9.1">31</span></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.10">0.980</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S2.T1.3.3.3.3.3.3.13.10.11">0.674</span></span>
<span class="ltx_tr" id="S2.T1.3.3.3.3.3.3.3">
<span class="ltx_td ltx_align_left ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.1">Text2Chart31-v2<sup class="ltx_sup" id="S2.T1.3.3.3.3.3.3.3.1.1">§</sup></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.2">28.2K</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.3">50.2K</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.4"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.3.4.1">28.2K</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.5"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.3.5.1">22K</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.6"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.3.6.1">16</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.7"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.3.7.1">10</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.8"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.3.8.1">5</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.9"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.3.9.1">31</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.10"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.3.10.1">0.993</span></span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S2.T1.3.3.3.3.3.3.3.11"><span class="ltx_text ltx_font_bold" id="S2.T1.3.3.3.3.3.3.3.11.1">0.696</span></span></span>
</span>
</span></span></span>
</span></span></span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 1: </span>
Comparison with other chart datasets: PlotQA <cite class="ltx_cite ltx_citemacro_citep">(Methani et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib26" title="">2020</a>)</cite>, ChartQA <cite class="ltx_cite ltx_citemacro_cite">Masry et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib24" title="">2022</a>)</cite>, FigureQA <cite class="ltx_cite ltx_citemacro_cite">Kahou et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib15" title="">2018</a>)</cite>,
Unichart <cite class="ltx_cite ltx_citemacro_cite">Masry et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib23" title="">2023</a>)</cite>, Autochart <cite class="ltx_cite ltx_citemacro_cite">Zhu et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib44" title="">2021</a>)</cite>, Chart-to-Text <cite class="ltx_cite ltx_citemacro_cite">Kantharaj et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib16" title="">2022</a>)</cite>, ChartLlama <cite class="ltx_cite ltx_citemacro_cite">Han et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib12" title="">2023</a>)</cite>, and ChartX <cite class="ltx_cite ltx_citemacro_cite">Xia et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib41" title="">2024</a>)</cite>.
We report the total number of figures and instruction tuning data, including the tasks like QA, summarization, code generation, and plot recommendation. Additionally, we provide the number of data points for the tasks of <span class="ltx_text ltx_font_italic" id="S2.T1.19.1">Description to Chart</span> and <span class="ltx_text ltx_font_italic" id="S2.T1.20.2">Raw Data to Chart</span>, specifying data for Description to Code (visualization code) and Raw Data Analysis to Description (analyzing raw data to generate a corresponding description).
We also detail the number of plot types in each dataset.
<sup class="ltx_sup" id="S2.T1.21.3">†</sup>We measure the dataset balance score using the Shannon Diversity Index <cite class="ltx_cite ltx_citemacro_citep">(Friedman and Dieng, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib8" title="">2023</a>)</cite>.
<sup class="ltx_sup" id="S2.T1.22.4">‡</sup>We evaluate the content diversity by calculating average distinct <math alttext="n" class="ltx_Math" display="inline" id="S2.T1.11.m3.1"><semantics id="S2.T1.11.m3.1b"><mi id="S2.T1.11.m3.1.1" xref="S2.T1.11.m3.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.T1.11.m3.1c"><ci id="S2.T1.11.m3.1.1.cmml" xref="S2.T1.11.m3.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.T1.11.m3.1d">n</annotation><annotation encoding="application/x-llamapun" id="S2.T1.11.m3.1e">italic_n</annotation></semantics></math>-grams (<math alttext="n" class="ltx_Math" display="inline" id="S2.T1.12.m4.1"><semantics id="S2.T1.12.m4.1b"><mi id="S2.T1.12.m4.1.1" xref="S2.T1.12.m4.1.1.cmml">n</mi><annotation-xml encoding="MathML-Content" id="S2.T1.12.m4.1c"><ci id="S2.T1.12.m4.1.1.cmml" xref="S2.T1.12.m4.1.1">𝑛</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.T1.12.m4.1d">n</annotation><annotation encoding="application/x-llamapun" id="S2.T1.12.m4.1e">italic_n</annotation></semantics></math> from 1 to 5) <cite class="ltx_cite ltx_citemacro_citep">(Li et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib18" title="">2016</a>)</cite>. For PlotQA, Chart-to-Text, and AutoChart, we use chart titles, captions, and descriptions to evaluate content diversity, respectively. For Unichart and ChartX, we use summarizations. ChartQA and FigureQA are excluded due to lack of descriptions/titles, and ChartLlama is private. Finally, content diversity of Text2Chart31 is computed using the topics.
<sup class="ltx_sup" id="S2.T1.23.5">§</sup> Text2Chart31-v2 is constructed and published at the camera ready version of the paper, and the experiment results in this paper is conducted with Text2Chart31.
</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<section class="ltx_subsection" id="S2.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.1 </span>Task Definition</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S2.SS1.p1">
<p class="ltx_p" id="S2.SS1.p1.7">Our benchmark is designed to evaluate three tasks. (1) <span class="ltx_text ltx_font_italic" id="S2.SS1.p1.7.1">Description-to-Chart:</span> Given a plot description <math alttext="x" class="ltx_Math" display="inline" id="S2.SS1.p1.1.m1.1"><semantics id="S2.SS1.p1.1.m1.1a"><mi id="S2.SS1.p1.1.m1.1.1" xref="S2.SS1.p1.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.1.m1.1b"><ci id="S2.SS1.p1.1.m1.1.1.cmml" xref="S2.SS1.p1.1.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.1.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.1.m1.1d">italic_x</annotation></semantics></math>, an algorithm generates its corresponding code <math alttext="c" class="ltx_Math" display="inline" id="S2.SS1.p1.2.m2.1"><semantics id="S2.SS1.p1.2.m2.1a"><mi id="S2.SS1.p1.2.m2.1.1" xref="S2.SS1.p1.2.m2.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.2.m2.1b"><ci id="S2.SS1.p1.2.m2.1.1.cmml" xref="S2.SS1.p1.2.m2.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.2.m2.1c">c</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.2.m2.1d">italic_c</annotation></semantics></math> that creates a chart by the Matplotlib library<span class="ltx_note ltx_role_footnote" id="footnote1"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_tag ltx_tag_note">1</span>We use Matplotlib 3.8 version.</span></span></span><cite class="ltx_cite ltx_citemacro_citep">(Hunter, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib14" title="">2007</a>)</cite>. (2) <span class="ltx_text ltx_font_italic" id="S2.SS1.p1.7.2">Raw Data-to-Chart:</span> When provided with only a raw data table <math alttext="d" class="ltx_Math" display="inline" id="S2.SS1.p1.3.m3.1"><semantics id="S2.SS1.p1.3.m3.1a"><mi id="S2.SS1.p1.3.m3.1.1" xref="S2.SS1.p1.3.m3.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.3.m3.1b"><ci id="S2.SS1.p1.3.m3.1.1.cmml" xref="S2.SS1.p1.3.m3.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.3.m3.1c">d</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.3.m3.1d">italic_d</annotation></semantics></math>, the algorithm generates intermediate reasoning steps <math alttext="r" class="ltx_Math" display="inline" id="S2.SS1.p1.4.m4.1"><semantics id="S2.SS1.p1.4.m4.1a"><mi id="S2.SS1.p1.4.m4.1.1" xref="S2.SS1.p1.4.m4.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.4.m4.1b"><ci id="S2.SS1.p1.4.m4.1.1.cmml" xref="S2.SS1.p1.4.m4.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.4.m4.1c">r</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.4.m4.1d">italic_r</annotation></semantics></math> that analyze the raw data and then generates a description <math alttext="d" class="ltx_Math" display="inline" id="S2.SS1.p1.5.m5.1"><semantics id="S2.SS1.p1.5.m5.1a"><mi id="S2.SS1.p1.5.m5.1.1" xref="S2.SS1.p1.5.m5.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.5.m5.1b"><ci id="S2.SS1.p1.5.m5.1.1.cmml" xref="S2.SS1.p1.5.m5.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.5.m5.1c">d</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.5.m5.1d">italic_d</annotation></semantics></math> for the most suitable plot type based on the characteristics of the data. (3) <span class="ltx_text ltx_font_italic" id="S2.SS1.p1.7.3">Code-to-Description:</span> Given the code <math alttext="c" class="ltx_Math" display="inline" id="S2.SS1.p1.6.m6.1"><semantics id="S2.SS1.p1.6.m6.1a"><mi id="S2.SS1.p1.6.m6.1.1" xref="S2.SS1.p1.6.m6.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.6.m6.1b"><ci id="S2.SS1.p1.6.m6.1.1.cmml" xref="S2.SS1.p1.6.m6.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.6.m6.1c">c</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.6.m6.1d">italic_c</annotation></semantics></math> for a plot, the model generates a detailed description <math alttext="x" class="ltx_Math" display="inline" id="S2.SS1.p1.7.m7.1"><semantics id="S2.SS1.p1.7.m7.1a"><mi id="S2.SS1.p1.7.m7.1.1" xref="S2.SS1.p1.7.m7.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS1.p1.7.m7.1b"><ci id="S2.SS1.p1.7.m7.1.1.cmml" xref="S2.SS1.p1.7.m7.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS1.p1.7.m7.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS1.p1.7.m7.1d">italic_x</annotation></semantics></math> of the plot.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="S2.F2"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="262" id="S2.F2.g1" src="https://arxiv.org/html/2410.04064v1/x2.png" width="747">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 2: </span>Illustration of our hierarchical chart generation process with an example of a single plot type. The process begins by randomly selecting a topic from a topic pool. Two instructional samples are then chosen from an instruction pool and given to GPT-3.5-turbo to generate a new instruction, which undergoes a self-evaluation process by GPT-4 for qualification. If it meets the criteria, which includes compatibility with the data points and the plot type, it is added to the instruction pool. Simultaneously, the new instruction is sent to GPT-4 for data table creation using a long data table format and code generation. Finally, the generated tuple (<math alttext="x,d,c,y" class="ltx_Math" display="inline" id="S2.F2.2.m1.4"><semantics id="S2.F2.2.m1.4b"><mrow id="S2.F2.2.m1.4.5.2" xref="S2.F2.2.m1.4.5.1.cmml"><mi id="S2.F2.2.m1.1.1" xref="S2.F2.2.m1.1.1.cmml">x</mi><mo id="S2.F2.2.m1.4.5.2.1" xref="S2.F2.2.m1.4.5.1.cmml">,</mo><mi id="S2.F2.2.m1.2.2" xref="S2.F2.2.m1.2.2.cmml">d</mi><mo id="S2.F2.2.m1.4.5.2.2" xref="S2.F2.2.m1.4.5.1.cmml">,</mo><mi id="S2.F2.2.m1.3.3" xref="S2.F2.2.m1.3.3.cmml">c</mi><mo id="S2.F2.2.m1.4.5.2.3" xref="S2.F2.2.m1.4.5.1.cmml">,</mo><mi id="S2.F2.2.m1.4.4" xref="S2.F2.2.m1.4.4.cmml">y</mi></mrow><annotation-xml encoding="MathML-Content" id="S2.F2.2.m1.4c"><list id="S2.F2.2.m1.4.5.1.cmml" xref="S2.F2.2.m1.4.5.2"><ci id="S2.F2.2.m1.1.1.cmml" xref="S2.F2.2.m1.1.1">𝑥</ci><ci id="S2.F2.2.m1.2.2.cmml" xref="S2.F2.2.m1.2.2">𝑑</ci><ci id="S2.F2.2.m1.3.3.cmml" xref="S2.F2.2.m1.3.3">𝑐</ci><ci id="S2.F2.2.m1.4.4.cmml" xref="S2.F2.2.m1.4.4">𝑦</ci></list></annotation-xml><annotation encoding="application/x-tex" id="S2.F2.2.m1.4d">x,d,c,y</annotation><annotation encoding="application/x-llamapun" id="S2.F2.2.m1.4e">italic_x , italic_d , italic_c , italic_y</annotation></semantics></math>) goes through a final filtering of cycle-consistency to validate the produced data point with high quality and correctness.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</section>
<section class="ltx_subsection" id="S2.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.2 </span>Dataset Construction Pipeline</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S2.SS2.p1">
<p class="ltx_p" id="S2.SS2.p1.4">Our pipeline initiates by generating a topic from which a description <math alttext="x" class="ltx_Math" display="inline" id="S2.SS2.p1.1.m1.1"><semantics id="S2.SS2.p1.1.m1.1a"><mi id="S2.SS2.p1.1.m1.1.1" xref="S2.SS2.p1.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.1.m1.1b"><ci id="S2.SS2.p1.1.m1.1.1.cmml" xref="S2.SS2.p1.1.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.1.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.1.m1.1d">italic_x</annotation></semantics></math> is derived. To ensure both diversity of the topic and alignment with the intended plot type, each topic is filtered before proceeding to the next step. We additionally generate code <math alttext="c" class="ltx_Math" display="inline" id="S2.SS2.p1.2.m2.1"><semantics id="S2.SS2.p1.2.m2.1a"><mi id="S2.SS2.p1.2.m2.1.1" xref="S2.SS2.p1.2.m2.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.2.m2.1b"><ci id="S2.SS2.p1.2.m2.1.1.cmml" xref="S2.SS2.p1.2.m2.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.2.m2.1c">c</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.2.m2.1d">italic_c</annotation></semantics></math>, raw data table <math alttext="d" class="ltx_Math" display="inline" id="S2.SS2.p1.3.m3.1"><semantics id="S2.SS2.p1.3.m3.1a"><mi id="S2.SS2.p1.3.m3.1.1" xref="S2.SS2.p1.3.m3.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.3.m3.1b"><ci id="S2.SS2.p1.3.m3.1.1.cmml" xref="S2.SS2.p1.3.m3.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.3.m3.1c">d</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.3.m3.1d">italic_d</annotation></semantics></math> and intermediate reasoning step <math alttext="r" class="ltx_Math" display="inline" id="S2.SS2.p1.4.m4.1"><semantics id="S2.SS2.p1.4.m4.1a"><mi id="S2.SS2.p1.4.m4.1.1" xref="S2.SS2.p1.4.m4.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p1.4.m4.1b"><ci id="S2.SS2.p1.4.m4.1.1.cmml" xref="S2.SS2.p1.4.m4.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p1.4.m4.1c">r</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p1.4.m4.1d">italic_r</annotation></semantics></math> corresponding to the description. Lastly, we use the cycle-consistency verification to ensure the high quality of the data points.
Please refer to <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A3" title="Appendix C Cycle Consistency Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Appendix</span>&nbsp;<span class="ltx_text ltx_ref_tag">C</span></a> for the detailed process with examples.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S2.SS2.p2">
<p class="ltx_p" id="S2.SS2.p2.1"><span class="ltx_text ltx_font_bold" id="S2.SS2.p2.1.1">Topic generation</span>.
We generate distinct topic pools for five different plot categories: pairwise, statistical, gridded, irregularly gridded, and 3D/volumetric data. To maintain diversity within each topic pool, we include only topics with low similarity scores compared to those already being presented. To assess similarity, the ROUGE-L metric <cite class="ltx_cite ltx_citemacro_citep">(Lin, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib20" title="">2004</a>)</cite> is employed as a common practice from previous studies <cite class="ltx_cite ltx_citemacro_citep">(Wang et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib39" title="">2023b</a>)</cite>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S2.SS2.p3">
<p class="ltx_p" id="S2.SS2.p3.1"><span class="ltx_text ltx_font_bold" id="S2.SS2.p3.1.1">Description generation</span>.
For each plot type, we start by manually writing 5 to 10 descriptions as seed points that contain all the necessary information for a plot to be illustrated. To generate a description (<math alttext="x" class="ltx_Math" display="inline" id="S2.SS2.p3.1.m1.1"><semantics id="S2.SS2.p3.1.m1.1a"><mi id="S2.SS2.p3.1.m1.1.1" xref="S2.SS2.p3.1.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p3.1.m1.1b"><ci id="S2.SS2.p3.1.m1.1.1.cmml" xref="S2.SS2.p3.1.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p3.1.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p3.1.m1.1d">italic_x</annotation></semantics></math>), we randomly sample two descriptions and pair them with a topic from the topic pool. This assembled data is prompted into GPT-3.5-turbo, which generates a similar format plot description for the sampled topic. We remove the topic from the pool after a new description is generated to uphold the diversity. Inspired by the studies on the reasoning capabilities of LLMs <cite class="ltx_cite ltx_citemacro_cite">Wei et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib40" title="">2023</a>); Kojima et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib17" title="">2023</a>); Wang et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib38" title="">2023a</a>)</cite>, we instruct GPT-4 to <span class="ltx_text ltx_font_italic" id="S2.SS2.p3.1.2">self-evaluate</span> the generated descriptions for quality control. This step is crucial to exclude any incompatible instructions that can lead to the creation of unsuitable plots, thereby avoiding computational waste.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S2.SS2.p4">
<p class="ltx_p" id="S2.SS2.p4.2"><span class="ltx_text ltx_font_bold" id="S2.SS2.p4.2.1">Code generation</span>.
We input descriptions into GPT-4, which is instructed to generate Python code for the Matplotlib library. This code aims to visualize the described plot. We add the generated code (<math alttext="c" class="ltx_Math" display="inline" id="S2.SS2.p4.1.m1.1"><semantics id="S2.SS2.p4.1.m1.1a"><mi id="S2.SS2.p4.1.m1.1.1" xref="S2.SS2.p4.1.m1.1.1.cmml">c</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.1.m1.1b"><ci id="S2.SS2.p4.1.m1.1.1.cmml" xref="S2.SS2.p4.1.m1.1.1">𝑐</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.1.m1.1c">c</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.1.m1.1d">italic_c</annotation></semantics></math>) to the dataset only if it successfully generates the corresponding plot (<math alttext="y" class="ltx_Math" display="inline" id="S2.SS2.p4.2.m2.1"><semantics id="S2.SS2.p4.2.m2.1a"><mi id="S2.SS2.p4.2.m2.1.1" xref="S2.SS2.p4.2.m2.1.1.cmml">y</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p4.2.m2.1b"><ci id="S2.SS2.p4.2.m2.1.1.cmml" xref="S2.SS2.p4.2.m2.1.1">𝑦</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p4.2.m2.1c">y</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p4.2.m2.1d">italic_y</annotation></semantics></math>) without a runtime error.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S2.SS2.p5">
<p class="ltx_p" id="S2.SS2.p5.4"><span class="ltx_text ltx_font_bold" id="S2.SS2.p5.4.1">Data table and reasoning step generation</span>.
For plots derived from data files in <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="S2.SS2.p5.1.m1.1"><semantics id="S2.SS2.p5.1.m1.1a"><mi class="ltx_font_mathcaligraphic" id="S2.SS2.p5.1.m1.1.1" xref="S2.SS2.p5.1.m1.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.1.m1.1b"><ci id="S2.SS2.p5.1.m1.1.1.cmml" xref="S2.SS2.p5.1.m1.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.1.m1.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.1.m1.1d">caligraphic_D</annotation></semantics></math>, GPT-4 is prompted to generate either a raw data table <math alttext="d" class="ltx_Math" display="inline" id="S2.SS2.p5.2.m2.1"><semantics id="S2.SS2.p5.2.m2.1a"><mi id="S2.SS2.p5.2.m2.1.1" xref="S2.SS2.p5.2.m2.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.2.m2.1b"><ci id="S2.SS2.p5.2.m2.1.1.cmml" xref="S2.SS2.p5.2.m2.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.2.m2.1c">d</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.2.m2.1d">italic_d</annotation></semantics></math> or Python code that can generate the data table.
3D volumetric, gridded, and irregularly gridded plots often require specific patterns or mathematical relations between variables; therefore, code is created and executed to generate the data table instead of directly generating it.
We further generate intermediate reasoning steps <math alttext="r" class="ltx_Math" display="inline" id="S2.SS2.p5.3.m3.1"><semantics id="S2.SS2.p5.3.m3.1a"><mi id="S2.SS2.p5.3.m3.1.1" xref="S2.SS2.p5.3.m3.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.3.m3.1b"><ci id="S2.SS2.p5.3.m3.1.1.cmml" xref="S2.SS2.p5.3.m3.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.3.m3.1c">r</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.3.m3.1d">italic_r</annotation></semantics></math> using GPT-4, which is instructed to analyze the characteristics of the data and CSV file, explore possible plot types, determine the most suitable plot type, and consider additional aspects of the description. This process results in data points <math alttext="(x,c,d,r,y)" class="ltx_Math" display="inline" id="S2.SS2.p5.4.m4.5"><semantics id="S2.SS2.p5.4.m4.5a"><mrow id="S2.SS2.p5.4.m4.5.6.2" xref="S2.SS2.p5.4.m4.5.6.1.cmml"><mo id="S2.SS2.p5.4.m4.5.6.2.1" stretchy="false" xref="S2.SS2.p5.4.m4.5.6.1.cmml">(</mo><mi id="S2.SS2.p5.4.m4.1.1" xref="S2.SS2.p5.4.m4.1.1.cmml">x</mi><mo id="S2.SS2.p5.4.m4.5.6.2.2" xref="S2.SS2.p5.4.m4.5.6.1.cmml">,</mo><mi id="S2.SS2.p5.4.m4.2.2" xref="S2.SS2.p5.4.m4.2.2.cmml">c</mi><mo id="S2.SS2.p5.4.m4.5.6.2.3" xref="S2.SS2.p5.4.m4.5.6.1.cmml">,</mo><mi id="S2.SS2.p5.4.m4.3.3" xref="S2.SS2.p5.4.m4.3.3.cmml">d</mi><mo id="S2.SS2.p5.4.m4.5.6.2.4" xref="S2.SS2.p5.4.m4.5.6.1.cmml">,</mo><mi id="S2.SS2.p5.4.m4.4.4" xref="S2.SS2.p5.4.m4.4.4.cmml">r</mi><mo id="S2.SS2.p5.4.m4.5.6.2.5" xref="S2.SS2.p5.4.m4.5.6.1.cmml">,</mo><mi id="S2.SS2.p5.4.m4.5.5" xref="S2.SS2.p5.4.m4.5.5.cmml">y</mi><mo id="S2.SS2.p5.4.m4.5.6.2.6" stretchy="false" xref="S2.SS2.p5.4.m4.5.6.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="S2.SS2.p5.4.m4.5b"><vector id="S2.SS2.p5.4.m4.5.6.1.cmml" xref="S2.SS2.p5.4.m4.5.6.2"><ci id="S2.SS2.p5.4.m4.1.1.cmml" xref="S2.SS2.p5.4.m4.1.1">𝑥</ci><ci id="S2.SS2.p5.4.m4.2.2.cmml" xref="S2.SS2.p5.4.m4.2.2">𝑐</ci><ci id="S2.SS2.p5.4.m4.3.3.cmml" xref="S2.SS2.p5.4.m4.3.3">𝑑</ci><ci id="S2.SS2.p5.4.m4.4.4.cmml" xref="S2.SS2.p5.4.m4.4.4">𝑟</ci><ci id="S2.SS2.p5.4.m4.5.5.cmml" xref="S2.SS2.p5.4.m4.5.5">𝑦</ci></vector></annotation-xml><annotation encoding="application/x-tex" id="S2.SS2.p5.4.m4.5c">(x,c,d,r,y)</annotation><annotation encoding="application/x-llamapun" id="S2.SS2.p5.4.m4.5d">( italic_x , italic_c , italic_d , italic_r , italic_y )</annotation></semantics></math>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S2.SS2.p6">
<p class="ltx_p" id="S2.SS2.p6.1"><span class="ltx_text ltx_font_bold" id="S2.SS2.p6.1.1">Cycle-Consistency verification</span>.
We argue that given the complex and fact-based nature of text-to-chart datasets, employing human evaluation to check the quality of generated data points is inefficient. To this end, we propose an AI-assisted method using cycle consistency, to assure the quality of the data point. This process involves regenerating an instruction that describes the plot from the generated code and comparing it against the original one. We keep the data only if the regenerated description closely aligns with the original one based on pre-defined criteria, indicating the high quality of the data. We provide further details on the cycle consistency method in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4" title="Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Appendix</span>&nbsp;<span class="ltx_text ltx_ref_tag">D</span></a>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
<section class="ltx_subsection" id="S2.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">2.3 </span>Analysis of Text2Chart31 Dataset</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S2.SS3.p1">
<p class="ltx_p" id="S2.SS3.p1.4">As shown in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S2.T1" title="Table 1 ‣ 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">1</span></a>,
we can effectively balance the data points per plot type with equal distribution in the dataset, which is quantified by the Shanon Diversity metric <cite class="ltx_cite ltx_citemacro_citep">(Friedman and Dieng, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib8" title="">2023</a>)</cite>.
Shannon Diversity is computed through <math alttext="H=-\sum_{i=1}^{S}p_{i}\log(p_{i})" class="ltx_Math" display="inline" id="S2.SS3.p1.1.m1.2"><semantics id="S2.SS3.p1.1.m1.2a"><mrow id="S2.SS3.p1.1.m1.2.2" xref="S2.SS3.p1.1.m1.2.2.cmml"><mi id="S2.SS3.p1.1.m1.2.2.3" xref="S2.SS3.p1.1.m1.2.2.3.cmml">H</mi><mo id="S2.SS3.p1.1.m1.2.2.2" xref="S2.SS3.p1.1.m1.2.2.2.cmml">=</mo><mrow id="S2.SS3.p1.1.m1.2.2.1" xref="S2.SS3.p1.1.m1.2.2.1.cmml"><mo id="S2.SS3.p1.1.m1.2.2.1a" xref="S2.SS3.p1.1.m1.2.2.1.cmml">−</mo><mrow id="S2.SS3.p1.1.m1.2.2.1.1" xref="S2.SS3.p1.1.m1.2.2.1.1.cmml"><msubsup id="S2.SS3.p1.1.m1.2.2.1.1.2" xref="S2.SS3.p1.1.m1.2.2.1.1.2.cmml"><mo id="S2.SS3.p1.1.m1.2.2.1.1.2.2.2" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.2.cmml">∑</mo><mrow id="S2.SS3.p1.1.m1.2.2.1.1.2.2.3" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.cmml"><mi id="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.2" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.2.cmml">i</mi><mo id="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.1" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.1.cmml">=</mo><mn id="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.3" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.3.cmml">1</mn></mrow><mi id="S2.SS3.p1.1.m1.2.2.1.1.2.3" xref="S2.SS3.p1.1.m1.2.2.1.1.2.3.cmml">S</mi></msubsup><mrow id="S2.SS3.p1.1.m1.2.2.1.1.1" xref="S2.SS3.p1.1.m1.2.2.1.1.1.cmml"><msub id="S2.SS3.p1.1.m1.2.2.1.1.1.3" xref="S2.SS3.p1.1.m1.2.2.1.1.1.3.cmml"><mi id="S2.SS3.p1.1.m1.2.2.1.1.1.3.2" xref="S2.SS3.p1.1.m1.2.2.1.1.1.3.2.cmml">p</mi><mi id="S2.SS3.p1.1.m1.2.2.1.1.1.3.3" xref="S2.SS3.p1.1.m1.2.2.1.1.1.3.3.cmml">i</mi></msub><mo id="S2.SS3.p1.1.m1.2.2.1.1.1.2" lspace="0.167em" xref="S2.SS3.p1.1.m1.2.2.1.1.1.2.cmml">⁢</mo><mrow id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.2.cmml"><mi id="S2.SS3.p1.1.m1.1.1" xref="S2.SS3.p1.1.m1.1.1.cmml">log</mi><mo id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1a" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.2.cmml">⁡</mo><mrow id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.2.cmml"><mo id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.2" stretchy="false" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.2.cmml">(</mo><msub id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.cmml"><mi id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.2" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.2.cmml">p</mi><mi id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.3" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.3" stretchy="false" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.2.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.1.m1.2b"><apply id="S2.SS3.p1.1.m1.2.2.cmml" xref="S2.SS3.p1.1.m1.2.2"><eq id="S2.SS3.p1.1.m1.2.2.2.cmml" xref="S2.SS3.p1.1.m1.2.2.2"></eq><ci id="S2.SS3.p1.1.m1.2.2.3.cmml" xref="S2.SS3.p1.1.m1.2.2.3">𝐻</ci><apply id="S2.SS3.p1.1.m1.2.2.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1"><minus id="S2.SS3.p1.1.m1.2.2.1.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1"></minus><apply id="S2.SS3.p1.1.m1.2.2.1.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1"><apply id="S2.SS3.p1.1.m1.2.2.1.1.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.1.m1.2.2.1.1.2.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2">superscript</csymbol><apply id="S2.SS3.p1.1.m1.2.2.1.1.2.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2"><csymbol cd="ambiguous" id="S2.SS3.p1.1.m1.2.2.1.1.2.2.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2">subscript</csymbol><sum id="S2.SS3.p1.1.m1.2.2.1.1.2.2.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.2"></sum><apply id="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.3"><eq id="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.1"></eq><ci id="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.2">𝑖</ci><cn id="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.3.cmml" type="integer" xref="S2.SS3.p1.1.m1.2.2.1.1.2.2.3.3">1</cn></apply></apply><ci id="S2.SS3.p1.1.m1.2.2.1.1.2.3.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.2.3">𝑆</ci></apply><apply id="S2.SS3.p1.1.m1.2.2.1.1.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1"><times id="S2.SS3.p1.1.m1.2.2.1.1.1.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.2"></times><apply id="S2.SS3.p1.1.m1.2.2.1.1.1.3.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.3"><csymbol cd="ambiguous" id="S2.SS3.p1.1.m1.2.2.1.1.1.3.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.3">subscript</csymbol><ci id="S2.SS3.p1.1.m1.2.2.1.1.1.3.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.3.2">𝑝</ci><ci id="S2.SS3.p1.1.m1.2.2.1.1.1.3.3.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.3.3">𝑖</ci></apply><apply id="S2.SS3.p1.1.m1.2.2.1.1.1.1.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.1"><log id="S2.SS3.p1.1.m1.1.1.cmml" xref="S2.SS3.p1.1.m1.1.1"></log><apply id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.1.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1">subscript</csymbol><ci id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.2.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.2">𝑝</ci><ci id="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.3.cmml" xref="S2.SS3.p1.1.m1.2.2.1.1.1.1.1.1.1.3">𝑖</ci></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.1.m1.2c">H=-\sum_{i=1}^{S}p_{i}\log(p_{i})</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.1.m1.2d">italic_H = - ∑ start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_S end_POSTSUPERSCRIPT italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT roman_log ( italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT )</annotation></semantics></math>, where <math alttext="S" class="ltx_Math" display="inline" id="S2.SS3.p1.2.m2.1"><semantics id="S2.SS3.p1.2.m2.1a"><mi id="S2.SS3.p1.2.m2.1.1" xref="S2.SS3.p1.2.m2.1.1.cmml">S</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.2.m2.1b"><ci id="S2.SS3.p1.2.m2.1.1.cmml" xref="S2.SS3.p1.2.m2.1.1">𝑆</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.2.m2.1c">S</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.2.m2.1d">italic_S</annotation></semantics></math> is the total number of classes in the dataset, and <math alttext="p_{i}" class="ltx_Math" display="inline" id="S2.SS3.p1.3.m3.1"><semantics id="S2.SS3.p1.3.m3.1a"><msub id="S2.SS3.p1.3.m3.1.1" xref="S2.SS3.p1.3.m3.1.1.cmml"><mi id="S2.SS3.p1.3.m3.1.1.2" xref="S2.SS3.p1.3.m3.1.1.2.cmml">p</mi><mi id="S2.SS3.p1.3.m3.1.1.3" xref="S2.SS3.p1.3.m3.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.3.m3.1b"><apply id="S2.SS3.p1.3.m3.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S2.SS3.p1.3.m3.1.1.1.cmml" xref="S2.SS3.p1.3.m3.1.1">subscript</csymbol><ci id="S2.SS3.p1.3.m3.1.1.2.cmml" xref="S2.SS3.p1.3.m3.1.1.2">𝑝</ci><ci id="S2.SS3.p1.3.m3.1.1.3.cmml" xref="S2.SS3.p1.3.m3.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.3.m3.1c">p_{i}</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.3.m3.1d">italic_p start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT</annotation></semantics></math> is the proportion of instances belonging to the <math alttext="i" class="ltx_Math" display="inline" id="S2.SS3.p1.4.m4.1"><semantics id="S2.SS3.p1.4.m4.1a"><mi id="S2.SS3.p1.4.m4.1.1" xref="S2.SS3.p1.4.m4.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S2.SS3.p1.4.m4.1b"><ci id="S2.SS3.p1.4.m4.1.1.cmml" xref="S2.SS3.p1.4.m4.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S2.SS3.p1.4.m4.1c">i</annotation><annotation encoding="application/x-llamapun" id="S2.SS3.p1.4.m4.1d">italic_i</annotation></semantics></math>-th class.
Our Text2Chart31 dataset achieve the highest score of 0.981.
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.F6" title="In A.4 Plot Type Distribution ‣ Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">6</span></a> in Appendix shows a detailed comparison of the distribution per chart type between datasets using pie charts.
We further evaluate the content diversity of datasets via Distinct-n score <cite class="ltx_cite ltx_citemacro_citep">(Li et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib18" title="">2016</a>)</cite>. Our dataset achieves a score of 0.674, indicating that our pipeline effectively reassures the diversity of topics.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_float ltx_float_algorithm ltx_framed ltx_framed_top" id="alg1">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_float"><span class="ltx_text ltx_font_bold" id="alg1.2.1.1">Algorithm 1</span> </span> Chart generation instruction tuning</figcaption>
<div class="ltx_listing ltx_listing" id="alg1.3">
<div class="ltx_listingline" id="algx1.l1">
<span class="ltx_tag ltx_tag_listingline">1:</span>Description-to-chart policy network <math alttext="\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="algx1.l1.m1.1"><semantics id="algx1.l1.m1.1a"><msub id="algx1.l1.m1.1.1" xref="algx1.l1.m1.1.1.cmml"><mi id="algx1.l1.m1.1.1.2" xref="algx1.l1.m1.1.1.2.cmml">π</mi><msub id="algx1.l1.m1.1.1.3" xref="algx1.l1.m1.1.1.3.cmml"><mi id="algx1.l1.m1.1.1.3.2" xref="algx1.l1.m1.1.1.3.2.cmml">θ</mi><mn id="algx1.l1.m1.1.1.3.3" xref="algx1.l1.m1.1.1.3.3.cmml">1</mn></msub></msub><annotation-xml encoding="MathML-Content" id="algx1.l1.m1.1b"><apply id="algx1.l1.m1.1.1.cmml" xref="algx1.l1.m1.1.1"><csymbol cd="ambiguous" id="algx1.l1.m1.1.1.1.cmml" xref="algx1.l1.m1.1.1">subscript</csymbol><ci id="algx1.l1.m1.1.1.2.cmml" xref="algx1.l1.m1.1.1.2">𝜋</ci><apply id="algx1.l1.m1.1.1.3.cmml" xref="algx1.l1.m1.1.1.3"><csymbol cd="ambiguous" id="algx1.l1.m1.1.1.3.1.cmml" xref="algx1.l1.m1.1.1.3">subscript</csymbol><ci id="algx1.l1.m1.1.1.3.2.cmml" xref="algx1.l1.m1.1.1.3.2">𝜃</ci><cn id="algx1.l1.m1.1.1.3.3.cmml" type="integer" xref="algx1.l1.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m1.1c">\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m1.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>,
Raw data-to-chart policy network <math alttext="\pi_{\theta_{2}}" class="ltx_Math" display="inline" id="algx1.l1.m2.1"><semantics id="algx1.l1.m2.1a"><msub id="algx1.l1.m2.1.1" xref="algx1.l1.m2.1.1.cmml"><mi id="algx1.l1.m2.1.1.2" xref="algx1.l1.m2.1.1.2.cmml">π</mi><msub id="algx1.l1.m2.1.1.3" xref="algx1.l1.m2.1.1.3.cmml"><mi id="algx1.l1.m2.1.1.3.2" xref="algx1.l1.m2.1.1.3.2.cmml">θ</mi><mn id="algx1.l1.m2.1.1.3.3" xref="algx1.l1.m2.1.1.3.3.cmml">2</mn></msub></msub><annotation-xml encoding="MathML-Content" id="algx1.l1.m2.1b"><apply id="algx1.l1.m2.1.1.cmml" xref="algx1.l1.m2.1.1"><csymbol cd="ambiguous" id="algx1.l1.m2.1.1.1.cmml" xref="algx1.l1.m2.1.1">subscript</csymbol><ci id="algx1.l1.m2.1.1.2.cmml" xref="algx1.l1.m2.1.1.2">𝜋</ci><apply id="algx1.l1.m2.1.1.3.cmml" xref="algx1.l1.m2.1.1.3"><csymbol cd="ambiguous" id="algx1.l1.m2.1.1.3.1.cmml" xref="algx1.l1.m2.1.1.3">subscript</csymbol><ci id="algx1.l1.m2.1.1.3.2.cmml" xref="algx1.l1.m2.1.1.3.2">𝜃</ci><cn id="algx1.l1.m2.1.1.3.3.cmml" type="integer" xref="algx1.l1.m2.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m2.1c">\pi_{\theta_{2}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>,
code-to-description policy network <math alttext="\pi_{\theta_{3}}" class="ltx_Math" display="inline" id="algx1.l1.m3.1"><semantics id="algx1.l1.m3.1a"><msub id="algx1.l1.m3.1.1" xref="algx1.l1.m3.1.1.cmml"><mi id="algx1.l1.m3.1.1.2" xref="algx1.l1.m3.1.1.2.cmml">π</mi><msub id="algx1.l1.m3.1.1.3" xref="algx1.l1.m3.1.1.3.cmml"><mi id="algx1.l1.m3.1.1.3.2" xref="algx1.l1.m3.1.1.3.2.cmml">θ</mi><mn id="algx1.l1.m3.1.1.3.3" xref="algx1.l1.m3.1.1.3.3.cmml">3</mn></msub></msub><annotation-xml encoding="MathML-Content" id="algx1.l1.m3.1b"><apply id="algx1.l1.m3.1.1.cmml" xref="algx1.l1.m3.1.1"><csymbol cd="ambiguous" id="algx1.l1.m3.1.1.1.cmml" xref="algx1.l1.m3.1.1">subscript</csymbol><ci id="algx1.l1.m3.1.1.2.cmml" xref="algx1.l1.m3.1.1.2">𝜋</ci><apply id="algx1.l1.m3.1.1.3.cmml" xref="algx1.l1.m3.1.1.3"><csymbol cd="ambiguous" id="algx1.l1.m3.1.1.3.1.cmml" xref="algx1.l1.m3.1.1.3">subscript</csymbol><ci id="algx1.l1.m3.1.1.3.2.cmml" xref="algx1.l1.m3.1.1.3.2">𝜃</ci><cn id="algx1.l1.m3.1.1.3.3.cmml" type="integer" xref="algx1.l1.m3.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m3.1c">\pi_{\theta_{3}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m3.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, Text2Chart31 dataset <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="algx1.l1.m4.1"><semantics id="algx1.l1.m4.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l1.m4.1.1" xref="algx1.l1.m4.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="algx1.l1.m4.1b"><ci id="algx1.l1.m4.1.1.cmml" xref="algx1.l1.m4.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l1.m4.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="algx1.l1.m4.1d">caligraphic_D</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l2">
<span class="ltx_tag ltx_tag_listingline">2:</span><span class="ltx_text ltx_font_bold" id="algx1.l2.2">for</span>&nbsp;iter = <math alttext="1,2,\ldots,N_{\mathrm{sft}}" class="ltx_Math" display="inline" id="algx1.l2.m1.4"><semantics id="algx1.l2.m1.4a"><mrow id="algx1.l2.m1.4.4.1" xref="algx1.l2.m1.4.4.2.cmml"><mn id="algx1.l2.m1.1.1" xref="algx1.l2.m1.1.1.cmml">1</mn><mo id="algx1.l2.m1.4.4.1.2" xref="algx1.l2.m1.4.4.2.cmml">,</mo><mn id="algx1.l2.m1.2.2" xref="algx1.l2.m1.2.2.cmml">2</mn><mo id="algx1.l2.m1.4.4.1.3" xref="algx1.l2.m1.4.4.2.cmml">,</mo><mi id="algx1.l2.m1.3.3" mathvariant="normal" xref="algx1.l2.m1.3.3.cmml">…</mi><mo id="algx1.l2.m1.4.4.1.4" xref="algx1.l2.m1.4.4.2.cmml">,</mo><msub id="algx1.l2.m1.4.4.1.1" xref="algx1.l2.m1.4.4.1.1.cmml"><mi id="algx1.l2.m1.4.4.1.1.2" xref="algx1.l2.m1.4.4.1.1.2.cmml">N</mi><mi id="algx1.l2.m1.4.4.1.1.3" xref="algx1.l2.m1.4.4.1.1.3.cmml">sft</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="algx1.l2.m1.4b"><list id="algx1.l2.m1.4.4.2.cmml" xref="algx1.l2.m1.4.4.1"><cn id="algx1.l2.m1.1.1.cmml" type="integer" xref="algx1.l2.m1.1.1">1</cn><cn id="algx1.l2.m1.2.2.cmml" type="integer" xref="algx1.l2.m1.2.2">2</cn><ci id="algx1.l2.m1.3.3.cmml" xref="algx1.l2.m1.3.3">…</ci><apply id="algx1.l2.m1.4.4.1.1.cmml" xref="algx1.l2.m1.4.4.1.1"><csymbol cd="ambiguous" id="algx1.l2.m1.4.4.1.1.1.cmml" xref="algx1.l2.m1.4.4.1.1">subscript</csymbol><ci id="algx1.l2.m1.4.4.1.1.2.cmml" xref="algx1.l2.m1.4.4.1.1.2">𝑁</ci><ci id="algx1.l2.m1.4.4.1.1.3.cmml" xref="algx1.l2.m1.4.4.1.1.3">sft</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="algx1.l2.m1.4c">1,2,\ldots,N_{\mathrm{sft}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l2.m1.4d">1 , 2 , … , italic_N start_POSTSUBSCRIPT roman_sft end_POSTSUBSCRIPT</annotation></semantics></math>&nbsp;<span class="ltx_text ltx_font_bold" id="algx1.l2.3">do</span> <span class="ltx_text" id="algx1.l2.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l2.1.m1.1"><semantics id="algx1.l2.1.m1.1a"><mo id="algx1.l2.1.m1.1.1" xref="algx1.l2.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l2.1.m1.1b"><ci id="algx1.l2.1.m1.1.1.cmml" xref="algx1.l2.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l2.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l2.1.m1.1d">▷</annotation></semantics></math> Supervised fine-tuning
</span>
</div>
<div class="ltx_listingline" id="algx1.l3">
<span class="ltx_tag ltx_tag_listingline">3:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sample data <math alttext="(x,c,d,r,y)" class="ltx_Math" display="inline" id="algx1.l3.m1.5"><semantics id="algx1.l3.m1.5a"><mrow id="algx1.l3.m1.5.6.2" xref="algx1.l3.m1.5.6.1.cmml"><mo id="algx1.l3.m1.5.6.2.1" stretchy="false" xref="algx1.l3.m1.5.6.1.cmml">(</mo><mi id="algx1.l3.m1.1.1" xref="algx1.l3.m1.1.1.cmml">x</mi><mo id="algx1.l3.m1.5.6.2.2" xref="algx1.l3.m1.5.6.1.cmml">,</mo><mi id="algx1.l3.m1.2.2" xref="algx1.l3.m1.2.2.cmml">c</mi><mo id="algx1.l3.m1.5.6.2.3" xref="algx1.l3.m1.5.6.1.cmml">,</mo><mi id="algx1.l3.m1.3.3" xref="algx1.l3.m1.3.3.cmml">d</mi><mo id="algx1.l3.m1.5.6.2.4" xref="algx1.l3.m1.5.6.1.cmml">,</mo><mi id="algx1.l3.m1.4.4" xref="algx1.l3.m1.4.4.cmml">r</mi><mo id="algx1.l3.m1.5.6.2.5" xref="algx1.l3.m1.5.6.1.cmml">,</mo><mi id="algx1.l3.m1.5.5" xref="algx1.l3.m1.5.5.cmml">y</mi><mo id="algx1.l3.m1.5.6.2.6" stretchy="false" xref="algx1.l3.m1.5.6.1.cmml">)</mo></mrow><annotation-xml encoding="MathML-Content" id="algx1.l3.m1.5b"><vector id="algx1.l3.m1.5.6.1.cmml" xref="algx1.l3.m1.5.6.2"><ci id="algx1.l3.m1.1.1.cmml" xref="algx1.l3.m1.1.1">𝑥</ci><ci id="algx1.l3.m1.2.2.cmml" xref="algx1.l3.m1.2.2">𝑐</ci><ci id="algx1.l3.m1.3.3.cmml" xref="algx1.l3.m1.3.3">𝑑</ci><ci id="algx1.l3.m1.4.4.cmml" xref="algx1.l3.m1.4.4">𝑟</ci><ci id="algx1.l3.m1.5.5.cmml" xref="algx1.l3.m1.5.5">𝑦</ci></vector></annotation-xml><annotation encoding="application/x-tex" id="algx1.l3.m1.5c">(x,c,d,r,y)</annotation><annotation encoding="application/x-llamapun" id="algx1.l3.m1.5d">( italic_x , italic_c , italic_d , italic_r , italic_y )</annotation></semantics></math> from dataset <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="algx1.l3.m2.1"><semantics id="algx1.l3.m2.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l3.m2.1.1" xref="algx1.l3.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="algx1.l3.m2.1b"><ci id="algx1.l3.m2.1.1.cmml" xref="algx1.l3.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l3.m2.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="algx1.l3.m2.1d">caligraphic_D</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l4">
<span class="ltx_tag ltx_tag_listingline">4:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optimize <math alttext="\mathcal{L}_{\mathrm{code}}(\theta_{1})=-\sum_{t}\log\pi_{\theta_{1}}(c_{(t)}|%
x,c_{(<t)})" class="ltx_Math" display="inline" id="algx1.l4.m1.5"><semantics id="algx1.l4.m1.5a"><mrow id="algx1.l4.m1.5.5" xref="algx1.l4.m1.5.5.cmml"><mrow id="algx1.l4.m1.4.4.1" xref="algx1.l4.m1.4.4.1.cmml"><msub id="algx1.l4.m1.4.4.1.3" xref="algx1.l4.m1.4.4.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l4.m1.4.4.1.3.2" xref="algx1.l4.m1.4.4.1.3.2.cmml">ℒ</mi><mi id="algx1.l4.m1.4.4.1.3.3" xref="algx1.l4.m1.4.4.1.3.3.cmml">code</mi></msub><mo id="algx1.l4.m1.4.4.1.2" xref="algx1.l4.m1.4.4.1.2.cmml">⁢</mo><mrow id="algx1.l4.m1.4.4.1.1.1" xref="algx1.l4.m1.4.4.1.1.1.1.cmml"><mo id="algx1.l4.m1.4.4.1.1.1.2" stretchy="false" xref="algx1.l4.m1.4.4.1.1.1.1.cmml">(</mo><msub id="algx1.l4.m1.4.4.1.1.1.1" xref="algx1.l4.m1.4.4.1.1.1.1.cmml"><mi id="algx1.l4.m1.4.4.1.1.1.1.2" xref="algx1.l4.m1.4.4.1.1.1.1.2.cmml">θ</mi><mn id="algx1.l4.m1.4.4.1.1.1.1.3" xref="algx1.l4.m1.4.4.1.1.1.1.3.cmml">1</mn></msub><mo id="algx1.l4.m1.4.4.1.1.1.3" stretchy="false" xref="algx1.l4.m1.4.4.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="algx1.l4.m1.5.5.3" xref="algx1.l4.m1.5.5.3.cmml">=</mo><mrow id="algx1.l4.m1.5.5.2" xref="algx1.l4.m1.5.5.2.cmml"><mo id="algx1.l4.m1.5.5.2a" xref="algx1.l4.m1.5.5.2.cmml">−</mo><mrow id="algx1.l4.m1.5.5.2.1" xref="algx1.l4.m1.5.5.2.1.cmml"><msub id="algx1.l4.m1.5.5.2.1.2" xref="algx1.l4.m1.5.5.2.1.2.cmml"><mo id="algx1.l4.m1.5.5.2.1.2.2" xref="algx1.l4.m1.5.5.2.1.2.2.cmml">∑</mo><mi id="algx1.l4.m1.5.5.2.1.2.3" xref="algx1.l4.m1.5.5.2.1.2.3.cmml">t</mi></msub><mrow id="algx1.l4.m1.5.5.2.1.1" xref="algx1.l4.m1.5.5.2.1.1.cmml"><mrow id="algx1.l4.m1.5.5.2.1.1.3" xref="algx1.l4.m1.5.5.2.1.1.3.cmml"><mi id="algx1.l4.m1.5.5.2.1.1.3.1" xref="algx1.l4.m1.5.5.2.1.1.3.1.cmml">log</mi><mo id="algx1.l4.m1.5.5.2.1.1.3a" lspace="0.167em" xref="algx1.l4.m1.5.5.2.1.1.3.cmml">⁡</mo><msub id="algx1.l4.m1.5.5.2.1.1.3.2" xref="algx1.l4.m1.5.5.2.1.1.3.2.cmml"><mi id="algx1.l4.m1.5.5.2.1.1.3.2.2" xref="algx1.l4.m1.5.5.2.1.1.3.2.2.cmml">π</mi><msub id="algx1.l4.m1.5.5.2.1.1.3.2.3" xref="algx1.l4.m1.5.5.2.1.1.3.2.3.cmml"><mi id="algx1.l4.m1.5.5.2.1.1.3.2.3.2" xref="algx1.l4.m1.5.5.2.1.1.3.2.3.2.cmml">θ</mi><mn id="algx1.l4.m1.5.5.2.1.1.3.2.3.3" xref="algx1.l4.m1.5.5.2.1.1.3.2.3.3.cmml">1</mn></msub></msub></mrow><mo id="algx1.l4.m1.5.5.2.1.1.2" xref="algx1.l4.m1.5.5.2.1.1.2.cmml">⁢</mo><mrow id="algx1.l4.m1.5.5.2.1.1.1.1" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.cmml"><mo id="algx1.l4.m1.5.5.2.1.1.1.1.2" stretchy="false" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.cmml">(</mo><mrow id="algx1.l4.m1.5.5.2.1.1.1.1.1" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.cmml"><msub id="algx1.l4.m1.5.5.2.1.1.1.1.1.3" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.3.cmml"><mi id="algx1.l4.m1.5.5.2.1.1.1.1.1.3.2" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.3.2.cmml">c</mi><mrow id="algx1.l4.m1.1.1.1.3" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.3.cmml"><mo id="algx1.l4.m1.1.1.1.3.1" stretchy="false" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.3.cmml">(</mo><mi id="algx1.l4.m1.1.1.1.1" xref="algx1.l4.m1.1.1.1.1.cmml">t</mi><mo id="algx1.l4.m1.1.1.1.3.2" stretchy="false" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.3.cmml">)</mo></mrow></msub><mo fence="false" id="algx1.l4.m1.5.5.2.1.1.1.1.1.2" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.2.cmml">|</mo><mrow id="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.1.2.cmml"><mi id="algx1.l4.m1.3.3" xref="algx1.l4.m1.3.3.cmml">x</mi><mo id="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.2" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.1.2.cmml">,</mo><msub id="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1.cmml"><mi id="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1.2" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1.2.cmml">c</mi><mrow id="algx1.l4.m1.2.2.1.1" xref="algx1.l4.m1.2.2.1.1.1.cmml"><mo id="algx1.l4.m1.2.2.1.1.2" stretchy="false" xref="algx1.l4.m1.2.2.1.1.1.cmml">(</mo><mrow id="algx1.l4.m1.2.2.1.1.1" xref="algx1.l4.m1.2.2.1.1.1.cmml"><mi id="algx1.l4.m1.2.2.1.1.1.2" xref="algx1.l4.m1.2.2.1.1.1.2.cmml"></mi><mo id="algx1.l4.m1.2.2.1.1.1.1" xref="algx1.l4.m1.2.2.1.1.1.1.cmml">&lt;</mo><mi id="algx1.l4.m1.2.2.1.1.1.3" xref="algx1.l4.m1.2.2.1.1.1.3.cmml">t</mi></mrow><mo id="algx1.l4.m1.2.2.1.1.3" stretchy="false" xref="algx1.l4.m1.2.2.1.1.1.cmml">)</mo></mrow></msub></mrow></mrow><mo id="algx1.l4.m1.5.5.2.1.1.1.1.3" stretchy="false" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l4.m1.5b"><apply id="algx1.l4.m1.5.5.cmml" xref="algx1.l4.m1.5.5"><eq id="algx1.l4.m1.5.5.3.cmml" xref="algx1.l4.m1.5.5.3"></eq><apply id="algx1.l4.m1.4.4.1.cmml" xref="algx1.l4.m1.4.4.1"><times id="algx1.l4.m1.4.4.1.2.cmml" xref="algx1.l4.m1.4.4.1.2"></times><apply id="algx1.l4.m1.4.4.1.3.cmml" xref="algx1.l4.m1.4.4.1.3"><csymbol cd="ambiguous" id="algx1.l4.m1.4.4.1.3.1.cmml" xref="algx1.l4.m1.4.4.1.3">subscript</csymbol><ci id="algx1.l4.m1.4.4.1.3.2.cmml" xref="algx1.l4.m1.4.4.1.3.2">ℒ</ci><ci id="algx1.l4.m1.4.4.1.3.3.cmml" xref="algx1.l4.m1.4.4.1.3.3">code</ci></apply><apply id="algx1.l4.m1.4.4.1.1.1.1.cmml" xref="algx1.l4.m1.4.4.1.1.1"><csymbol cd="ambiguous" id="algx1.l4.m1.4.4.1.1.1.1.1.cmml" xref="algx1.l4.m1.4.4.1.1.1">subscript</csymbol><ci id="algx1.l4.m1.4.4.1.1.1.1.2.cmml" xref="algx1.l4.m1.4.4.1.1.1.1.2">𝜃</ci><cn id="algx1.l4.m1.4.4.1.1.1.1.3.cmml" type="integer" xref="algx1.l4.m1.4.4.1.1.1.1.3">1</cn></apply></apply><apply id="algx1.l4.m1.5.5.2.cmml" xref="algx1.l4.m1.5.5.2"><minus id="algx1.l4.m1.5.5.2.2.cmml" xref="algx1.l4.m1.5.5.2"></minus><apply id="algx1.l4.m1.5.5.2.1.cmml" xref="algx1.l4.m1.5.5.2.1"><apply id="algx1.l4.m1.5.5.2.1.2.cmml" xref="algx1.l4.m1.5.5.2.1.2"><csymbol cd="ambiguous" id="algx1.l4.m1.5.5.2.1.2.1.cmml" xref="algx1.l4.m1.5.5.2.1.2">subscript</csymbol><sum id="algx1.l4.m1.5.5.2.1.2.2.cmml" xref="algx1.l4.m1.5.5.2.1.2.2"></sum><ci id="algx1.l4.m1.5.5.2.1.2.3.cmml" xref="algx1.l4.m1.5.5.2.1.2.3">𝑡</ci></apply><apply id="algx1.l4.m1.5.5.2.1.1.cmml" xref="algx1.l4.m1.5.5.2.1.1"><times id="algx1.l4.m1.5.5.2.1.1.2.cmml" xref="algx1.l4.m1.5.5.2.1.1.2"></times><apply id="algx1.l4.m1.5.5.2.1.1.3.cmml" xref="algx1.l4.m1.5.5.2.1.1.3"><log id="algx1.l4.m1.5.5.2.1.1.3.1.cmml" xref="algx1.l4.m1.5.5.2.1.1.3.1"></log><apply id="algx1.l4.m1.5.5.2.1.1.3.2.cmml" xref="algx1.l4.m1.5.5.2.1.1.3.2"><csymbol cd="ambiguous" id="algx1.l4.m1.5.5.2.1.1.3.2.1.cmml" xref="algx1.l4.m1.5.5.2.1.1.3.2">subscript</csymbol><ci id="algx1.l4.m1.5.5.2.1.1.3.2.2.cmml" xref="algx1.l4.m1.5.5.2.1.1.3.2.2">𝜋</ci><apply id="algx1.l4.m1.5.5.2.1.1.3.2.3.cmml" xref="algx1.l4.m1.5.5.2.1.1.3.2.3"><csymbol cd="ambiguous" id="algx1.l4.m1.5.5.2.1.1.3.2.3.1.cmml" xref="algx1.l4.m1.5.5.2.1.1.3.2.3">subscript</csymbol><ci id="algx1.l4.m1.5.5.2.1.1.3.2.3.2.cmml" xref="algx1.l4.m1.5.5.2.1.1.3.2.3.2">𝜃</ci><cn id="algx1.l4.m1.5.5.2.1.1.3.2.3.3.cmml" type="integer" xref="algx1.l4.m1.5.5.2.1.1.3.2.3.3">1</cn></apply></apply></apply><apply id="algx1.l4.m1.5.5.2.1.1.1.1.1.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1"><csymbol cd="latexml" id="algx1.l4.m1.5.5.2.1.1.1.1.1.2.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.2">conditional</csymbol><apply id="algx1.l4.m1.5.5.2.1.1.1.1.1.3.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="algx1.l4.m1.5.5.2.1.1.1.1.1.3.1.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.3">subscript</csymbol><ci id="algx1.l4.m1.5.5.2.1.1.1.1.1.3.2.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.3.2">𝑐</ci><ci id="algx1.l4.m1.1.1.1.1.cmml" xref="algx1.l4.m1.1.1.1.1">𝑡</ci></apply><list id="algx1.l4.m1.5.5.2.1.1.1.1.1.1.2.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1"><ci id="algx1.l4.m1.3.3.cmml" xref="algx1.l4.m1.3.3">𝑥</ci><apply id="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1.1.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1.2.cmml" xref="algx1.l4.m1.5.5.2.1.1.1.1.1.1.1.1.2">𝑐</ci><apply id="algx1.l4.m1.2.2.1.1.1.cmml" xref="algx1.l4.m1.2.2.1.1"><lt id="algx1.l4.m1.2.2.1.1.1.1.cmml" xref="algx1.l4.m1.2.2.1.1.1.1"></lt><csymbol cd="latexml" id="algx1.l4.m1.2.2.1.1.1.2.cmml" xref="algx1.l4.m1.2.2.1.1.1.2">absent</csymbol><ci id="algx1.l4.m1.2.2.1.1.1.3.cmml" xref="algx1.l4.m1.2.2.1.1.1.3">𝑡</ci></apply></apply></list></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l4.m1.5c">\mathcal{L}_{\mathrm{code}}(\theta_{1})=-\sum_{t}\log\pi_{\theta_{1}}(c_{(t)}|%
x,c_{(&lt;t)})</annotation><annotation encoding="application/x-llamapun" id="algx1.l4.m1.5d">caligraphic_L start_POSTSUBSCRIPT roman_code end_POSTSUBSCRIPT ( italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT ) = - ∑ start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT roman_log italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( italic_c start_POSTSUBSCRIPT ( italic_t ) end_POSTSUBSCRIPT | italic_x , italic_c start_POSTSUBSCRIPT ( &lt; italic_t ) end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l5">
<span class="ltx_tag ltx_tag_listingline">5:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optimize <math alttext="\mathcal{L}_{\mathrm{reason}}(\theta_{2})+\mathcal{L}_{\mathrm{desc}}(\theta_{%
2})=-\sum_{t}\log\pi_{\theta_{2}}(r_{(t)}|d,r_{(<t)})-\sum_{t}\log\pi_{\theta_%
{2}}(x_{(t)}|d,r,x_{(<t)})" class="ltx_Math" display="inline" id="algx1.l5.m1.11"><semantics id="algx1.l5.m1.11a"><mrow id="algx1.l5.m1.11.11" xref="algx1.l5.m1.11.11.cmml"><mrow id="algx1.l5.m1.9.9.2" xref="algx1.l5.m1.9.9.2.cmml"><mrow id="algx1.l5.m1.8.8.1.1" xref="algx1.l5.m1.8.8.1.1.cmml"><msub id="algx1.l5.m1.8.8.1.1.3" xref="algx1.l5.m1.8.8.1.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l5.m1.8.8.1.1.3.2" xref="algx1.l5.m1.8.8.1.1.3.2.cmml">ℒ</mi><mi id="algx1.l5.m1.8.8.1.1.3.3" xref="algx1.l5.m1.8.8.1.1.3.3.cmml">reason</mi></msub><mo id="algx1.l5.m1.8.8.1.1.2" xref="algx1.l5.m1.8.8.1.1.2.cmml">⁢</mo><mrow id="algx1.l5.m1.8.8.1.1.1.1" xref="algx1.l5.m1.8.8.1.1.1.1.1.cmml"><mo id="algx1.l5.m1.8.8.1.1.1.1.2" stretchy="false" xref="algx1.l5.m1.8.8.1.1.1.1.1.cmml">(</mo><msub id="algx1.l5.m1.8.8.1.1.1.1.1" xref="algx1.l5.m1.8.8.1.1.1.1.1.cmml"><mi id="algx1.l5.m1.8.8.1.1.1.1.1.2" xref="algx1.l5.m1.8.8.1.1.1.1.1.2.cmml">θ</mi><mn id="algx1.l5.m1.8.8.1.1.1.1.1.3" xref="algx1.l5.m1.8.8.1.1.1.1.1.3.cmml">2</mn></msub><mo id="algx1.l5.m1.8.8.1.1.1.1.3" stretchy="false" xref="algx1.l5.m1.8.8.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="algx1.l5.m1.9.9.2.3" xref="algx1.l5.m1.9.9.2.3.cmml">+</mo><mrow id="algx1.l5.m1.9.9.2.2" xref="algx1.l5.m1.9.9.2.2.cmml"><msub id="algx1.l5.m1.9.9.2.2.3" xref="algx1.l5.m1.9.9.2.2.3.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l5.m1.9.9.2.2.3.2" xref="algx1.l5.m1.9.9.2.2.3.2.cmml">ℒ</mi><mi id="algx1.l5.m1.9.9.2.2.3.3" xref="algx1.l5.m1.9.9.2.2.3.3.cmml">desc</mi></msub><mo id="algx1.l5.m1.9.9.2.2.2" xref="algx1.l5.m1.9.9.2.2.2.cmml">⁢</mo><mrow id="algx1.l5.m1.9.9.2.2.1.1" xref="algx1.l5.m1.9.9.2.2.1.1.1.cmml"><mo id="algx1.l5.m1.9.9.2.2.1.1.2" stretchy="false" xref="algx1.l5.m1.9.9.2.2.1.1.1.cmml">(</mo><msub id="algx1.l5.m1.9.9.2.2.1.1.1" xref="algx1.l5.m1.9.9.2.2.1.1.1.cmml"><mi id="algx1.l5.m1.9.9.2.2.1.1.1.2" xref="algx1.l5.m1.9.9.2.2.1.1.1.2.cmml">θ</mi><mn id="algx1.l5.m1.9.9.2.2.1.1.1.3" xref="algx1.l5.m1.9.9.2.2.1.1.1.3.cmml">2</mn></msub><mo id="algx1.l5.m1.9.9.2.2.1.1.3" stretchy="false" xref="algx1.l5.m1.9.9.2.2.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="algx1.l5.m1.11.11.5" xref="algx1.l5.m1.11.11.5.cmml">=</mo><mrow id="algx1.l5.m1.11.11.4" xref="algx1.l5.m1.11.11.4.cmml"><mrow id="algx1.l5.m1.10.10.3.1" xref="algx1.l5.m1.10.10.3.1.cmml"><mo id="algx1.l5.m1.10.10.3.1a" xref="algx1.l5.m1.10.10.3.1.cmml">−</mo><mrow id="algx1.l5.m1.10.10.3.1.1" xref="algx1.l5.m1.10.10.3.1.1.cmml"><msub id="algx1.l5.m1.10.10.3.1.1.2" xref="algx1.l5.m1.10.10.3.1.1.2.cmml"><mo id="algx1.l5.m1.10.10.3.1.1.2.2" xref="algx1.l5.m1.10.10.3.1.1.2.2.cmml">∑</mo><mi id="algx1.l5.m1.10.10.3.1.1.2.3" xref="algx1.l5.m1.10.10.3.1.1.2.3.cmml">t</mi></msub><mrow id="algx1.l5.m1.10.10.3.1.1.1" xref="algx1.l5.m1.10.10.3.1.1.1.cmml"><mrow id="algx1.l5.m1.10.10.3.1.1.1.3" xref="algx1.l5.m1.10.10.3.1.1.1.3.cmml"><mi id="algx1.l5.m1.10.10.3.1.1.1.3.1" xref="algx1.l5.m1.10.10.3.1.1.1.3.1.cmml">log</mi><mo id="algx1.l5.m1.10.10.3.1.1.1.3a" lspace="0.167em" xref="algx1.l5.m1.10.10.3.1.1.1.3.cmml">⁡</mo><msub id="algx1.l5.m1.10.10.3.1.1.1.3.2" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.cmml"><mi id="algx1.l5.m1.10.10.3.1.1.1.3.2.2" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.2.cmml">π</mi><msub id="algx1.l5.m1.10.10.3.1.1.1.3.2.3" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.3.cmml"><mi id="algx1.l5.m1.10.10.3.1.1.1.3.2.3.2" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.3.2.cmml">θ</mi><mn id="algx1.l5.m1.10.10.3.1.1.1.3.2.3.3" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.3.3.cmml">2</mn></msub></msub></mrow><mo id="algx1.l5.m1.10.10.3.1.1.1.2" xref="algx1.l5.m1.10.10.3.1.1.1.2.cmml">⁢</mo><mrow id="algx1.l5.m1.10.10.3.1.1.1.1.1" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.cmml"><mo id="algx1.l5.m1.10.10.3.1.1.1.1.1.2" stretchy="false" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.cmml">(</mo><mrow id="algx1.l5.m1.10.10.3.1.1.1.1.1.1" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.cmml"><msub id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.cmml"><mi id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.2" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.2.cmml">r</mi><mrow id="algx1.l5.m1.1.1.1.3" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.cmml"><mo id="algx1.l5.m1.1.1.1.3.1" stretchy="false" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.cmml">(</mo><mi id="algx1.l5.m1.1.1.1.1" xref="algx1.l5.m1.1.1.1.1.cmml">t</mi><mo id="algx1.l5.m1.1.1.1.3.2" stretchy="false" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.cmml">)</mo></mrow></msub><mo fence="false" id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.2" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.2.cmml">|</mo><mrow id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.2.cmml"><mi id="algx1.l5.m1.5.5" xref="algx1.l5.m1.5.5.cmml">d</mi><mo id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.2" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.2.cmml">,</mo><msub id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1.cmml"><mi id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1.2" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1.2.cmml">r</mi><mrow id="algx1.l5.m1.2.2.1.1" xref="algx1.l5.m1.2.2.1.1.1.cmml"><mo id="algx1.l5.m1.2.2.1.1.2" stretchy="false" xref="algx1.l5.m1.2.2.1.1.1.cmml">(</mo><mrow id="algx1.l5.m1.2.2.1.1.1" xref="algx1.l5.m1.2.2.1.1.1.cmml"><mi id="algx1.l5.m1.2.2.1.1.1.2" xref="algx1.l5.m1.2.2.1.1.1.2.cmml"></mi><mo id="algx1.l5.m1.2.2.1.1.1.1" xref="algx1.l5.m1.2.2.1.1.1.1.cmml">&lt;</mo><mi id="algx1.l5.m1.2.2.1.1.1.3" xref="algx1.l5.m1.2.2.1.1.1.3.cmml">t</mi></mrow><mo id="algx1.l5.m1.2.2.1.1.3" stretchy="false" xref="algx1.l5.m1.2.2.1.1.1.cmml">)</mo></mrow></msub></mrow></mrow><mo id="algx1.l5.m1.10.10.3.1.1.1.1.1.3" stretchy="false" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="algx1.l5.m1.11.11.4.3" rspace="0.055em" xref="algx1.l5.m1.11.11.4.3.cmml">−</mo><mrow id="algx1.l5.m1.11.11.4.2" xref="algx1.l5.m1.11.11.4.2.cmml"><msub id="algx1.l5.m1.11.11.4.2.2" xref="algx1.l5.m1.11.11.4.2.2.cmml"><mo id="algx1.l5.m1.11.11.4.2.2.2" xref="algx1.l5.m1.11.11.4.2.2.2.cmml">∑</mo><mi id="algx1.l5.m1.11.11.4.2.2.3" xref="algx1.l5.m1.11.11.4.2.2.3.cmml">t</mi></msub><mrow id="algx1.l5.m1.11.11.4.2.1" xref="algx1.l5.m1.11.11.4.2.1.cmml"><mrow id="algx1.l5.m1.11.11.4.2.1.3" xref="algx1.l5.m1.11.11.4.2.1.3.cmml"><mi id="algx1.l5.m1.11.11.4.2.1.3.1" xref="algx1.l5.m1.11.11.4.2.1.3.1.cmml">log</mi><mo id="algx1.l5.m1.11.11.4.2.1.3a" lspace="0.167em" xref="algx1.l5.m1.11.11.4.2.1.3.cmml">⁡</mo><msub id="algx1.l5.m1.11.11.4.2.1.3.2" xref="algx1.l5.m1.11.11.4.2.1.3.2.cmml"><mi id="algx1.l5.m1.11.11.4.2.1.3.2.2" xref="algx1.l5.m1.11.11.4.2.1.3.2.2.cmml">π</mi><msub id="algx1.l5.m1.11.11.4.2.1.3.2.3" xref="algx1.l5.m1.11.11.4.2.1.3.2.3.cmml"><mi id="algx1.l5.m1.11.11.4.2.1.3.2.3.2" xref="algx1.l5.m1.11.11.4.2.1.3.2.3.2.cmml">θ</mi><mn id="algx1.l5.m1.11.11.4.2.1.3.2.3.3" xref="algx1.l5.m1.11.11.4.2.1.3.2.3.3.cmml">2</mn></msub></msub></mrow><mo id="algx1.l5.m1.11.11.4.2.1.2" xref="algx1.l5.m1.11.11.4.2.1.2.cmml">⁢</mo><mrow id="algx1.l5.m1.11.11.4.2.1.1.1" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.cmml"><mo id="algx1.l5.m1.11.11.4.2.1.1.1.2" stretchy="false" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.cmml">(</mo><mrow id="algx1.l5.m1.11.11.4.2.1.1.1.1" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.cmml"><msub id="algx1.l5.m1.11.11.4.2.1.1.1.1.3" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.3.cmml"><mi id="algx1.l5.m1.11.11.4.2.1.1.1.1.3.2" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.3.2.cmml">x</mi><mrow id="algx1.l5.m1.3.3.1.3" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.3.cmml"><mo id="algx1.l5.m1.3.3.1.3.1" stretchy="false" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.3.cmml">(</mo><mi id="algx1.l5.m1.3.3.1.1" xref="algx1.l5.m1.3.3.1.1.cmml">t</mi><mo id="algx1.l5.m1.3.3.1.3.2" stretchy="false" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.3.cmml">)</mo></mrow></msub><mo fence="false" id="algx1.l5.m1.11.11.4.2.1.1.1.1.2" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.2.cmml">|</mo><mrow id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.2.cmml"><mi id="algx1.l5.m1.6.6" xref="algx1.l5.m1.6.6.cmml">d</mi><mo id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.2" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.2.cmml">,</mo><mi id="algx1.l5.m1.7.7" xref="algx1.l5.m1.7.7.cmml">r</mi><mo id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.3" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.2.cmml">,</mo><msub id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1.cmml"><mi id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1.2" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1.2.cmml">x</mi><mrow id="algx1.l5.m1.4.4.1.1" xref="algx1.l5.m1.4.4.1.1.1.cmml"><mo id="algx1.l5.m1.4.4.1.1.2" stretchy="false" xref="algx1.l5.m1.4.4.1.1.1.cmml">(</mo><mrow id="algx1.l5.m1.4.4.1.1.1" xref="algx1.l5.m1.4.4.1.1.1.cmml"><mi id="algx1.l5.m1.4.4.1.1.1.2" xref="algx1.l5.m1.4.4.1.1.1.2.cmml"></mi><mo id="algx1.l5.m1.4.4.1.1.1.1" xref="algx1.l5.m1.4.4.1.1.1.1.cmml">&lt;</mo><mi id="algx1.l5.m1.4.4.1.1.1.3" xref="algx1.l5.m1.4.4.1.1.1.3.cmml">t</mi></mrow><mo id="algx1.l5.m1.4.4.1.1.3" stretchy="false" xref="algx1.l5.m1.4.4.1.1.1.cmml">)</mo></mrow></msub></mrow></mrow><mo id="algx1.l5.m1.11.11.4.2.1.1.1.3" stretchy="false" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l5.m1.11b"><apply id="algx1.l5.m1.11.11.cmml" xref="algx1.l5.m1.11.11"><eq id="algx1.l5.m1.11.11.5.cmml" xref="algx1.l5.m1.11.11.5"></eq><apply id="algx1.l5.m1.9.9.2.cmml" xref="algx1.l5.m1.9.9.2"><plus id="algx1.l5.m1.9.9.2.3.cmml" xref="algx1.l5.m1.9.9.2.3"></plus><apply id="algx1.l5.m1.8.8.1.1.cmml" xref="algx1.l5.m1.8.8.1.1"><times id="algx1.l5.m1.8.8.1.1.2.cmml" xref="algx1.l5.m1.8.8.1.1.2"></times><apply id="algx1.l5.m1.8.8.1.1.3.cmml" xref="algx1.l5.m1.8.8.1.1.3"><csymbol cd="ambiguous" id="algx1.l5.m1.8.8.1.1.3.1.cmml" xref="algx1.l5.m1.8.8.1.1.3">subscript</csymbol><ci id="algx1.l5.m1.8.8.1.1.3.2.cmml" xref="algx1.l5.m1.8.8.1.1.3.2">ℒ</ci><ci id="algx1.l5.m1.8.8.1.1.3.3.cmml" xref="algx1.l5.m1.8.8.1.1.3.3">reason</ci></apply><apply id="algx1.l5.m1.8.8.1.1.1.1.1.cmml" xref="algx1.l5.m1.8.8.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l5.m1.8.8.1.1.1.1.1.1.cmml" xref="algx1.l5.m1.8.8.1.1.1.1">subscript</csymbol><ci id="algx1.l5.m1.8.8.1.1.1.1.1.2.cmml" xref="algx1.l5.m1.8.8.1.1.1.1.1.2">𝜃</ci><cn id="algx1.l5.m1.8.8.1.1.1.1.1.3.cmml" type="integer" xref="algx1.l5.m1.8.8.1.1.1.1.1.3">2</cn></apply></apply><apply id="algx1.l5.m1.9.9.2.2.cmml" xref="algx1.l5.m1.9.9.2.2"><times id="algx1.l5.m1.9.9.2.2.2.cmml" xref="algx1.l5.m1.9.9.2.2.2"></times><apply id="algx1.l5.m1.9.9.2.2.3.cmml" xref="algx1.l5.m1.9.9.2.2.3"><csymbol cd="ambiguous" id="algx1.l5.m1.9.9.2.2.3.1.cmml" xref="algx1.l5.m1.9.9.2.2.3">subscript</csymbol><ci id="algx1.l5.m1.9.9.2.2.3.2.cmml" xref="algx1.l5.m1.9.9.2.2.3.2">ℒ</ci><ci id="algx1.l5.m1.9.9.2.2.3.3.cmml" xref="algx1.l5.m1.9.9.2.2.3.3">desc</ci></apply><apply id="algx1.l5.m1.9.9.2.2.1.1.1.cmml" xref="algx1.l5.m1.9.9.2.2.1.1"><csymbol cd="ambiguous" id="algx1.l5.m1.9.9.2.2.1.1.1.1.cmml" xref="algx1.l5.m1.9.9.2.2.1.1">subscript</csymbol><ci id="algx1.l5.m1.9.9.2.2.1.1.1.2.cmml" xref="algx1.l5.m1.9.9.2.2.1.1.1.2">𝜃</ci><cn id="algx1.l5.m1.9.9.2.2.1.1.1.3.cmml" type="integer" xref="algx1.l5.m1.9.9.2.2.1.1.1.3">2</cn></apply></apply></apply><apply id="algx1.l5.m1.11.11.4.cmml" xref="algx1.l5.m1.11.11.4"><minus id="algx1.l5.m1.11.11.4.3.cmml" xref="algx1.l5.m1.11.11.4.3"></minus><apply id="algx1.l5.m1.10.10.3.1.cmml" xref="algx1.l5.m1.10.10.3.1"><minus id="algx1.l5.m1.10.10.3.1.2.cmml" xref="algx1.l5.m1.10.10.3.1"></minus><apply id="algx1.l5.m1.10.10.3.1.1.cmml" xref="algx1.l5.m1.10.10.3.1.1"><apply id="algx1.l5.m1.10.10.3.1.1.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.2"><csymbol cd="ambiguous" id="algx1.l5.m1.10.10.3.1.1.2.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.2">subscript</csymbol><sum id="algx1.l5.m1.10.10.3.1.1.2.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.2.2"></sum><ci id="algx1.l5.m1.10.10.3.1.1.2.3.cmml" xref="algx1.l5.m1.10.10.3.1.1.2.3">𝑡</ci></apply><apply id="algx1.l5.m1.10.10.3.1.1.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.1"><times id="algx1.l5.m1.10.10.3.1.1.1.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.2"></times><apply id="algx1.l5.m1.10.10.3.1.1.1.3.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.3"><log id="algx1.l5.m1.10.10.3.1.1.1.3.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.3.1"></log><apply id="algx1.l5.m1.10.10.3.1.1.1.3.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.3.2"><csymbol cd="ambiguous" id="algx1.l5.m1.10.10.3.1.1.1.3.2.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.3.2">subscript</csymbol><ci id="algx1.l5.m1.10.10.3.1.1.1.3.2.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.2">𝜋</ci><apply id="algx1.l5.m1.10.10.3.1.1.1.3.2.3.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.3"><csymbol cd="ambiguous" id="algx1.l5.m1.10.10.3.1.1.1.3.2.3.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.3">subscript</csymbol><ci id="algx1.l5.m1.10.10.3.1.1.1.3.2.3.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.3.2">𝜃</ci><cn id="algx1.l5.m1.10.10.3.1.1.1.3.2.3.3.cmml" type="integer" xref="algx1.l5.m1.10.10.3.1.1.1.3.2.3.3">2</cn></apply></apply></apply><apply id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1"><csymbol cd="latexml" id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.2">conditional</csymbol><apply id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3">subscript</csymbol><ci id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.3.2">𝑟</ci><ci id="algx1.l5.m1.1.1.1.1.cmml" xref="algx1.l5.m1.1.1.1.1">𝑡</ci></apply><list id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1"><ci id="algx1.l5.m1.5.5.cmml" xref="algx1.l5.m1.5.5">𝑑</ci><apply id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1.1.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1.2.cmml" xref="algx1.l5.m1.10.10.3.1.1.1.1.1.1.1.1.1.2">𝑟</ci><apply id="algx1.l5.m1.2.2.1.1.1.cmml" xref="algx1.l5.m1.2.2.1.1"><lt id="algx1.l5.m1.2.2.1.1.1.1.cmml" xref="algx1.l5.m1.2.2.1.1.1.1"></lt><csymbol cd="latexml" id="algx1.l5.m1.2.2.1.1.1.2.cmml" xref="algx1.l5.m1.2.2.1.1.1.2">absent</csymbol><ci id="algx1.l5.m1.2.2.1.1.1.3.cmml" xref="algx1.l5.m1.2.2.1.1.1.3">𝑡</ci></apply></apply></list></apply></apply></apply></apply><apply id="algx1.l5.m1.11.11.4.2.cmml" xref="algx1.l5.m1.11.11.4.2"><apply id="algx1.l5.m1.11.11.4.2.2.cmml" xref="algx1.l5.m1.11.11.4.2.2"><csymbol cd="ambiguous" id="algx1.l5.m1.11.11.4.2.2.1.cmml" xref="algx1.l5.m1.11.11.4.2.2">subscript</csymbol><sum id="algx1.l5.m1.11.11.4.2.2.2.cmml" xref="algx1.l5.m1.11.11.4.2.2.2"></sum><ci id="algx1.l5.m1.11.11.4.2.2.3.cmml" xref="algx1.l5.m1.11.11.4.2.2.3">𝑡</ci></apply><apply id="algx1.l5.m1.11.11.4.2.1.cmml" xref="algx1.l5.m1.11.11.4.2.1"><times id="algx1.l5.m1.11.11.4.2.1.2.cmml" xref="algx1.l5.m1.11.11.4.2.1.2"></times><apply id="algx1.l5.m1.11.11.4.2.1.3.cmml" xref="algx1.l5.m1.11.11.4.2.1.3"><log id="algx1.l5.m1.11.11.4.2.1.3.1.cmml" xref="algx1.l5.m1.11.11.4.2.1.3.1"></log><apply id="algx1.l5.m1.11.11.4.2.1.3.2.cmml" xref="algx1.l5.m1.11.11.4.2.1.3.2"><csymbol cd="ambiguous" id="algx1.l5.m1.11.11.4.2.1.3.2.1.cmml" xref="algx1.l5.m1.11.11.4.2.1.3.2">subscript</csymbol><ci id="algx1.l5.m1.11.11.4.2.1.3.2.2.cmml" xref="algx1.l5.m1.11.11.4.2.1.3.2.2">𝜋</ci><apply id="algx1.l5.m1.11.11.4.2.1.3.2.3.cmml" xref="algx1.l5.m1.11.11.4.2.1.3.2.3"><csymbol cd="ambiguous" id="algx1.l5.m1.11.11.4.2.1.3.2.3.1.cmml" xref="algx1.l5.m1.11.11.4.2.1.3.2.3">subscript</csymbol><ci id="algx1.l5.m1.11.11.4.2.1.3.2.3.2.cmml" xref="algx1.l5.m1.11.11.4.2.1.3.2.3.2">𝜃</ci><cn id="algx1.l5.m1.11.11.4.2.1.3.2.3.3.cmml" type="integer" xref="algx1.l5.m1.11.11.4.2.1.3.2.3.3">2</cn></apply></apply></apply><apply id="algx1.l5.m1.11.11.4.2.1.1.1.1.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1"><csymbol cd="latexml" id="algx1.l5.m1.11.11.4.2.1.1.1.1.2.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.2">conditional</csymbol><apply id="algx1.l5.m1.11.11.4.2.1.1.1.1.3.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.3"><csymbol cd="ambiguous" id="algx1.l5.m1.11.11.4.2.1.1.1.1.3.1.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.3">subscript</csymbol><ci id="algx1.l5.m1.11.11.4.2.1.1.1.1.3.2.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.3.2">𝑥</ci><ci id="algx1.l5.m1.3.3.1.1.cmml" xref="algx1.l5.m1.3.3.1.1">𝑡</ci></apply><list id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.2.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1"><ci id="algx1.l5.m1.6.6.cmml" xref="algx1.l5.m1.6.6">𝑑</ci><ci id="algx1.l5.m1.7.7.cmml" xref="algx1.l5.m1.7.7">𝑟</ci><apply id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1.1.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1">subscript</csymbol><ci id="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1.2.cmml" xref="algx1.l5.m1.11.11.4.2.1.1.1.1.1.1.1.2">𝑥</ci><apply id="algx1.l5.m1.4.4.1.1.1.cmml" xref="algx1.l5.m1.4.4.1.1"><lt id="algx1.l5.m1.4.4.1.1.1.1.cmml" xref="algx1.l5.m1.4.4.1.1.1.1"></lt><csymbol cd="latexml" id="algx1.l5.m1.4.4.1.1.1.2.cmml" xref="algx1.l5.m1.4.4.1.1.1.2">absent</csymbol><ci id="algx1.l5.m1.4.4.1.1.1.3.cmml" xref="algx1.l5.m1.4.4.1.1.1.3">𝑡</ci></apply></apply></list></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l5.m1.11c">\mathcal{L}_{\mathrm{reason}}(\theta_{2})+\mathcal{L}_{\mathrm{desc}}(\theta_{%
2})=-\sum_{t}\log\pi_{\theta_{2}}(r_{(t)}|d,r_{(&lt;t)})-\sum_{t}\log\pi_{\theta_%
{2}}(x_{(t)}|d,r,x_{(&lt;t)})</annotation><annotation encoding="application/x-llamapun" id="algx1.l5.m1.11d">caligraphic_L start_POSTSUBSCRIPT roman_reason end_POSTSUBSCRIPT ( italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT ) + caligraphic_L start_POSTSUBSCRIPT roman_desc end_POSTSUBSCRIPT ( italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT ) = - ∑ start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT roman_log italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( italic_r start_POSTSUBSCRIPT ( italic_t ) end_POSTSUBSCRIPT | italic_d , italic_r start_POSTSUBSCRIPT ( &lt; italic_t ) end_POSTSUBSCRIPT ) - ∑ start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT roman_log italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( italic_x start_POSTSUBSCRIPT ( italic_t ) end_POSTSUBSCRIPT | italic_d , italic_r , italic_x start_POSTSUBSCRIPT ( &lt; italic_t ) end_POSTSUBSCRIPT )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l6">
<span class="ltx_tag ltx_tag_listingline">6:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Optimize <math alttext="\mathcal{L}_{\mathrm{desc}}(\theta_{3})=-\sum_{t}\log\pi_{\theta_{3}}(x_{(t)}|%
x_{(<t)},c,d)" class="ltx_Math" display="inline" id="algx1.l6.m1.6"><semantics id="algx1.l6.m1.6a"><mrow id="algx1.l6.m1.6.6" xref="algx1.l6.m1.6.6.cmml"><mrow id="algx1.l6.m1.5.5.1" xref="algx1.l6.m1.5.5.1.cmml"><msub id="algx1.l6.m1.5.5.1.3" xref="algx1.l6.m1.5.5.1.3.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l6.m1.5.5.1.3.2" xref="algx1.l6.m1.5.5.1.3.2.cmml">ℒ</mi><mi id="algx1.l6.m1.5.5.1.3.3" xref="algx1.l6.m1.5.5.1.3.3.cmml">desc</mi></msub><mo id="algx1.l6.m1.5.5.1.2" xref="algx1.l6.m1.5.5.1.2.cmml">⁢</mo><mrow id="algx1.l6.m1.5.5.1.1.1" xref="algx1.l6.m1.5.5.1.1.1.1.cmml"><mo id="algx1.l6.m1.5.5.1.1.1.2" stretchy="false" xref="algx1.l6.m1.5.5.1.1.1.1.cmml">(</mo><msub id="algx1.l6.m1.5.5.1.1.1.1" xref="algx1.l6.m1.5.5.1.1.1.1.cmml"><mi id="algx1.l6.m1.5.5.1.1.1.1.2" xref="algx1.l6.m1.5.5.1.1.1.1.2.cmml">θ</mi><mn id="algx1.l6.m1.5.5.1.1.1.1.3" xref="algx1.l6.m1.5.5.1.1.1.1.3.cmml">3</mn></msub><mo id="algx1.l6.m1.5.5.1.1.1.3" stretchy="false" xref="algx1.l6.m1.5.5.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="algx1.l6.m1.6.6.3" xref="algx1.l6.m1.6.6.3.cmml">=</mo><mrow id="algx1.l6.m1.6.6.2" xref="algx1.l6.m1.6.6.2.cmml"><mo id="algx1.l6.m1.6.6.2a" xref="algx1.l6.m1.6.6.2.cmml">−</mo><mrow id="algx1.l6.m1.6.6.2.1" xref="algx1.l6.m1.6.6.2.1.cmml"><msub id="algx1.l6.m1.6.6.2.1.2" xref="algx1.l6.m1.6.6.2.1.2.cmml"><mo id="algx1.l6.m1.6.6.2.1.2.2" xref="algx1.l6.m1.6.6.2.1.2.2.cmml">∑</mo><mi id="algx1.l6.m1.6.6.2.1.2.3" xref="algx1.l6.m1.6.6.2.1.2.3.cmml">t</mi></msub><mrow id="algx1.l6.m1.6.6.2.1.1" xref="algx1.l6.m1.6.6.2.1.1.cmml"><mrow id="algx1.l6.m1.6.6.2.1.1.3" xref="algx1.l6.m1.6.6.2.1.1.3.cmml"><mi id="algx1.l6.m1.6.6.2.1.1.3.1" xref="algx1.l6.m1.6.6.2.1.1.3.1.cmml">log</mi><mo id="algx1.l6.m1.6.6.2.1.1.3a" lspace="0.167em" xref="algx1.l6.m1.6.6.2.1.1.3.cmml">⁡</mo><msub id="algx1.l6.m1.6.6.2.1.1.3.2" xref="algx1.l6.m1.6.6.2.1.1.3.2.cmml"><mi id="algx1.l6.m1.6.6.2.1.1.3.2.2" xref="algx1.l6.m1.6.6.2.1.1.3.2.2.cmml">π</mi><msub id="algx1.l6.m1.6.6.2.1.1.3.2.3" xref="algx1.l6.m1.6.6.2.1.1.3.2.3.cmml"><mi id="algx1.l6.m1.6.6.2.1.1.3.2.3.2" xref="algx1.l6.m1.6.6.2.1.1.3.2.3.2.cmml">θ</mi><mn id="algx1.l6.m1.6.6.2.1.1.3.2.3.3" xref="algx1.l6.m1.6.6.2.1.1.3.2.3.3.cmml">3</mn></msub></msub></mrow><mo id="algx1.l6.m1.6.6.2.1.1.2" xref="algx1.l6.m1.6.6.2.1.1.2.cmml">⁢</mo><mrow id="algx1.l6.m1.6.6.2.1.1.1.1" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.cmml"><mo id="algx1.l6.m1.6.6.2.1.1.1.1.2" stretchy="false" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.cmml">(</mo><mrow id="algx1.l6.m1.6.6.2.1.1.1.1.1" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.cmml"><msub id="algx1.l6.m1.6.6.2.1.1.1.1.1.3" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.3.cmml"><mi id="algx1.l6.m1.6.6.2.1.1.1.1.1.3.2" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.3.2.cmml">x</mi><mrow id="algx1.l6.m1.1.1.1.3" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.3.cmml"><mo id="algx1.l6.m1.1.1.1.3.1" stretchy="false" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.3.cmml">(</mo><mi id="algx1.l6.m1.1.1.1.1" xref="algx1.l6.m1.1.1.1.1.cmml">t</mi><mo id="algx1.l6.m1.1.1.1.3.2" stretchy="false" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.3.cmml">)</mo></mrow></msub><mo fence="false" id="algx1.l6.m1.6.6.2.1.1.1.1.1.2" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.2.cmml">|</mo><mrow id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.2.cmml"><msub id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1.cmml"><mi id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1.2" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1.2.cmml">x</mi><mrow id="algx1.l6.m1.2.2.1.1" xref="algx1.l6.m1.2.2.1.1.1.cmml"><mo id="algx1.l6.m1.2.2.1.1.2" stretchy="false" xref="algx1.l6.m1.2.2.1.1.1.cmml">(</mo><mrow id="algx1.l6.m1.2.2.1.1.1" xref="algx1.l6.m1.2.2.1.1.1.cmml"><mi id="algx1.l6.m1.2.2.1.1.1.2" xref="algx1.l6.m1.2.2.1.1.1.2.cmml"></mi><mo id="algx1.l6.m1.2.2.1.1.1.1" xref="algx1.l6.m1.2.2.1.1.1.1.cmml">&lt;</mo><mi id="algx1.l6.m1.2.2.1.1.1.3" xref="algx1.l6.m1.2.2.1.1.1.3.cmml">t</mi></mrow><mo id="algx1.l6.m1.2.2.1.1.3" stretchy="false" xref="algx1.l6.m1.2.2.1.1.1.cmml">)</mo></mrow></msub><mo id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.2" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.2.cmml">,</mo><mi id="algx1.l6.m1.3.3" xref="algx1.l6.m1.3.3.cmml">c</mi><mo id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.3" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.2.cmml">,</mo><mi id="algx1.l6.m1.4.4" xref="algx1.l6.m1.4.4.cmml">d</mi></mrow></mrow><mo id="algx1.l6.m1.6.6.2.1.1.1.1.3" stretchy="false" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l6.m1.6b"><apply id="algx1.l6.m1.6.6.cmml" xref="algx1.l6.m1.6.6"><eq id="algx1.l6.m1.6.6.3.cmml" xref="algx1.l6.m1.6.6.3"></eq><apply id="algx1.l6.m1.5.5.1.cmml" xref="algx1.l6.m1.5.5.1"><times id="algx1.l6.m1.5.5.1.2.cmml" xref="algx1.l6.m1.5.5.1.2"></times><apply id="algx1.l6.m1.5.5.1.3.cmml" xref="algx1.l6.m1.5.5.1.3"><csymbol cd="ambiguous" id="algx1.l6.m1.5.5.1.3.1.cmml" xref="algx1.l6.m1.5.5.1.3">subscript</csymbol><ci id="algx1.l6.m1.5.5.1.3.2.cmml" xref="algx1.l6.m1.5.5.1.3.2">ℒ</ci><ci id="algx1.l6.m1.5.5.1.3.3.cmml" xref="algx1.l6.m1.5.5.1.3.3">desc</ci></apply><apply id="algx1.l6.m1.5.5.1.1.1.1.cmml" xref="algx1.l6.m1.5.5.1.1.1"><csymbol cd="ambiguous" id="algx1.l6.m1.5.5.1.1.1.1.1.cmml" xref="algx1.l6.m1.5.5.1.1.1">subscript</csymbol><ci id="algx1.l6.m1.5.5.1.1.1.1.2.cmml" xref="algx1.l6.m1.5.5.1.1.1.1.2">𝜃</ci><cn id="algx1.l6.m1.5.5.1.1.1.1.3.cmml" type="integer" xref="algx1.l6.m1.5.5.1.1.1.1.3">3</cn></apply></apply><apply id="algx1.l6.m1.6.6.2.cmml" xref="algx1.l6.m1.6.6.2"><minus id="algx1.l6.m1.6.6.2.2.cmml" xref="algx1.l6.m1.6.6.2"></minus><apply id="algx1.l6.m1.6.6.2.1.cmml" xref="algx1.l6.m1.6.6.2.1"><apply id="algx1.l6.m1.6.6.2.1.2.cmml" xref="algx1.l6.m1.6.6.2.1.2"><csymbol cd="ambiguous" id="algx1.l6.m1.6.6.2.1.2.1.cmml" xref="algx1.l6.m1.6.6.2.1.2">subscript</csymbol><sum id="algx1.l6.m1.6.6.2.1.2.2.cmml" xref="algx1.l6.m1.6.6.2.1.2.2"></sum><ci id="algx1.l6.m1.6.6.2.1.2.3.cmml" xref="algx1.l6.m1.6.6.2.1.2.3">𝑡</ci></apply><apply id="algx1.l6.m1.6.6.2.1.1.cmml" xref="algx1.l6.m1.6.6.2.1.1"><times id="algx1.l6.m1.6.6.2.1.1.2.cmml" xref="algx1.l6.m1.6.6.2.1.1.2"></times><apply id="algx1.l6.m1.6.6.2.1.1.3.cmml" xref="algx1.l6.m1.6.6.2.1.1.3"><log id="algx1.l6.m1.6.6.2.1.1.3.1.cmml" xref="algx1.l6.m1.6.6.2.1.1.3.1"></log><apply id="algx1.l6.m1.6.6.2.1.1.3.2.cmml" xref="algx1.l6.m1.6.6.2.1.1.3.2"><csymbol cd="ambiguous" id="algx1.l6.m1.6.6.2.1.1.3.2.1.cmml" xref="algx1.l6.m1.6.6.2.1.1.3.2">subscript</csymbol><ci id="algx1.l6.m1.6.6.2.1.1.3.2.2.cmml" xref="algx1.l6.m1.6.6.2.1.1.3.2.2">𝜋</ci><apply id="algx1.l6.m1.6.6.2.1.1.3.2.3.cmml" xref="algx1.l6.m1.6.6.2.1.1.3.2.3"><csymbol cd="ambiguous" id="algx1.l6.m1.6.6.2.1.1.3.2.3.1.cmml" xref="algx1.l6.m1.6.6.2.1.1.3.2.3">subscript</csymbol><ci id="algx1.l6.m1.6.6.2.1.1.3.2.3.2.cmml" xref="algx1.l6.m1.6.6.2.1.1.3.2.3.2">𝜃</ci><cn id="algx1.l6.m1.6.6.2.1.1.3.2.3.3.cmml" type="integer" xref="algx1.l6.m1.6.6.2.1.1.3.2.3.3">3</cn></apply></apply></apply><apply id="algx1.l6.m1.6.6.2.1.1.1.1.1.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1"><csymbol cd="latexml" id="algx1.l6.m1.6.6.2.1.1.1.1.1.2.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.2">conditional</csymbol><apply id="algx1.l6.m1.6.6.2.1.1.1.1.1.3.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.3"><csymbol cd="ambiguous" id="algx1.l6.m1.6.6.2.1.1.1.1.1.3.1.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.3">subscript</csymbol><ci id="algx1.l6.m1.6.6.2.1.1.1.1.1.3.2.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.3.2">𝑥</ci><ci id="algx1.l6.m1.1.1.1.1.cmml" xref="algx1.l6.m1.1.1.1.1">𝑡</ci></apply><list id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.2.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1"><apply id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1.1.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1.2.cmml" xref="algx1.l6.m1.6.6.2.1.1.1.1.1.1.1.1.2">𝑥</ci><apply id="algx1.l6.m1.2.2.1.1.1.cmml" xref="algx1.l6.m1.2.2.1.1"><lt id="algx1.l6.m1.2.2.1.1.1.1.cmml" xref="algx1.l6.m1.2.2.1.1.1.1"></lt><csymbol cd="latexml" id="algx1.l6.m1.2.2.1.1.1.2.cmml" xref="algx1.l6.m1.2.2.1.1.1.2">absent</csymbol><ci id="algx1.l6.m1.2.2.1.1.1.3.cmml" xref="algx1.l6.m1.2.2.1.1.1.3">𝑡</ci></apply></apply><ci id="algx1.l6.m1.3.3.cmml" xref="algx1.l6.m1.3.3">𝑐</ci><ci id="algx1.l6.m1.4.4.cmml" xref="algx1.l6.m1.4.4">𝑑</ci></list></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l6.m1.6c">\mathcal{L}_{\mathrm{desc}}(\theta_{3})=-\sum_{t}\log\pi_{\theta_{3}}(x_{(t)}|%
x_{(&lt;t)},c,d)</annotation><annotation encoding="application/x-llamapun" id="algx1.l6.m1.6d">caligraphic_L start_POSTSUBSCRIPT roman_desc end_POSTSUBSCRIPT ( italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT ) = - ∑ start_POSTSUBSCRIPT italic_t end_POSTSUBSCRIPT roman_log italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( italic_x start_POSTSUBSCRIPT ( italic_t ) end_POSTSUBSCRIPT | italic_x start_POSTSUBSCRIPT ( &lt; italic_t ) end_POSTSUBSCRIPT , italic_c , italic_d )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l7">
<span class="ltx_tag ltx_tag_listingline">7:</span><span class="ltx_text ltx_font_bold" id="algx1.l7.1">end</span>&nbsp;<span class="ltx_text ltx_font_bold" id="algx1.l7.2">for</span>
</div>
<div class="ltx_listingline" id="algx1.l8">
<span class="ltx_tag ltx_tag_listingline">8:</span><math alttext="\pi_{\mathrm{\theta}_{\mathrm{sft1}}}\leftarrow\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="algx1.l8.m1.1"><semantics id="algx1.l8.m1.1a"><mrow id="algx1.l8.m1.1.1" xref="algx1.l8.m1.1.1.cmml"><msub id="algx1.l8.m1.1.1.2" xref="algx1.l8.m1.1.1.2.cmml"><mi id="algx1.l8.m1.1.1.2.2" xref="algx1.l8.m1.1.1.2.2.cmml">π</mi><msub id="algx1.l8.m1.1.1.2.3" xref="algx1.l8.m1.1.1.2.3.cmml"><mi id="algx1.l8.m1.1.1.2.3.2" xref="algx1.l8.m1.1.1.2.3.2.cmml">θ</mi><mi id="algx1.l8.m1.1.1.2.3.3" xref="algx1.l8.m1.1.1.2.3.3.cmml">sft1</mi></msub></msub><mo id="algx1.l8.m1.1.1.1" stretchy="false" xref="algx1.l8.m1.1.1.1.cmml">←</mo><msub id="algx1.l8.m1.1.1.3" xref="algx1.l8.m1.1.1.3.cmml"><mi id="algx1.l8.m1.1.1.3.2" xref="algx1.l8.m1.1.1.3.2.cmml">π</mi><msub id="algx1.l8.m1.1.1.3.3" xref="algx1.l8.m1.1.1.3.3.cmml"><mi id="algx1.l8.m1.1.1.3.3.2" xref="algx1.l8.m1.1.1.3.3.2.cmml">θ</mi><mn id="algx1.l8.m1.1.1.3.3.3" xref="algx1.l8.m1.1.1.3.3.3.cmml">1</mn></msub></msub></mrow><annotation-xml encoding="MathML-Content" id="algx1.l8.m1.1b"><apply id="algx1.l8.m1.1.1.cmml" xref="algx1.l8.m1.1.1"><ci id="algx1.l8.m1.1.1.1.cmml" xref="algx1.l8.m1.1.1.1">←</ci><apply id="algx1.l8.m1.1.1.2.cmml" xref="algx1.l8.m1.1.1.2"><csymbol cd="ambiguous" id="algx1.l8.m1.1.1.2.1.cmml" xref="algx1.l8.m1.1.1.2">subscript</csymbol><ci id="algx1.l8.m1.1.1.2.2.cmml" xref="algx1.l8.m1.1.1.2.2">𝜋</ci><apply id="algx1.l8.m1.1.1.2.3.cmml" xref="algx1.l8.m1.1.1.2.3"><csymbol cd="ambiguous" id="algx1.l8.m1.1.1.2.3.1.cmml" xref="algx1.l8.m1.1.1.2.3">subscript</csymbol><ci id="algx1.l8.m1.1.1.2.3.2.cmml" xref="algx1.l8.m1.1.1.2.3.2">𝜃</ci><ci id="algx1.l8.m1.1.1.2.3.3.cmml" xref="algx1.l8.m1.1.1.2.3.3">sft1</ci></apply></apply><apply id="algx1.l8.m1.1.1.3.cmml" xref="algx1.l8.m1.1.1.3"><csymbol cd="ambiguous" id="algx1.l8.m1.1.1.3.1.cmml" xref="algx1.l8.m1.1.1.3">subscript</csymbol><ci id="algx1.l8.m1.1.1.3.2.cmml" xref="algx1.l8.m1.1.1.3.2">𝜋</ci><apply id="algx1.l8.m1.1.1.3.3.cmml" xref="algx1.l8.m1.1.1.3.3"><csymbol cd="ambiguous" id="algx1.l8.m1.1.1.3.3.1.cmml" xref="algx1.l8.m1.1.1.3.3">subscript</csymbol><ci id="algx1.l8.m1.1.1.3.3.2.cmml" xref="algx1.l8.m1.1.1.3.3.2">𝜃</ci><cn id="algx1.l8.m1.1.1.3.3.3.cmml" type="integer" xref="algx1.l8.m1.1.1.3.3.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.m1.1c">\pi_{\mathrm{\theta}_{\mathrm{sft1}}}\leftarrow\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.m1.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT sft1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ← italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>,
<math alttext="\pi_{\mathrm{\theta}_{\mathrm{sft2}}}\leftarrow\pi_{\theta_{2}}" class="ltx_Math" display="inline" id="algx1.l8.m2.1"><semantics id="algx1.l8.m2.1a"><mrow id="algx1.l8.m2.1.1" xref="algx1.l8.m2.1.1.cmml"><msub id="algx1.l8.m2.1.1.2" xref="algx1.l8.m2.1.1.2.cmml"><mi id="algx1.l8.m2.1.1.2.2" xref="algx1.l8.m2.1.1.2.2.cmml">π</mi><msub id="algx1.l8.m2.1.1.2.3" xref="algx1.l8.m2.1.1.2.3.cmml"><mi id="algx1.l8.m2.1.1.2.3.2" xref="algx1.l8.m2.1.1.2.3.2.cmml">θ</mi><mi id="algx1.l8.m2.1.1.2.3.3" xref="algx1.l8.m2.1.1.2.3.3.cmml">sft2</mi></msub></msub><mo id="algx1.l8.m2.1.1.1" stretchy="false" xref="algx1.l8.m2.1.1.1.cmml">←</mo><msub id="algx1.l8.m2.1.1.3" xref="algx1.l8.m2.1.1.3.cmml"><mi id="algx1.l8.m2.1.1.3.2" xref="algx1.l8.m2.1.1.3.2.cmml">π</mi><msub id="algx1.l8.m2.1.1.3.3" xref="algx1.l8.m2.1.1.3.3.cmml"><mi id="algx1.l8.m2.1.1.3.3.2" xref="algx1.l8.m2.1.1.3.3.2.cmml">θ</mi><mn id="algx1.l8.m2.1.1.3.3.3" xref="algx1.l8.m2.1.1.3.3.3.cmml">2</mn></msub></msub></mrow><annotation-xml encoding="MathML-Content" id="algx1.l8.m2.1b"><apply id="algx1.l8.m2.1.1.cmml" xref="algx1.l8.m2.1.1"><ci id="algx1.l8.m2.1.1.1.cmml" xref="algx1.l8.m2.1.1.1">←</ci><apply id="algx1.l8.m2.1.1.2.cmml" xref="algx1.l8.m2.1.1.2"><csymbol cd="ambiguous" id="algx1.l8.m2.1.1.2.1.cmml" xref="algx1.l8.m2.1.1.2">subscript</csymbol><ci id="algx1.l8.m2.1.1.2.2.cmml" xref="algx1.l8.m2.1.1.2.2">𝜋</ci><apply id="algx1.l8.m2.1.1.2.3.cmml" xref="algx1.l8.m2.1.1.2.3"><csymbol cd="ambiguous" id="algx1.l8.m2.1.1.2.3.1.cmml" xref="algx1.l8.m2.1.1.2.3">subscript</csymbol><ci id="algx1.l8.m2.1.1.2.3.2.cmml" xref="algx1.l8.m2.1.1.2.3.2">𝜃</ci><ci id="algx1.l8.m2.1.1.2.3.3.cmml" xref="algx1.l8.m2.1.1.2.3.3">sft2</ci></apply></apply><apply id="algx1.l8.m2.1.1.3.cmml" xref="algx1.l8.m2.1.1.3"><csymbol cd="ambiguous" id="algx1.l8.m2.1.1.3.1.cmml" xref="algx1.l8.m2.1.1.3">subscript</csymbol><ci id="algx1.l8.m2.1.1.3.2.cmml" xref="algx1.l8.m2.1.1.3.2">𝜋</ci><apply id="algx1.l8.m2.1.1.3.3.cmml" xref="algx1.l8.m2.1.1.3.3"><csymbol cd="ambiguous" id="algx1.l8.m2.1.1.3.3.1.cmml" xref="algx1.l8.m2.1.1.3.3">subscript</csymbol><ci id="algx1.l8.m2.1.1.3.3.2.cmml" xref="algx1.l8.m2.1.1.3.3.2">𝜃</ci><cn id="algx1.l8.m2.1.1.3.3.3.cmml" type="integer" xref="algx1.l8.m2.1.1.3.3.3">2</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.m2.1c">\pi_{\mathrm{\theta}_{\mathrm{sft2}}}\leftarrow\pi_{\theta_{2}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT sft2 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ← italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>,
<math alttext="\pi_{\mathrm{\theta}_{\mathrm{sft3}}}\leftarrow\pi_{\theta_{3}}" class="ltx_Math" display="inline" id="algx1.l8.m3.1"><semantics id="algx1.l8.m3.1a"><mrow id="algx1.l8.m3.1.1" xref="algx1.l8.m3.1.1.cmml"><msub id="algx1.l8.m3.1.1.2" xref="algx1.l8.m3.1.1.2.cmml"><mi id="algx1.l8.m3.1.1.2.2" xref="algx1.l8.m3.1.1.2.2.cmml">π</mi><msub id="algx1.l8.m3.1.1.2.3" xref="algx1.l8.m3.1.1.2.3.cmml"><mi id="algx1.l8.m3.1.1.2.3.2" xref="algx1.l8.m3.1.1.2.3.2.cmml">θ</mi><mi id="algx1.l8.m3.1.1.2.3.3" xref="algx1.l8.m3.1.1.2.3.3.cmml">sft3</mi></msub></msub><mo id="algx1.l8.m3.1.1.1" stretchy="false" xref="algx1.l8.m3.1.1.1.cmml">←</mo><msub id="algx1.l8.m3.1.1.3" xref="algx1.l8.m3.1.1.3.cmml"><mi id="algx1.l8.m3.1.1.3.2" xref="algx1.l8.m3.1.1.3.2.cmml">π</mi><msub id="algx1.l8.m3.1.1.3.3" xref="algx1.l8.m3.1.1.3.3.cmml"><mi id="algx1.l8.m3.1.1.3.3.2" xref="algx1.l8.m3.1.1.3.3.2.cmml">θ</mi><mn id="algx1.l8.m3.1.1.3.3.3" xref="algx1.l8.m3.1.1.3.3.3.cmml">3</mn></msub></msub></mrow><annotation-xml encoding="MathML-Content" id="algx1.l8.m3.1b"><apply id="algx1.l8.m3.1.1.cmml" xref="algx1.l8.m3.1.1"><ci id="algx1.l8.m3.1.1.1.cmml" xref="algx1.l8.m3.1.1.1">←</ci><apply id="algx1.l8.m3.1.1.2.cmml" xref="algx1.l8.m3.1.1.2"><csymbol cd="ambiguous" id="algx1.l8.m3.1.1.2.1.cmml" xref="algx1.l8.m3.1.1.2">subscript</csymbol><ci id="algx1.l8.m3.1.1.2.2.cmml" xref="algx1.l8.m3.1.1.2.2">𝜋</ci><apply id="algx1.l8.m3.1.1.2.3.cmml" xref="algx1.l8.m3.1.1.2.3"><csymbol cd="ambiguous" id="algx1.l8.m3.1.1.2.3.1.cmml" xref="algx1.l8.m3.1.1.2.3">subscript</csymbol><ci id="algx1.l8.m3.1.1.2.3.2.cmml" xref="algx1.l8.m3.1.1.2.3.2">𝜃</ci><ci id="algx1.l8.m3.1.1.2.3.3.cmml" xref="algx1.l8.m3.1.1.2.3.3">sft3</ci></apply></apply><apply id="algx1.l8.m3.1.1.3.cmml" xref="algx1.l8.m3.1.1.3"><csymbol cd="ambiguous" id="algx1.l8.m3.1.1.3.1.cmml" xref="algx1.l8.m3.1.1.3">subscript</csymbol><ci id="algx1.l8.m3.1.1.3.2.cmml" xref="algx1.l8.m3.1.1.3.2">𝜋</ci><apply id="algx1.l8.m3.1.1.3.3.cmml" xref="algx1.l8.m3.1.1.3.3"><csymbol cd="ambiguous" id="algx1.l8.m3.1.1.3.3.1.cmml" xref="algx1.l8.m3.1.1.3.3">subscript</csymbol><ci id="algx1.l8.m3.1.1.3.3.2.cmml" xref="algx1.l8.m3.1.1.3.3.2">𝜃</ci><cn id="algx1.l8.m3.1.1.3.3.3.cmml" type="integer" xref="algx1.l8.m3.1.1.3.3.3">3</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l8.m3.1c">\pi_{\mathrm{\theta}_{\mathrm{sft3}}}\leftarrow\pi_{\theta_{3}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l8.m3.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT sft3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ← italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l9">
<span class="ltx_tag ltx_tag_listingline">9:</span>Generate automatic preference dataset <math alttext="\mathcal{D}_{\mathrm{pref}}" class="ltx_Math" display="inline" id="algx1.l9.m1.1"><semantics id="algx1.l9.m1.1a"><msub id="algx1.l9.m1.1.1" xref="algx1.l9.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l9.m1.1.1.2" xref="algx1.l9.m1.1.1.2.cmml">𝒟</mi><mi id="algx1.l9.m1.1.1.3" xref="algx1.l9.m1.1.1.3.cmml">pref</mi></msub><annotation-xml encoding="MathML-Content" id="algx1.l9.m1.1b"><apply id="algx1.l9.m1.1.1.cmml" xref="algx1.l9.m1.1.1"><csymbol cd="ambiguous" id="algx1.l9.m1.1.1.1.cmml" xref="algx1.l9.m1.1.1">subscript</csymbol><ci id="algx1.l9.m1.1.1.2.cmml" xref="algx1.l9.m1.1.1.2">𝒟</ci><ci id="algx1.l9.m1.1.1.3.cmml" xref="algx1.l9.m1.1.1.3">pref</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l9.m1.1c">\mathcal{D}_{\mathrm{pref}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l9.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_pref end_POSTSUBSCRIPT</annotation></semantics></math> from <math alttext="\pi_{\mathrm{\theta}_{\mathrm{sft1}}}" class="ltx_Math" display="inline" id="algx1.l9.m2.1"><semantics id="algx1.l9.m2.1a"><msub id="algx1.l9.m2.1.1" xref="algx1.l9.m2.1.1.cmml"><mi id="algx1.l9.m2.1.1.2" xref="algx1.l9.m2.1.1.2.cmml">π</mi><msub id="algx1.l9.m2.1.1.3" xref="algx1.l9.m2.1.1.3.cmml"><mi id="algx1.l9.m2.1.1.3.2" xref="algx1.l9.m2.1.1.3.2.cmml">θ</mi><mi id="algx1.l9.m2.1.1.3.3" xref="algx1.l9.m2.1.1.3.3.cmml">sft1</mi></msub></msub><annotation-xml encoding="MathML-Content" id="algx1.l9.m2.1b"><apply id="algx1.l9.m2.1.1.cmml" xref="algx1.l9.m2.1.1"><csymbol cd="ambiguous" id="algx1.l9.m2.1.1.1.cmml" xref="algx1.l9.m2.1.1">subscript</csymbol><ci id="algx1.l9.m2.1.1.2.cmml" xref="algx1.l9.m2.1.1.2">𝜋</ci><apply id="algx1.l9.m2.1.1.3.cmml" xref="algx1.l9.m2.1.1.3"><csymbol cd="ambiguous" id="algx1.l9.m2.1.1.3.1.cmml" xref="algx1.l9.m2.1.1.3">subscript</csymbol><ci id="algx1.l9.m2.1.1.3.2.cmml" xref="algx1.l9.m2.1.1.3.2">𝜃</ci><ci id="algx1.l9.m2.1.1.3.3.cmml" xref="algx1.l9.m2.1.1.3.3">sft1</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l9.m2.1c">\pi_{\mathrm{\theta}_{\mathrm{sft1}}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l9.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT sft1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> and <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="algx1.l9.m3.1"><semantics id="algx1.l9.m3.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l9.m3.1.1" xref="algx1.l9.m3.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="algx1.l9.m3.1b"><ci id="algx1.l9.m3.1.1.cmml" xref="algx1.l9.m3.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l9.m3.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="algx1.l9.m3.1d">caligraphic_D</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l10">
<span class="ltx_tag ltx_tag_listingline">10:</span>Train preference reward model <math alttext="R_{\phi}(c)" class="ltx_Math" display="inline" id="algx1.l10.m1.1"><semantics id="algx1.l10.m1.1a"><mrow id="algx1.l10.m1.1.2" xref="algx1.l10.m1.1.2.cmml"><msub id="algx1.l10.m1.1.2.2" xref="algx1.l10.m1.1.2.2.cmml"><mi id="algx1.l10.m1.1.2.2.2" xref="algx1.l10.m1.1.2.2.2.cmml">R</mi><mi id="algx1.l10.m1.1.2.2.3" xref="algx1.l10.m1.1.2.2.3.cmml">ϕ</mi></msub><mo id="algx1.l10.m1.1.2.1" xref="algx1.l10.m1.1.2.1.cmml">⁢</mo><mrow id="algx1.l10.m1.1.2.3.2" xref="algx1.l10.m1.1.2.cmml"><mo id="algx1.l10.m1.1.2.3.2.1" stretchy="false" xref="algx1.l10.m1.1.2.cmml">(</mo><mi id="algx1.l10.m1.1.1" xref="algx1.l10.m1.1.1.cmml">c</mi><mo id="algx1.l10.m1.1.2.3.2.2" stretchy="false" xref="algx1.l10.m1.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l10.m1.1b"><apply id="algx1.l10.m1.1.2.cmml" xref="algx1.l10.m1.1.2"><times id="algx1.l10.m1.1.2.1.cmml" xref="algx1.l10.m1.1.2.1"></times><apply id="algx1.l10.m1.1.2.2.cmml" xref="algx1.l10.m1.1.2.2"><csymbol cd="ambiguous" id="algx1.l10.m1.1.2.2.1.cmml" xref="algx1.l10.m1.1.2.2">subscript</csymbol><ci id="algx1.l10.m1.1.2.2.2.cmml" xref="algx1.l10.m1.1.2.2.2">𝑅</ci><ci id="algx1.l10.m1.1.2.2.3.cmml" xref="algx1.l10.m1.1.2.2.3">italic-ϕ</ci></apply><ci id="algx1.l10.m1.1.1.cmml" xref="algx1.l10.m1.1.1">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l10.m1.1c">R_{\phi}(c)</annotation><annotation encoding="application/x-llamapun" id="algx1.l10.m1.1d">italic_R start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( italic_c )</annotation></semantics></math> from <math alttext="\mathcal{D}_{\mathrm{pref}}" class="ltx_Math" display="inline" id="algx1.l10.m2.1"><semantics id="algx1.l10.m2.1a"><msub id="algx1.l10.m2.1.1" xref="algx1.l10.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="algx1.l10.m2.1.1.2" xref="algx1.l10.m2.1.1.2.cmml">𝒟</mi><mi id="algx1.l10.m2.1.1.3" xref="algx1.l10.m2.1.1.3.cmml">pref</mi></msub><annotation-xml encoding="MathML-Content" id="algx1.l10.m2.1b"><apply id="algx1.l10.m2.1.1.cmml" xref="algx1.l10.m2.1.1"><csymbol cd="ambiguous" id="algx1.l10.m2.1.1.1.cmml" xref="algx1.l10.m2.1.1">subscript</csymbol><ci id="algx1.l10.m2.1.1.2.cmml" xref="algx1.l10.m2.1.1.2">𝒟</ci><ci id="algx1.l10.m2.1.1.3.cmml" xref="algx1.l10.m2.1.1.3">pref</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l10.m2.1c">\mathcal{D}_{\mathrm{pref}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l10.m2.1d">caligraphic_D start_POSTSUBSCRIPT roman_pref end_POSTSUBSCRIPT</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l11">
<span class="ltx_tag ltx_tag_listingline">11:</span><span class="ltx_text ltx_font_bold" id="algx1.l11.2">for</span>&nbsp;iter = <math alttext="1,2,\ldots,N_{\mathrm{rl}}" class="ltx_Math" display="inline" id="algx1.l11.m1.4"><semantics id="algx1.l11.m1.4a"><mrow id="algx1.l11.m1.4.4.1" xref="algx1.l11.m1.4.4.2.cmml"><mn id="algx1.l11.m1.1.1" xref="algx1.l11.m1.1.1.cmml">1</mn><mo id="algx1.l11.m1.4.4.1.2" xref="algx1.l11.m1.4.4.2.cmml">,</mo><mn id="algx1.l11.m1.2.2" xref="algx1.l11.m1.2.2.cmml">2</mn><mo id="algx1.l11.m1.4.4.1.3" xref="algx1.l11.m1.4.4.2.cmml">,</mo><mi id="algx1.l11.m1.3.3" mathvariant="normal" xref="algx1.l11.m1.3.3.cmml">…</mi><mo id="algx1.l11.m1.4.4.1.4" xref="algx1.l11.m1.4.4.2.cmml">,</mo><msub id="algx1.l11.m1.4.4.1.1" xref="algx1.l11.m1.4.4.1.1.cmml"><mi id="algx1.l11.m1.4.4.1.1.2" xref="algx1.l11.m1.4.4.1.1.2.cmml">N</mi><mi id="algx1.l11.m1.4.4.1.1.3" xref="algx1.l11.m1.4.4.1.1.3.cmml">rl</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="algx1.l11.m1.4b"><list id="algx1.l11.m1.4.4.2.cmml" xref="algx1.l11.m1.4.4.1"><cn id="algx1.l11.m1.1.1.cmml" type="integer" xref="algx1.l11.m1.1.1">1</cn><cn id="algx1.l11.m1.2.2.cmml" type="integer" xref="algx1.l11.m1.2.2">2</cn><ci id="algx1.l11.m1.3.3.cmml" xref="algx1.l11.m1.3.3">…</ci><apply id="algx1.l11.m1.4.4.1.1.cmml" xref="algx1.l11.m1.4.4.1.1"><csymbol cd="ambiguous" id="algx1.l11.m1.4.4.1.1.1.cmml" xref="algx1.l11.m1.4.4.1.1">subscript</csymbol><ci id="algx1.l11.m1.4.4.1.1.2.cmml" xref="algx1.l11.m1.4.4.1.1.2">𝑁</ci><ci id="algx1.l11.m1.4.4.1.1.3.cmml" xref="algx1.l11.m1.4.4.1.1.3">rl</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="algx1.l11.m1.4c">1,2,\ldots,N_{\mathrm{rl}}</annotation><annotation encoding="application/x-llamapun" id="algx1.l11.m1.4d">1 , 2 , … , italic_N start_POSTSUBSCRIPT roman_rl end_POSTSUBSCRIPT</annotation></semantics></math>&nbsp;<span class="ltx_text ltx_font_bold" id="algx1.l11.3">do</span> <span class="ltx_text" id="algx1.l11.1" style="float:right;"><math alttext="\triangleright" class="ltx_Math" display="inline" id="algx1.l11.1.m1.1"><semantics id="algx1.l11.1.m1.1a"><mo id="algx1.l11.1.m1.1.1" xref="algx1.l11.1.m1.1.1.cmml">▷</mo><annotation-xml encoding="MathML-Content" id="algx1.l11.1.m1.1b"><ci id="algx1.l11.1.m1.1.1.cmml" xref="algx1.l11.1.m1.1.1">▷</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l11.1.m1.1c">\triangleright</annotation><annotation encoding="application/x-llamapun" id="algx1.l11.1.m1.1d">▷</annotation></semantics></math> Reinforcement learning (PPO)
</span>
</div>
<div class="ltx_listingline" id="algx1.l12">
<span class="ltx_tag ltx_tag_listingline">12:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sample <math alttext="x" class="ltx_Math" display="inline" id="algx1.l12.m1.1"><semantics id="algx1.l12.m1.1a"><mi id="algx1.l12.m1.1.1" xref="algx1.l12.m1.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="algx1.l12.m1.1b"><ci id="algx1.l12.m1.1.1.cmml" xref="algx1.l12.m1.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l12.m1.1c">x</annotation><annotation encoding="application/x-llamapun" id="algx1.l12.m1.1d">italic_x</annotation></semantics></math> from dataset <math alttext="\mathcal{D}" class="ltx_Math" display="inline" id="algx1.l12.m2.1"><semantics id="algx1.l12.m2.1a"><mi class="ltx_font_mathcaligraphic" id="algx1.l12.m2.1.1" xref="algx1.l12.m2.1.1.cmml">𝒟</mi><annotation-xml encoding="MathML-Content" id="algx1.l12.m2.1b"><ci id="algx1.l12.m2.1.1.cmml" xref="algx1.l12.m2.1.1">𝒟</ci></annotation-xml><annotation encoding="application/x-tex" id="algx1.l12.m2.1c">\mathcal{D}</annotation><annotation encoding="application/x-llamapun" id="algx1.l12.m2.1d">caligraphic_D</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l13">
<span class="ltx_tag ltx_tag_listingline">13:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Generate <math alttext="\hat{c}" class="ltx_Math" display="inline" id="algx1.l13.m1.1"><semantics id="algx1.l13.m1.1a"><mover accent="true" id="algx1.l13.m1.1.1" xref="algx1.l13.m1.1.1.cmml"><mi id="algx1.l13.m1.1.1.2" xref="algx1.l13.m1.1.1.2.cmml">c</mi><mo id="algx1.l13.m1.1.1.1" xref="algx1.l13.m1.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="algx1.l13.m1.1b"><apply id="algx1.l13.m1.1.1.cmml" xref="algx1.l13.m1.1.1"><ci id="algx1.l13.m1.1.1.1.cmml" xref="algx1.l13.m1.1.1.1">^</ci><ci id="algx1.l13.m1.1.1.2.cmml" xref="algx1.l13.m1.1.1.2">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l13.m1.1c">\hat{c}</annotation><annotation encoding="application/x-llamapun" id="algx1.l13.m1.1d">over^ start_ARG italic_c end_ARG</annotation></semantics></math> from <math alttext="\pi_{\mathrm{\theta}_{1}}(\cdot|x)" class="ltx_math_unparsed" display="inline" id="algx1.l13.m2.1"><semantics id="algx1.l13.m2.1a"><mrow id="algx1.l13.m2.1b"><msub id="algx1.l13.m2.1.1"><mi id="algx1.l13.m2.1.1.2">π</mi><msub id="algx1.l13.m2.1.1.3"><mi id="algx1.l13.m2.1.1.3.2">θ</mi><mn id="algx1.l13.m2.1.1.3.3">1</mn></msub></msub><mrow id="algx1.l13.m2.1.2"><mo id="algx1.l13.m2.1.2.1" stretchy="false">(</mo><mo id="algx1.l13.m2.1.2.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="algx1.l13.m2.1.2.3" rspace="0.167em" stretchy="false">|</mo><mi id="algx1.l13.m2.1.2.4">x</mi><mo id="algx1.l13.m2.1.2.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="algx1.l13.m2.1c">\pi_{\mathrm{\theta}_{1}}(\cdot|x)</annotation><annotation encoding="application/x-llamapun" id="algx1.l13.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | italic_x )</annotation></semantics></math>, and generate <math alttext="\hat{x}" class="ltx_Math" display="inline" id="algx1.l13.m3.1"><semantics id="algx1.l13.m3.1a"><mover accent="true" id="algx1.l13.m3.1.1" xref="algx1.l13.m3.1.1.cmml"><mi id="algx1.l13.m3.1.1.2" xref="algx1.l13.m3.1.1.2.cmml">x</mi><mo id="algx1.l13.m3.1.1.1" xref="algx1.l13.m3.1.1.1.cmml">^</mo></mover><annotation-xml encoding="MathML-Content" id="algx1.l13.m3.1b"><apply id="algx1.l13.m3.1.1.cmml" xref="algx1.l13.m3.1.1"><ci id="algx1.l13.m3.1.1.1.cmml" xref="algx1.l13.m3.1.1.1">^</ci><ci id="algx1.l13.m3.1.1.2.cmml" xref="algx1.l13.m3.1.1.2">𝑥</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l13.m3.1c">\hat{x}</annotation><annotation encoding="application/x-llamapun" id="algx1.l13.m3.1d">over^ start_ARG italic_x end_ARG</annotation></semantics></math> from <math alttext="\pi_{\mathrm{\theta}_{3}}(\cdot|\hat{c})" class="ltx_math_unparsed" display="inline" id="algx1.l13.m4.1"><semantics id="algx1.l13.m4.1a"><mrow id="algx1.l13.m4.1b"><msub id="algx1.l13.m4.1.1"><mi id="algx1.l13.m4.1.1.2">π</mi><msub id="algx1.l13.m4.1.1.3"><mi id="algx1.l13.m4.1.1.3.2">θ</mi><mn id="algx1.l13.m4.1.1.3.3">3</mn></msub></msub><mrow id="algx1.l13.m4.1.2"><mo id="algx1.l13.m4.1.2.1" stretchy="false">(</mo><mo id="algx1.l13.m4.1.2.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="algx1.l13.m4.1.2.3" rspace="0.167em" stretchy="false">|</mo><mover accent="true" id="algx1.l13.m4.1.2.4"><mi id="algx1.l13.m4.1.2.4.2">c</mi><mo id="algx1.l13.m4.1.2.4.1">^</mo></mover><mo id="algx1.l13.m4.1.2.5" stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="algx1.l13.m4.1c">\pi_{\mathrm{\theta}_{3}}(\cdot|\hat{c})</annotation><annotation encoding="application/x-llamapun" id="algx1.l13.m4.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | over^ start_ARG italic_c end_ARG )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l14">
<span class="ltx_tag ltx_tag_listingline">14:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculate preference reward <math alttext="R_{\phi}(\hat{c})" class="ltx_Math" display="inline" id="algx1.l14.m1.1"><semantics id="algx1.l14.m1.1a"><mrow id="algx1.l14.m1.1.2" xref="algx1.l14.m1.1.2.cmml"><msub id="algx1.l14.m1.1.2.2" xref="algx1.l14.m1.1.2.2.cmml"><mi id="algx1.l14.m1.1.2.2.2" xref="algx1.l14.m1.1.2.2.2.cmml">R</mi><mi id="algx1.l14.m1.1.2.2.3" xref="algx1.l14.m1.1.2.2.3.cmml">ϕ</mi></msub><mo id="algx1.l14.m1.1.2.1" xref="algx1.l14.m1.1.2.1.cmml">⁢</mo><mrow id="algx1.l14.m1.1.2.3.2" xref="algx1.l14.m1.1.1.cmml"><mo id="algx1.l14.m1.1.2.3.2.1" stretchy="false" xref="algx1.l14.m1.1.1.cmml">(</mo><mover accent="true" id="algx1.l14.m1.1.1" xref="algx1.l14.m1.1.1.cmml"><mi id="algx1.l14.m1.1.1.2" xref="algx1.l14.m1.1.1.2.cmml">c</mi><mo id="algx1.l14.m1.1.1.1" xref="algx1.l14.m1.1.1.1.cmml">^</mo></mover><mo id="algx1.l14.m1.1.2.3.2.2" stretchy="false" xref="algx1.l14.m1.1.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l14.m1.1b"><apply id="algx1.l14.m1.1.2.cmml" xref="algx1.l14.m1.1.2"><times id="algx1.l14.m1.1.2.1.cmml" xref="algx1.l14.m1.1.2.1"></times><apply id="algx1.l14.m1.1.2.2.cmml" xref="algx1.l14.m1.1.2.2"><csymbol cd="ambiguous" id="algx1.l14.m1.1.2.2.1.cmml" xref="algx1.l14.m1.1.2.2">subscript</csymbol><ci id="algx1.l14.m1.1.2.2.2.cmml" xref="algx1.l14.m1.1.2.2.2">𝑅</ci><ci id="algx1.l14.m1.1.2.2.3.cmml" xref="algx1.l14.m1.1.2.2.3">italic-ϕ</ci></apply><apply id="algx1.l14.m1.1.1.cmml" xref="algx1.l14.m1.1.2.3.2"><ci id="algx1.l14.m1.1.1.1.cmml" xref="algx1.l14.m1.1.1.1">^</ci><ci id="algx1.l14.m1.1.1.2.cmml" xref="algx1.l14.m1.1.1.2">𝑐</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l14.m1.1c">R_{\phi}(\hat{c})</annotation><annotation encoding="application/x-llamapun" id="algx1.l14.m1.1d">italic_R start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( over^ start_ARG italic_c end_ARG )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l15">
<span class="ltx_tag ltx_tag_listingline">15:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Calculate alignment reward <math alttext="R(x,\hat{x})=\mathrm{BertScore}(x,\hat{x})" class="ltx_Math" display="inline" id="algx1.l15.m1.4"><semantics id="algx1.l15.m1.4a"><mrow id="algx1.l15.m1.4.5" xref="algx1.l15.m1.4.5.cmml"><mrow id="algx1.l15.m1.4.5.2" xref="algx1.l15.m1.4.5.2.cmml"><mi id="algx1.l15.m1.4.5.2.2" xref="algx1.l15.m1.4.5.2.2.cmml">R</mi><mo id="algx1.l15.m1.4.5.2.1" xref="algx1.l15.m1.4.5.2.1.cmml">⁢</mo><mrow id="algx1.l15.m1.4.5.2.3.2" xref="algx1.l15.m1.4.5.2.3.1.cmml"><mo id="algx1.l15.m1.4.5.2.3.2.1" stretchy="false" xref="algx1.l15.m1.4.5.2.3.1.cmml">(</mo><mi id="algx1.l15.m1.1.1" xref="algx1.l15.m1.1.1.cmml">x</mi><mo id="algx1.l15.m1.4.5.2.3.2.2" xref="algx1.l15.m1.4.5.2.3.1.cmml">,</mo><mover accent="true" id="algx1.l15.m1.2.2" xref="algx1.l15.m1.2.2.cmml"><mi id="algx1.l15.m1.2.2.2" xref="algx1.l15.m1.2.2.2.cmml">x</mi><mo id="algx1.l15.m1.2.2.1" xref="algx1.l15.m1.2.2.1.cmml">^</mo></mover><mo id="algx1.l15.m1.4.5.2.3.2.3" stretchy="false" xref="algx1.l15.m1.4.5.2.3.1.cmml">)</mo></mrow></mrow><mo id="algx1.l15.m1.4.5.1" xref="algx1.l15.m1.4.5.1.cmml">=</mo><mrow id="algx1.l15.m1.4.5.3" xref="algx1.l15.m1.4.5.3.cmml"><mi id="algx1.l15.m1.4.5.3.2" xref="algx1.l15.m1.4.5.3.2.cmml">BertScore</mi><mo id="algx1.l15.m1.4.5.3.1" xref="algx1.l15.m1.4.5.3.1.cmml">⁢</mo><mrow id="algx1.l15.m1.4.5.3.3.2" xref="algx1.l15.m1.4.5.3.3.1.cmml"><mo id="algx1.l15.m1.4.5.3.3.2.1" stretchy="false" xref="algx1.l15.m1.4.5.3.3.1.cmml">(</mo><mi id="algx1.l15.m1.3.3" xref="algx1.l15.m1.3.3.cmml">x</mi><mo id="algx1.l15.m1.4.5.3.3.2.2" xref="algx1.l15.m1.4.5.3.3.1.cmml">,</mo><mover accent="true" id="algx1.l15.m1.4.4" xref="algx1.l15.m1.4.4.cmml"><mi id="algx1.l15.m1.4.4.2" xref="algx1.l15.m1.4.4.2.cmml">x</mi><mo id="algx1.l15.m1.4.4.1" xref="algx1.l15.m1.4.4.1.cmml">^</mo></mover><mo id="algx1.l15.m1.4.5.3.3.2.3" stretchy="false" xref="algx1.l15.m1.4.5.3.3.1.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="algx1.l15.m1.4b"><apply id="algx1.l15.m1.4.5.cmml" xref="algx1.l15.m1.4.5"><eq id="algx1.l15.m1.4.5.1.cmml" xref="algx1.l15.m1.4.5.1"></eq><apply id="algx1.l15.m1.4.5.2.cmml" xref="algx1.l15.m1.4.5.2"><times id="algx1.l15.m1.4.5.2.1.cmml" xref="algx1.l15.m1.4.5.2.1"></times><ci id="algx1.l15.m1.4.5.2.2.cmml" xref="algx1.l15.m1.4.5.2.2">𝑅</ci><interval closure="open" id="algx1.l15.m1.4.5.2.3.1.cmml" xref="algx1.l15.m1.4.5.2.3.2"><ci id="algx1.l15.m1.1.1.cmml" xref="algx1.l15.m1.1.1">𝑥</ci><apply id="algx1.l15.m1.2.2.cmml" xref="algx1.l15.m1.2.2"><ci id="algx1.l15.m1.2.2.1.cmml" xref="algx1.l15.m1.2.2.1">^</ci><ci id="algx1.l15.m1.2.2.2.cmml" xref="algx1.l15.m1.2.2.2">𝑥</ci></apply></interval></apply><apply id="algx1.l15.m1.4.5.3.cmml" xref="algx1.l15.m1.4.5.3"><times id="algx1.l15.m1.4.5.3.1.cmml" xref="algx1.l15.m1.4.5.3.1"></times><ci id="algx1.l15.m1.4.5.3.2.cmml" xref="algx1.l15.m1.4.5.3.2">BertScore</ci><interval closure="open" id="algx1.l15.m1.4.5.3.3.1.cmml" xref="algx1.l15.m1.4.5.3.3.2"><ci id="algx1.l15.m1.3.3.cmml" xref="algx1.l15.m1.3.3">𝑥</ci><apply id="algx1.l15.m1.4.4.cmml" xref="algx1.l15.m1.4.4"><ci id="algx1.l15.m1.4.4.1.cmml" xref="algx1.l15.m1.4.4.1">^</ci><ci id="algx1.l15.m1.4.4.2.cmml" xref="algx1.l15.m1.4.4.2">𝑥</ci></apply></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="algx1.l15.m1.4c">R(x,\hat{x})=\mathrm{BertScore}(x,\hat{x})</annotation><annotation encoding="application/x-llamapun" id="algx1.l15.m1.4d">italic_R ( italic_x , over^ start_ARG italic_x end_ARG ) = roman_BertScore ( italic_x , over^ start_ARG italic_x end_ARG )</annotation></semantics></math>
</div>
<div class="ltx_listingline" id="algx1.l16">
<span class="ltx_tag ltx_tag_listingline">16:</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Jointly optimize <math alttext="\Bigg{(}J_{\mathrm{PPO}}(\theta_{1})=R_{\phi}(\hat{c})-\beta\log\left(\frac{%
\pi_{\theta_{1}}(\hat{c}\,|\,x)}{\pi_{\mathrm{\theta}_{\mathrm{sft1}}}(\hat{c}%
\,|\,x)}\right)" class="ltx_math_unparsed" display="inline" id="algx1.l16.m1.4"><semantics id="algx1.l16.m1.4a"><mrow id="algx1.l16.m1.4b"><mo id="algx1.l16.m1.4.5" maxsize="260%" minsize="260%">(</mo><msub id="algx1.l16.m1.4.6"><mi id="algx1.l16.m1.4.6.2">J</mi><mi id="algx1.l16.m1.4.6.3">PPO</mi></msub><mrow id="algx1.l16.m1.4.7"><mo id="algx1.l16.m1.4.7.1" stretchy="false">(</mo><msub id="algx1.l16.m1.4.7.2"><mi id="algx1.l16.m1.4.7.2.2">θ</mi><mn id="algx1.l16.m1.4.7.2.3">1</mn></msub><mo id="algx1.l16.m1.4.7.3" stretchy="false">)</mo></mrow><mo id="algx1.l16.m1.4.8">=</mo><msub id="algx1.l16.m1.4.9"><mi id="algx1.l16.m1.4.9.2">R</mi><mi id="algx1.l16.m1.4.9.3">ϕ</mi></msub><mrow id="algx1.l16.m1.4.10"><mo id="algx1.l16.m1.4.10.1" stretchy="false">(</mo><mover accent="true" id="algx1.l16.m1.3.3"><mi id="algx1.l16.m1.3.3.2">c</mi><mo id="algx1.l16.m1.3.3.1">^</mo></mover><mo id="algx1.l16.m1.4.10.2" stretchy="false">)</mo></mrow><mo id="algx1.l16.m1.4.11">−</mo><mi id="algx1.l16.m1.4.12">β</mi><mi id="algx1.l16.m1.4.4">log</mi><mrow id="algx1.l16.m1.4.13"><mo id="algx1.l16.m1.4.13.1">(</mo><mfrac id="algx1.l16.m1.2.2"><mrow id="algx1.l16.m1.1.1.1"><msub id="algx1.l16.m1.1.1.1.3"><mi id="algx1.l16.m1.1.1.1.3.2">π</mi><msub id="algx1.l16.m1.1.1.1.3.3"><mi id="algx1.l16.m1.1.1.1.3.3.2">θ</mi><mn id="algx1.l16.m1.1.1.1.3.3.3">1</mn></msub></msub><mo id="algx1.l16.m1.1.1.1.2">⁢</mo><mrow id="algx1.l16.m1.1.1.1.1.1"><mo id="algx1.l16.m1.1.1.1.1.1.2" stretchy="false">(</mo><mrow id="algx1.l16.m1.1.1.1.1.1.1"><mover accent="true" id="algx1.l16.m1.1.1.1.1.1.1.2"><mi id="algx1.l16.m1.1.1.1.1.1.1.2.2">c</mi><mo id="algx1.l16.m1.1.1.1.1.1.1.2.1">^</mo></mover><mo fence="false" id="algx1.l16.m1.1.1.1.1.1.1.1" rspace="0.448em">|</mo><mi id="algx1.l16.m1.1.1.1.1.1.1.3">x</mi></mrow><mo id="algx1.l16.m1.1.1.1.1.1.3" stretchy="false">)</mo></mrow></mrow><mrow id="algx1.l16.m1.2.2.2"><msub id="algx1.l16.m1.2.2.2.3"><mi id="algx1.l16.m1.2.2.2.3.2">π</mi><msub id="algx1.l16.m1.2.2.2.3.3"><mi id="algx1.l16.m1.2.2.2.3.3.2">θ</mi><mi id="algx1.l16.m1.2.2.2.3.3.3">sft1</mi></msub></msub><mo id="algx1.l16.m1.2.2.2.2">⁢</mo><mrow id="algx1.l16.m1.2.2.2.1.1"><mo id="algx1.l16.m1.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="algx1.l16.m1.2.2.2.1.1.1"><mover accent="true" id="algx1.l16.m1.2.2.2.1.1.1.2"><mi id="algx1.l16.m1.2.2.2.1.1.1.2.2">c</mi><mo id="algx1.l16.m1.2.2.2.1.1.1.2.1">^</mo></mover><mo fence="false" id="algx1.l16.m1.2.2.2.1.1.1.1" rspace="0.448em">|</mo><mi id="algx1.l16.m1.2.2.2.1.1.1.3">x</mi></mrow><mo id="algx1.l16.m1.2.2.2.1.1.3" stretchy="false">)</mo></mrow></mrow></mfrac><mo id="algx1.l16.m1.4.13.2">)</mo></mrow></mrow><annotation encoding="application/x-tex" id="algx1.l16.m1.4c">\Bigg{(}J_{\mathrm{PPO}}(\theta_{1})=R_{\phi}(\hat{c})-\beta\log\left(\frac{%
\pi_{\theta_{1}}(\hat{c}\,|\,x)}{\pi_{\mathrm{\theta}_{\mathrm{sft1}}}(\hat{c}%
\,|\,x)}\right)</annotation><annotation encoding="application/x-llamapun" id="algx1.l16.m1.4d">( italic_J start_POSTSUBSCRIPT roman_PPO end_POSTSUBSCRIPT ( italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT ) = italic_R start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( over^ start_ARG italic_c end_ARG ) - italic_β roman_log ( divide start_ARG italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( over^ start_ARG italic_c end_ARG | italic_x ) end_ARG start_ARG italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT sft1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( over^ start_ARG italic_c end_ARG | italic_x ) end_ARG )</annotation></semantics></math>,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<math alttext="J_{\mathrm{PPO}}(\theta_{3})=R(x,\hat{x})-\beta\log\left(\frac{\pi_{\theta_{3}%
}(\hat{x}\,|\,\hat{c})}{\pi_{\mathrm{\theta}_{\mathrm{sft3}}}(\hat{x}\,|\,\hat%
{c})}\right)\Bigg{)}" class="ltx_math_unparsed" display="inline" id="algx1.l16.m2.5"><semantics id="algx1.l16.m2.5a"><mrow id="algx1.l16.m2.5b"><msub id="algx1.l16.m2.5.6"><mi id="algx1.l16.m2.5.6.2">J</mi><mi id="algx1.l16.m2.5.6.3">PPO</mi></msub><mrow id="algx1.l16.m2.5.7"><mo id="algx1.l16.m2.5.7.1" stretchy="false">(</mo><msub id="algx1.l16.m2.5.7.2"><mi id="algx1.l16.m2.5.7.2.2">θ</mi><mn id="algx1.l16.m2.5.7.2.3">3</mn></msub><mo id="algx1.l16.m2.5.7.3" stretchy="false">)</mo></mrow><mo id="algx1.l16.m2.5.8">=</mo><mi id="algx1.l16.m2.5.9">R</mi><mrow id="algx1.l16.m2.5.10"><mo id="algx1.l16.m2.5.10.1" stretchy="false">(</mo><mi id="algx1.l16.m2.3.3">x</mi><mo id="algx1.l16.m2.5.10.2">,</mo><mover accent="true" id="algx1.l16.m2.4.4"><mi id="algx1.l16.m2.4.4.2">x</mi><mo id="algx1.l16.m2.4.4.1">^</mo></mover><mo id="algx1.l16.m2.5.10.3" stretchy="false">)</mo></mrow><mo id="algx1.l16.m2.5.11">−</mo><mi id="algx1.l16.m2.5.12">β</mi><mi id="algx1.l16.m2.5.5">log</mi><mrow id="algx1.l16.m2.5.13"><mo id="algx1.l16.m2.5.13.1">(</mo><mfrac id="algx1.l16.m2.2.2"><mrow id="algx1.l16.m2.1.1.1"><msub id="algx1.l16.m2.1.1.1.3"><mi id="algx1.l16.m2.1.1.1.3.2">π</mi><msub id="algx1.l16.m2.1.1.1.3.3"><mi id="algx1.l16.m2.1.1.1.3.3.2">θ</mi><mn id="algx1.l16.m2.1.1.1.3.3.3">3</mn></msub></msub><mo id="algx1.l16.m2.1.1.1.2">⁢</mo><mrow id="algx1.l16.m2.1.1.1.1.1"><mo id="algx1.l16.m2.1.1.1.1.1.2" stretchy="false">(</mo><mrow id="algx1.l16.m2.1.1.1.1.1.1"><mover accent="true" id="algx1.l16.m2.1.1.1.1.1.1.2"><mi id="algx1.l16.m2.1.1.1.1.1.1.2.2">x</mi><mo id="algx1.l16.m2.1.1.1.1.1.1.2.1">^</mo></mover><mo fence="false" id="algx1.l16.m2.1.1.1.1.1.1.1" rspace="0.448em">|</mo><mover accent="true" id="algx1.l16.m2.1.1.1.1.1.1.3"><mi id="algx1.l16.m2.1.1.1.1.1.1.3.2">c</mi><mo id="algx1.l16.m2.1.1.1.1.1.1.3.1">^</mo></mover></mrow><mo id="algx1.l16.m2.1.1.1.1.1.3" stretchy="false">)</mo></mrow></mrow><mrow id="algx1.l16.m2.2.2.2"><msub id="algx1.l16.m2.2.2.2.3"><mi id="algx1.l16.m2.2.2.2.3.2">π</mi><msub id="algx1.l16.m2.2.2.2.3.3"><mi id="algx1.l16.m2.2.2.2.3.3.2">θ</mi><mi id="algx1.l16.m2.2.2.2.3.3.3">sft3</mi></msub></msub><mo id="algx1.l16.m2.2.2.2.2">⁢</mo><mrow id="algx1.l16.m2.2.2.2.1.1"><mo id="algx1.l16.m2.2.2.2.1.1.2" stretchy="false">(</mo><mrow id="algx1.l16.m2.2.2.2.1.1.1"><mover accent="true" id="algx1.l16.m2.2.2.2.1.1.1.2"><mi id="algx1.l16.m2.2.2.2.1.1.1.2.2">x</mi><mo id="algx1.l16.m2.2.2.2.1.1.1.2.1">^</mo></mover><mo fence="false" id="algx1.l16.m2.2.2.2.1.1.1.1" rspace="0.448em">|</mo><mover accent="true" id="algx1.l16.m2.2.2.2.1.1.1.3"><mi id="algx1.l16.m2.2.2.2.1.1.1.3.2">c</mi><mo id="algx1.l16.m2.2.2.2.1.1.1.3.1">^</mo></mover></mrow><mo id="algx1.l16.m2.2.2.2.1.1.3" stretchy="false">)</mo></mrow></mrow></mfrac><mo id="algx1.l16.m2.5.13.2">)</mo></mrow><mo id="algx1.l16.m2.5.14" maxsize="260%" minsize="260%">)</mo></mrow><annotation encoding="application/x-tex" id="algx1.l16.m2.5c">J_{\mathrm{PPO}}(\theta_{3})=R(x,\hat{x})-\beta\log\left(\frac{\pi_{\theta_{3}%
}(\hat{x}\,|\,\hat{c})}{\pi_{\mathrm{\theta}_{\mathrm{sft3}}}(\hat{x}\,|\,\hat%
{c})}\right)\Bigg{)}</annotation><annotation encoding="application/x-llamapun" id="algx1.l16.m2.5d">italic_J start_POSTSUBSCRIPT roman_PPO end_POSTSUBSCRIPT ( italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT ) = italic_R ( italic_x , over^ start_ARG italic_x end_ARG ) - italic_β roman_log ( divide start_ARG italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( over^ start_ARG italic_x end_ARG | over^ start_ARG italic_c end_ARG ) end_ARG start_ARG italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT sft3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( over^ start_ARG italic_x end_ARG | over^ start_ARG italic_c end_ARG ) end_ARG ) )</annotation></semantics></math> with PPO

</div>
<div class="ltx_listingline" id="algx1.l17">
<span class="ltx_tag ltx_tag_listingline">17:</span><span class="ltx_text ltx_font_bold" id="algx1.l17.1">end</span>&nbsp;<span class="ltx_text ltx_font_bold" id="algx1.l17.2">for</span>
</div>
</div>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</section>
</section>
<section class="ltx_section" id="S3">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Instruction Tuning Approach</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S3.p1">
<p class="ltx_p" id="S3.p1.5">We discuss our proposed instruction tuning methods for fine-tuning LLMs to tackle the three data visualization tasks: (1) Description-to-Chart, (2) Raw-Data-to-Chart, and (3) Code-to-Description, using the Text2Chart31 dataset.
We respectively denote three specialized models for the three tasks: <math alttext="\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="S3.p1.1.m1.1"><semantics id="S3.p1.1.m1.1a"><msub id="S3.p1.1.m1.1.1" xref="S3.p1.1.m1.1.1.cmml"><mi id="S3.p1.1.m1.1.1.2" xref="S3.p1.1.m1.1.1.2.cmml">π</mi><msub id="S3.p1.1.m1.1.1.3" xref="S3.p1.1.m1.1.1.3.cmml"><mi id="S3.p1.1.m1.1.1.3.2" xref="S3.p1.1.m1.1.1.3.2.cmml">θ</mi><mn id="S3.p1.1.m1.1.1.3.3" xref="S3.p1.1.m1.1.1.3.3.cmml">1</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.p1.1.m1.1b"><apply id="S3.p1.1.m1.1.1.cmml" xref="S3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.p1.1.m1.1.1.1.cmml" xref="S3.p1.1.m1.1.1">subscript</csymbol><ci id="S3.p1.1.m1.1.1.2.cmml" xref="S3.p1.1.m1.1.1.2">𝜋</ci><apply id="S3.p1.1.m1.1.1.3.cmml" xref="S3.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.p1.1.m1.1.1.3.1.cmml" xref="S3.p1.1.m1.1.1.3">subscript</csymbol><ci id="S3.p1.1.m1.1.1.3.2.cmml" xref="S3.p1.1.m1.1.1.3.2">𝜃</ci><cn id="S3.p1.1.m1.1.1.3.3.cmml" type="integer" xref="S3.p1.1.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.1.m1.1c">\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.1.m1.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="\pi_{\theta_{2}}" class="ltx_Math" display="inline" id="S3.p1.2.m2.1"><semantics id="S3.p1.2.m2.1a"><msub id="S3.p1.2.m2.1.1" xref="S3.p1.2.m2.1.1.cmml"><mi id="S3.p1.2.m2.1.1.2" xref="S3.p1.2.m2.1.1.2.cmml">π</mi><msub id="S3.p1.2.m2.1.1.3" xref="S3.p1.2.m2.1.1.3.cmml"><mi id="S3.p1.2.m2.1.1.3.2" xref="S3.p1.2.m2.1.1.3.2.cmml">θ</mi><mn id="S3.p1.2.m2.1.1.3.3" xref="S3.p1.2.m2.1.1.3.3.cmml">2</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.p1.2.m2.1b"><apply id="S3.p1.2.m2.1.1.cmml" xref="S3.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.p1.2.m2.1.1.1.cmml" xref="S3.p1.2.m2.1.1">subscript</csymbol><ci id="S3.p1.2.m2.1.1.2.cmml" xref="S3.p1.2.m2.1.1.2">𝜋</ci><apply id="S3.p1.2.m2.1.1.3.cmml" xref="S3.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.p1.2.m2.1.1.3.1.cmml" xref="S3.p1.2.m2.1.1.3">subscript</csymbol><ci id="S3.p1.2.m2.1.1.3.2.cmml" xref="S3.p1.2.m2.1.1.3.2">𝜃</ci><cn id="S3.p1.2.m2.1.1.3.3.cmml" type="integer" xref="S3.p1.2.m2.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.2.m2.1c">\pi_{\theta_{2}}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.2.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, and <math alttext="\pi_{\theta_{3}}" class="ltx_Math" display="inline" id="S3.p1.3.m3.1"><semantics id="S3.p1.3.m3.1a"><msub id="S3.p1.3.m3.1.1" xref="S3.p1.3.m3.1.1.cmml"><mi id="S3.p1.3.m3.1.1.2" xref="S3.p1.3.m3.1.1.2.cmml">π</mi><msub id="S3.p1.3.m3.1.1.3" xref="S3.p1.3.m3.1.1.3.cmml"><mi id="S3.p1.3.m3.1.1.3.2" xref="S3.p1.3.m3.1.1.3.2.cmml">θ</mi><mn id="S3.p1.3.m3.1.1.3.3" xref="S3.p1.3.m3.1.1.3.3.cmml">3</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.p1.3.m3.1b"><apply id="S3.p1.3.m3.1.1.cmml" xref="S3.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.p1.3.m3.1.1.1.cmml" xref="S3.p1.3.m3.1.1">subscript</csymbol><ci id="S3.p1.3.m3.1.1.2.cmml" xref="S3.p1.3.m3.1.1.2">𝜋</ci><apply id="S3.p1.3.m3.1.1.3.cmml" xref="S3.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.p1.3.m3.1.1.3.1.cmml" xref="S3.p1.3.m3.1.1.3">subscript</csymbol><ci id="S3.p1.3.m3.1.1.3.2.cmml" xref="S3.p1.3.m3.1.1.3.2">𝜃</ci><cn id="S3.p1.3.m3.1.1.3.3.cmml" type="integer" xref="S3.p1.3.m3.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.3.m3.1c">\pi_{\theta_{3}}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.3.m3.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>.
We train these models with two phases: supervised fine-tuning (SFT), followed by reinforcement learning (RL) with two types of reward that are specifically tailored to improve chart generation performance. Initially, all three tasks undergo supervised fine-tuning.
Afterward, using PPO algorithm <cite class="ltx_cite ltx_citemacro_citep">(Schulman et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib34" title="">2017</a>)</cite>, we jointly optimize <math alttext="\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="S3.p1.4.m4.1"><semantics id="S3.p1.4.m4.1a"><msub id="S3.p1.4.m4.1.1" xref="S3.p1.4.m4.1.1.cmml"><mi id="S3.p1.4.m4.1.1.2" xref="S3.p1.4.m4.1.1.2.cmml">π</mi><msub id="S3.p1.4.m4.1.1.3" xref="S3.p1.4.m4.1.1.3.cmml"><mi id="S3.p1.4.m4.1.1.3.2" xref="S3.p1.4.m4.1.1.3.2.cmml">θ</mi><mn id="S3.p1.4.m4.1.1.3.3" xref="S3.p1.4.m4.1.1.3.3.cmml">1</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.p1.4.m4.1b"><apply id="S3.p1.4.m4.1.1.cmml" xref="S3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.cmml" xref="S3.p1.4.m4.1.1">subscript</csymbol><ci id="S3.p1.4.m4.1.1.2.cmml" xref="S3.p1.4.m4.1.1.2">𝜋</ci><apply id="S3.p1.4.m4.1.1.3.cmml" xref="S3.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.3.1.cmml" xref="S3.p1.4.m4.1.1.3">subscript</csymbol><ci id="S3.p1.4.m4.1.1.3.2.cmml" xref="S3.p1.4.m4.1.1.3.2">𝜃</ci><cn id="S3.p1.4.m4.1.1.3.3.cmml" type="integer" xref="S3.p1.4.m4.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.4.m4.1c">\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.4.m4.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> with the preference reward and <math alttext="\pi_{\theta_{3}}" class="ltx_Math" display="inline" id="S3.p1.5.m5.1"><semantics id="S3.p1.5.m5.1a"><msub id="S3.p1.5.m5.1.1" xref="S3.p1.5.m5.1.1.cmml"><mi id="S3.p1.5.m5.1.1.2" xref="S3.p1.5.m5.1.1.2.cmml">π</mi><msub id="S3.p1.5.m5.1.1.3" xref="S3.p1.5.m5.1.1.3.cmml"><mi id="S3.p1.5.m5.1.1.3.2" xref="S3.p1.5.m5.1.1.3.2.cmml">θ</mi><mn id="S3.p1.5.m5.1.1.3.3" xref="S3.p1.5.m5.1.1.3.3.cmml">3</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.p1.5.m5.1b"><apply id="S3.p1.5.m5.1.1.cmml" xref="S3.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.p1.5.m5.1.1.1.cmml" xref="S3.p1.5.m5.1.1">subscript</csymbol><ci id="S3.p1.5.m5.1.1.2.cmml" xref="S3.p1.5.m5.1.1.2">𝜋</ci><apply id="S3.p1.5.m5.1.1.3.cmml" xref="S3.p1.5.m5.1.1.3"><csymbol cd="ambiguous" id="S3.p1.5.m5.1.1.3.1.cmml" xref="S3.p1.5.m5.1.1.3">subscript</csymbol><ci id="S3.p1.5.m5.1.1.3.2.cmml" xref="S3.p1.5.m5.1.1.3.2">𝜃</ci><cn id="S3.p1.5.m5.1.1.3.3.cmml" type="integer" xref="S3.p1.5.m5.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.5.m5.1c">\pi_{\theta_{3}}</annotation><annotation encoding="application/x-llamapun" id="S3.p1.5.m5.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> with the alignment reward that ensures cycle consistency and coherence of outputs.
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#alg1" title="In 2.3 Analysis of Text2Chart31 Dataset ‣ 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Algorithm</span>&nbsp;<span class="ltx_text ltx_ref_tag">1</span></a> summarizes the overall procedure.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<section class="ltx_subsection" id="S3.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Supervised Fine-tuning</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S3.SS1.p1">
<p class="ltx_p" id="S3.SS1.p1.9">We perform supervised fine-tuning of <math alttext="\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="S3.SS1.p1.1.m1.1"><semantics id="S3.SS1.p1.1.m1.1a"><msub id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml"><mi id="S3.SS1.p1.1.m1.1.1.2" xref="S3.SS1.p1.1.m1.1.1.2.cmml">π</mi><msub id="S3.SS1.p1.1.m1.1.1.3" xref="S3.SS1.p1.1.m1.1.1.3.cmml"><mi id="S3.SS1.p1.1.m1.1.1.3.2" xref="S3.SS1.p1.1.m1.1.1.3.2.cmml">θ</mi><mn id="S3.SS1.p1.1.m1.1.1.3.3" xref="S3.SS1.p1.1.m1.1.1.3.3.cmml">1</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><apply id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p1.1.m1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.1.1.2">𝜋</ci><apply id="S3.SS1.p1.1.m1.1.1.3.cmml" xref="S3.SS1.p1.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.1.1.3.1.cmml" xref="S3.SS1.p1.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.1.m1.1.1.3.2.cmml" xref="S3.SS1.p1.1.m1.1.1.3.2">𝜃</ci><cn id="S3.SS1.p1.1.m1.1.1.3.3.cmml" type="integer" xref="S3.SS1.p1.1.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.1.m1.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, <math alttext="\pi_{\theta_{2}}" class="ltx_Math" display="inline" id="S3.SS1.p1.2.m2.1"><semantics id="S3.SS1.p1.2.m2.1a"><msub id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml"><mi id="S3.SS1.p1.2.m2.1.1.2" xref="S3.SS1.p1.2.m2.1.1.2.cmml">π</mi><msub id="S3.SS1.p1.2.m2.1.1.3" xref="S3.SS1.p1.2.m2.1.1.3.cmml"><mi id="S3.SS1.p1.2.m2.1.1.3.2" xref="S3.SS1.p1.2.m2.1.1.3.2.cmml">θ</mi><mn id="S3.SS1.p1.2.m2.1.1.3.3" xref="S3.SS1.p1.2.m2.1.1.3.3.cmml">2</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><apply id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.1.1.2">𝜋</ci><apply id="S3.SS1.p1.2.m2.1.1.3.cmml" xref="S3.SS1.p1.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.3.1.cmml" xref="S3.SS1.p1.2.m2.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.3.2.cmml" xref="S3.SS1.p1.2.m2.1.1.3.2">𝜃</ci><cn id="S3.SS1.p1.2.m2.1.1.3.3.cmml" type="integer" xref="S3.SS1.p1.2.m2.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">\pi_{\theta_{2}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.2.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>, and <math alttext="\pi_{\theta_{3}}" class="ltx_Math" display="inline" id="S3.SS1.p1.3.m3.1"><semantics id="S3.SS1.p1.3.m3.1a"><msub id="S3.SS1.p1.3.m3.1.1" xref="S3.SS1.p1.3.m3.1.1.cmml"><mi id="S3.SS1.p1.3.m3.1.1.2" xref="S3.SS1.p1.3.m3.1.1.2.cmml">π</mi><msub id="S3.SS1.p1.3.m3.1.1.3" xref="S3.SS1.p1.3.m3.1.1.3.cmml"><mi id="S3.SS1.p1.3.m3.1.1.3.2" xref="S3.SS1.p1.3.m3.1.1.3.2.cmml">θ</mi><mn id="S3.SS1.p1.3.m3.1.1.3.3" xref="S3.SS1.p1.3.m3.1.1.3.3.cmml">3</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.3.m3.1b"><apply id="S3.SS1.p1.3.m3.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.1.1.1.cmml" xref="S3.SS1.p1.3.m3.1.1">subscript</csymbol><ci id="S3.SS1.p1.3.m3.1.1.2.cmml" xref="S3.SS1.p1.3.m3.1.1.2">𝜋</ci><apply id="S3.SS1.p1.3.m3.1.1.3.cmml" xref="S3.SS1.p1.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.3.m3.1.1.3.1.cmml" xref="S3.SS1.p1.3.m3.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.3.m3.1.1.3.2.cmml" xref="S3.SS1.p1.3.m3.1.1.3.2">𝜃</ci><cn id="S3.SS1.p1.3.m3.1.1.3.3.cmml" type="integer" xref="S3.SS1.p1.3.m3.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.3.m3.1c">\pi_{\theta_{3}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.3.m3.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> using the cross-entropy loss with the Text2Chart31 dataset.
For Task 1, the model <math alttext="\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="S3.SS1.p1.4.m4.1"><semantics id="S3.SS1.p1.4.m4.1a"><msub id="S3.SS1.p1.4.m4.1.1" xref="S3.SS1.p1.4.m4.1.1.cmml"><mi id="S3.SS1.p1.4.m4.1.1.2" xref="S3.SS1.p1.4.m4.1.1.2.cmml">π</mi><msub id="S3.SS1.p1.4.m4.1.1.3" xref="S3.SS1.p1.4.m4.1.1.3.cmml"><mi id="S3.SS1.p1.4.m4.1.1.3.2" xref="S3.SS1.p1.4.m4.1.1.3.2.cmml">θ</mi><mn id="S3.SS1.p1.4.m4.1.1.3.3" xref="S3.SS1.p1.4.m4.1.1.3.3.cmml">1</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.4.m4.1b"><apply id="S3.SS1.p1.4.m4.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.1.1.1.cmml" xref="S3.SS1.p1.4.m4.1.1">subscript</csymbol><ci id="S3.SS1.p1.4.m4.1.1.2.cmml" xref="S3.SS1.p1.4.m4.1.1.2">𝜋</ci><apply id="S3.SS1.p1.4.m4.1.1.3.cmml" xref="S3.SS1.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.4.m4.1.1.3.1.cmml" xref="S3.SS1.p1.4.m4.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.4.m4.1.1.3.2.cmml" xref="S3.SS1.p1.4.m4.1.1.3.2">𝜃</ci><cn id="S3.SS1.p1.4.m4.1.1.3.3.cmml" type="integer" xref="S3.SS1.p1.4.m4.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.4.m4.1c">\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.4.m4.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> maximizes the probability of outputting the ground truth code for a given description by minimizing cross-entropy loss in the Line <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#algx1.l4" title="In Algorithm 1 ‣ 2.3 Analysis of Text2Chart31 Dataset ‣ 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">4</span></a> of <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#alg1" title="In 2.3 Analysis of Text2Chart31 Dataset ‣ 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Algorithm</span>&nbsp;<span class="ltx_text ltx_ref_tag">1</span></a>.
For Task 2, we design the model <math alttext="\pi_{\theta_{2}}" class="ltx_Math" display="inline" id="S3.SS1.p1.5.m5.1"><semantics id="S3.SS1.p1.5.m5.1a"><msub id="S3.SS1.p1.5.m5.1.1" xref="S3.SS1.p1.5.m5.1.1.cmml"><mi id="S3.SS1.p1.5.m5.1.1.2" xref="S3.SS1.p1.5.m5.1.1.2.cmml">π</mi><msub id="S3.SS1.p1.5.m5.1.1.3" xref="S3.SS1.p1.5.m5.1.1.3.cmml"><mi id="S3.SS1.p1.5.m5.1.1.3.2" xref="S3.SS1.p1.5.m5.1.1.3.2.cmml">θ</mi><mn id="S3.SS1.p1.5.m5.1.1.3.3" xref="S3.SS1.p1.5.m5.1.1.3.3.cmml">2</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.5.m5.1b"><apply id="S3.SS1.p1.5.m5.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.1.cmml" xref="S3.SS1.p1.5.m5.1.1">subscript</csymbol><ci id="S3.SS1.p1.5.m5.1.1.2.cmml" xref="S3.SS1.p1.5.m5.1.1.2">𝜋</ci><apply id="S3.SS1.p1.5.m5.1.1.3.cmml" xref="S3.SS1.p1.5.m5.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.5.m5.1.1.3.1.cmml" xref="S3.SS1.p1.5.m5.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.5.m5.1.1.3.2.cmml" xref="S3.SS1.p1.5.m5.1.1.3.2">𝜃</ci><cn id="S3.SS1.p1.5.m5.1.1.3.3.cmml" type="integer" xref="S3.SS1.p1.5.m5.1.1.3.3">2</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.5.m5.1c">\pi_{\theta_{2}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.5.m5.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 2 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> to generate descriptions from raw data in two stages.
First, the model generates a reasoning step <math alttext="r" class="ltx_Math" display="inline" id="S3.SS1.p1.6.m6.1"><semantics id="S3.SS1.p1.6.m6.1a"><mi id="S3.SS1.p1.6.m6.1.1" xref="S3.SS1.p1.6.m6.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.6.m6.1b"><ci id="S3.SS1.p1.6.m6.1.1.cmml" xref="S3.SS1.p1.6.m6.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.6.m6.1c">r</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.6.m6.1d">italic_r</annotation></semantics></math> from the raw data <math alttext="d" class="ltx_Math" display="inline" id="S3.SS1.p1.7.m7.1"><semantics id="S3.SS1.p1.7.m7.1a"><mi id="S3.SS1.p1.7.m7.1.1" xref="S3.SS1.p1.7.m7.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.7.m7.1b"><ci id="S3.SS1.p1.7.m7.1.1.cmml" xref="S3.SS1.p1.7.m7.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.7.m7.1c">d</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.7.m7.1d">italic_d</annotation></semantics></math>, which involves analyzing data characteristics and determining the appropriate plot type.
Then, the model is fine-tuned to generate the description <math alttext="x" class="ltx_Math" display="inline" id="S3.SS1.p1.8.m8.1"><semantics id="S3.SS1.p1.8.m8.1a"><mi id="S3.SS1.p1.8.m8.1.1" xref="S3.SS1.p1.8.m8.1.1.cmml">x</mi><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.8.m8.1b"><ci id="S3.SS1.p1.8.m8.1.1.cmml" xref="S3.SS1.p1.8.m8.1.1">𝑥</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.8.m8.1c">x</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.8.m8.1d">italic_x</annotation></semantics></math> using the data and the reasoning step as in the Line <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#algx1.l5" title="In Algorithm 1 ‣ 2.3 Analysis of Text2Chart31 Dataset ‣ 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">5</span></a>.
Lastly, we fine-tune the model <math alttext="\pi_{\theta_{3}}" class="ltx_Math" display="inline" id="S3.SS1.p1.9.m9.1"><semantics id="S3.SS1.p1.9.m9.1a"><msub id="S3.SS1.p1.9.m9.1.1" xref="S3.SS1.p1.9.m9.1.1.cmml"><mi id="S3.SS1.p1.9.m9.1.1.2" xref="S3.SS1.p1.9.m9.1.1.2.cmml">π</mi><msub id="S3.SS1.p1.9.m9.1.1.3" xref="S3.SS1.p1.9.m9.1.1.3.cmml"><mi id="S3.SS1.p1.9.m9.1.1.3.2" xref="S3.SS1.p1.9.m9.1.1.3.2.cmml">θ</mi><mn id="S3.SS1.p1.9.m9.1.1.3.3" xref="S3.SS1.p1.9.m9.1.1.3.3.cmml">3</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.9.m9.1b"><apply id="S3.SS1.p1.9.m9.1.1.cmml" xref="S3.SS1.p1.9.m9.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.9.m9.1.1.1.cmml" xref="S3.SS1.p1.9.m9.1.1">subscript</csymbol><ci id="S3.SS1.p1.9.m9.1.1.2.cmml" xref="S3.SS1.p1.9.m9.1.1.2">𝜋</ci><apply id="S3.SS1.p1.9.m9.1.1.3.cmml" xref="S3.SS1.p1.9.m9.1.1.3"><csymbol cd="ambiguous" id="S3.SS1.p1.9.m9.1.1.3.1.cmml" xref="S3.SS1.p1.9.m9.1.1.3">subscript</csymbol><ci id="S3.SS1.p1.9.m9.1.1.3.2.cmml" xref="S3.SS1.p1.9.m9.1.1.3.2">𝜃</ci><cn id="S3.SS1.p1.9.m9.1.1.3.3.cmml" type="integer" xref="S3.SS1.p1.9.m9.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.9.m9.1c">\pi_{\theta_{3}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS1.p1.9.m9.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> for Task 3 to maximize the probability of predicting the ground truth description for a given visualization code as in the Line <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#algx1.l6" title="In Algorithm 1 ‣ 2.3 Analysis of Text2Chart31 Dataset ‣ 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">6</span></a> of <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#alg1" title="In 2.3 Analysis of Text2Chart31 Dataset ‣ 2 Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Algorithm</span>&nbsp;<span class="ltx_text ltx_ref_tag">1</span></a>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
<section class="ltx_subsection" id="S3.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>RL via Automatic Feedback</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S3.SS2.p1">
<p class="ltx_p" id="S3.SS2.p1.1">We design two reward functions, which are the preference reward and the alignment reward, specifically tailored for the chart generation task.
It is worth noting that we remove human supervision during these processes and solely rely on automatic feedback.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S3.SS2.p2">
<p class="ltx_p" id="S3.SS2.p2.6"><span class="ltx_text ltx_font_bold" id="S3.SS2.p2.6.1">Preference reward</span>. We propose an automatic way of designing a preference dataset based on the output of the supervised fine-tuned model <math alttext="\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="S3.SS2.p2.1.m1.1"><semantics id="S3.SS2.p2.1.m1.1a"><msub id="S3.SS2.p2.1.m1.1.1" xref="S3.SS2.p2.1.m1.1.1.cmml"><mi id="S3.SS2.p2.1.m1.1.1.2" xref="S3.SS2.p2.1.m1.1.1.2.cmml">π</mi><msub id="S3.SS2.p2.1.m1.1.1.3" xref="S3.SS2.p2.1.m1.1.1.3.cmml"><mi id="S3.SS2.p2.1.m1.1.1.3.2" xref="S3.SS2.p2.1.m1.1.1.3.2.cmml">θ</mi><mn id="S3.SS2.p2.1.m1.1.1.3.3" xref="S3.SS2.p2.1.m1.1.1.3.3.cmml">1</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.1.m1.1b"><apply id="S3.SS2.p2.1.m1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.1.cmml" xref="S3.SS2.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p2.1.m1.1.1.2.cmml" xref="S3.SS2.p2.1.m1.1.1.2">𝜋</ci><apply id="S3.SS2.p2.1.m1.1.1.3.cmml" xref="S3.SS2.p2.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p2.1.m1.1.1.3.1.cmml" xref="S3.SS2.p2.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS2.p2.1.m1.1.1.3.2.cmml" xref="S3.SS2.p2.1.m1.1.1.3.2">𝜃</ci><cn id="S3.SS2.p2.1.m1.1.1.3.3.cmml" type="integer" xref="S3.SS2.p2.1.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.1.m1.1c">\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.1.m1.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math>.
We define preference dataset <math alttext="\mathcal{D}_{\mathrm{pref}}=(c^{+}_{i},c^{-}_{i})_{i=1}^{n}" class="ltx_Math" display="inline" id="S3.SS2.p2.2.m2.2"><semantics id="S3.SS2.p2.2.m2.2a"><mrow id="S3.SS2.p2.2.m2.2.2" xref="S3.SS2.p2.2.m2.2.2.cmml"><msub id="S3.SS2.p2.2.m2.2.2.4" xref="S3.SS2.p2.2.m2.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS2.p2.2.m2.2.2.4.2" xref="S3.SS2.p2.2.m2.2.2.4.2.cmml">𝒟</mi><mi id="S3.SS2.p2.2.m2.2.2.4.3" xref="S3.SS2.p2.2.m2.2.2.4.3.cmml">pref</mi></msub><mo id="S3.SS2.p2.2.m2.2.2.3" xref="S3.SS2.p2.2.m2.2.2.3.cmml">=</mo><msubsup id="S3.SS2.p2.2.m2.2.2.2" xref="S3.SS2.p2.2.m2.2.2.2.cmml"><mrow id="S3.SS2.p2.2.m2.2.2.2.2.2.2" xref="S3.SS2.p2.2.m2.2.2.2.2.2.3.cmml"><mo id="S3.SS2.p2.2.m2.2.2.2.2.2.2.3" stretchy="false" xref="S3.SS2.p2.2.m2.2.2.2.2.2.3.cmml">(</mo><msubsup id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.cmml"><mi id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.2" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.3" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.3.cmml">i</mi><mo id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.3" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.3.cmml">+</mo></msubsup><mo id="S3.SS2.p2.2.m2.2.2.2.2.2.2.4" xref="S3.SS2.p2.2.m2.2.2.2.2.2.3.cmml">,</mo><msubsup id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.cmml"><mi id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.2" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.2.cmml">c</mi><mi id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.3" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.3.cmml">i</mi><mo id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.3" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.3.cmml">−</mo></msubsup><mo id="S3.SS2.p2.2.m2.2.2.2.2.2.2.5" stretchy="false" xref="S3.SS2.p2.2.m2.2.2.2.2.2.3.cmml">)</mo></mrow><mrow id="S3.SS2.p2.2.m2.2.2.2.2.4" xref="S3.SS2.p2.2.m2.2.2.2.2.4.cmml"><mi id="S3.SS2.p2.2.m2.2.2.2.2.4.2" xref="S3.SS2.p2.2.m2.2.2.2.2.4.2.cmml">i</mi><mo id="S3.SS2.p2.2.m2.2.2.2.2.4.1" xref="S3.SS2.p2.2.m2.2.2.2.2.4.1.cmml">=</mo><mn id="S3.SS2.p2.2.m2.2.2.2.2.4.3" xref="S3.SS2.p2.2.m2.2.2.2.2.4.3.cmml">1</mn></mrow><mi id="S3.SS2.p2.2.m2.2.2.2.4" xref="S3.SS2.p2.2.m2.2.2.2.4.cmml">n</mi></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.2.m2.2b"><apply id="S3.SS2.p2.2.m2.2.2.cmml" xref="S3.SS2.p2.2.m2.2.2"><eq id="S3.SS2.p2.2.m2.2.2.3.cmml" xref="S3.SS2.p2.2.m2.2.2.3"></eq><apply id="S3.SS2.p2.2.m2.2.2.4.cmml" xref="S3.SS2.p2.2.m2.2.2.4"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.2.2.4.1.cmml" xref="S3.SS2.p2.2.m2.2.2.4">subscript</csymbol><ci id="S3.SS2.p2.2.m2.2.2.4.2.cmml" xref="S3.SS2.p2.2.m2.2.2.4.2">𝒟</ci><ci id="S3.SS2.p2.2.m2.2.2.4.3.cmml" xref="S3.SS2.p2.2.m2.2.2.4.3">pref</ci></apply><apply id="S3.SS2.p2.2.m2.2.2.2.cmml" xref="S3.SS2.p2.2.m2.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.2.2.2.3.cmml" xref="S3.SS2.p2.2.m2.2.2.2">superscript</csymbol><apply id="S3.SS2.p2.2.m2.2.2.2.2.cmml" xref="S3.SS2.p2.2.m2.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.2.2.2.2.3.cmml" xref="S3.SS2.p2.2.m2.2.2.2">subscript</csymbol><interval closure="open" id="S3.SS2.p2.2.m2.2.2.2.2.2.3.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2"><apply id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.1.cmml" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1">subscript</csymbol><apply id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.cmml" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.1.cmml" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.2.cmml" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.2">𝑐</ci><plus id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.3.cmml" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.2.3"></plus></apply><ci id="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.3.cmml" xref="S3.SS2.p2.2.m2.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.1.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2">subscript</csymbol><apply id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.1.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2">superscript</csymbol><ci id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.2.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.2">𝑐</ci><minus id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.3.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.2.3"></minus></apply><ci id="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.3.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.2.2.2.3">𝑖</ci></apply></interval><apply id="S3.SS2.p2.2.m2.2.2.2.2.4.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.4"><eq id="S3.SS2.p2.2.m2.2.2.2.2.4.1.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.4.1"></eq><ci id="S3.SS2.p2.2.m2.2.2.2.2.4.2.cmml" xref="S3.SS2.p2.2.m2.2.2.2.2.4.2">𝑖</ci><cn id="S3.SS2.p2.2.m2.2.2.2.2.4.3.cmml" type="integer" xref="S3.SS2.p2.2.m2.2.2.2.2.4.3">1</cn></apply></apply><ci id="S3.SS2.p2.2.m2.2.2.2.4.cmml" xref="S3.SS2.p2.2.m2.2.2.2.4">𝑛</ci></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.2.m2.2c">\mathcal{D}_{\mathrm{pref}}=(c^{+}_{i},c^{-}_{i})_{i=1}^{n}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.2.m2.2d">caligraphic_D start_POSTSUBSCRIPT roman_pref end_POSTSUBSCRIPT = ( italic_c start_POSTSUPERSCRIPT + end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT , italic_c start_POSTSUPERSCRIPT - end_POSTSUPERSCRIPT start_POSTSUBSCRIPT italic_i end_POSTSUBSCRIPT ) start_POSTSUBSCRIPT italic_i = 1 end_POSTSUBSCRIPT start_POSTSUPERSCRIPT italic_n end_POSTSUPERSCRIPT</annotation></semantics></math>, where a preferred code <math alttext="c^{+}" class="ltx_Math" display="inline" id="S3.SS2.p2.3.m3.1"><semantics id="S3.SS2.p2.3.m3.1a"><msup id="S3.SS2.p2.3.m3.1.1" xref="S3.SS2.p2.3.m3.1.1.cmml"><mi id="S3.SS2.p2.3.m3.1.1.2" xref="S3.SS2.p2.3.m3.1.1.2.cmml">c</mi><mo id="S3.SS2.p2.3.m3.1.1.3" xref="S3.SS2.p2.3.m3.1.1.3.cmml">+</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.3.m3.1b"><apply id="S3.SS2.p2.3.m3.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.3.m3.1.1.1.cmml" xref="S3.SS2.p2.3.m3.1.1">superscript</csymbol><ci id="S3.SS2.p2.3.m3.1.1.2.cmml" xref="S3.SS2.p2.3.m3.1.1.2">𝑐</ci><plus id="S3.SS2.p2.3.m3.1.1.3.cmml" xref="S3.SS2.p2.3.m3.1.1.3"></plus></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.3.m3.1c">c^{+}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.3.m3.1d">italic_c start_POSTSUPERSCRIPT + end_POSTSUPERSCRIPT</annotation></semantics></math> is the ground truth code, while a less preferred one <math alttext="c^{-}" class="ltx_Math" display="inline" id="S3.SS2.p2.4.m4.1"><semantics id="S3.SS2.p2.4.m4.1a"><msup id="S3.SS2.p2.4.m4.1.1" xref="S3.SS2.p2.4.m4.1.1.cmml"><mi id="S3.SS2.p2.4.m4.1.1.2" xref="S3.SS2.p2.4.m4.1.1.2.cmml">c</mi><mo id="S3.SS2.p2.4.m4.1.1.3" xref="S3.SS2.p2.4.m4.1.1.3.cmml">−</mo></msup><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.4.m4.1b"><apply id="S3.SS2.p2.4.m4.1.1.cmml" xref="S3.SS2.p2.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.4.m4.1.1.1.cmml" xref="S3.SS2.p2.4.m4.1.1">superscript</csymbol><ci id="S3.SS2.p2.4.m4.1.1.2.cmml" xref="S3.SS2.p2.4.m4.1.1.2">𝑐</ci><minus id="S3.SS2.p2.4.m4.1.1.3.cmml" xref="S3.SS2.p2.4.m4.1.1.3"></minus></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.4.m4.1c">c^{-}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.4.m4.1d">italic_c start_POSTSUPERSCRIPT - end_POSTSUPERSCRIPT</annotation></semantics></math> is a corresponding code output of SFT.
Afterward, we train a preference reward model <math alttext="R_{\phi}(c)" class="ltx_Math" display="inline" id="S3.SS2.p2.5.m5.1"><semantics id="S3.SS2.p2.5.m5.1a"><mrow id="S3.SS2.p2.5.m5.1.2" xref="S3.SS2.p2.5.m5.1.2.cmml"><msub id="S3.SS2.p2.5.m5.1.2.2" xref="S3.SS2.p2.5.m5.1.2.2.cmml"><mi id="S3.SS2.p2.5.m5.1.2.2.2" xref="S3.SS2.p2.5.m5.1.2.2.2.cmml">R</mi><mi id="S3.SS2.p2.5.m5.1.2.2.3" xref="S3.SS2.p2.5.m5.1.2.2.3.cmml">ϕ</mi></msub><mo id="S3.SS2.p2.5.m5.1.2.1" xref="S3.SS2.p2.5.m5.1.2.1.cmml">⁢</mo><mrow id="S3.SS2.p2.5.m5.1.2.3.2" xref="S3.SS2.p2.5.m5.1.2.cmml"><mo id="S3.SS2.p2.5.m5.1.2.3.2.1" stretchy="false" xref="S3.SS2.p2.5.m5.1.2.cmml">(</mo><mi id="S3.SS2.p2.5.m5.1.1" xref="S3.SS2.p2.5.m5.1.1.cmml">c</mi><mo id="S3.SS2.p2.5.m5.1.2.3.2.2" stretchy="false" xref="S3.SS2.p2.5.m5.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.5.m5.1b"><apply id="S3.SS2.p2.5.m5.1.2.cmml" xref="S3.SS2.p2.5.m5.1.2"><times id="S3.SS2.p2.5.m5.1.2.1.cmml" xref="S3.SS2.p2.5.m5.1.2.1"></times><apply id="S3.SS2.p2.5.m5.1.2.2.cmml" xref="S3.SS2.p2.5.m5.1.2.2"><csymbol cd="ambiguous" id="S3.SS2.p2.5.m5.1.2.2.1.cmml" xref="S3.SS2.p2.5.m5.1.2.2">subscript</csymbol><ci id="S3.SS2.p2.5.m5.1.2.2.2.cmml" xref="S3.SS2.p2.5.m5.1.2.2.2">𝑅</ci><ci id="S3.SS2.p2.5.m5.1.2.2.3.cmml" xref="S3.SS2.p2.5.m5.1.2.2.3">italic-ϕ</ci></apply><ci id="S3.SS2.p2.5.m5.1.1.cmml" xref="S3.SS2.p2.5.m5.1.1">𝑐</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.5.m5.1c">R_{\phi}(c)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.5.m5.1d">italic_R start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( italic_c )</annotation></semantics></math> following <cite class="ltx_cite ltx_citemacro_citet">Ouyang et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib30" title="">2022</a>)</cite> and employ this reward model to train <math alttext="\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="S3.SS2.p2.6.m6.1"><semantics id="S3.SS2.p2.6.m6.1a"><msub id="S3.SS2.p2.6.m6.1.1" xref="S3.SS2.p2.6.m6.1.1.cmml"><mi id="S3.SS2.p2.6.m6.1.1.2" xref="S3.SS2.p2.6.m6.1.1.2.cmml">π</mi><msub id="S3.SS2.p2.6.m6.1.1.3" xref="S3.SS2.p2.6.m6.1.1.3.cmml"><mi id="S3.SS2.p2.6.m6.1.1.3.2" xref="S3.SS2.p2.6.m6.1.1.3.2.cmml">θ</mi><mn id="S3.SS2.p2.6.m6.1.1.3.3" xref="S3.SS2.p2.6.m6.1.1.3.3.cmml">1</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p2.6.m6.1b"><apply id="S3.SS2.p2.6.m6.1.1.cmml" xref="S3.SS2.p2.6.m6.1.1"><csymbol cd="ambiguous" id="S3.SS2.p2.6.m6.1.1.1.cmml" xref="S3.SS2.p2.6.m6.1.1">subscript</csymbol><ci id="S3.SS2.p2.6.m6.1.1.2.cmml" xref="S3.SS2.p2.6.m6.1.1.2">𝜋</ci><apply id="S3.SS2.p2.6.m6.1.1.3.cmml" xref="S3.SS2.p2.6.m6.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p2.6.m6.1.1.3.1.cmml" xref="S3.SS2.p2.6.m6.1.1.3">subscript</csymbol><ci id="S3.SS2.p2.6.m6.1.1.3.2.cmml" xref="S3.SS2.p2.6.m6.1.1.3.2">𝜃</ci><cn id="S3.SS2.p2.6.m6.1.1.3.3.cmml" type="integer" xref="S3.SS2.p2.6.m6.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p2.6.m6.1c">\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p2.6.m6.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> via proximal policy optimization (PPO) algorithm <cite class="ltx_cite ltx_citemacro_citep">(Schulman et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib34" title="">2017</a>)</cite> as follows:</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A5.EGx1">
<tbody id="S3.Ex1"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\underset{\theta_{1}}{\mathrm{maximize}}\;" class="ltx_Math" display="inline" id="S3.Ex1.m1.1"><semantics id="S3.Ex1.m1.1a"><munder accentunder="true" id="S3.Ex1.m1.1.1" xref="S3.Ex1.m1.1.1.cmml"><mi id="S3.Ex1.m1.1.1.2" xref="S3.Ex1.m1.1.1.2.cmml">maximize</mi><msub id="S3.Ex1.m1.1.1.1" xref="S3.Ex1.m1.1.1.1.cmml"><mi id="S3.Ex1.m1.1.1.1.2" xref="S3.Ex1.m1.1.1.1.2.cmml">θ</mi><mn id="S3.Ex1.m1.1.1.1.3" xref="S3.Ex1.m1.1.1.1.3.cmml">1</mn></msub></munder><annotation-xml encoding="MathML-Content" id="S3.Ex1.m1.1b"><apply id="S3.Ex1.m1.1.1.cmml" xref="S3.Ex1.m1.1.1"><apply id="S3.Ex1.m1.1.1.1.cmml" xref="S3.Ex1.m1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex1.m1.1.1.1.1.cmml" xref="S3.Ex1.m1.1.1.1">subscript</csymbol><ci id="S3.Ex1.m1.1.1.1.2.cmml" xref="S3.Ex1.m1.1.1.1.2">𝜃</ci><cn id="S3.Ex1.m1.1.1.1.3.cmml" type="integer" xref="S3.Ex1.m1.1.1.1.3">1</cn></apply><ci id="S3.Ex1.m1.1.1.2.cmml" xref="S3.Ex1.m1.1.1.2">maximize</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex1.m1.1c">\displaystyle\underset{\theta_{1}}{\mathrm{maximize}}\;</annotation><annotation encoding="application/x-llamapun" id="S3.Ex1.m1.1d">start_UNDERACCENT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_UNDERACCENT start_ARG roman_maximize end_ARG</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\mathbb{E}_{\begin{subarray}{c}x\sim\mathcal{D},\,\hat{c}\sim\pi_%
{\theta_{1}}(\cdot|x)\end{subarray}}\biggr{(}R_{\phi}(\hat{c})\biggl{)}" class="ltx_math_unparsed" display="inline" id="S3.Ex1.m2.1"><semantics id="S3.Ex1.m2.1a"><mrow id="S3.Ex1.m2.1b"><msub id="S3.Ex1.m2.1.2"><mi id="S3.Ex1.m2.1.2.2">𝔼</mi><mtable id="S3.Ex1.m2.1.1.1.1.1.1"><mtr id="S3.Ex1.m2.1.1.1.1.1.1a"><mtd id="S3.Ex1.m2.1.1.1.1.1.1b"><mrow id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1"><mi id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.1">x</mi><mo id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.2">∼</mo><mi class="ltx_font_mathcaligraphic" id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.3">𝒟</mi><mo id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.4" rspace="0.337em">,</mo><mover accent="true" id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.5"><mi id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.5.2">c</mi><mo id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.5.1">^</mo></mover><mo id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.6">∼</mo><msub id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.7"><mi id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.7.2">π</mi><msub id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.7.3"><mi id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.7.3.2">θ</mi><mn id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.7.3.3">1</mn></msub></msub><mrow id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.8"><mo id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.8.1" stretchy="false">(</mo><mo id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.8.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.8.3" rspace="0.167em" stretchy="false">|</mo><mi id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.8.4">x</mi><mo id="S3.Ex1.m2.1.1.1.1.1.1.1.1.1.8.5" stretchy="false">)</mo></mrow></mrow></mtd></mtr></mtable></msub><mo id="S3.Ex1.m2.1.3" lspace="0em" mathsize="210%" rspace="0em">(</mo><mi id="S3.Ex1.m2.1.4">R</mi><msub id="S3.Ex1.m2.1.5"><mi id="S3.Ex1.m2.1.5a"></mi><mi id="S3.Ex1.m2.1.5.1">ϕ</mi></msub><mo id="S3.Ex1.m2.1.6" stretchy="false">(</mo><mover accent="true" id="S3.Ex1.m2.1.7"><mi id="S3.Ex1.m2.1.7.2">c</mi><mo id="S3.Ex1.m2.1.7.1">^</mo></mover><mo id="S3.Ex1.m2.1.8" stretchy="false">)</mo><mo id="S3.Ex1.m2.1.9" lspace="0em" mathsize="210%">)</mo></mrow><annotation encoding="application/x-tex" id="S3.Ex1.m2.1c">\displaystyle\mathbb{E}_{\begin{subarray}{c}x\sim\mathcal{D},\,\hat{c}\sim\pi_%
{\theta_{1}}(\cdot|x)\end{subarray}}\biggr{(}R_{\phi}(\hat{c})\biggl{)}</annotation><annotation encoding="application/x-llamapun" id="S3.Ex1.m2.1d">blackboard_E start_POSTSUBSCRIPT start_ARG start_ROW start_CELL italic_x ∼ caligraphic_D , over^ start_ARG italic_c end_ARG ∼ italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | italic_x ) end_CELL end_ROW end_ARG end_POSTSUBSCRIPT ( italic_R start_POSTSUBSCRIPT italic_ϕ end_POSTSUBSCRIPT ( over^ start_ARG italic_c end_ARG ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S3.Ex2"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle-\beta D_{\mathrm{KL}}(\pi_{\theta_{1}}\;\|\;\pi_{\theta_{\mathrm%
{sft1}}})." class="ltx_Math" display="inline" id="S3.Ex2.m1.1"><semantics id="S3.Ex2.m1.1a"><mrow id="S3.Ex2.m1.1.1.1" xref="S3.Ex2.m1.1.1.1.1.cmml"><mrow id="S3.Ex2.m1.1.1.1.1" xref="S3.Ex2.m1.1.1.1.1.cmml"><mo id="S3.Ex2.m1.1.1.1.1a" xref="S3.Ex2.m1.1.1.1.1.cmml">−</mo><mrow id="S3.Ex2.m1.1.1.1.1.1" xref="S3.Ex2.m1.1.1.1.1.1.cmml"><mi id="S3.Ex2.m1.1.1.1.1.1.3" xref="S3.Ex2.m1.1.1.1.1.1.3.cmml">β</mi><mo id="S3.Ex2.m1.1.1.1.1.1.2" xref="S3.Ex2.m1.1.1.1.1.1.2.cmml">⁢</mo><msub id="S3.Ex2.m1.1.1.1.1.1.4" xref="S3.Ex2.m1.1.1.1.1.1.4.cmml"><mi id="S3.Ex2.m1.1.1.1.1.1.4.2" xref="S3.Ex2.m1.1.1.1.1.1.4.2.cmml">D</mi><mi id="S3.Ex2.m1.1.1.1.1.1.4.3" xref="S3.Ex2.m1.1.1.1.1.1.4.3.cmml">KL</mi></msub><mo id="S3.Ex2.m1.1.1.1.1.1.2a" xref="S3.Ex2.m1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.Ex2.m1.1.1.1.1.1.1.1" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.cmml"><mo id="S3.Ex2.m1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.Ex2.m1.1.1.1.1.1.1.1.1" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.2" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.2.cmml">π</mi><msub id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.cmml"><mi id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.2" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.2.cmml">θ</mi><mn id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.3" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.3.cmml">1</mn></msub></msub><mo id="S3.Ex2.m1.1.1.1.1.1.1.1.1.1" rspace="0.558em" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.1.cmml">∥</mo><msub id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.2" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.2.cmml">π</mi><msub id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.cmml"><mi id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.2" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.2.cmml">θ</mi><mi id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.3" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.3.cmml">sft1</mi></msub></msub></mrow><mo id="S3.Ex2.m1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.Ex2.m1.1.1.1.2" lspace="0em" xref="S3.Ex2.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex2.m1.1b"><apply id="S3.Ex2.m1.1.1.1.1.cmml" xref="S3.Ex2.m1.1.1.1"><minus id="S3.Ex2.m1.1.1.1.1.2.cmml" xref="S3.Ex2.m1.1.1.1"></minus><apply id="S3.Ex2.m1.1.1.1.1.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1"><times id="S3.Ex2.m1.1.1.1.1.1.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.2"></times><ci id="S3.Ex2.m1.1.1.1.1.1.3.cmml" xref="S3.Ex2.m1.1.1.1.1.1.3">𝛽</ci><apply id="S3.Ex2.m1.1.1.1.1.1.4.cmml" xref="S3.Ex2.m1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.Ex2.m1.1.1.1.1.1.4.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.4">subscript</csymbol><ci id="S3.Ex2.m1.1.1.1.1.1.4.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.4.2">𝐷</ci><ci id="S3.Ex2.m1.1.1.1.1.1.4.3.cmml" xref="S3.Ex2.m1.1.1.1.1.1.4.3">KL</ci></apply><apply id="S3.Ex2.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.Ex2.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.2">𝜋</ci><apply id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3"><csymbol cd="ambiguous" id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3">subscript</csymbol><ci id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.2">𝜃</ci><cn id="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.3.cmml" type="integer" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.2.3.3">1</cn></apply></apply><apply id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.2">𝜋</ci><apply id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3">subscript</csymbol><ci id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.2.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.2">𝜃</ci><ci id="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S3.Ex2.m1.1.1.1.1.1.1.1.1.3.3.3">sft1</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex2.m1.1c">\displaystyle-\beta D_{\mathrm{KL}}(\pi_{\theta_{1}}\;\|\;\pi_{\theta_{\mathrm%
{sft1}}}).</annotation><annotation encoding="application/x-llamapun" id="S3.Ex2.m1.1d">- italic_β italic_D start_POSTSUBSCRIPT roman_KL end_POSTSUBSCRIPT ( italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ∥ italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT sft1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
<div class="ltx_para" id="S3.SS2.p3">
<p class="ltx_p" id="S3.SS2.p3.4"><span class="ltx_text ltx_font_bold" id="S3.SS2.p3.4.1">Alignment reward.</span> The alignment reward leverages cycle consistency between a chart’s description and code. First, <math alttext="\pi_{\theta_{1}}" class="ltx_Math" display="inline" id="S3.SS2.p3.1.m1.1"><semantics id="S3.SS2.p3.1.m1.1a"><msub id="S3.SS2.p3.1.m1.1.1" xref="S3.SS2.p3.1.m1.1.1.cmml"><mi id="S3.SS2.p3.1.m1.1.1.2" xref="S3.SS2.p3.1.m1.1.1.2.cmml">π</mi><msub id="S3.SS2.p3.1.m1.1.1.3" xref="S3.SS2.p3.1.m1.1.1.3.cmml"><mi id="S3.SS2.p3.1.m1.1.1.3.2" xref="S3.SS2.p3.1.m1.1.1.3.2.cmml">θ</mi><mn id="S3.SS2.p3.1.m1.1.1.3.3" xref="S3.SS2.p3.1.m1.1.1.3.3.cmml">1</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.1.m1.1b"><apply id="S3.SS2.p3.1.m1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.1.m1.1.1.1.cmml" xref="S3.SS2.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS2.p3.1.m1.1.1.2.cmml" xref="S3.SS2.p3.1.m1.1.1.2">𝜋</ci><apply id="S3.SS2.p3.1.m1.1.1.3.cmml" xref="S3.SS2.p3.1.m1.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p3.1.m1.1.1.3.1.cmml" xref="S3.SS2.p3.1.m1.1.1.3">subscript</csymbol><ci id="S3.SS2.p3.1.m1.1.1.3.2.cmml" xref="S3.SS2.p3.1.m1.1.1.3.2">𝜃</ci><cn id="S3.SS2.p3.1.m1.1.1.3.3.cmml" type="integer" xref="S3.SS2.p3.1.m1.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.1.m1.1c">\pi_{\theta_{1}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.1.m1.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> generates a code from the original description, then <math alttext="\pi_{\theta_{3}}" class="ltx_Math" display="inline" id="S3.SS2.p3.2.m2.1"><semantics id="S3.SS2.p3.2.m2.1a"><msub id="S3.SS2.p3.2.m2.1.1" xref="S3.SS2.p3.2.m2.1.1.cmml"><mi id="S3.SS2.p3.2.m2.1.1.2" xref="S3.SS2.p3.2.m2.1.1.2.cmml">π</mi><msub id="S3.SS2.p3.2.m2.1.1.3" xref="S3.SS2.p3.2.m2.1.1.3.cmml"><mi id="S3.SS2.p3.2.m2.1.1.3.2" xref="S3.SS2.p3.2.m2.1.1.3.2.cmml">θ</mi><mn id="S3.SS2.p3.2.m2.1.1.3.3" xref="S3.SS2.p3.2.m2.1.1.3.3.cmml">3</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.2.m2.1b"><apply id="S3.SS2.p3.2.m2.1.1.cmml" xref="S3.SS2.p3.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.2.m2.1.1.1.cmml" xref="S3.SS2.p3.2.m2.1.1">subscript</csymbol><ci id="S3.SS2.p3.2.m2.1.1.2.cmml" xref="S3.SS2.p3.2.m2.1.1.2">𝜋</ci><apply id="S3.SS2.p3.2.m2.1.1.3.cmml" xref="S3.SS2.p3.2.m2.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p3.2.m2.1.1.3.1.cmml" xref="S3.SS2.p3.2.m2.1.1.3">subscript</csymbol><ci id="S3.SS2.p3.2.m2.1.1.3.2.cmml" xref="S3.SS2.p3.2.m2.1.1.3.2">𝜃</ci><cn id="S3.SS2.p3.2.m2.1.1.3.3.cmml" type="integer" xref="S3.SS2.p3.2.m2.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.2.m2.1c">\pi_{\theta_{3}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.2.m2.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> uses this code to produce a regenerated description. The alignment reward is defined as the similarity between the original and regenerated descriptions, measured by BertScore <cite class="ltx_cite ltx_citemacro_citep">(Zhang et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib43" title="">2020</a>; Black et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib6" title="">2024</a>)</cite>.
We optimize <math alttext="\pi_{\theta_{3}}" class="ltx_Math" display="inline" id="S3.SS2.p3.3.m3.1"><semantics id="S3.SS2.p3.3.m3.1a"><msub id="S3.SS2.p3.3.m3.1.1" xref="S3.SS2.p3.3.m3.1.1.cmml"><mi id="S3.SS2.p3.3.m3.1.1.2" xref="S3.SS2.p3.3.m3.1.1.2.cmml">π</mi><msub id="S3.SS2.p3.3.m3.1.1.3" xref="S3.SS2.p3.3.m3.1.1.3.cmml"><mi id="S3.SS2.p3.3.m3.1.1.3.2" xref="S3.SS2.p3.3.m3.1.1.3.2.cmml">θ</mi><mn id="S3.SS2.p3.3.m3.1.1.3.3" xref="S3.SS2.p3.3.m3.1.1.3.3.cmml">3</mn></msub></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.3.m3.1b"><apply id="S3.SS2.p3.3.m3.1.1.cmml" xref="S3.SS2.p3.3.m3.1.1"><csymbol cd="ambiguous" id="S3.SS2.p3.3.m3.1.1.1.cmml" xref="S3.SS2.p3.3.m3.1.1">subscript</csymbol><ci id="S3.SS2.p3.3.m3.1.1.2.cmml" xref="S3.SS2.p3.3.m3.1.1.2">𝜋</ci><apply id="S3.SS2.p3.3.m3.1.1.3.cmml" xref="S3.SS2.p3.3.m3.1.1.3"><csymbol cd="ambiguous" id="S3.SS2.p3.3.m3.1.1.3.1.cmml" xref="S3.SS2.p3.3.m3.1.1.3">subscript</csymbol><ci id="S3.SS2.p3.3.m3.1.1.3.2.cmml" xref="S3.SS2.p3.3.m3.1.1.3.2">𝜃</ci><cn id="S3.SS2.p3.3.m3.1.1.3.3.cmml" type="integer" xref="S3.SS2.p3.3.m3.1.1.3.3">3</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.3.m3.1c">\pi_{\theta_{3}}</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.3.m3.1d">italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT</annotation></semantics></math> via maximizing the alignment reward <math alttext="R(\cdot,\cdot)" class="ltx_Math" display="inline" id="S3.SS2.p3.4.m4.2"><semantics id="S3.SS2.p3.4.m4.2a"><mrow id="S3.SS2.p3.4.m4.2.3" xref="S3.SS2.p3.4.m4.2.3.cmml"><mi id="S3.SS2.p3.4.m4.2.3.2" xref="S3.SS2.p3.4.m4.2.3.2.cmml">R</mi><mo id="S3.SS2.p3.4.m4.2.3.1" xref="S3.SS2.p3.4.m4.2.3.1.cmml">⁢</mo><mrow id="S3.SS2.p3.4.m4.2.3.3.2" xref="S3.SS2.p3.4.m4.2.3.3.1.cmml"><mo id="S3.SS2.p3.4.m4.2.3.3.2.1" stretchy="false" xref="S3.SS2.p3.4.m4.2.3.3.1.cmml">(</mo><mo id="S3.SS2.p3.4.m4.1.1" lspace="0em" rspace="0em" xref="S3.SS2.p3.4.m4.1.1.cmml">⋅</mo><mo id="S3.SS2.p3.4.m4.2.3.3.2.2" rspace="0em" xref="S3.SS2.p3.4.m4.2.3.3.1.cmml">,</mo><mo id="S3.SS2.p3.4.m4.2.2" lspace="0em" rspace="0em" xref="S3.SS2.p3.4.m4.2.2.cmml">⋅</mo><mo id="S3.SS2.p3.4.m4.2.3.3.2.3" stretchy="false" xref="S3.SS2.p3.4.m4.2.3.3.1.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS2.p3.4.m4.2b"><apply id="S3.SS2.p3.4.m4.2.3.cmml" xref="S3.SS2.p3.4.m4.2.3"><times id="S3.SS2.p3.4.m4.2.3.1.cmml" xref="S3.SS2.p3.4.m4.2.3.1"></times><ci id="S3.SS2.p3.4.m4.2.3.2.cmml" xref="S3.SS2.p3.4.m4.2.3.2">𝑅</ci><interval closure="open" id="S3.SS2.p3.4.m4.2.3.3.1.cmml" xref="S3.SS2.p3.4.m4.2.3.3.2"><ci id="S3.SS2.p3.4.m4.1.1.cmml" xref="S3.SS2.p3.4.m4.1.1">⋅</ci><ci id="S3.SS2.p3.4.m4.2.2.cmml" xref="S3.SS2.p3.4.m4.2.2">⋅</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p3.4.m4.2c">R(\cdot,\cdot)</annotation><annotation encoding="application/x-llamapun" id="S3.SS2.p3.4.m4.2d">italic_R ( ⋅ , ⋅ )</annotation></semantics></math> using PPO algorithm as follows:</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<table class="ltx_equationgroup ltx_eqn_align ltx_eqn_table" id="A5.EGx2">
<tbody id="S3.Ex3"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math alttext="\displaystyle\underset{\theta_{3}}{\mathrm{maximize}}\;" class="ltx_Math" display="inline" id="S3.Ex3.m1.1"><semantics id="S3.Ex3.m1.1a"><munder accentunder="true" id="S3.Ex3.m1.1.1" xref="S3.Ex3.m1.1.1.cmml"><mi id="S3.Ex3.m1.1.1.2" xref="S3.Ex3.m1.1.1.2.cmml">maximize</mi><msub id="S3.Ex3.m1.1.1.1" xref="S3.Ex3.m1.1.1.1.cmml"><mi id="S3.Ex3.m1.1.1.1.2" xref="S3.Ex3.m1.1.1.1.2.cmml">θ</mi><mn id="S3.Ex3.m1.1.1.1.3" xref="S3.Ex3.m1.1.1.1.3.cmml">3</mn></msub></munder><annotation-xml encoding="MathML-Content" id="S3.Ex3.m1.1b"><apply id="S3.Ex3.m1.1.1.cmml" xref="S3.Ex3.m1.1.1"><apply id="S3.Ex3.m1.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1"><csymbol cd="ambiguous" id="S3.Ex3.m1.1.1.1.1.cmml" xref="S3.Ex3.m1.1.1.1">subscript</csymbol><ci id="S3.Ex3.m1.1.1.1.2.cmml" xref="S3.Ex3.m1.1.1.1.2">𝜃</ci><cn id="S3.Ex3.m1.1.1.1.3.cmml" type="integer" xref="S3.Ex3.m1.1.1.1.3">3</cn></apply><ci id="S3.Ex3.m1.1.1.2.cmml" xref="S3.Ex3.m1.1.1.2">maximize</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex3.m1.1c">\displaystyle\underset{\theta_{3}}{\mathrm{maximize}}\;</annotation><annotation encoding="application/x-llamapun" id="S3.Ex3.m1.1d">start_UNDERACCENT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_UNDERACCENT start_ARG roman_maximize end_ARG</annotation></semantics></math></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle\mathbb{E}_{\begin{subarray}{c}x\sim\mathcal{D},\,\hat{c}\sim\pi_%
{\theta_{1}}(\cdot|x),\,\hat{x}\sim\pi_{\theta_{3}}(\cdot|\hat{c})\end{%
subarray}}\biggr{(}R(x,\hat{x})\biggl{)}" class="ltx_math_unparsed" display="inline" id="S3.Ex3.m2.1"><semantics id="S3.Ex3.m2.1a"><mrow id="S3.Ex3.m2.1b"><msub id="S3.Ex3.m2.1.2"><mi id="S3.Ex3.m2.1.2.2">𝔼</mi><mtable id="S3.Ex3.m2.1.1.1.1.1.1"><mtr id="S3.Ex3.m2.1.1.1.1.1.1a"><mtd id="S3.Ex3.m2.1.1.1.1.1.1b"><mrow id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1"><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.1">x</mi><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.2">∼</mo><mi class="ltx_font_mathcaligraphic" id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.3">𝒟</mi><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.4" rspace="0.337em">,</mo><mover accent="true" id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.5"><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.5.2">c</mi><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.5.1">^</mo></mover><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.6">∼</mo><msub id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.7"><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.7.2">π</mi><msub id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.7.3"><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.7.3.2">θ</mi><mn id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.7.3.3">1</mn></msub></msub><mrow id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.8"><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.8.1" stretchy="false">(</mo><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.8.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.8.3" rspace="0.167em" stretchy="false">|</mo><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.8.4">x</mi><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.8.5" stretchy="false">)</mo></mrow><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.9" rspace="0.337em">,</mo><mover accent="true" id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.10"><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.10.2">x</mi><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.10.1">^</mo></mover><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.11">∼</mo><msub id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.12"><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.12.2">π</mi><msub id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.12.3"><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.12.3.2">θ</mi><mn id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.12.3.3">3</mn></msub></msub><mrow id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.13"><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.13.1" stretchy="false">(</mo><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.13.2" lspace="0em" rspace="0em">⋅</mo><mo fence="false" id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.13.3" rspace="0.167em" stretchy="false">|</mo><mover accent="true" id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.13.4"><mi id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.13.4.2">c</mi><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.13.4.1">^</mo></mover><mo id="S3.Ex3.m2.1.1.1.1.1.1.1.1.1.13.5" stretchy="false">)</mo></mrow></mrow></mtd></mtr></mtable></msub><mo id="S3.Ex3.m2.1.3" lspace="0em" mathsize="210%" rspace="0em">(</mo><mi id="S3.Ex3.m2.1.4">R</mi><mo id="S3.Ex3.m2.1.5" stretchy="false">(</mo><mi id="S3.Ex3.m2.1.6">x</mi><mo id="S3.Ex3.m2.1.7">,</mo><mover accent="true" id="S3.Ex3.m2.1.8"><mi id="S3.Ex3.m2.1.8.2">x</mi><mo id="S3.Ex3.m2.1.8.1">^</mo></mover><mo id="S3.Ex3.m2.1.9" stretchy="false">)</mo><mo id="S3.Ex3.m2.1.10" lspace="0em" mathsize="210%">)</mo></mrow><annotation encoding="application/x-tex" id="S3.Ex3.m2.1c">\displaystyle\mathbb{E}_{\begin{subarray}{c}x\sim\mathcal{D},\,\hat{c}\sim\pi_%
{\theta_{1}}(\cdot|x),\,\hat{x}\sim\pi_{\theta_{3}}(\cdot|\hat{c})\end{%
subarray}}\biggr{(}R(x,\hat{x})\biggl{)}</annotation><annotation encoding="application/x-llamapun" id="S3.Ex3.m2.1d">blackboard_E start_POSTSUBSCRIPT start_ARG start_ROW start_CELL italic_x ∼ caligraphic_D , over^ start_ARG italic_c end_ARG ∼ italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 1 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | italic_x ) , over^ start_ARG italic_x end_ARG ∼ italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ( ⋅ | over^ start_ARG italic_c end_ARG ) end_CELL end_ROW end_ARG end_POSTSUBSCRIPT ( italic_R ( italic_x , over^ start_ARG italic_x end_ARG ) )</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
<tbody id="S3.Ex4"><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_eqn_cell"></td>
<td class="ltx_td ltx_align_left ltx_eqn_cell"><math alttext="\displaystyle-\beta D_{\mathrm{KL}}(\pi_{\theta_{3}}\;\|\;\pi_{\theta_{\mathrm%
{sft3}}})." class="ltx_Math" display="inline" id="S3.Ex4.m1.1"><semantics id="S3.Ex4.m1.1a"><mrow id="S3.Ex4.m1.1.1.1" xref="S3.Ex4.m1.1.1.1.1.cmml"><mrow id="S3.Ex4.m1.1.1.1.1" xref="S3.Ex4.m1.1.1.1.1.cmml"><mo id="S3.Ex4.m1.1.1.1.1a" xref="S3.Ex4.m1.1.1.1.1.cmml">−</mo><mrow id="S3.Ex4.m1.1.1.1.1.1" xref="S3.Ex4.m1.1.1.1.1.1.cmml"><mi id="S3.Ex4.m1.1.1.1.1.1.3" xref="S3.Ex4.m1.1.1.1.1.1.3.cmml">β</mi><mo id="S3.Ex4.m1.1.1.1.1.1.2" xref="S3.Ex4.m1.1.1.1.1.1.2.cmml">⁢</mo><msub id="S3.Ex4.m1.1.1.1.1.1.4" xref="S3.Ex4.m1.1.1.1.1.1.4.cmml"><mi id="S3.Ex4.m1.1.1.1.1.1.4.2" xref="S3.Ex4.m1.1.1.1.1.1.4.2.cmml">D</mi><mi id="S3.Ex4.m1.1.1.1.1.1.4.3" xref="S3.Ex4.m1.1.1.1.1.1.4.3.cmml">KL</mi></msub><mo id="S3.Ex4.m1.1.1.1.1.1.2a" xref="S3.Ex4.m1.1.1.1.1.1.2.cmml">⁢</mo><mrow id="S3.Ex4.m1.1.1.1.1.1.1.1" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.cmml"><mo id="S3.Ex4.m1.1.1.1.1.1.1.1.2" stretchy="false" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.Ex4.m1.1.1.1.1.1.1.1.1" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.cmml"><msub id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.cmml"><mi id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.2" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.2.cmml">π</mi><msub id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.cmml"><mi id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.2" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.2.cmml">θ</mi><mn id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.3" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.3.cmml">3</mn></msub></msub><mo id="S3.Ex4.m1.1.1.1.1.1.1.1.1.1" rspace="0.558em" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.1.cmml">∥</mo><msub id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.cmml"><mi id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.2" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.2.cmml">π</mi><msub id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.cmml"><mi id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.2" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.2.cmml">θ</mi><mi id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.3" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.3.cmml">sft3</mi></msub></msub></mrow><mo id="S3.Ex4.m1.1.1.1.1.1.1.1.3" stretchy="false" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow><mo id="S3.Ex4.m1.1.1.1.2" lspace="0em" xref="S3.Ex4.m1.1.1.1.1.cmml">.</mo></mrow><annotation-xml encoding="MathML-Content" id="S3.Ex4.m1.1b"><apply id="S3.Ex4.m1.1.1.1.1.cmml" xref="S3.Ex4.m1.1.1.1"><minus id="S3.Ex4.m1.1.1.1.1.2.cmml" xref="S3.Ex4.m1.1.1.1"></minus><apply id="S3.Ex4.m1.1.1.1.1.1.cmml" xref="S3.Ex4.m1.1.1.1.1.1"><times id="S3.Ex4.m1.1.1.1.1.1.2.cmml" xref="S3.Ex4.m1.1.1.1.1.1.2"></times><ci id="S3.Ex4.m1.1.1.1.1.1.3.cmml" xref="S3.Ex4.m1.1.1.1.1.1.3">𝛽</ci><apply id="S3.Ex4.m1.1.1.1.1.1.4.cmml" xref="S3.Ex4.m1.1.1.1.1.1.4"><csymbol cd="ambiguous" id="S3.Ex4.m1.1.1.1.1.1.4.1.cmml" xref="S3.Ex4.m1.1.1.1.1.1.4">subscript</csymbol><ci id="S3.Ex4.m1.1.1.1.1.1.4.2.cmml" xref="S3.Ex4.m1.1.1.1.1.1.4.2">𝐷</ci><ci id="S3.Ex4.m1.1.1.1.1.1.4.3.cmml" xref="S3.Ex4.m1.1.1.1.1.1.4.3">KL</ci></apply><apply id="S3.Ex4.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1"><csymbol cd="latexml" id="S3.Ex4.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.1">conditional</csymbol><apply id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2"><csymbol cd="ambiguous" id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2">subscript</csymbol><ci id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.2">𝜋</ci><apply id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3"><csymbol cd="ambiguous" id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.1.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3">subscript</csymbol><ci id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.2.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.2">𝜃</ci><cn id="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.3.cmml" type="integer" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.2.3.3">3</cn></apply></apply><apply id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.1.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.2.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.2">𝜋</ci><apply id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3"><csymbol cd="ambiguous" id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.1.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3">subscript</csymbol><ci id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.2.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.2">𝜃</ci><ci id="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.3.cmml" xref="S3.Ex4.m1.1.1.1.1.1.1.1.1.3.3.3">sft3</ci></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.Ex4.m1.1c">\displaystyle-\beta D_{\mathrm{KL}}(\pi_{\theta_{3}}\;\|\;\pi_{\theta_{\mathrm%
{sft3}}}).</annotation><annotation encoding="application/x-llamapun" id="S3.Ex4.m1.1d">- italic_β italic_D start_POSTSUBSCRIPT roman_KL end_POSTSUBSCRIPT ( italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT 3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ∥ italic_π start_POSTSUBSCRIPT italic_θ start_POSTSUBSCRIPT sft3 end_POSTSUBSCRIPT end_POSTSUBSCRIPT ) .</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
</tr></tbody>
</table>
</div>
</section>
</section>
<section class="ltx_section" id="S4">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Experiments</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S4.p1">
<p class="ltx_p" id="S4.p1.1"><span class="ltx_text ltx_font_bold" id="S4.p1.1.1">Baselines.</span>
For the evaluation of the three target tasks, we compare with the state-of-the-art open-source baseline models as follows: (i) Description-to-Chart: Code Llama Instruct <cite class="ltx_cite ltx_citemacro_citep">(Rozière et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib32" title="">2024</a>)</cite>, Llama 3 Instruct <cite class="ltx_cite ltx_citemacro_citep">(Meta AI, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib25" title="">2024</a>)</cite>, StarCoder <cite class="ltx_cite ltx_citemacro_citep">(Li et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib19" title="">2023</a>)</cite>, and Instruct CodeGen <cite class="ltx_cite ltx_citemacro_citep">(Nijkamp et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib27" title="">2023</a>)</cite>, (ii) Raw Data-to-Description: Llama 2 Chat <cite class="ltx_cite ltx_citemacro_citep">(Touvron et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib36" title="">2023</a>)</cite> and Llama 3 Instruct model, and (iii) Code-to-Description: Code Llama, Llama 2 Chat, and Llama 3 Instruct models.
We also compare with proprietary models including GPT-3.5-turbo <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib30" title="">2022</a>)</cite>, GPT-4-0613, GPT-4-turbo-2024-04-09 <cite class="ltx_cite ltx_citemacro_citep">(OpenAI, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib28" title="">2023</a>)</cite>, GPT-4o-2024-05-13 <cite class="ltx_cite ltx_citemacro_citep">(OpenAI, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib29" title="">2024</a>)</cite>, and Claude 3 Opus <cite class="ltx_cite ltx_citemacro_citep">(Anthropic, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib1" title="">2024</a>)</cite>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S4.p2">
<p class="ltx_p" id="S4.p2.1"><span class="ltx_text ltx_font_bold" id="S4.p2.1.1">Evaluation metrics.</span>
For the three target tasks, we report the following evaluation measures.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S4.p3">
<p class="ltx_p" id="S4.p3.1">(i) Description-to-Chart: We report the total error ratio and plot-type error ratio. The total error ratio indicates the percentage of code executions that result in errors. We categorize and report plot-type errors based on Matplotlib classifications.
We further evaluate the similarity between the predicted code and the ground truth (GT) code by reporting the METEOR <cite class="ltx_cite ltx_citemacro_citep">(Banerjee and Lavie, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib5" title="">2005</a>)</cite> and CodeBLEU metrics <cite class="ltx_cite ltx_citemacro_citep">(Ren et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib31" title="">2020</a>)</cite>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S4.p4">
<p class="ltx_p" id="S4.p4.1">(ii) Raw Data-to-Description:
We report the Jaccard similarity and the Hit Rate. The former measures the intersection ratio between the recommended plot list derived from generated reasoning steps and the GT reasoning steps. The latter is the percentage of recommended lists containing the GT plot type.
To evaluate the quality of the generated descriptions, we first use these descriptions to generate code with both the SFT Llama3 Instruct-8B model and the GPT-3.5-turbo, and then calculate the error ratio for the generated codes. Additionally, we report ROUGE-L and BertScore metrics to assess the similarity between the generated descriptions and the GT descriptions.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S4.p5">
<p class="ltx_p" id="S4.p5.1">(iii) Code-to-Description: We measure ROUGE-1/2/L and BertScore to evaluate the similarity between the generated descriptions and the GTs. Lastly, as done for Task 2, we generate the code by giving the predicted descriptions to the GPT-3.5-turbo and report the error ratio.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_table" id="S4.T2">
<p class="ltx_p ltx_align_center" id="S4.T2.4"><span class="ltx_text" id="S4.T2.4.4">
<span class="ltx_inline-block ltx_transformed_outer" id="S4.T2.4.4.4" style="width:502.8pt;height:343pt;vertical-align:-1.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="S4.T2.4.4.4.4"><span class="ltx_text" id="S4.T2.4.4.4.4.4">
<span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T2.4.4.4.4.4.4">
<span class="ltx_tbody">
<span class="ltx_tr" id="S4.T2.2.2.2.2.2.2.2">
<span class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="S4.T2.2.2.2.2.2.2.2.3"></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_5" id="S4.T2.1.1.1.1.1.1.1.1">Error ratio (%) <math alttext="\downarrow" class="ltx_Math" display="inline" id="S4.T2.1.1.1.1.1.1.1.1.m1.1"><semantics id="S4.T2.1.1.1.1.1.1.1.1.m1.1a"><mo id="S4.T2.1.1.1.1.1.1.1.1.m1.1.1" stretchy="false" xref="S4.T2.1.1.1.1.1.1.1.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S4.T2.1.1.1.1.1.1.1.1.m1.1b"><ci id="S4.T2.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S4.T2.1.1.1.1.1.1.1.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.1.1.1.1.1.1.1.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S4.T2.1.1.1.1.1.1.1.1.m1.1d">↓</annotation></semantics></math></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S4.T2.2.2.2.2.2.2.2.2">Code similarity <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T2.2.2.2.2.2.2.2.2.m1.1"><semantics id="S4.T2.2.2.2.2.2.2.2.2.m1.1a"><mo id="S4.T2.2.2.2.2.2.2.2.2.m1.1.1" stretchy="false" xref="S4.T2.2.2.2.2.2.2.2.2.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S4.T2.2.2.2.2.2.2.2.2.m1.1b"><ci id="S4.T2.2.2.2.2.2.2.2.2.m1.1.1.cmml" xref="S4.T2.2.2.2.2.2.2.2.2.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.2.2.2.2.2.2.2.2.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S4.T2.2.2.2.2.2.2.2.2.m1.1d">↑</annotation></semantics></math></span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.5.1">
<span class="ltx_td ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.5.1.1"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.5.1.2"></span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.5.1.3">Statistical</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.5.1.4">(Irregularly)</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.5.1.5">3D &amp;</span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.5.1.6"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.5.1.7"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.5.1.8"></span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.6.2">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.6.2.1">Model</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.6.2.2">Pairwise</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.6.2.3">distribution</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.6.2.4">gridded</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.6.2.5">Volumetric</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.6.2.6">Total</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.6.2.7">METEOR</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.6.2.8">CodeBLEU</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.7.3">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T2.4.4.4.4.4.4.7.3.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.T2.4.4.4.4.4.4.7.3.1.1">Open-source</span></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.7.3.2"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.7.3.3"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.7.3.4"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.7.3.5"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.7.3.6"></span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.8.4">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.4.4.4.4.4.4.8.4.1">CLI-7B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.8.4.2">22.67</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.8.4.3">29.42</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.8.4.4">77.94</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.8.4.5">52.20</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.8.4.6">41.32</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.8.4.7">0.485</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.8.4.8">0.402</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.9.5">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.9.5.1">L3I-8B</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.9.5.2">20.76</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.9.5.3">28.98</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.9.5.4">66.76</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.9.5.5">34.59</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.9.5.6">35.91</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.9.5.7">0.519</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.9.5.8">0.437</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.10.6">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.10.6.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.10.6.1.1">[SFT]</span> L3I-8B</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.10.6.2">19.07</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.10.6.3">13.27</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.10.6.4"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.10.6.4.1">13.53</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.10.6.5"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.10.6.5.1">20.75</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.10.6.6">16.09</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.10.6.7">0.562</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.10.6.8"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.10.6.8.1">0.464</span></span></span>
<span class="ltx_tr" id="S4.T2.3.3.3.3.3.3.3">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.3.3.3.3.3.3.3.1"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.3.3.3.3.3.1.1">[SFT+<math alttext="\text{RL}_{\text{pref}}" class="ltx_Math" display="inline" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1"><semantics id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1a"><msub id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.2" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.2a.cmml">RL</mtext><mtext class="ltx_mathvariant_bold" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.3" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.3a.cmml">pref</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1b"><apply id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.cmml" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.1.cmml" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1">subscript</csymbol><ci id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.2a.cmml" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.2.cmml" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.2">RL</mtext></ci><ci id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.3a.cmml" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.3"><mtext class="ltx_mathvariant_bold" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.T2.3.3.3.3.3.3.3.1.1.m1.1.1.3">pref</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1c">\text{RL}_{\text{pref}}</annotation><annotation encoding="application/x-llamapun" id="S4.T2.3.3.3.3.3.3.3.1.1.m1.1d">RL start_POSTSUBSCRIPT pref end_POSTSUBSCRIPT</annotation></semantics></math>]</span> L3I-8B</span>
<span class="ltx_td ltx_align_center" id="S4.T2.3.3.3.3.3.3.3.2"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.3.3.3.3.3.2.1">13.14</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.3.3.3.3.3.3.3.3"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.3.3.3.3.3.3.1">11.50</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.3.3.3.3.3.3.3.4">15.00</span>
<span class="ltx_td ltx_align_center" id="S4.T2.3.3.3.3.3.3.3.5">26.42</span>
<span class="ltx_td ltx_align_center" id="S4.T2.3.3.3.3.3.3.3.6"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.3.3.3.3.3.6.1">14.55</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.3.3.3.3.3.3.3.7"><span class="ltx_text ltx_font_bold" id="S4.T2.3.3.3.3.3.3.3.7.1">0.567</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.3.3.3.3.3.3.3.8">0.461</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.11.7">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.4.4.4.4.4.4.11.7.1">CLI-13B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.11.7.2">18.86</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.11.7.3">29.42</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.11.7.4">71.76</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.11.7.5">57.23</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.11.7.6">39.14</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.11.7.7">0.489</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.11.7.8">0.413</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.12.8">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.12.8.1">StarCoder-15.5B</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.12.8.2">23.31</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.12.8.3">32.08</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.12.8.4">51.18</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.12.8.5">25.16</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.12.8.6">32.89</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.12.8.7">0.347</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.12.8.8">0.328</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.13.9">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.13.9.1">Instruct CodeGen-16B</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.13.9.2">38.56</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.13.9.3">45.13</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.13.9.4">62.94</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.13.9.5">40.25</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.13.9.6">46.66</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.13.9.7">0.388</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.13.9.8">0.330</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.14.10">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.14.10.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.14.10.1.1">[SFT]</span> CLI-13B</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.14.10.2"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.14.10.2.1">6.36</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.14.10.3">6.19</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.14.10.4"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.14.10.4.1">12.06</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.14.10.5">22.64</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.14.10.6">9.49</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.14.10.7"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.14.10.7.1">0.581</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.14.10.8"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.14.10.8.1">0.481</span></span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.4">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.4.1"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.4.1.1">[SFT+<math alttext="\text{RL}_{\text{pref}}" class="ltx_Math" display="inline" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1"><semantics id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1a"><msub id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.2" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.2a.cmml">RL</mtext><mtext class="ltx_mathvariant_bold" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.3" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.3a.cmml">pref</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1b"><apply id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.cmml" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.1.cmml" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1">subscript</csymbol><ci id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.2a.cmml" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.2.cmml" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.2">RL</mtext></ci><ci id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.3a.cmml" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.3"><mtext class="ltx_mathvariant_bold" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.T2.4.4.4.4.4.4.4.1.1.m1.1.1.3">pref</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1c">\text{RL}_{\text{pref}}</annotation><annotation encoding="application/x-llamapun" id="S4.T2.4.4.4.4.4.4.4.1.1.m1.1d">RL start_POSTSUBSCRIPT pref end_POSTSUBSCRIPT</annotation></semantics></math>]</span> CLI-13B</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.4.2"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.4.2.1">6.36</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.4.3"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.4.3.1">5.53</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.4.4">12.35</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.4.5"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.4.5.1">21.38</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.4.6"><span class="ltx_text ltx_font_bold" id="S4.T2.4.4.4.4.4.4.4.6.1">9.21</span></span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.4.7">0.566</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.4.8">0.467</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.15.11">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T2.4.4.4.4.4.4.15.11.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.T2.4.4.4.4.4.4.15.11.1.1">Closed-source</span></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.15.11.2"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.15.11.3"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.15.11.4"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.15.11.5"></span>
<span class="ltx_td ltx_border_t" id="S4.T2.4.4.4.4.4.4.15.11.6"></span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.16.12">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T2.4.4.4.4.4.4.16.12.1">GPT-3.5-turbo</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.16.12.2">11.02</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.16.12.3">13.50</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.16.12.4">28.82</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.16.12.5">19.59</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.16.12.6">18.62</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.16.12.7">0.524</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T2.4.4.4.4.4.4.16.12.8">0.453</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.17.13">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.17.13.1">GPT-4-0613</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.17.13.2">13.56</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.17.13.3">11.06</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.17.13.4">28.53</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.17.13.5">39.62</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.17.13.6">19.26</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.17.13.7">0.535</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.17.13.8">0.441</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.18.14">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.18.14.1">GPT-4-turbo</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.18.14.2">11.02</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.18.14.3">14.16</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.18.14.4">11.76</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.18.14.5">29.56</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.18.14.6">14.27</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.18.14.7">0.540</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.18.14.8">0.448</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.19.15">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T2.4.4.4.4.4.4.19.15.1">GPT-4o</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.19.15.2">13.98</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.19.15.3">6.86</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.19.15.4">13.53</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.19.15.5">26.42</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.19.15.6">13.00</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.19.15.7">0.552</span>
<span class="ltx_td ltx_align_center" id="S4.T2.4.4.4.4.4.4.19.15.8">0.450</span></span>
<span class="ltx_tr" id="S4.T2.4.4.4.4.4.4.20.16">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T2.4.4.4.4.4.4.20.16.1">Claude 3 Opus</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.4.4.4.4.4.4.20.16.2">7.84</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.4.4.4.4.4.4.20.16.3">7.74</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.4.4.4.4.4.4.20.16.4">30.59</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.4.4.4.4.4.4.20.16.5">23.27</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.4.4.4.4.4.4.20.16.6">14.90</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.4.4.4.4.4.4.20.16.7">0.515</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T2.4.4.4.4.4.4.20.16.8">0.435</span></span>
</span>
</span></span></span>
</span></span></span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 2: </span>Results of the Description-to-Chart task. The plot type error ratio is categorized based on Matplotlib classifications <cite class="ltx_cite ltx_citemacro_citep">(Hunter, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib14" title="">2007</a>)</cite>. CLI and L3I stand for Code Llama Instruct and Llama 3 Instruct, respectively. <span class="ltx_text ltx_font_bold" id="S4.T2.8.1">SFT</span> and <math alttext="\text{RL}_{\ast}" class="ltx_Math" display="inline" id="S4.T2.6.m1.1"><semantics id="S4.T2.6.m1.1b"><msub id="S4.T2.6.m1.1.1" xref="S4.T2.6.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S4.T2.6.m1.1.1.2" xref="S4.T2.6.m1.1.1.2a.cmml">RL</mtext><mo id="S4.T2.6.m1.1.1.3" xref="S4.T2.6.m1.1.1.3.cmml">∗</mo></msub><annotation-xml encoding="MathML-Content" id="S4.T2.6.m1.1c"><apply id="S4.T2.6.m1.1.1.cmml" xref="S4.T2.6.m1.1.1"><csymbol cd="ambiguous" id="S4.T2.6.m1.1.1.1.cmml" xref="S4.T2.6.m1.1.1">subscript</csymbol><ci id="S4.T2.6.m1.1.1.2a.cmml" xref="S4.T2.6.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="S4.T2.6.m1.1.1.2.cmml" xref="S4.T2.6.m1.1.1.2">RL</mtext></ci><ci id="S4.T2.6.m1.1.1.3.cmml" xref="S4.T2.6.m1.1.1.3">∗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T2.6.m1.1d">\text{RL}_{\ast}</annotation><annotation encoding="application/x-llamapun" id="S4.T2.6.m1.1e">RL start_POSTSUBSCRIPT ∗ end_POSTSUBSCRIPT</annotation></semantics></math> indicate our fine-tuned models.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S4.p6">
<p class="ltx_p" id="S4.p6.1"><span class="ltx_text ltx_font_bold" id="S4.p6.1.1">Training setup.</span>
We begin the supervised fine-tuning using LoRA fine-tuning <cite class="ltx_cite ltx_citemacro_citep">(Hu et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib13" title="">2021</a>)</cite>. When we further fine-tune the model with RL, we merge the original SFT LoRA parameters into the base model and fine-tune separate LoRA parameters.
For SFT, we utilize a total of 11.1K data points for Task 1, 3, and 7.84K for Task 2. On the other hand, RL fine-tuning is conducted using 0.5K randomly selected data points, representing 4.8% of our <math alttext="\mathcal{D}_{\mathrm{pref}}" class="ltx_Math" display="inline" id="S4.p6.1.m1.1"><semantics id="S4.p6.1.m1.1a"><msub id="S4.p6.1.m1.1.1" xref="S4.p6.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S4.p6.1.m1.1.1.2" xref="S4.p6.1.m1.1.1.2.cmml">𝒟</mi><mi id="S4.p6.1.m1.1.1.3" xref="S4.p6.1.m1.1.1.3.cmml">pref</mi></msub><annotation-xml encoding="MathML-Content" id="S4.p6.1.m1.1b"><apply id="S4.p6.1.m1.1.1.cmml" xref="S4.p6.1.m1.1.1"><csymbol cd="ambiguous" id="S4.p6.1.m1.1.1.1.cmml" xref="S4.p6.1.m1.1.1">subscript</csymbol><ci id="S4.p6.1.m1.1.1.2.cmml" xref="S4.p6.1.m1.1.1.2">𝒟</ci><ci id="S4.p6.1.m1.1.1.3.cmml" xref="S4.p6.1.m1.1.1.3">pref</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.p6.1.m1.1c">\mathcal{D}_{\mathrm{pref}}</annotation><annotation encoding="application/x-llamapun" id="S4.p6.1.m1.1d">caligraphic_D start_POSTSUBSCRIPT roman_pref end_POSTSUBSCRIPT</annotation></semantics></math> dataset.
For SFT, we use 2 RTX A6000 GPUs and the training requires 6 to 12 hours, depending on the tasks. For RL, we use 6 RTX A6000 GPUs and the training takes less than 12 hours.
Further details of the experiments can be found in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A2" title="Appendix B Experimental Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Appendix</span>&nbsp;<span class="ltx_text ltx_ref_tag">B</span></a>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_table" id="S4.T3">
<p class="ltx_p ltx_align_center" id="S4.T3.3"><span class="ltx_text" id="S4.T3.3.3">
<span class="ltx_inline-block ltx_transformed_outer" id="S4.T3.3.3.3" style="width:348.3pt;height:252pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="S4.T3.3.3.3.3"><span class="ltx_text" id="S4.T3.3.3.3.3.3">
<span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T3.3.3.3.3.3.3">
<span class="ltx_tbody">
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.3">
<span class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="S4.T3.3.3.3.3.3.3.3.4"></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S4.T3.1.1.1.1.1.1.1.1">Error ratio (%) <math alttext="\downarrow" class="ltx_Math" display="inline" id="S4.T3.1.1.1.1.1.1.1.1.m1.1"><semantics id="S4.T3.1.1.1.1.1.1.1.1.m1.1a"><mo id="S4.T3.1.1.1.1.1.1.1.1.m1.1.1" stretchy="false" xref="S4.T3.1.1.1.1.1.1.1.1.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S4.T3.1.1.1.1.1.1.1.1.m1.1b"><ci id="S4.T3.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S4.T3.1.1.1.1.1.1.1.1.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.1.1.1.1.1.1.1.1.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S4.T3.1.1.1.1.1.1.1.1.m1.1d">↓</annotation></semantics></math></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S4.T3.2.2.2.2.2.2.2.2">Plot type <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T3.2.2.2.2.2.2.2.2.m1.1"><semantics id="S4.T3.2.2.2.2.2.2.2.2.m1.1a"><mo id="S4.T3.2.2.2.2.2.2.2.2.m1.1.1" stretchy="false" xref="S4.T3.2.2.2.2.2.2.2.2.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S4.T3.2.2.2.2.2.2.2.2.m1.1b"><ci id="S4.T3.2.2.2.2.2.2.2.2.m1.1.1.cmml" xref="S4.T3.2.2.2.2.2.2.2.2.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.2.2.2.2.2.2.2.2.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S4.T3.2.2.2.2.2.2.2.2.m1.1d">↑</annotation></semantics></math></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="S4.T3.3.3.3.3.3.3.3.3">Desc. sim. <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T3.3.3.3.3.3.3.3.3.m1.1"><semantics id="S4.T3.3.3.3.3.3.3.3.3.m1.1a"><mo id="S4.T3.3.3.3.3.3.3.3.3.m1.1.1" stretchy="false" xref="S4.T3.3.3.3.3.3.3.3.3.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S4.T3.3.3.3.3.3.3.3.3.m1.1b"><ci id="S4.T3.3.3.3.3.3.3.3.3.m1.1.1.cmml" xref="S4.T3.3.3.3.3.3.3.3.3.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T3.3.3.3.3.3.3.3.3.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S4.T3.3.3.3.3.3.3.3.3.m1.1d">↑</annotation></semantics></math></span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.4.1">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.3.3.3.3.3.3.4.1.1">Method</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.4.1.2">w/ GPT</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.4.1.3">w/ SFT</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.4.1.4">HitRate</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.4.1.5">Jac.</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.4.1.6">R-L</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.4.1.7">BertScore</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.5.2">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T3.3.3.3.3.3.3.5.2.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.T3.3.3.3.3.3.3.5.2.1.1">Open-source</span></span>
<span class="ltx_td ltx_border_t" id="S4.T3.3.3.3.3.3.3.5.2.2"></span>
<span class="ltx_td ltx_border_t" id="S4.T3.3.3.3.3.3.3.5.2.3"></span>
<span class="ltx_td ltx_border_t" id="S4.T3.3.3.3.3.3.3.5.2.4"></span>
<span class="ltx_td ltx_border_t" id="S4.T3.3.3.3.3.3.3.5.2.5"></span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.6.3">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T3.3.3.3.3.3.3.6.3.1">L2C-7B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.6.3.2">40.82</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.6.3.3">56.45</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.6.3.4">0.175</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.6.3.5">0.359</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.6.3.6">0.232</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.6.3.7">0.820</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.7.4">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.3.3.3.3.3.3.7.4.1">L2C-13B</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.7.4.2">35.64</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.7.4.3">37.99</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.7.4.4">0.205</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.7.4.5">0.384</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.7.4.6">0.237</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.7.4.7">0.825</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.8.5">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.3.3.3.3.3.3.8.5.1">L3I-8B</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.8.5.2">27.25</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.8.5.3">38.48</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.8.5.4">0.269</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.8.5.5">0.406</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.8.5.6">0.196</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.8.5.7">0.800</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.9.6">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.3.3.3.3.3.3.9.6.1"><span class="ltx_text ltx_font_bold" id="S4.T3.3.3.3.3.3.3.9.6.1.1">[SFT]</span>
L2C-7B</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.9.6.2">15.92</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.9.6.3">15.82</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.9.6.4">0.329</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.9.6.5">0.396</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.9.6.6">0.381</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.9.6.7">0.903</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.10.7">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.3.3.3.3.3.3.10.7.1"><span class="ltx_text ltx_font_bold" id="S4.T3.3.3.3.3.3.3.10.7.1.1">[SFT]</span> L3I-8B</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.10.7.2"><span class="ltx_text ltx_font_bold" id="S4.T3.3.3.3.3.3.3.10.7.2.1">15.53</span></span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.10.7.3"><span class="ltx_text ltx_font_bold" id="S4.T3.3.3.3.3.3.3.10.7.3.1">15.62</span></span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.10.7.4"><span class="ltx_text ltx_font_bold" id="S4.T3.3.3.3.3.3.3.10.7.4.1">0.413</span></span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.10.7.5"><span class="ltx_text ltx_font_bold" id="S4.T3.3.3.3.3.3.3.10.7.5.1">0.432</span></span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.10.7.6"><span class="ltx_text ltx_font_bold" id="S4.T3.3.3.3.3.3.3.10.7.6.1">0.389</span></span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.10.7.7"><span class="ltx_text ltx_font_bold" id="S4.T3.3.3.3.3.3.3.10.7.7.1">0.905</span></span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.11.8">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T3.3.3.3.3.3.3.11.8.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.T3.3.3.3.3.3.3.11.8.1.1">Closed-source</span></span>
<span class="ltx_td ltx_border_t" id="S4.T3.3.3.3.3.3.3.11.8.2"></span>
<span class="ltx_td ltx_border_t" id="S4.T3.3.3.3.3.3.3.11.8.3"></span>
<span class="ltx_td ltx_border_t" id="S4.T3.3.3.3.3.3.3.11.8.4"></span>
<span class="ltx_td ltx_border_t" id="S4.T3.3.3.3.3.3.3.11.8.5"></span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.12.9">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T3.3.3.3.3.3.3.12.9.1">GPT-3.5-turbo</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.12.9.2">21.00</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.12.9.3">29.10</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.12.9.4">0.239</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.12.9.5">0.412</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.12.9.6">0.232</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T3.3.3.3.3.3.3.12.9.7">0.816</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.13.10">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.3.3.3.3.3.3.13.10.1">GPT-4</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.13.10.2">16.41</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.13.10.3">34.67</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.13.10.4">0.286</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.13.10.5">0.428</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.13.10.6">0.202</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.13.10.7">0.829</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.14.11">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.3.3.3.3.3.3.14.11.1">GPT-4-turbo</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.14.11.2">27.05</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.14.11.3">37.01</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.14.11.4">0.313</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.14.11.5">0.461</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.14.11.6">0.184</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.14.11.7">0.808</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.15.12">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T3.3.3.3.3.3.3.15.12.1">GPT-4o</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.15.12.2">15.82</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.15.12.3">31.64</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.15.12.4">0.339</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.15.12.5">0.436</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.15.12.6">0.170</span>
<span class="ltx_td ltx_align_center" id="S4.T3.3.3.3.3.3.3.15.12.7">0.786</span></span>
<span class="ltx_tr" id="S4.T3.3.3.3.3.3.3.16.13">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T3.3.3.3.3.3.3.16.13.1">Claude 3 Opus</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.3.3.3.3.3.3.16.13.2">15.62</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.3.3.3.3.3.3.16.13.3">27.34</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.3.3.3.3.3.3.16.13.4">0.294</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.3.3.3.3.3.3.16.13.5">0.451</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.3.3.3.3.3.3.16.13.6">0.188</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T3.3.3.3.3.3.3.16.13.7">0.813</span></span>
</span>
</span></span></span>
</span></span></span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 3: </span>Results of the Raw Data-to-Chart task. Description similarity, error ratio, and plot type prediction are compared for various open-source and closed-source methods. The error ratio is evaluated using <span class="ltx_text ltx_font_bold" id="S4.T3.6.1">SFT</span> L3I-8B from Task 1 denoted as ’w/ SFT’, or GPT-3.5-turbo denoted as ’w/ GPT’.
<span class="ltx_text ltx_font_bold" id="S4.T3.7.2">SFT</span> indicates our fine-tuned models. L2C and L3I stand for Llama 2 Chat and Llama 3 Instruct, respectively.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_table" id="S4.T4">
<p class="ltx_p ltx_align_center" id="S4.T4.3"><span class="ltx_text" id="S4.T4.3.3">
<span class="ltx_inline-block ltx_transformed_outer" id="S4.T4.3.3.3" style="width:345.0pt;height:252pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="S4.T4.3.3.3.3"><span class="ltx_text" id="S4.T4.3.3.3.3.3">
<span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="S4.T4.3.3.3.3.3.3">
<span class="ltx_tbody">
<span class="ltx_tr" id="S4.T4.2.2.2.2.2.2.2">
<span class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="S4.T4.2.2.2.2.2.2.2.3"></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_4" id="S4.T4.1.1.1.1.1.1.1.1">Description similarity <math alttext="\uparrow" class="ltx_Math" display="inline" id="S4.T4.1.1.1.1.1.1.1.1.m1.1"><semantics id="S4.T4.1.1.1.1.1.1.1.1.m1.1a"><mo id="S4.T4.1.1.1.1.1.1.1.1.m1.1.1" stretchy="false" xref="S4.T4.1.1.1.1.1.1.1.1.m1.1.1.cmml">↑</mo><annotation-xml encoding="MathML-Content" id="S4.T4.1.1.1.1.1.1.1.1.m1.1b"><ci id="S4.T4.1.1.1.1.1.1.1.1.m1.1.1.cmml" xref="S4.T4.1.1.1.1.1.1.1.1.m1.1.1">↑</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.1.1.1.1.1.1.1.1.m1.1c">\uparrow</annotation><annotation encoding="application/x-llamapun" id="S4.T4.1.1.1.1.1.1.1.1.m1.1d">↑</annotation></semantics></math></span>
<span class="ltx_td ltx_align_center ltx_border_tt" id="S4.T4.2.2.2.2.2.2.2.2">Err. ratio (%) <math alttext="\downarrow" class="ltx_Math" display="inline" id="S4.T4.2.2.2.2.2.2.2.2.m1.1"><semantics id="S4.T4.2.2.2.2.2.2.2.2.m1.1a"><mo id="S4.T4.2.2.2.2.2.2.2.2.m1.1.1" stretchy="false" xref="S4.T4.2.2.2.2.2.2.2.2.m1.1.1.cmml">↓</mo><annotation-xml encoding="MathML-Content" id="S4.T4.2.2.2.2.2.2.2.2.m1.1b"><ci id="S4.T4.2.2.2.2.2.2.2.2.m1.1.1.cmml" xref="S4.T4.2.2.2.2.2.2.2.2.m1.1.1">↓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.2.2.2.2.2.2.2.2.m1.1c">\downarrow</annotation><annotation encoding="application/x-llamapun" id="S4.T4.2.2.2.2.2.2.2.2.m1.1d">↓</annotation></semantics></math></span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.4.1">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.3.3.3.3.3.4.1.1">Method</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.4.1.2">R-1</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.4.1.3">R-2</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.4.1.4">R-L</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.4.1.5">BertScore</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.4.1.6">w/ GPT</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.5.2">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T4.3.3.3.3.3.3.5.2.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.T4.3.3.3.3.3.3.5.2.1.1">Open-source</span></span>
<span class="ltx_td ltx_border_t" id="S4.T4.3.3.3.3.3.3.5.2.2"></span>
<span class="ltx_td ltx_border_t" id="S4.T4.3.3.3.3.3.3.5.2.3"></span>
<span class="ltx_td ltx_border_t" id="S4.T4.3.3.3.3.3.3.5.2.4"></span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.6.3">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T4.3.3.3.3.3.3.6.3.1">L2C-7B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.6.3.2">0.419</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.6.3.3">0.182</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.6.3.4">0.260</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.6.3.5">0.812</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.6.3.6">38.86</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.7.4">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.3.3.3.3.3.7.4.1">CLI-7B</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.7.4.2">0.411</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.7.4.3">0.173</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.7.4.4">0.260</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.7.4.5">0.823</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.7.4.6">42.73</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.8.5">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.3.3.3.3.3.8.5.1">L3I-8B</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.8.5.2">0.453</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.8.5.3">0.206</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.8.5.4">0.276</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.8.5.5">0.834</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.8.5.6">36.82</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.9.6">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.3.3.3.3.3.9.6.1"><span class="ltx_text ltx_font_bold" id="S4.T4.3.3.3.3.3.3.9.6.1.1">[SFT]</span>
L3I-8B</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.9.6.2">0.592</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.9.6.3">0.343</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.9.6.4">0.436</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.9.6.5">0.881</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.9.6.6">21.36</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.3">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.3.3.3.3.3.3.1"><span class="ltx_text ltx_font_bold" id="S4.T4.3.3.3.3.3.3.3.1.1">[SFT+<math alttext="\text{RL}_{\text{algn}}" class="ltx_Math" display="inline" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1"><semantics id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1a"><msub id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.2" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.2a.cmml">RL</mtext><mtext class="ltx_mathvariant_bold" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.3" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.3a.cmml">algn</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1b"><apply id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.cmml" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.1.cmml" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1">subscript</csymbol><ci id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.2a.cmml" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.2.cmml" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.2">RL</mtext></ci><ci id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.3a.cmml" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.3"><mtext class="ltx_mathvariant_bold" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.T4.3.3.3.3.3.3.3.1.1.m1.1.1.3">algn</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1c">\text{RL}_{\text{algn}}</annotation><annotation encoding="application/x-llamapun" id="S4.T4.3.3.3.3.3.3.3.1.1.m1.1d">RL start_POSTSUBSCRIPT algn end_POSTSUBSCRIPT</annotation></semantics></math>]</span>
L3I-8B</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.3.2"><span class="ltx_text ltx_font_bold" id="S4.T4.3.3.3.3.3.3.3.2.1">0.594</span></span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.3.3"><span class="ltx_text ltx_font_bold" id="S4.T4.3.3.3.3.3.3.3.3.1">0.346</span></span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.3.4"><span class="ltx_text ltx_font_bold" id="S4.T4.3.3.3.3.3.3.3.4.1">0.440</span></span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.3.5"><span class="ltx_text ltx_font_bold" id="S4.T4.3.3.3.3.3.3.3.5.1">0.884</span></span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.3.6"><span class="ltx_text ltx_font_bold" id="S4.T4.3.3.3.3.3.3.3.6.1">20.31</span></span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.10.7">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t ltx_colspan ltx_colspan_3" id="S4.T4.3.3.3.3.3.3.10.7.1"><span class="ltx_text ltx_font_bold ltx_font_italic" id="S4.T4.3.3.3.3.3.3.10.7.1.1">Closed-source</span></span>
<span class="ltx_td ltx_border_t" id="S4.T4.3.3.3.3.3.3.10.7.2"></span>
<span class="ltx_td ltx_border_t" id="S4.T4.3.3.3.3.3.3.10.7.3"></span>
<span class="ltx_td ltx_border_t" id="S4.T4.3.3.3.3.3.3.10.7.4"></span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.11.8">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="S4.T4.3.3.3.3.3.3.11.8.1">GPT-3.5-turbo</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.11.8.2">0.463</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.11.8.3">0.212</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.11.8.4">0.286</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.11.8.5">0.845</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="S4.T4.3.3.3.3.3.3.11.8.6">45.26</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.12.9">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.3.3.3.3.3.12.9.1">GPT-4</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.12.9.2">0.426</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.12.9.3">0.175</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.12.9.4">0.252</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.12.9.5">0.809</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.12.9.6">23.12</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.13.10">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.3.3.3.3.3.13.10.1">GPT-4-turbo</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.13.10.2">0.416</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.13.10.3">0.168</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.13.10.4">0.242</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.13.10.5">0.795</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.13.10.6">29.80</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.14.11">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="S4.T4.3.3.3.3.3.3.14.11.1">GPT-4o</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.14.11.2">0.442</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.14.11.3">0.198</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.14.11.4">0.269</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.14.11.5">0.775</span>
<span class="ltx_td ltx_align_center" id="S4.T4.3.3.3.3.3.3.14.11.6">11.81</span></span>
<span class="ltx_tr" id="S4.T4.3.3.3.3.3.3.15.12">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="S4.T4.3.3.3.3.3.3.15.12.1">Claude 3 Opus</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.3.3.3.3.3.3.15.12.2">0.453</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.3.3.3.3.3.3.15.12.3">0.207</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.3.3.3.3.3.3.15.12.4">0.276</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.3.3.3.3.3.3.15.12.5">0.827</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="S4.T4.3.3.3.3.3.3.15.12.6">19.33</span></span>
</span>
</span></span></span>
</span></span></span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 4: </span>Results of the Code-to-Description task. <span class="ltx_text ltx_font_bold" id="S4.T4.7.1">SFT</span> and <math alttext="\text{RL}_{\ast}" class="ltx_Math" display="inline" id="S4.T4.5.m1.1"><semantics id="S4.T4.5.m1.1b"><msub id="S4.T4.5.m1.1.1" xref="S4.T4.5.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S4.T4.5.m1.1.1.2" xref="S4.T4.5.m1.1.1.2a.cmml">RL</mtext><mo id="S4.T4.5.m1.1.1.3" xref="S4.T4.5.m1.1.1.3.cmml">∗</mo></msub><annotation-xml encoding="MathML-Content" id="S4.T4.5.m1.1c"><apply id="S4.T4.5.m1.1.1.cmml" xref="S4.T4.5.m1.1.1"><csymbol cd="ambiguous" id="S4.T4.5.m1.1.1.1.cmml" xref="S4.T4.5.m1.1.1">subscript</csymbol><ci id="S4.T4.5.m1.1.1.2a.cmml" xref="S4.T4.5.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="S4.T4.5.m1.1.1.2.cmml" xref="S4.T4.5.m1.1.1.2">RL</mtext></ci><ci id="S4.T4.5.m1.1.1.3.cmml" xref="S4.T4.5.m1.1.1.3">∗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.5.m1.1d">\text{RL}_{\ast}</annotation><annotation encoding="application/x-llamapun" id="S4.T4.5.m1.1e">RL start_POSTSUBSCRIPT ∗ end_POSTSUBSCRIPT</annotation></semantics></math> indicate our fine-tuned models. L2C and L3I stand for Llama 2 Chat and Llama 3 Instruct-8B, respectively.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<section class="ltx_subsection" id="S4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Results of Description-to-Chart</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S4.SS1.p1">
<p class="ltx_p" id="S4.SS1.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S4.T2" title="Table 2 ‣ 4 Experiments ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">2</span></a> presents the results for the Description-to-Chart task.
We fine-tune Llama 3 Instruct-8B and Code Llama Instruct-13B on our Text2Chart31 dataset for five epochs.
We run RL fine-tuning on the Llama 3 Instruct and Code Llama Instruct-13B using preference reward, denoted as <math alttext="\mathrm{RL}_{\mathrm{pref}}" class="ltx_Math" display="inline" id="S4.SS1.p1.1.m1.1"><semantics id="S4.SS1.p1.1.m1.1a"><msub id="S4.SS1.p1.1.m1.1.1" xref="S4.SS1.p1.1.m1.1.1.cmml"><mi id="S4.SS1.p1.1.m1.1.1.2" xref="S4.SS1.p1.1.m1.1.1.2.cmml">RL</mi><mi id="S4.SS1.p1.1.m1.1.1.3" xref="S4.SS1.p1.1.m1.1.1.3.cmml">pref</mi></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.1b"><apply id="S4.SS1.p1.1.m1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS1.p1.1.m1.1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1">subscript</csymbol><ci id="S4.SS1.p1.1.m1.1.1.2.cmml" xref="S4.SS1.p1.1.m1.1.1.2">RL</ci><ci id="S4.SS1.p1.1.m1.1.1.3.cmml" xref="S4.SS1.p1.1.m1.1.1.3">pref</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.1c">\mathrm{RL}_{\mathrm{pref}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p1.1.m1.1d">roman_RL start_POSTSUBSCRIPT roman_pref end_POSTSUBSCRIPT</annotation></semantics></math>.
The results show that our fine-tuned models outperform all open-source baselines that we compared. Specifically, the 13B model with SFT and RL achieves even a lower total error ratio than the state-of-the-art closed-source models like GPT-3.5-turbo, GPT-4, GPT-4-turbo, GPT-4o, and Claude 3 Opus.
The RL fine-tuning reduces the total error ratio of the Llama 3 Instruct-8B model from 16.09 to 14.55, making it superior to the Claude 3 Opus.
Particularly, our models excel in generating underexplored plot types such as gridded, irregularly gridded, and 3D and volumetric plots, compared to open-source models.
</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S4.SS1.p2">
<p class="ltx_p" id="S4.SS1.p2.2"><span class="ltx_text ltx_font_bold" id="S4.SS1.p2.2.2">Human evaluation.</span>
We additionally conduct human evaluation to check the correctness of the generated plot and its alignment with the description. We randomly sample a subset of 155 data points, consisting of 5 samples from each of the 31 plot types. For each sample, three crowd workers are recruited to compare the generated plot images with the GT reference plot images based on chart type, data representation, and visual appearance. If both images are equally similar or neither is similar, it is voted as a tie. More details can be found in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A5" title="Appendix E Details on Human Evaluation ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Appendix</span>&nbsp;<span class="ltx_text ltx_ref_tag">E</span></a>.
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S4.F3" title="In 4.1 Results of Description-to-Chart ‣ 4 Experiments ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">3</span></a> presents the results of human evaluation. The inter-annotator agreement is measured using Krippendorff’s <math alttext="\alpha" class="ltx_Math" display="inline" id="S4.SS1.p2.1.m1.1"><semantics id="S4.SS1.p2.1.m1.1a"><mi id="S4.SS1.p2.1.m1.1.1" xref="S4.SS1.p2.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.1.m1.1b"><ci id="S4.SS1.p2.1.m1.1.1.cmml" xref="S4.SS1.p2.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.1.m1.1c">\alpha</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.1.m1.1d">italic_α</annotation></semantics></math>, whose value is 0.519 for the three classes (win, lose, and tie).
Our fine-tuned models consistently have higher win rate compared to Llama 3 Instruct-8B and GPT-3.5-turbo.
Specifically, <span class="ltx_text ltx_font_bold" id="S4.SS1.p2.2.3">SFT</span> CLI-13B model has the higher win rate (47.7%) against L3I-8B, while also achieving a lower lose rate (4.5%).
Our <span class="ltx_text ltx_font_bold" id="S4.SS1.p2.2.1">SFT+<math alttext="\text{RL}_{\text{pref}}" class="ltx_Math" display="inline" id="S4.SS1.p2.2.1.m1.1"><semantics id="S4.SS1.p2.2.1.m1.1a"><msub id="S4.SS1.p2.2.1.m1.1.1" xref="S4.SS1.p2.2.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S4.SS1.p2.2.1.m1.1.1.2" xref="S4.SS1.p2.2.1.m1.1.1.2a.cmml">RL</mtext><mtext class="ltx_mathvariant_bold" id="S4.SS1.p2.2.1.m1.1.1.3" xref="S4.SS1.p2.2.1.m1.1.1.3a.cmml">pref</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.SS1.p2.2.1.m1.1b"><apply id="S4.SS1.p2.2.1.m1.1.1.cmml" xref="S4.SS1.p2.2.1.m1.1.1"><csymbol cd="ambiguous" id="S4.SS1.p2.2.1.m1.1.1.1.cmml" xref="S4.SS1.p2.2.1.m1.1.1">subscript</csymbol><ci id="S4.SS1.p2.2.1.m1.1.1.2a.cmml" xref="S4.SS1.p2.2.1.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="S4.SS1.p2.2.1.m1.1.1.2.cmml" xref="S4.SS1.p2.2.1.m1.1.1.2">RL</mtext></ci><ci id="S4.SS1.p2.2.1.m1.1.1.3a.cmml" xref="S4.SS1.p2.2.1.m1.1.1.3"><mtext class="ltx_mathvariant_bold" id="S4.SS1.p2.2.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.SS1.p2.2.1.m1.1.1.3">pref</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p2.2.1.m1.1c">\text{RL}_{\text{pref}}</annotation><annotation encoding="application/x-llamapun" id="S4.SS1.p2.2.1.m1.1d">RL start_POSTSUBSCRIPT pref end_POSTSUBSCRIPT</annotation></semantics></math></span> L3I-8B model wins over GPT-3.5-turbo with 25.2% win rate and 20.6% lose rate.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="S4.F3"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="412" id="S4.F3.g1" src="https://arxiv.org/html/2410.04064v1/x3.png" width="830">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 3: </span>Human evaluation results on a randomly sampled subset of the test set. We compare <span class="ltx_text ltx_font_bold" id="S4.F3.2.1">SFT+<math alttext="\text{RL}_{\text{pref}}" class="ltx_Math" display="inline" id="S4.F3.2.1.m1.1"><semantics id="S4.F3.2.1.m1.1b"><msub id="S4.F3.2.1.m1.1.1" xref="S4.F3.2.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S4.F3.2.1.m1.1.1.2" xref="S4.F3.2.1.m1.1.1.2a.cmml">RL</mtext><mtext class="ltx_mathvariant_bold" id="S4.F3.2.1.m1.1.1.3" xref="S4.F3.2.1.m1.1.1.3a.cmml">pref</mtext></msub><annotation-xml encoding="MathML-Content" id="S4.F3.2.1.m1.1c"><apply id="S4.F3.2.1.m1.1.1.cmml" xref="S4.F3.2.1.m1.1.1"><csymbol cd="ambiguous" id="S4.F3.2.1.m1.1.1.1.cmml" xref="S4.F3.2.1.m1.1.1">subscript</csymbol><ci id="S4.F3.2.1.m1.1.1.2a.cmml" xref="S4.F3.2.1.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="S4.F3.2.1.m1.1.1.2.cmml" xref="S4.F3.2.1.m1.1.1.2">RL</mtext></ci><ci id="S4.F3.2.1.m1.1.1.3a.cmml" xref="S4.F3.2.1.m1.1.1.3"><mtext class="ltx_mathvariant_bold" id="S4.F3.2.1.m1.1.1.3.cmml" mathsize="70%" xref="S4.F3.2.1.m1.1.1.3">pref</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.F3.2.1.m1.1d">\text{RL}_{\text{pref}}</annotation><annotation encoding="application/x-llamapun" id="S4.F3.2.1.m1.1e">RL start_POSTSUBSCRIPT pref end_POSTSUBSCRIPT</annotation></semantics></math></span> L3I-8B and <span class="ltx_text ltx_font_bold" id="S4.F3.4.2">SFT</span> CLI-13B with GPT-3.5-turbo and L3I-8B.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</section>
<section class="ltx_subsection" id="S4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Results of Raw Data-to-Chart</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S4.SS2.p1">
<p class="ltx_p" id="S4.SS2.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S4.T3" title="Table 3 ‣ 4 Experiments ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">3</span></a> presents the results of the Raw Data-to-Chart task.
We fine-tune Llama 2 Chat-7B and Llama 3 Instruct-8B using our Text2Chart31 dataset.
We report the error ratio after visualizing the generated descriptions using our supervised fine-tuned Llama 3 Instruct-8B (w/ SFT) from task 1 and GPT-3.5-turbo (w/ GPT).
Notably, our fine-tuned Llama 3 Instruct-8B outperforms all open-source models across all metrics.
Furthermore, this model surpasses closed-source models (GPT-3.5-turbo, GPT-4-turbo) in terms of error ratio and generated description similarity.
</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
<section class="ltx_subsection" id="S4.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Results of Code-to-Description</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S4.SS3.p1">
<p class="ltx_p" id="S4.SS3.p1.1">Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#S4.T4" title="Table 4 ‣ 4 Experiments ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">4</span></a> presents the results on the Code-to-Description task. We fine-tune the Llama 3 Instruct-8B using our dataset and evaluate the description similarity with ROUGE and BertScore.
Our fine-tuned model outperforms all open-source and closed-source models across Description similarity.
Furthermore, RL fine-tuning with alignment reward consistently increases the description similarity across all metrics. We also provide the generated descriptions to GPT-3.5-turbo and report the error ratio to highlight the quality of the descriptions produced by our fine-tuned models. After RL fine-tuning, the error ratio decreases from 21.36% to 20.31%, and the description similarity consistently improves.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
</section>
<section class="ltx_section" id="S5">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Related Work</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S5.p1">
<p class="ltx_p" id="S5.p1.1"><span class="ltx_text ltx_font_bold" id="S5.p1.1.1">Chart datasets.</span>
There are several existing chart datasets, including PlotQA <cite class="ltx_cite ltx_citemacro_citep">(Methani et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib26" title="">2020</a>)</cite>, ChartQA <cite class="ltx_cite ltx_citemacro_cite">Masry et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib24" title="">2022</a>)</cite>, FigureQA <cite class="ltx_cite ltx_citemacro_cite">Kahou et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib15" title="">2018</a>)</cite>, Unichart <cite class="ltx_cite ltx_citemacro_cite">Masry et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib23" title="">2023</a>)</cite>, Autochart <cite class="ltx_cite ltx_citemacro_cite">Zhu et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib44" title="">2021</a>)</cite>, Chart-to-Text <cite class="ltx_cite ltx_citemacro_cite">Kantharaj et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib16" title="">2022</a>)</cite>. These datasets primarily focus on question and answer (QA) tasks on a limited range of plot types. More recently, ChartLlama <cite class="ltx_cite ltx_citemacro_cite">Han et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib12" title="">2023</a>)</cite> proposes a text-to-chart dataset that includes QA tasks and generates visualization code from provided descriptions. However, these datasets still lack coverage in certain plot categories such as 3D/volumetric plots and vector field plots, and they do not cover the use case of analyzing the raw data and predicting the most suitable plot types. On the other hand, our Text2Chart31 dataset encompasses 31 plot types with 11.1K tuples that combine descriptions, code, data tables, and plots, thereby covering a wide range of use cases.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S5.p2">
<p class="ltx_p" id="S5.p2.1"><span class="ltx_text ltx_font_bold" id="S5.p2.1.1">Instruction tuning</span>.
Employing reinforcement learning with human feedback is a prevalent strategy for enhancing (un)supervised finetuned models, whether by integrating human feedback into the learning loop <cite class="ltx_cite ltx_citemacro_citep">(Arakawa et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib2" title="">2018</a>; Arumugam et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib3" title="">2019</a>)</cite> or by leveraging preference data generated by human <cite class="ltx_cite ltx_citemacro_citep">(Ouyang et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib30" title="">2022</a>; Glaese et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib9" title="">2022</a>; Bai et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib4" title="">2022</a>; Stiennon et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib35" title="">2022</a>)</cite>. However, we argue that this methodology might not offer the most practical solution for plot visualization tasks, given the intricate and fact-intensive nature of plot types. Moreover, considering the limitations of human cognition, there is a risk of overlooking crucial small details essential for validating the accuracy of generated plots. To address this, we propose a novel automatic method that constructs a preference dataset using supervised fine-tuned output.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_para" id="S5.p3">
<p class="ltx_p" id="S5.p3.1"><span class="ltx_text ltx_font_bold" id="S5.p3.1.1">Cycle consistency.</span>
Exploiting cycle consistency to enhance the performance of the generative model has been mainly studied in the image domain <cite class="ltx_cite ltx_citemacro_citep">(Zhu et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib45" title="">2020</a>)</cite>. Recently, DDPO <cite class="ltx_cite ltx_citemacro_citep">(Black et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib6" title="">2024</a>)</cite> adopts the LLaVA model <cite class="ltx_cite ltx_citemacro_citep">(Liu et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib21" title="">2023</a>)</cite> to increase the alignment between the image and the text. Following this line of research, we propose an alignment reward that exploits cycle consistency between description and code to improve LLM for chart generation tasks. This is made possible because of the rich nature of our Text2Chart31 dataset, which consists of diverse textual modalities, including visualization code and description.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
<section class="ltx_section" id="S6">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Conclusion</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="S6.p1">
<p class="ltx_p" id="S6.p1.1">We introduce a novel hierarchical pipeline and a comprehensive dataset for chart generation. The proposed Text2Chart31 dataset, encompassing 31 unique plot types, provides a robust foundation for diverse visualization tasks with its 11.1K tuples of descriptions, code, data tables, and plots. Additionally, we proposed an RL-based instruction tuning technique employing preference and alignment rewards, improving LLMs in data visualization.
</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
<section class="ltx_section" id="Sx1">
<h2 class="ltx_title ltx_title_section">Limitations</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="Sx1.p1">
<p class="ltx_p" id="Sx1.p1.1">There are certain considerations to note. First, our dataset is based on Matplotlib version 3.8. As such, if earlier versions of Matplotlib are used where function names may have changed, the generated code could potentially cause errors. This is a natural consequence of advancements and updates in software libraries. Additionally, the descriptions provided are exclusively in English. This focus ensures clarity and consistency in our current scope but can be expanded to include multiple languages in future iterations. Lastly, our primary focus was on chart generation through large language models (LLMs), rather than on question answering. However, exploring question answering capabilities is a promising direction for future research.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
<section class="ltx_section" id="Sx2">
<h2 class="ltx_title ltx_title_section">Ethics Statement</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="Sx2.p1">
<p class="ltx_p" id="Sx2.p1.1">All data points generated in Text2Chart31 were created using large language models (LLMs) and are intended solely for visualization purposes. These data points do not represent real-world facts and should not be referenced as accurate depictions of actual data distributions.
Furthermore, they do not contain offensive contents.
Matplotlib library is based on PSF license. We have used open source models, libraries, and closed source models for their intended uses, and not use other than research purposes.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
<section class="ltx_section" id="Sx3">
<h2 class="ltx_title ltx_title_section">Acknowledgements</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="Sx3.p1">
<p class="ltx_p" id="Sx3.p1.1">We would like to thank the anonymous reviewers for their valuable feedback. This work was financially supported by SNU-NAVER Hyperscale AI Center, Institute of Information &amp; Communications Technology Planning &amp; Evaluation (IITP) grant funded by the Korea government (MSIT) (No.&nbsp;RS-2019-II191082, SW StarLab, No.&nbsp;RS-2022-II220156, Fundamental research on continual meta-learning for quality enhancement of casual videos and their 3D metaverse transformation, and No.&nbsp;RS-2021-II211343, Artificial Intelligence Graduate School Program (Seoul National University)), and the National Research Foundation of Korea (NRF) grant funded by the Korea government (MSIT) (No.&nbsp;2023R1A2C2005573).</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</section>
<section class="ltx_bibliography" id="bib">
<h2 class="ltx_title ltx_title_bibliography">References</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<ul class="ltx_biblist">
<li class="ltx_bibitem" id="bib.bib1">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Anthropic (2024)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Anthropic. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://www.anthropic.com/news/claude-3-family" title="">Introducing the next generation of claude</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib2">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Arakawa et&nbsp;al. (2018)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Riku Arakawa, Sosuke Kobayashi, Yuya Unno, Yuta Tsuboi, and Shin ichi Maeda. 2018.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1810.11748" title="">Dqn-tamer: Human-in-the-loop reinforcement learning with intractable feedback</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib2.1.1">Preprint</em>, arXiv:1810.11748.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib3">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Arumugam et&nbsp;al. (2019)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Dilip Arumugam, Jun&nbsp;Ki Lee, Sophie Saskin, and Michael&nbsp;L. Littman. 2019.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1902.04257" title="">Deep reinforcement learning from policy-dependent human feedback</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib3.1.1">Preprint</em>, arXiv:1902.04257.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib4">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Bai et&nbsp;al. (2022)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Yuntao Bai, Andy Jones, Kamal Ndousse, Amanda Askell, Anna Chen, Nova DasSarma, Dawn Drain, Stanislav Fort, Deep Ganguli, Tom Henighan, Nicholas Joseph, Saurav Kadavath, Jackson Kernion, Tom Conerly, Sheer El-Showk, Nelson Elhage, Zac Hatfield-Dodds, Danny Hernandez, Tristan Hume, Scott Johnston, Shauna Kravec, Liane Lovitt, Neel Nanda, Catherine Olsson, Dario Amodei, Tom Brown, Jack Clark, Sam McCandlish, Chris Olah, Ben Mann, and Jared Kaplan. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2204.05862" title="">Training a helpful and harmless assistant with reinforcement learning from human feedback</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib4.1.1">Preprint</em>, arXiv:2204.05862.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib5">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Banerjee and Lavie (2005)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Satanjeev Banerjee and Alon Lavie. 2005.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/W05-0909" title="">METEOR: An automatic metric for MT evaluation with improved correlation with human judgments</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib5.1.1">Proceedings of the ACL Workshop on Intrinsic and Extrinsic Evaluation Measures for Machine Translation and/or Summarization</em>, pages 65–72, Ann Arbor, Michigan. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib6">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Black et&nbsp;al. (2024)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Kevin Black, Michael Janner, Yilun Du, Ilya Kostrikov, and Sergey Levine. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2305.13301" title="">Training diffusion models with reinforcement learning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib6.1.1">Preprint</em>, arXiv:2305.13301.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib7">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Fetahu et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Besnik Fetahu, Zhiyu Chen, Oleg Rokhlenko, and Shervin Malmasi. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2310.16361" title="">Instructpts: Instruction-tuning llms for product title summarization</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib7.1.1">Preprint</em>, arXiv:2310.16361.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib8">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Friedman and Dieng (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Dan Friedman and Adji&nbsp;Bousso Dieng. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2210.02410" title="">The vendi score: A diversity evaluation metric for machine learning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib8.1.1">Preprint</em>, arXiv:2210.02410.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib9">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Glaese et&nbsp;al. (2022)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Amelia Glaese, Nat McAleese, Maja Trębacz, John Aslanides, Vlad Firoiu, Timo Ewalds, Maribeth Rauh, Laura Weidinger, Martin Chadwick, Phoebe Thacker, Lucy Campbell-Gillingham, Jonathan Uesato, Po-Sen Huang, Ramona Comanescu, Fan Yang, Abigail See, Sumanth Dathathri, Rory Greig, Charlie Chen, Doug Fritz, Jaume&nbsp;Sanchez Elias, Richard Green, Soňa Mokrá, Nicholas Fernando, Boxi Wu, Rachel Foley, Susannah Young, Iason Gabriel, William Isaac, John Mellor, Demis Hassabis, Koray Kavukcuoglu, Lisa&nbsp;Anne Hendricks, and Geoffrey Irving. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2209.14375" title="">Improving alignment of dialogue agents via targeted human judgements</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib9.1.1">Preprint</em>, arXiv:2209.14375.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib10">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Goyal et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Tanya Goyal, Junyi&nbsp;Jessy Li, and Greg Durrett. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2209.12356" title="">News summarization and evaluation in the era of gpt-3</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib10.1.1">Preprint</em>, arXiv:2209.12356.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib11">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Grootendorst (2022)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Maarten Grootendorst. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2203.05794" title="">Bertopic: Neural topic modeling with a class-based tf-idf procedure</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib11.1.1">Preprint</em>, arXiv:2203.05794.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib12">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Han et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Yucheng Han, Chi Zhang, Xin Chen, Xu&nbsp;Yang, Zhibin Wang, Gang Yu, Bin Fu, and Hanwang Zhang. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2311.16483" title="">Chartllama: A multimodal llm for chart understanding and generation</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib12.1.1">Preprint</em>, arXiv:2311.16483.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib13">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hu et&nbsp;al. (2021)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Edward&nbsp;J. Hu, Yelong Shen, Phillip Wallis, Zeyuan Allen-Zhu, Yuanzhi Li, Shean Wang, Lu&nbsp;Wang, and Weizhu Chen. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2106.09685" title="">Lora: Low-rank adaptation of large language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib13.1.1">Preprint</em>, arXiv:2106.09685.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib14">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Hunter (2007)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
J.&nbsp;D. Hunter. 2007.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://doi.org/10.1109/MCSE.2007.55" title="">Matplotlib: A 2d graphics environment</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib14.1.1">Computing in Science &amp; Engineering</em>, 9(3):90–95.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib15">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kahou et&nbsp;al. (2018)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Samira&nbsp;Ebrahimi Kahou, Vincent Michalski, Adam Atkinson, Akos Kadar, Adam Trischler, and Yoshua Bengio. 2018.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1710.07300" title="">Figureqa: An annotated figure dataset for visual reasoning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib15.1.1">Preprint</em>, arXiv:1710.07300.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib16">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kantharaj et&nbsp;al. (2022)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Shankar Kantharaj, Rixie Tiffany&nbsp;Ko Leong, Xiang Lin, Ahmed Masry, Megh Thakkar, Enamul Hoque, and Shafiq Joty. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2203.06486" title="">Chart-to-text: A large-scale benchmark for chart summarization</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib16.1.1">Preprint</em>, arXiv:2203.06486.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib17">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Kojima et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Takeshi Kojima, Shixiang&nbsp;Shane Gu, Machel Reid, Yutaka Matsuo, and Yusuke Iwasawa. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2205.11916" title="">Large language models are zero-shot reasoners</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib17.1.1">Preprint</em>, arXiv:2205.11916.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib18">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et&nbsp;al. (2016)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Jiwei Li, Michel Galley, Chris Brockett, Jianfeng Gao, and Bill Dolan. 2016.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1510.03055" title="">A diversity-promoting objective function for neural conversation models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib18.1.1">Preprint</em>, arXiv:1510.03055.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib19">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Li et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Raymond Li, Loubna&nbsp;Ben Allal, Yangtian Zi, Niklas Muennighoff, Denis Kocetkov, Chenghao Mou, Marc Marone, Christopher Akiki, Jia Li, Jenny Chim, Qian Liu, Evgenii Zheltonozhskii, Terry&nbsp;Yue Zhuo, Thomas Wang, Olivier Dehaene, Mishig Davaadorj, Joel Lamy-Poirier, João Monteiro, Oleh Shliazhko, Nicolas Gontier, Nicholas Meade, Armel Zebaze, Ming-Ho Yee, Logesh&nbsp;Kumar Umapathi, Jian Zhu, Benjamin Lipkin, Muhtasham Oblokulov, Zhiruo Wang, Rudra Murthy, Jason Stillerman, Siva&nbsp;Sankalp Patel, Dmitry Abulkhanov, Marco Zocca, Manan Dey, Zhihan Zhang, Nour Fahmy, Urvashi Bhattacharyya, Wenhao Yu, Swayam Singh, Sasha Luccioni, Paulo Villegas, Maxim Kunakov, Fedor Zhdanov, Manuel Romero, Tony Lee, Nadav Timor, Jennifer Ding, Claire Schlesinger, Hailey Schoelkopf, Jan Ebert, Tri Dao, Mayank Mishra, Alex Gu, Jennifer Robinson, Carolyn&nbsp;Jane Anderson, Brendan Dolan-Gavitt, Danish Contractor, Siva Reddy, Daniel Fried, Dzmitry Bahdanau, Yacine Jernite, Carlos&nbsp;Muñoz Ferrandis, Sean Hughes, Thomas Wolf, Arjun Guha, Leandro von
Werra, and Harm de&nbsp;Vries. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2305.06161" title="">Starcoder: may the source be with you!</a>
</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib19.1.1">Preprint</em>, arXiv:2305.06161.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib20">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Lin (2004)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Chin-Yew Lin. 2004.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://aclanthology.org/W04-1013" title="">ROUGE: A package for automatic evaluation of summaries</a>.

</span>
<span class="ltx_bibblock">In <em class="ltx_emph ltx_font_italic" id="bib.bib20.1.1">Text Summarization Branches Out</em>, pages 74–81, Barcelona, Spain. Association for Computational Linguistics.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib21">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Haotian Liu, Chunyuan Li, Qingyang Wu, and Yong&nbsp;Jae Lee. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2304.08485" title="">Visual instruction tuning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib21.1.1">Preprint</em>, arXiv:2304.08485.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib22">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Liu and Low (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Tiedong Liu and Bryan Kian&nbsp;Hsiang Low. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2305.14201" title="">Goat: Fine-tuned llama outperforms gpt-4 on arithmetic tasks</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib22.1.1">Preprint</em>, arXiv:2305.14201.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib23">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Masry et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Ahmed Masry, Parsa Kavehzadeh, Xuan&nbsp;Long Do, Enamul Hoque, and Shafiq Joty. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2305.14761" title="">Unichart: A universal vision-language pretrained model for chart comprehension and reasoning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib23.1.1">Preprint</em>, arXiv:2305.14761.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib24">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Masry et&nbsp;al. (2022)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Ahmed Masry, Do&nbsp;Xuan Long, Jia&nbsp;Qing Tan, Shafiq Joty, and Enamul Hoque. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2203.10244" title="">Chartqa: A benchmark for question answering about charts with visual and logical reasoning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib24.1.1">Preprint</em>, arXiv:2203.10244.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib25">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Meta AI (2024)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Meta AI. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://ai.meta.com/blog/meta-llama-3/" title="">Introducing meta llama 3: The most capable openly available llm to date</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib26">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Methani et&nbsp;al. (2020)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Nitesh Methani, Pritha Ganguly, Mitesh&nbsp;M. Khapra, and Pratyush Kumar. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1909.00997" title="">Plotqa: Reasoning over scientific plots</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib26.1.1">Preprint</em>, arXiv:1909.00997.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib27">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Nijkamp et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Erik Nijkamp, Bo&nbsp;Pang, Hiroaki Hayashi, Lifu Tu, Huan Wang, Yingbo Zhou, Silvio Savarese, and Caiming Xiong. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2203.13474" title="">Codegen: An open large language model for code with multi-turn program synthesis</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib27.1.1">Preprint</em>, arXiv:2203.13474.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib28">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
OpenAI. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2303.08774" title="">Gpt-4 technical report</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib28.1.1">Preprint</em>, arXiv:2303.08774.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib29">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">OpenAI (2024)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
OpenAI. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://openai.com/index/hello-gpt-4o/" title="">Hello gpt-4o</a>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib30">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ouyang et&nbsp;al. (2022)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Long Ouyang, Jeff Wu, Xu&nbsp;Jiang, Diogo Almeida, Carroll&nbsp;L. Wainwright, Pamela Mishkin, Chong Zhang, Sandhini Agarwal, Katarina Slama, Alex Ray, John Schulman, Jacob Hilton, Fraser Kelton, Luke Miller, Maddie Simens, Amanda Askell, Peter Welinder, Paul Christiano, Jan Leike, and Ryan Lowe. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2203.02155" title="">Training language models to follow instructions with human feedback</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib30.1.1">Preprint</em>, arXiv:2203.02155.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib31">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Ren et&nbsp;al. (2020)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Shuo Ren, Daya Guo, Shuai Lu, Long Zhou, Shujie Liu, Duyu Tang, Neel Sundaresan, Ming Zhou, Ambrosio Blanco, and Shuai Ma. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2009.10297" title="">Codebleu: a method for automatic evaluation of code synthesis</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib31.1.1">Preprint</em>, arXiv:2009.10297.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib32">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Rozière et&nbsp;al. (2024)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Baptiste Rozière, Jonas Gehring, Fabian Gloeckle, Sten Sootla, Itai Gat, Xiaoqing&nbsp;Ellen Tan, Yossi Adi, Jingyu Liu, Romain Sauvestre, Tal Remez, Jérémy Rapin, Artyom Kozhevnikov, Ivan Evtimov, Joanna Bitton, Manish Bhatt, Cristian&nbsp;Canton Ferrer, Aaron Grattafiori, Wenhan Xiong, Alexandre Défossez, Jade Copet, Faisal Azhar, Hugo Touvron, Louis Martin, Nicolas Usunier, Thomas Scialom, and Gabriel Synnaeve. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2308.12950" title="">Code llama: Open foundation models for code</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib32.1.1">Preprint</em>, arXiv:2308.12950.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib33">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Sanh et&nbsp;al. (2022)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Victor Sanh, Albert Webson, Colin Raffel, Stephen&nbsp;H. Bach, Lintang Sutawika, Zaid Alyafeai, Antoine Chaffin, Arnaud Stiegler, Teven&nbsp;Le Scao, Arun Raja, Manan Dey, M&nbsp;Saiful Bari, Canwen Xu, Urmish Thakker, Shanya&nbsp;Sharma Sharma, Eliza Szczechla, Taewoon Kim, Gunjan Chhablani, Nihal Nayak, Debajyoti Datta, Jonathan Chang, Mike Tian-Jian Jiang, Han Wang, Matteo Manica, Sheng Shen, Zheng&nbsp;Xin Yong, Harshit Pandey, Rachel Bawden, Thomas Wang, Trishala Neeraj, Jos Rozen, Abheesht Sharma, Andrea Santilli, Thibault Fevry, Jason&nbsp;Alan Fries, Ryan Teehan, Tali Bers, Stella Biderman, Leo Gao, Thomas Wolf, and Alexander&nbsp;M. Rush. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2110.08207" title="">Multitask prompted training enables zero-shot task generalization</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib33.1.1">Preprint</em>, arXiv:2110.08207.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib34">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Schulman et&nbsp;al. (2017)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
John Schulman, Filip Wolski, Prafulla Dhariwal, Alec Radford, and Oleg Klimov. 2017.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1707.06347" title="">Proximal policy optimization algorithms</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib34.1.1">Preprint</em>, arXiv:1707.06347.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib35">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Stiennon et&nbsp;al. (2022)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Nisan Stiennon, Long Ouyang, Jeff Wu, Daniel&nbsp;M. Ziegler, Ryan Lowe, Chelsea Voss, Alec Radford, Dario Amodei, and Paul Christiano. 2022.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2009.01325" title="">Learning to summarize from human feedback</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib35.1.1">Preprint</em>, arXiv:2009.01325.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib36">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Touvron et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Hugo Touvron, Louis Martin, Kevin Stone, Peter Albert, Amjad Almahairi, Yasmine Babaei, Nikolay Bashlykov, Soumya Batra, Prajjwal Bhargava, Shruti Bhosale, Dan Bikel, Lukas Blecher, Cristian&nbsp;Canton Ferrer, Moya Chen, Guillem Cucurull, David Esiobu, Jude Fernandes, Jeremy Fu, Wenyin Fu, Brian Fuller, Cynthia Gao, Vedanuj Goswami, Naman Goyal, Anthony Hartshorn, Saghar Hosseini, Rui Hou, Hakan Inan, Marcin Kardas, Viktor Kerkez, Madian Khabsa, Isabel Kloumann, Artem Korenev, Punit&nbsp;Singh Koura, Marie-Anne Lachaux, Thibaut Lavril, Jenya Lee, Diana Liskovich, Yinghai Lu, Yuning Mao, Xavier Martinet, Todor Mihaylov, Pushkar Mishra, Igor Molybog, Yixin Nie, Andrew Poulton, Jeremy Reizenstein, Rashi Rungta, Kalyan Saladi, Alan Schelten, Ruan Silva, Eric&nbsp;Michael Smith, Ranjan Subramanian, Xiaoqing&nbsp;Ellen Tan, Binh Tang, Ross Taylor, Adina Williams, Jian&nbsp;Xiang Kuan, Puxin Xu, Zheng Yan, Iliyan Zarov, Yuchen Zhang, Angela Fan, Melanie Kambadur, Sharan Narang, Aurelien Rodriguez, Robert Stojnic, Sergey Edunov, and Thomas
Scialom. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2307.09288" title="">Llama 2: Open foundation and fine-tuned chat models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib36.1.1">Preprint</em>, arXiv:2307.09288.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib37">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Varia et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Siddharth Varia, Shuai Wang, Kishaloy Halder, Robert Vacareanu, Miguel Ballesteros, Yassine Benajiba, Neha&nbsp;Anna John, Rishita Anubhai, Smaranda Muresan, and Dan Roth. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2210.06629" title="">Instruction tuning for few-shot aspect-based sentiment analysis</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib37.1.1">Preprint</em>, arXiv:2210.06629.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib38">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et&nbsp;al. (2023a)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Xuezhi Wang, Jason Wei, Dale Schuurmans, Quoc Le, Ed&nbsp;Chi, Sharan Narang, Aakanksha Chowdhery, and Denny Zhou. 2023a.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2203.11171" title="">Self-consistency improves chain of thought reasoning in language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib38.1.1">Preprint</em>, arXiv:2203.11171.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib39">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wang et&nbsp;al. (2023b)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Yizhong Wang, Yeganeh Kordi, Swaroop Mishra, Alisa Liu, Noah&nbsp;A. Smith, Daniel Khashabi, and Hannaneh Hajishirzi. 2023b.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2212.10560" title="">Self-instruct: Aligning language models with self-generated instructions</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib39.1.1">Preprint</em>, arXiv:2212.10560.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib40">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Wei et&nbsp;al. (2023)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Jason Wei, Xuezhi Wang, Dale Schuurmans, Maarten Bosma, Brian Ichter, Fei Xia, Ed&nbsp;Chi, Quoc Le, and Denny Zhou. 2023.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2201.11903" title="">Chain-of-thought prompting elicits reasoning in large language models</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib40.1.1">Preprint</em>, arXiv:2201.11903.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib41">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Xia et&nbsp;al. (2024)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Renqiu Xia, Bo&nbsp;Zhang, Hancheng Ye, Xiangchao Yan, Qi&nbsp;Liu, Hongbin Zhou, Zijun Chen, Min Dou, Botian Shi, Junchi Yan, and Yu&nbsp;Qiao. 2024.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2402.12185" title="">Chartx &amp; chartvlm: A versatile benchmark and foundation model for complicated chart reasoning</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib41.1.1">Preprint</em>, arXiv:2402.12185.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib42">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Yoo et&nbsp;al. (2024)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Kang&nbsp;Min Yoo, Jaegeun Han, Sookyo In, Heewon Jeon, Jisu Jeong, Jaewook Kang, Hyunwook Kim, Kyung-Min Kim, Munhyong Kim, Sungju Kim, et&nbsp;al. 2024.

</span>
<span class="ltx_bibblock">Hyperclova x technical report.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib42.1.1">arXiv preprint arXiv:2404.01954</em>.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib43">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhang et&nbsp;al. (2020)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Tianyi Zhang, Varsha Kishore, Felix Wu, Kilian&nbsp;Q. Weinberger, and Yoav Artzi. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1904.09675" title="">Bertscore: Evaluating text generation with bert</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib43.1.1">Preprint</em>, arXiv:1904.09675.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib44">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhu et&nbsp;al. (2021)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Jiawen Zhu, Jinye Ran, Roy&nbsp;Ka wei Lee, Kenny Choo, and Zhi Li. 2021.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/2108.06897" title="">Autochart: A dataset for chart-to-text generation task</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib44.1.1">Preprint</em>, arXiv:2108.06897.

</span>
</li>
<li class="ltx_bibitem" id="bib.bib45">
<span class="ltx_tag ltx_role_refnum ltx_tag_bibitem">Zhu et&nbsp;al. (2020)<button class="back-to-reference-btn" aria-label="Back to the article">↑</button></span>
<span class="ltx_bibblock">
Jun-Yan Zhu, Taesung Park, Phillip Isola, and Alexei&nbsp;A. Efros. 2020.

</span>
<span class="ltx_bibblock"><a class="ltx_ref ltx_href" href="https://arxiv.org/abs/1703.10593" title="">Unpaired image-to-image translation using cycle-consistent adversarial networks</a>.

</span>
<span class="ltx_bibblock"><em class="ltx_emph ltx_font_italic" id="bib.bib45.1.1">Preprint</em>, arXiv:1703.10593.

</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section class="ltx_appendix" id="A1">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix A </span>Details of Text2Chart31 Dataset</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A1.p1">
<p class="ltx_p" id="A1.p1.1">In this section, we provide a comprehensive overview of the Text2Chart31 dataset, including its categories, examples, summary statistics, topic distribution and plot type distribution.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<section class="ltx_subsection" id="A1.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.1 </span>Categories and Examples</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A1.SS1.p1">
<p class="ltx_p" id="A1.SS1.p1.1"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.F4" title="In A.1 Categories and Examples ‣ Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">4</span></a> illustrates the diverse range of plot types included in the Text2Chart31 dataset. The dataset covers 31 different plot types, grouped into 5 categories: Pairwise Chart, Statistical Distribution Chart, Gridded Chart, Irregularly Gridded Chart, and 3D &amp; Volumetric Chart. The examples provided for each plot type illustrate the variety of data and plot types present in the dataset.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="A1.F4"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_portrait" height="954" id="A1.F4.g1" src="https://arxiv.org/html/2410.04064v1/x4.png" width="706">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 4: </span>Examples from the 31 plot types in Text2Chart31 dataset, grouped into 5 chart categories.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_subsection" id="A1.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.2 </span>Dataset Summary</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A1.SS2.p1">
<p class="ltx_p" id="A1.SS2.p1.2">The Text2Chart31 dataset consists of 11,128 data points, with 9,705 in the training set and 1,423 in the test set. The dataset is categorized into five categories of charts: Pairwise, Statistical Distribution, Gridded, Irregularly Gridded, and Statistical Distribution and 3D &amp; Volumetric chart. Among the total data points, 8,166 include both data tables (<math alttext="d" class="ltx_Math" display="inline" id="A1.SS2.p1.1.m1.1"><semantics id="A1.SS2.p1.1.m1.1a"><mi id="A1.SS2.p1.1.m1.1.1" xref="A1.SS2.p1.1.m1.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="A1.SS2.p1.1.m1.1b"><ci id="A1.SS2.p1.1.m1.1.1.cmml" xref="A1.SS2.p1.1.m1.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS2.p1.1.m1.1c">d</annotation><annotation encoding="application/x-llamapun" id="A1.SS2.p1.1.m1.1d">italic_d</annotation></semantics></math>) and reasoning steps (<math alttext="r" class="ltx_Math" display="inline" id="A1.SS2.p1.2.m2.1"><semantics id="A1.SS2.p1.2.m2.1a"><mi id="A1.SS2.p1.2.m2.1.1" xref="A1.SS2.p1.2.m2.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="A1.SS2.p1.2.m2.1b"><ci id="A1.SS2.p1.2.m2.1.1.cmml" xref="A1.SS2.p1.2.m2.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.SS2.p1.2.m2.1c">r</annotation><annotation encoding="application/x-llamapun" id="A1.SS2.p1.2.m2.1d">italic_r</annotation></semantics></math>), with 7,142 in the training set and 1,024 in the test set.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_table" id="A1.T5">
<table class="ltx_tabular ltx_centering ltx_guessed_headers ltx_align_middle" id="A1.T5.5">
<tbody class="ltx_tbody">
<tr class="ltx_tr" id="A1.T5.5.1.1">
<td class="ltx_td ltx_border_tt" id="A1.T5.5.1.1.1"></td>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A1.T5.5.1.1.2"><span class="ltx_text ltx_font_bold" id="A1.T5.5.1.1.2.1">Train</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A1.T5.5.1.1.3"><span class="ltx_text ltx_font_bold" id="A1.T5.5.1.1.3.1">Test</span></th>
<th class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_tt" id="A1.T5.5.1.1.4"><span class="ltx_text ltx_font_bold" id="A1.T5.5.1.1.4.1">Total</span></th>
</tr>
<tr class="ltx_tr" id="A1.T5.5.2.2">
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.5.2.2.1">Pairwise Chart</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.5.2.2.2">3026 (1557)</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.5.2.2.3">472 (241)</td>
<td class="ltx_td ltx_align_left ltx_border_t" id="A1.T5.5.2.2.4">3498 (1798)</td>
</tr>
<tr class="ltx_tr" id="A1.T5.5.3.3">
<td class="ltx_td ltx_align_left" id="A1.T5.5.3.3.1">Statistical Distribution Chart</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.3.3.2">2878 (1784)</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.3.3.3">452 (284)</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.3.3.4">3330 (2068)</td>
</tr>
<tr class="ltx_tr" id="A1.T5.5.4.4">
<td class="ltx_td ltx_align_left" id="A1.T5.5.4.4.1">Gridded Chart</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.4.4.2">1305 (1305)</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.4.4.3">192 (192)</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.4.4.4">1497 (1497)</td>
</tr>
<tr class="ltx_tr" id="A1.T5.5.5.5">
<td class="ltx_td ltx_align_left" id="A1.T5.5.5.5.1">Irregularly Gridded Chart</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.5.5.2">1145 (1145)</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.5.5.3">148 (148)</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.5.5.4">1293 (1293)</td>
</tr>
<tr class="ltx_tr" id="A1.T5.5.6.6">
<td class="ltx_td ltx_align_left" id="A1.T5.5.6.6.1">3D &amp; Volumetric Chart</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.6.6.2">1351 (1351)</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.6.6.3">159 (159)</td>
<td class="ltx_td ltx_align_left" id="A1.T5.5.6.6.4">1510 (1510)</td>
</tr>
<tr class="ltx_tr" id="A1.T5.5.7.7">
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="A1.T5.5.7.7.1"><span class="ltx_text ltx_font_bold" id="A1.T5.5.7.7.1.1">Total</span></td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="A1.T5.5.7.7.2">9705 (7142)</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="A1.T5.5.7.7.3">1423 (1024)</td>
<td class="ltx_td ltx_align_left ltx_border_bb ltx_border_t" id="A1.T5.5.7.7.4">11128 (8166)</td>
</tr>
</tbody>
</table>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 5: </span>Summary of the Text2Chart31 dataset. The numbers in parentheses indicate the data points that include both data tables (<math alttext="d" class="ltx_Math" display="inline" id="A1.T5.3.m1.1"><semantics id="A1.T5.3.m1.1b"><mi id="A1.T5.3.m1.1.1" xref="A1.T5.3.m1.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="A1.T5.3.m1.1c"><ci id="A1.T5.3.m1.1.1.cmml" xref="A1.T5.3.m1.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T5.3.m1.1d">d</annotation><annotation encoding="application/x-llamapun" id="A1.T5.3.m1.1e">italic_d</annotation></semantics></math>) and reasoning steps (<math alttext="r" class="ltx_Math" display="inline" id="A1.T5.4.m2.1"><semantics id="A1.T5.4.m2.1b"><mi id="A1.T5.4.m2.1.1" xref="A1.T5.4.m2.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="A1.T5.4.m2.1c"><ci id="A1.T5.4.m2.1.1.cmml" xref="A1.T5.4.m2.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="A1.T5.4.m2.1d">r</annotation><annotation encoding="application/x-llamapun" id="A1.T5.4.m2.1e">italic_r</annotation></semantics></math>).</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</section>
<section class="ltx_subsection" id="A1.SS3">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.3 </span>Topic Distribution</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A1.SS3.p1">
<p class="ltx_p" id="A1.SS3.p1.1"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.F5" title="In A.3 Topic Distribution ‣ Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">5</span></a> shows the distribution of keywords within the topic pool extracted using BERTopic<cite class="ltx_cite ltx_citemacro_citep">(Grootendorst, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib11" title="">2022</a>)</cite>. The generated topic pool encompasses a diverse range of fact-based and natural topics, ensuring comprehensive coverage across various subject areas.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="A1.F5"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="399" id="A1.F5.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/topic-dist.png" width="538">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 5: </span>Distribution of keywords within the topic pool, showcasing the diverse and balanced coverage of topics in the Text2Chart31 dataset. </figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_subsection" id="A1.SS4">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.4 </span>Plot Type Distribution</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A1.SS4.p1">
<p class="ltx_p" id="A1.SS4.p1.1">As shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.F6" title="In A.4 Plot Type Distribution ‣ Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">6</span></a>, our dataset, Text2Chart31, exhibits the most diverse and well-balanced distribution across various plot types when compared to other existing datasets. While existing datasets have primarily focused on common plot types such as bar charts and line charts, our dataset provides comprehensive coverage across a diverse range of plot types. This includes more complicated plot types like 3D surface plots and contour plots.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="A1.F6">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A1.F6.sf1"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="149" id="A1.F6.sf1.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/T4C31.png" width="240">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(a) </span>Text2Chart31 (ours)</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A1.F6.sf2"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="123" id="A1.F6.sf2.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/plot_qa.png" width="156">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(b) </span>PlotQA&nbsp;<cite class="ltx_cite ltx_citemacro_citep">(Methani et&nbsp;al., <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib26" title="">2020</a>)</cite></figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A1.F6.sf3"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="123" id="A1.F6.sf3.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/chart_qa.png" width="156">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(c) </span>ChartQA&nbsp;<cite class="ltx_cite ltx_citemacro_cite">Masry et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib24" title="">2022</a>)</cite></figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A1.F6.sf4"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="123" id="A1.F6.sf4.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/figure_qa.png" width="156">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(d) </span>FigureQA&nbsp;<cite class="ltx_cite ltx_citemacro_cite">Kahou et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib15" title="">2018</a>)</cite></figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A1.F6.sf5"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="148" id="A1.F6.sf5.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/autochart.png" width="186">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(e) </span>Autochart&nbsp;<cite class="ltx_cite ltx_citemacro_cite">Zhu et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib44" title="">2021</a>)</cite></figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_flex_cell ltx_flex_size_3">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A1.F6.sf6"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="148" id="A1.F6.sf6.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/chart_to_text.png" width="186">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(f) </span>Chart-to-Text&nbsp;<cite class="ltx_cite ltx_citemacro_cite">Kantharaj et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib16" title="">2022</a>)</cite></figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A1.F6.sf7"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="142" id="A1.F6.sf7.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/chartllama.png" width="186">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(g) </span>ChartLlama&nbsp;<cite class="ltx_cite ltx_citemacro_cite">Han et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib12" title="">2023</a>)</cite></figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure class="ltx_figure ltx_figure_panel ltx_align_center" id="A1.F6.sf8"><img alt="Refer to caption" class="ltx_graphics ltx_img_landscape" height="142" id="A1.F6.sf8.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/chart_x.png" width="186">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure">(h) </span>ChartX&nbsp;<cite class="ltx_cite ltx_citemacro_cite">Xia et&nbsp;al. (<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#bib.bib41" title="">2024</a>)</cite></figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
</div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 6: </span>Comparison of the distribution of chart types with other datasets. Each pie chart shows the distribution of the plot types for each dataset, respectively. </figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_subsection" id="A1.SS5">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">A.5 </span>Example of Text2Chart31</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A1.SS5.p1">
<p class="ltx_p" id="A1.SS5.p1.1">This section shows example from the Text2Chart31 dataset, providing a overall view of the data point including description, code, reasoning step, and data table, as shown in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A1.T6" title="In A.5 Example of Text2Chart31 ‣ Appendix A Details of Text2Chart31 Dataset ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Table</span>&nbsp;<span class="ltx_text ltx_ref_tag">6</span></a>.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_table" id="A1.T6">
<div class="ltx_inline-block ltx_align_center ltx_transformed_outer" id="A1.T6.1" style="width:346.9pt;height:883.5pt;vertical-align:-0.8pt;"><span class="ltx_transformed_inner" style="transform:translate(-46.4pt,118.0pt) scale(0.78908,0.78908) ;">
<p class="ltx_p" id="A1.T6.1.1"><span class="ltx_text" id="A1.T6.1.1.1">
<span class="ltx_inline-block ltx_transformed_outer" id="A1.T6.1.1.1.1" style="width:439.6pt;height:1119.6pt;vertical-align:-1.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="A1.T6.1.1.1.1.1"><span class="ltx_text" id="A1.T6.1.1.1.1.1.1">
<span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A1.T6.1.1.1.1.1.1.1">
<span class="ltx_thead">
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.1.1">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_th ltx_th_column ltx_border_tt" id="A1.T6.1.1.1.1.1.1.1.1.1.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.1.1.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.1.1.1.1.1" style="width:433.6pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.1.1.1.1.1.1.1.1.1.1.1.1">Description</span></span>
</span></span></span>
</span>
<span class="ltx_tbody">
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.2.1">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.1.1.1.1.1.1.2.1.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.2.1.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.2.1.1.1.1" style="width:433.6pt;">This contour plot showcases the temperature variations along a coastal region using the dataset ’coastal_temperature.csv’. The dataset includes information on latitude, longitude, and temperature (in degrees Celsius) for different coastal locations.</span>
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.2.1.1.1.2">By establishing a grid of points (X, Y) representing latitude and longitude, we can model the temperature variations using the equation ’Z = a*X + b*Y + c’, where a and b are regression coefficients determined through analysis.</span>
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.2.1.1.1.3">Here are the first six rows of the dataset:</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.3.2">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.3.2.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.3.2.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.3.2.1.1.1" style="width:433.6pt;">Latitude, Longitude, Temperature (°C)</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.4.3">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.4.3.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.4.3.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.4.3.1.1.1" style="width:433.6pt;">40.7128, -74.0060, 15</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.5.4">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.5.4.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.5.4.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.5.4.1.1.1" style="width:433.6pt;">48.8566, 2.3522, 10</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.6.5">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.6.5.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.6.5.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.6.5.1.1.1" style="width:433.6pt;">37.7749, -122.4194, 18</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.7.6">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.7.6.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.7.6.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.7.6.1.1.1" style="width:433.6pt;">51.5074, -0.1278, 12</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.8.7">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.8.7.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.8.7.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.8.7.1.1.1" style="width:433.6pt;">35.6895, 139.6917, 20</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.9.8">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.9.8.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.9.8.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.9.8.1.1.1" style="width:433.6pt;">42.3601, -71.0589, 14</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.10.9">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.10.9.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.10.9.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.10.9.1.1.1" style="width:433.6pt;">Visualizing this data on a contour plot helps us analyze the spatial distribution of temperature along the coast. The contour lines indicate regions with similar temperature values, enabling us to identify temperature patterns and variations based on geographical location. This plot can be useful for understanding coastal climate, identifying areas with specific temperature ranges, and providing insights for planning activities related to beach tourism, coastal agriculture, and coastal development.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.11.10">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.1.1.1.1.1.1.11.10.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.11.10.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.11.10.1.1.1" style="width:433.6pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.1.1.1.1.1.1.11.10.1.1.1.1">Code</span></span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.12.11">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.1.1.1.1.1.1.12.11.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.12.11.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.12.11.1.1.1" style="width:433.6pt;">…</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.13.12">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.13.12.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.13.12.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.13.12.1.1.1" style="width:433.6pt;"># Define the grid over which we will interpolate the data</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.14.13">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.14.13.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.14.13.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.14.13.1.1.1" style="width:433.6pt;">x_range = np.linspace(data[’Longitude’].min(), data[’Longitude’].max(), len(data[’Longitude’].unique()))</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.15.14">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.15.14.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.15.14.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.15.14.1.1.1" style="width:433.6pt;">y_range = np.linspace(data[’Latitude’].min(), data[’Latitude’].max(), len(data[’Latitude’].unique()))</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.16.15">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.16.15.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.16.15.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.16.15.1.1.1" style="width:433.6pt;">x, y = np.meshgrid(x_range, y_range)</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.17.16">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.17.16.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.17.16.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.17.16.1.1.1" style="width:433.6pt;"># Interpolate the measured temperature data onto the defined grid</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.18.17">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.18.17.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.18.17.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.18.17.1.1.1" style="width:433.6pt;">z = griddata((data[’Longitude’], data[’Latitude’]), data[’Temperature (°C)’], (x, y), method=’cubic’)</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.19.18">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.19.18.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.19.18.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.19.18.1.1.1" style="width:433.6pt;"># Configure the contour plot</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.20.19">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.20.19.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.20.19.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.20.19.1.1.1" style="width:433.6pt;">plt.figure(figsize=(10, 6))</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.21.20">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.21.20.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.21.20.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.21.20.1.1.1" style="width:433.6pt;">contours = plt.contourf(x, y, z, cmap=’RdYlBu_r’)</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.22.21">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.22.21.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.22.21.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.22.21.1.1.1" style="width:433.6pt;">plt.colorbar(contours)</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.23.22">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.23.22.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.23.22.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.23.22.1.1.1" style="width:433.6pt;">…</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.24.23">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.1.1.1.1.1.1.24.23.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.24.23.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.24.23.1.1.1" style="width:433.6pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.1.1.1.1.1.1.24.23.1.1.1.1">Reasoning Step</span></span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.25.24">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.1.1.1.1.1.1.25.24.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.25.24.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.25.24.1.1.1" style="width:433.6pt;">1. Characteristics of the data and CSV file:</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.26.25">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.26.25.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.26.25.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.26.25.1.1.1" style="width:433.6pt;">- The data includes three columns: Latitude, Longitude, and Temperature (°C).</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.27.26">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.27.26.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.27.26.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.27.26.1.1.1" style="width:433.6pt;">- Latitude and Longitude are geographical coordinates specifying north-south and east-west positioning on the Earth’s surface.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.28.27">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.28.27.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.28.27.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.28.27.1.1.1" style="width:433.6pt;">- Temperature is a numerical measure indicating the amount of heat energy.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.29.28">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.29.28.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.29.28.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.29.28.1.1.1" style="width:433.6pt;">- The data thus represents the temperature at different geographical locations around the world. ….</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.30.29">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.30.29.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.30.29.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.30.29.1.1.1" style="width:433.6pt;">2. Possible plot types:</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.31.30">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.31.30.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.31.30.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.31.30.1.1.1" style="width:433.6pt;">- **Map-based plots**: Utilizing the latitude and longitude values to plot geographical data on a global map.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.32.31">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.32.31.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.32.31.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.32.31.1.1.1" style="width:433.6pt;">- **Scatter Plot**: To visualize how temperature varies with latitude or longitude.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.33.32">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.33.32.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.33.32.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.33.32.1.1.1" style="width:433.6pt;">- **Contour or Heatmap**: Can be plotted over a map to show temperature distributions.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.34.33">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.34.33.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.34.33.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.34.33.1.1.1" style="width:433.6pt;">- **3D Surface Plot**: Making use of X (Longitude), Y (Latitude), and Z (Temperature) to form a 3D visualization of temperature variations.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.35.34">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.35.34.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.35.34.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.35.34.1.1.1" style="width:433.6pt;">3. Most suitable plot type:</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.36.35">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.36.35.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.36.35.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.36.35.1.1.1" style="width:433.6pt;">- **Map-based Heatmap or Contour Map**: This is especially suitable due to the geographical nature of the data (latitude and longitude) combined with a third variable (temperature). This type of visualization will allow viewers to easily understand temperature distributions across various geographical locations. …</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.37.36">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.37.36.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.37.36.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.37.36.1.1.1" style="width:433.6pt;">4. Further considerations for the description:</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.38.37">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.38.37.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.38.37.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.38.37.1.1.1" style="width:433.6pt;">- Verify the accuracy and intent of the negative temperature values. If these are anomalies, it must be clearly stated to avoid misinterpretation.
- Include proper color scales to represent temperature values, ensuring that the map is accessible and readable.</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.39.38">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.39.38.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.39.38.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.39.38.1.1.1" style="width:433.6pt;">- Consider adding interactive elements such as tooltips or zoom features if the visualization is digital, to enable detailed inspection of data at specific locations. …</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.40.39">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.1.1.1.1.1.1.40.39.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.40.39.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.40.39.1.1.1" style="width:433.6pt;"><span class="ltx_text ltx_font_bold" id="A1.T6.1.1.1.1.1.1.1.40.39.1.1.1.1">Data Table</span></span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.41.40">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_t" id="A1.T6.1.1.1.1.1.1.1.41.40.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.41.40.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.41.40.1.1.1" style="width:433.6pt;">Latitude,Longitude,Temperature (°C)</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.42.41">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.42.41.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.42.41.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.42.41.1.1.1" style="width:433.6pt;">5.2927,-173.8335,31.8</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.43.42">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.43.42.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.43.42.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.43.42.1.1.1" style="width:433.6pt;">-12.0503,72.5485,-39.1</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.44.43">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.44.43.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.44.43.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.44.43.1.1.1" style="width:433.6pt;">86.2247,137.7667,27.6</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.45.44">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.45.44.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.45.44.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.45.44.1.1.1" style="width:433.6pt;">-43.7762,-120.4625,44.5</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.46.45">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.46.45.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.46.45.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.46.45.1.1.1" style="width:433.6pt;">16.645,-132.0993,-48.7</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.47.46">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.47.46.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.47.46.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.47.46.1.1.1" style="width:433.6pt;">23.3972,-46.3823,-9.7</span>
</span></span></span>
<span class="ltx_tr" id="A1.T6.1.1.1.1.1.1.1.48.47">
<span class="ltx_td ltx_nopad_r ltx_align_justify ltx_align_top ltx_border_bb" id="A1.T6.1.1.1.1.1.1.1.48.47.1">
<span class="ltx_inline-block ltx_align_top" id="A1.T6.1.1.1.1.1.1.1.48.47.1.1">
<span class="ltx_p" id="A1.T6.1.1.1.1.1.1.1.48.47.1.1.1" style="width:433.6pt;">…</span>
</span></span></span>
</span>
</span></span></span>
</span></span></span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 6: </span>An example data point in Text2Chart31, comprising a description, code, reasoning step, and CSV data table (top to bottom). The description elucidates the contour plot, coastal_temperature.csv dataset, and insights from the visualization. The code utilizes Matplotlib for generating the contour plot. The reasoning step delineates the rationale behind crafting the data table and visualization, factoring in data characteristics, plot types, and additional consideration. Finally, the data table shows the dataset columns: Latitude, Longitude, and Temperature (°C).</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
<section class="ltx_appendix" id="A2">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix B </span>Experimental Details</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<section class="ltx_paragraph" id="A2.SS0.SSS0.Px1">
<h4 class="ltx_title ltx_title_paragraph">Training setup and hyperparameters</h4><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A2.SS0.SSS0.Px1.p1">
<p class="ltx_p" id="A2.SS0.SSS0.Px1.p1.1">We report the hyperparameters for training supervised fine-tuning and joint reinforcement learning based fine-tuning in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A2.T7" title="In Training setup and hyperparameters ‣ Appendix B Experimental Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Table</span>&nbsp;<span class="ltx_text ltx_ref_tag">7</span></a> and <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A2.T8" title="In Training setup and hyperparameters ‣ Appendix B Experimental Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Table</span>&nbsp;<span class="ltx_text ltx_ref_tag">8</span></a>.
For supervised fine-tuning, we fine-tune base model with LoRA adapter with the configuration in <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A2.T7" title="In Training setup and hyperparameters ‣ Appendix B Experimental Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Table</span>&nbsp;<span class="ltx_text ltx_ref_tag">7</span></a>.
For reinforcement learning-based fine-tuning, we start with the supervised fine-tuned model and merge the LoRA parameters into the original model parameters.
Then, we apply an additional LoRA adapter according to the configuration in Table <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A2.T8" title="Table 8 ‣ Training setup and hyperparameters ‣ Appendix B Experimental Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">8</span></a>. Finally, we fine-tune both Task 1 and Task 3 models jointly using the PPO algorithm.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_table" id="A2.T7">
<p class="ltx_p ltx_align_center" id="A2.T7.1"><span class="ltx_text" id="A2.T7.1.1">
<span class="ltx_inline-block ltx_transformed_outer" id="A2.T7.1.1.1" style="width:382.0pt;height:216pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="A2.T7.1.1.1.1"><span class="ltx_text" id="A2.T7.1.1.1.1.1">
<span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A2.T7.1.1.1.1.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.1.1">
<span class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="A2.T7.1.1.1.1.1.1.1.1.1"></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="A2.T7.1.1.1.1.1.1.1.1.2">Task 1</span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="A2.T7.1.1.1.1.1.1.1.1.3">Task 2</span>
<span class="ltx_td ltx_align_center ltx_border_tt" id="A2.T7.1.1.1.1.1.1.1.1.4">Task 3</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.2.2">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.2.2.1">Model</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.2.2.2">L3I-8B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.2.2.3">CLI-13B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.2.2.4">L2C-7B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.2.2.5">L3I-8B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.2.2.6">L3I-8B</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.3.3">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A2.T7.1.1.1.1.1.1.3.3.1">Training epochs</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.3.3.2">5</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.3.3.3">5</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.3.3.4">5</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.3.3.5">5</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T7.1.1.1.1.1.1.3.3.6">5</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.4.4">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.4.4.1">Training set size</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.4.4.2">9705</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.4.4.3">9705</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.4.4.4">7142</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.4.4.5">7142</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.4.4.6">9705</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.5.5">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.5.5.1">Batch size</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.5.5.2">16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.5.5.3">16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.5.5.4">16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.5.5.5">16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.5.5.6">16</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.6.6">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.6.6.1">Optimizer</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.6.6.2">AdamW</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.6.6.3">AdamW</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.6.6.4">AdamW</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.6.6.5">AdamW</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.6.6.6">AdamW</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.7.7">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.7.7.1">Learning rate</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.7.7.2">5e-4</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.7.7.3">5e-4</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.7.7.4">5e-5</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.7.7.5">5e-5</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.7.7.6">5e-4</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.8.8">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.8.8.1">Learning rate scheduling</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.8.8.2">Constant</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.8.8.3">Constant</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.8.8.4">Constant</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.8.8.5">Constant</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.8.8.6">Constant</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.9.9">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.9.9.1">Mixed precision</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.9.9.2">BF16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.9.9.3">BF16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.9.9.4">BF16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.9.9.5">BF16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.9.9.6">BF16</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.10.10">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.10.10.1">LoRA rank</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.10.10.2">16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.10.10.3">16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.10.10.4">32</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.10.10.5">32</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.10.10.6">32</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.11.11">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T7.1.1.1.1.1.1.11.11.1">LoRA alpha</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.11.11.2">16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.11.11.3">16</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.11.11.4">32</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.11.11.5">32</span>
<span class="ltx_td ltx_align_center" id="A2.T7.1.1.1.1.1.1.11.11.6">32</span></span>
<span class="ltx_tr" id="A2.T7.1.1.1.1.1.1.12.12">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="A2.T7.1.1.1.1.1.1.12.12.1">LoRA dropout</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T7.1.1.1.1.1.1.12.12.2">0.1</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T7.1.1.1.1.1.1.12.12.3">0.1</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T7.1.1.1.1.1.1.12.12.4">0.1</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T7.1.1.1.1.1.1.12.12.5">0.1</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T7.1.1.1.1.1.1.12.12.6">0.1</span></span>
</span>
</span></span></span>
</span></span></span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 7: </span>Training hyperparameters for supervised fine-tuning. L3I-8B, CLI-13B, and L2C-7B denote Llama 3 Instruct-8B, Code Llama Instruct-13B, and Llama 2 Chat-7B, respectively.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_table" id="A2.T8">
<p class="ltx_p ltx_align_center" id="A2.T8.1"><span class="ltx_text" id="A2.T8.1.1">
<span class="ltx_inline-block ltx_transformed_outer" id="A2.T8.1.1.1" style="width:278.4pt;height:216pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(0.0pt,0.0pt) scale(1,1) ;">
<span class="ltx_p" id="A2.T8.1.1.1.1"><span class="ltx_text" id="A2.T8.1.1.1.1.1">
<span class="ltx_tabular ltx_guessed_headers ltx_align_middle" id="A2.T8.1.1.1.1.1.1">
<span class="ltx_tbody">
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.1.1">
<span class="ltx_td ltx_th ltx_th_row ltx_border_tt" id="A2.T8.1.1.1.1.1.1.1.1.1"></span>
<span class="ltx_td ltx_align_center ltx_border_tt ltx_colspan ltx_colspan_2" id="A2.T8.1.1.1.1.1.1.1.1.2">Task 1</span>
<span class="ltx_td ltx_align_center ltx_border_tt" id="A2.T8.1.1.1.1.1.1.1.1.3">Task 3</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.2.2">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.2.2.1">Model</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.1.1.1.1.2.2.2">L3I-8B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.1.1.1.1.2.2.3">CLI-13B</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.1.1.1.1.2.2.4">L3I-8B</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.3.3">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" id="A2.T8.1.1.1.1.1.1.3.3.1">Batch size</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.1.1.1.1.3.3.2">8</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.1.1.1.1.3.3.3">8</span>
<span class="ltx_td ltx_align_center ltx_border_t" id="A2.T8.1.1.1.1.1.1.3.3.4">8</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.4.4">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.4.4.1">Training steps</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.4.4.2">63</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.4.4.3">94</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.4.4.4">63</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.5.5">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.5.5.1">Training data size</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.5.5.2">504</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.5.5.3">752</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.5.5.4">504</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.6.6">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.6.6.1">Optimizer</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.6.6.2">Adam</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.6.6.3">Adam</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.6.6.4">Adam</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.7.7">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.7.7.1">Learning rate</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.7.7.2">1.41e-5</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.7.7.3">7.05e-6</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.7.7.4">1.41e-5</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.8.8">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.8.8.1">Learning rate scheduling</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.8.8.2">Constant</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.8.8.3">Constant</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.8.8.4">Constant</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.9.9">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.9.9.1">Mixed precision</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.9.9.2">BF16</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.9.9.3">BF16</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.9.9.4">BF16</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.10.10">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.10.10.1">LoRA rank</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.10.10.2">16</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.10.10.3">16</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.10.10.4">32</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.11.11">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row" id="A2.T8.1.1.1.1.1.1.11.11.1">LoRA alpha</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.11.11.2">16</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.11.11.3">16</span>
<span class="ltx_td ltx_align_center" id="A2.T8.1.1.1.1.1.1.11.11.4">32</span></span>
<span class="ltx_tr" id="A2.T8.1.1.1.1.1.1.12.12">
<span class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_bb" id="A2.T8.1.1.1.1.1.1.12.12.1">LoRA dropout</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T8.1.1.1.1.1.1.12.12.2">0.1</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T8.1.1.1.1.1.1.12.12.3">0.1</span>
<span class="ltx_td ltx_align_center ltx_border_bb" id="A2.T8.1.1.1.1.1.1.12.12.4">0.1</span></span>
</span>
</span></span></span>
</span></span></span></p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table">Table 8: </span>Training hyperparameters for RL fine-tuning. L3I-8B and CLI-13B denote Llama 3 Instruct-8B and Code Llama Instruct 13B, respectively.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
<section class="ltx_appendix" id="A3">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix C </span>Cycle Consistency Details</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A3.p1">
<p class="ltx_p" id="A3.p1.1">This method leverages the capabilities of language models to verify the consistency between the original plot description and the generated code, without the need for manual human evaluation. <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A3.F7" title="In Appendix C Cycle Consistency Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">7</span></a> and <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A3.F8" title="In Appendix C Cycle Consistency Details ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">8</span></a> illustrate examples of data points that fail and pass the cycle consistency verification, respectively. By employing this method, we ensure that the generated code and plot are well aligned with the intended visualization described in the original description, maintaining the quality of the Text2Chart31 dataset.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="A3.F7"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="392" id="A3.F7.g1" src="https://arxiv.org/html/2410.04064v1/x5.png" width="498">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 7: </span>Example of cycle consistency verification for a description and generated code, showcasing inconsistency in the plot type (2D histogram vs. bar chart) despite consistent data source and sufficient detail in both descriptions.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A3.F8"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="392" id="A3.F8.g1" src="https://arxiv.org/html/2410.04064v1/x6.png" width="498">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 8: </span>Example of cycle consistency verification for a description and generated code, showcasing consistency in the plot type (3D scatter plot), data source (crystal_art.csv), and sufficient detail in both descriptions to accurately redraw the plot.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_appendix" id="A4">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix D </span>Prompt Template</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<section class="ltx_subsection" id="A4.SS1">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">D.1 </span>Prompt Template used for Data Generation</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A4.SS1.p1">
<p class="ltx_p" id="A4.SS1.p1.1">This section presents the prompt templates used for various stages of the data generation process in the Text2Chart31 dataset.
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F9" title="In D.1 Prompt Template used for Data Generation ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">9</span></a> illustrates the prompt template used for topic generation, while <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F10" title="In D.1 Prompt Template used for Data Generation ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">10</span></a> shows the template for description generation. <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F11" title="In D.1 Prompt Template used for Data Generation ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">11</span></a> presents the template for description self-evaluation, and <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F12" title="In D.1 Prompt Template used for Data Generation ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">12</span></a> illustrates the template for code generation. <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F13" title="In D.1 Prompt Template used for Data Generation ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">13</span></a> shows the template used for cycle consistency verification, and <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F14" title="In D.1 Prompt Template used for Data Generation ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">14</span></a> presents the template for data table generation. <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F15" title="In D.1 Prompt Template used for Data Generation ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">15</span></a> illustrates the template for generating code that creates the data table, and <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F16" title="In D.1 Prompt Template used for Data Generation ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">16</span></a> shows the template for reasoning step generation.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="A4.F9"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="213" id="A4.F9.g1" src="https://arxiv.org/html/2410.04064v1/x7.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 9: </span>Prompt template used for topic generation</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F10"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="321" id="A4.F10.g1" src="https://arxiv.org/html/2410.04064v1/x8.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 10: </span>Prompt template used for description generation</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F11"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="200" id="A4.F11.g1" src="https://arxiv.org/html/2410.04064v1/x9.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 11: </span>Prompt template used for description self-evalution</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F12"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="185" id="A4.F12.g1" src="https://arxiv.org/html/2410.04064v1/x10.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 12: </span>Prompt template used for code generation</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F13"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="404" id="A4.F13.g1" src="https://arxiv.org/html/2410.04064v1/x11.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 13: </span>Prompt template used for cycle consistency verification </figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F14"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="225" id="A4.F14.g1" src="https://arxiv.org/html/2410.04064v1/x12.png" width="614">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 14: </span>Prompt template used for data table generation</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F15"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="187" id="A4.F15.g1" src="https://arxiv.org/html/2410.04064v1/x13.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 15: </span>Prompt template used for code used for data table generation</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F16"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="243" id="A4.F16.g1" src="https://arxiv.org/html/2410.04064v1/x14.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 16: </span>Prompt template used for reasoning step generation</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section class="ltx_subsection" id="A4.SS2">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">D.2 </span>Prompt Template for Tasks</h3><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A4.SS2.p1">
<p class="ltx_p" id="A4.SS2.p1.1">This section presents the prompt templates used for three tasks using the Text2Chart31 dataset, including description-to-chart, raw data-to-chart, and chart-to-description tasks.
<a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F17" title="In D.2 Prompt Template for Tasks ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">17</span></a> illustrates the prompt template used for the description-to-chart task, <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F18" title="In D.2 Prompt Template for Tasks ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">18</span></a> shows the template for the raw data-to-chart task, and <a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A4.F19" title="In D.2 Prompt Template for Tasks ‣ Appendix D Prompt Template ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">19</span></a> presents the template used for the chart-to-description task.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="A4.F17"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="228" id="A4.F17.g1" src="https://arxiv.org/html/2410.04064v1/x15.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 17: </span>Prompt template used for description to chart task</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F18"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="349" id="A4.F18.g1" src="https://arxiv.org/html/2410.04064v1/x16.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 18: </span>Prompt template used for raw data-to-chart task</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<figure class="ltx_figure" id="A4.F19"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_landscape" height="204" id="A4.F19.g1" src="https://arxiv.org/html/2410.04064v1/x17.png" width="623">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 19: </span>Prompt template used for chart-to-description task </figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</section>
<section class="ltx_appendix" id="A5">
<h2 class="ltx_title ltx_title_appendix">
<span class="ltx_tag ltx_tag_appendix">Appendix E </span>Details on Human Evaluation</h2><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_para" id="A5.p1">
<p class="ltx_p" id="A5.p1.1"><a class="ltx_ref" href="https://arxiv.org/html/2410.04064v1#A5.F20" title="In Appendix E Details on Human Evaluation ‣ Text2Chart31: Instruction Tuning for Chart Generation with Automatic Feedback"><span class="ltx_text ltx_ref_tag">Figure</span>&nbsp;<span class="ltx_text ltx_ref_tag">20</span></a> illustrates the user interface designed for the human evaluation task. The interface presents the crowd workers with a reference plot image and two generated plot images (Image 1 and Image 2) from different models, where the order of the generated images is randomly determined. The workers are asked to select one of the following options: Image 1 (Left) is more similar to the reference image, Image 2 (Right) is more similar to the reference image, both images are equally similar to the reference image, or neither image is similar to the reference image. The workers make their selection based on the similarity of the generated images to the reference image in terms of chart type, data representation, and visual appearance. We use Amazon Mechanical Turk and gather annotators from English speaking countries. We pay maximum $0.4 per HIT. We explain annotators that the provided answers are going to be used as a research purpose in our qualification HIT.</p><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
</div>
<figure class="ltx_figure" id="A5.F20"><img alt="Refer to caption" class="ltx_graphics ltx_centering ltx_img_square" height="534" id="A5.F20.g1" src="https://arxiv.org/html/2410.04064v1/extracted/5903455/figures/human-eval-ui.png" width="598">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure">Figure 20: </span>User interface for human evaluation comparing generated plot images.</figcaption>
</figure><button class="sr-only button" style="display: none;">Report issue for preceding element</button>
<div class="ltx_pagination ltx_role_newpage"></div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
</article>
</div>

</div>


<button type="button" class="btn btn-primary hover-rp-button" id="openForm">Report Issue</button><div class="modal" id="myForm" role="dialog" aria-labelledby="modal-title"><div class="modal-dialog"><form class="modal-content" id="myFormContent" enctype="multipart/form-data"><div class="modal-header" id="modal-header"><h5 class="modal-title">Report Github Issue</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><label for="form_title" id="modalTitle">Title:</label><input class="form-control" id="form_title" name="form_title" required="required" placeholder="Enter title"><label for="description" id="selectedTextModalDescription" style="display: none;">Content selection saved. Describe the issue below:</label><label for="description" id="nomralModalDescription">Description:</label><textarea class="form-control" id="description" name="description" required="required" style="height: 80px;" maxlength="500" placeholder="500 characters maximum"></textarea></div><div class="modal-footer d-flex justify-content-end"><button type="submit" class="sr-only button" id="modal-submit-sr">Submit without Github</button><button type="submit" class="btn btn-primary" id="modal-submit">Submit in Github</button></div></form></div></div><button id="small-report-button" type="button" class="btn btn-secondary btn-sm" style="background-color: rgb(179, 27, 27); position: fixed;">Report Issue for Selection</button><div class="ltx_page_footer">
        <div class="ltx_page_logo">
            Generated by
            <a href="https://math.nist.gov/~BMiller/LaTeXML/" class="ltx_LaTeXML_logo">
                <span style="letter-spacing: -0.2em; margin-right: 0.1em;">
                    L
                    <span style="font-size: 70%; position: relative; bottom: 2.2pt;">A</span>
                    T
                    <span style="position: relative; bottom: -0.4ex;">E</span>
                </span>
                <span class="ltx_font_smallcaps">xml</span>
                <img alt="[LOGO]" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==">
            </a>
        </div></div><footer id="footer" class="ltx_document">
        <div class="keyboard-glossary">
            <h2>Instructions for reporting errors</h2>
            <p>We are continuing to improve HTML versions of papers, and your feedback helps enhance accessibility and mobile support. To report errors in the HTML that will help us improve conversion and rendering, choose any of the methods listed below:</p>
            <ul>
                <li>Click the "Report Issue" button.</li>
                <li>Open a report feedback form via keyboard, use "<strong>Ctrl + ?</strong>".</li>
                <li>Make a text selection and click the "Report Issue for Selection" button near your cursor.</li>
                <li class="sr-only">You can use Alt+Y to toggle on and Alt+Shift+Y to toggle off accessible reporting links at each section.</li>
            </ul>
            <p>Our team has already identified <a class="ltx_ref" href="https://github.com/arXiv/html_feedback/issues" target="_blank">the following issues</a>. We appreciate your time reviewing and reporting rendering errors we may not have found yet. Your efforts will help us improve the HTML versions for all readers, because disability should not be a barrier to accessing research. Thank you for your continued support in championing open access for all.</p>
            <p>Have a free development cycle? Help support accessibility at arXiv! Our collaborators at LaTeXML maintain a <a class="ltx_ref" href="https://github.com/brucemiller/LaTeXML/wiki/Porting-LaTeX-packages-for-LaTeXML" target="_blank">list of packages that need conversion</a>, and welcome <a class="ltx_ref" href="https://github.com/brucemiller/LaTeXML/issues" target="_blank">developer contributions</a>.</p>
        </div>
    </footer></body></html>