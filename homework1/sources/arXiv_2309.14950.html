<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>[2309.14950] Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher</title><meta property="og:description" content="Adapting visual object detectors to operational target domains is a challenging task, commonly achieved using unsupervised domain adaptation (UDA) methods. Recent studies have shown that when the labeled dataset comes …">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher">
<meta name="twitter:image:src" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta name="twitter:image:alt" content="ar5iv logo">
<meta property="og:title" content="Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher">
<meta property="og:site_name" content="ar5iv">
<meta property="og:image" content="https://ar5iv.labs.arxiv.org/assets/ar5iv_card.png">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ar5iv.labs.arxiv.org/html/2309.14950">

<!--Generated on Wed Feb 28 14:36:44 2024 by LaTeXML (version 0.8.8) http://dlmf.nist.gov/LaTeXML/.-->
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<script>
  function detectColorScheme(){
    var theme="light";
    var current_theme = localStorage.getItem("ar5iv_theme");
    if(current_theme){
      if(current_theme == "dark"){
        theme = "dark";
      } }
    else if(!window.matchMedia) { return false; }
    else if(window.matchMedia("(prefers-color-scheme: dark)").matches) {
      theme = "dark"; }
    if (theme=="dark") {
      document.documentElement.setAttribute("data-theme", "dark");
    } else {
      document.documentElement.setAttribute("data-theme", "light"); } }

  detectColorScheme();

  function toggleColorScheme(){
    var current_theme = localStorage.getItem("ar5iv_theme");
    if (current_theme) {
      if (current_theme == "light") {
        localStorage.setItem("ar5iv_theme", "dark"); }
      else {
        localStorage.setItem("ar5iv_theme", "light"); } }
    else {
        localStorage.setItem("ar5iv_theme", "dark"); }
    detectColorScheme(); }
</script>
<link media="all" rel="stylesheet" href="/assets/ar5iv-fonts.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv.0.8.0.min.css"><link media="all" rel="stylesheet" href="/assets/ar5iv-site.0.2.2.css">
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Multi-Source Domain Adaptation for Object Detection 
<br class="ltx_break">with Prototype-based Mean Teacher</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Atif Belal<sup id="id8.8.id1" class="ltx_sup">1</sup>, Akhil Meethal<sup id="id9.9.id2" class="ltx_sup">1</sup>, Francisco Perdigon Romero<sup id="id10.10.id3" class="ltx_sup">2</sup>, Marco Pedersoli<sup id="id11.11.id4" class="ltx_sup">1</sup>, Eric Granger<sup id="id12.12.id5" class="ltx_sup">1</sup> 
<br class="ltx_break"><sup id="id13.13.id6" class="ltx_sup">1</sup> LIVIA, Dept. of Systems Engineering, ETS Montreal, Canada
<br class="ltx_break"><sup id="id14.14.id7" class="ltx_sup">2</sup> GAIA Montreal, Ericsson Canada
<br class="ltx_break"><span id="id15.15.id8" class="ltx_text ltx_font_typewriter" style="font-size:90%;">atif.belal.1@ens.etsmtl.ca, </span>
<span id="id16.16.id9" class="ltx_text ltx_font_typewriter" style="font-size:90%;">akhilpm135@gmail.com, </span>
<span id="id17.17.id10" class="ltx_text ltx_font_typewriter" style="font-size:90%;">francisco.perdigon.romero@ericsson.com, </span> 
<br class="ltx_break"><span id="id18.18.id11" class="ltx_text ltx_font_typewriter" style="font-size:90%;">{marco.pedersoli, eric.granger}@etsmtl.ca </span>
</span></span>
</div>

<div class="ltx_abstract">
<h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p id="id19.id1" class="ltx_p">Adapting visual object detectors to operational target domains is a challenging task, commonly achieved using unsupervised domain adaptation (UDA) methods. Recent studies have shown that when the labeled dataset comes from multiple source domains, treating them as separate domains and performing a multi-source domain adaptation (MSDA) improves the accuracy and robustness over blending these source domains and performing a UDA. For adaptation, existing MSDA methods learn domain-invariant and domain-specific parameters (for each source domain). However, unlike single-source UDA methods, learning domain-specific parameters makes them grow significantly in proportion to the number of source domains. This paper proposes a novel MSDA method called Prototype-based Mean Teacher (PMT), which uses class prototypes instead of domain-specific subnets to encode domain-specific information. These prototypes are learned using a contrastive loss, aligning the same categories across domains and separating different categories far apart. Given the use of prototypes, the number of parameters required for our PMT method does not increase significantly with the number of source domains, thus reducing memory issues and possible overfitting. Empirical studies indicate that PMT outperforms state-of-the-art MSDA methods on several challenging object detection datasets. Our code is available at <a target="_blank" href="https://github.com/imatif17/Prototype-Mean-Teacher" title="" class="ltx_ref ltx_href">https://github.com/imatif17/Prototype-Mean-Teacher</a></p>
</div>
<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<figure id="S1.F1" class="ltx_figure ltx_align_center">
<div class="ltx_flex_figure">
<div class="ltx_flex_cell ltx_flex_size_1">
<table id="S1.F1.2" class="ltx_tabular ltx_figure_panel ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S1.F1.2.1.1" class="ltx_tr">
<td id="S1.F1.2.1.1.1" class="ltx_td ltx_align_left"></td>
<td id="S1.F1.2.1.1.2" class="ltx_td ltx_align_left"></td>
</tr>
<tr id="S1.F1.2.2.2" class="ltx_tr">
<td id="S1.F1.2.2.2.1" class="ltx_td ltx_align_left">
<br class="ltx_break">
</td>
<td id="S1.F1.2.2.2.2" class="ltx_td ltx_align_left"></td>
</tr>
</tbody>
</table>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S1.F1.sf1" class="ltx_figure ltx_figure_panel"><img src="/html/2309.14950/assets/images/model1.png" id="S1.F1.sf1.g1" class="ltx_graphics ltx_img_landscape" width="296" height="146" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S1.F1.sf1.3.1.1" class="ltx_text" style="font-size:90%;">(a)</span> </span><span id="S1.F1.sf1.4.2" class="ltx_text ltx_font_bold" style="font-size:90%;">Mean-teacher with blending of sources <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite><span id="S1.F1.sf1.4.2.1" class="ltx_text ltx_font_medium">. A standard mean-teacher model with a single student and teacher network, trained by blending data from multiple sources. Domain-invariant features are obtained from the backbone trained with a discriminator. No domain-specific information is considered.</span></span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S1.F1.sf2" class="ltx_figure ltx_figure_panel"><img src="/html/2309.14950/assets/images/model2_new.png" id="S1.F1.sf2.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="296" height="231" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S1.F1.sf2.3.1.1" class="ltx_text" style="font-size:90%;">(b)</span> </span><span id="S1.F1.sf2.4.2" class="ltx_text ltx_font_bold" style="font-size:90%;">Divide-and-Merge Spindle Network (DMSN) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite><span id="S1.F1.sf2.4.2.1" class="ltx_text ltx_font_medium">. MSDA with multiple student networks and a single teacher network. Domain-invariant features are obtained from the first half of the backbone (BB1). Domain-specific features are obtained from BB2 and the detection head for each source domain.</span></span></figcaption>
</figure>
</div>
<div class="ltx_flex_break"></div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S1.F1.sf3" class="ltx_figure ltx_figure_panel"><img src="/html/2309.14950/assets/images/model3.png" id="S1.F1.sf3.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="296" height="136" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S1.F1.sf3.3.1.1" class="ltx_text" style="font-size:90%;">(c)</span> </span><span id="S1.F1.sf3.4.2" class="ltx_text ltx_font_bold" style="font-size:90%;">Target-Relevant Knowledge Preservation (TRKP) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite><span id="S1.F1.sf3.4.2.1" class="ltx_text ltx_font_medium">. MSDA with multiple teacher networks and a single student network. Domain-invariant features are obtained from the backbone by reversing detection head gradients. Domain-specific features are obtained from the detection heads.</span></span></figcaption>
</figure>
</div>
<div class="ltx_flex_cell ltx_flex_size_2">
<figure id="S1.F1.sf4" class="ltx_figure ltx_figure_panel"><img src="/html/2309.14950/assets/images/model4.png" id="S1.F1.sf4.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="296" height="162" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S1.F1.sf4.3.1.1" class="ltx_text" style="font-size:90%;">(d)</span> </span><span id="S1.F1.sf4.4.2" class="ltx_text ltx_font_bold" style="font-size:90%;">Our proposed PMT method<span id="S1.F1.sf4.4.2.1" class="ltx_text ltx_font_medium">. The original mean teacher framework is used with one student and one teacher. Domain-invariant features are obtained from the backbone trained with a discriminator. Domain-specific information is obtained from domain-specific prototypes for each class.</span></span></figcaption>
</figure>
</div>
</div>
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S1.F1.3.1.1" class="ltx_text" style="font-size:90%;">Figure 1</span>: </span><span id="S1.F1.4.2" class="ltx_text" style="font-size:90%;">A comparison of the MSDA architectures using the mean-teacher method in the case with two source domains. While state-of-the-art methods require domain-specific parameters (typically a detection head for each source domain) for preserving domain information, our method stores domain-specific information using prototypes for each class and domain.</span></figcaption>
</figure>
<div id="S1.p1" class="ltx_para">
<p id="S1.p1.1" class="ltx_p">Object detection (OD), one of the fundamental tasks in computer vision, has made significant progress in recent years <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib38" title="" class="ltx_ref">38</a>, <a href="#bib.bib2" title="" class="ltx_ref">2</a>, <a href="#bib.bib24" title="" class="ltx_ref">24</a>]</cite>. However, this progress, typically measured by performance on curated benchmark datasets such as MS-COCO <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite> or Pascal VOC <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib6" title="" class="ltx_ref">6</a>]</cite>, may decline significantly with changes in the data distribution between training (source) and testing (target) domain data <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib37" title="" class="ltx_ref">37</a>, <a href="#bib.bib31" title="" class="ltx_ref">31</a>]</cite>. This distribution shift can be caused by several factors, like variations in capture conditions, e.g., weather, illumination, resolution, geographic locations, and size of objects. Since it is too costly to annotate data collected from every operational target domain, researchers have explored a multitude of techniques for unsupervised domain adaptation (UDA), which seeks to find a common representation space between data distributions of a labelled source domain and an unlabeled target domain <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib22" title="" class="ltx_ref">22</a>, <a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p id="S1.p2.1" class="ltx_p">Among the state-of-art UDA strategies for OD, feature alignment <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>, <a href="#bib.bib39" title="" class="ltx_ref">39</a>]</cite> and pseudo-labeling of target data <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib12" title="" class="ltx_ref">12</a>, <a href="#bib.bib13" title="" class="ltx_ref">13</a>]</cite> are the most common. Recently, impressive results were obtained by combining both strategies,
where the popular mean-teacher <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite> framework is used to pseudo-label target domain images, and a gradient reversal layer (GRL) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite> integrated domain discriminator is used to align features in an adversarial way <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>, <a href="#bib.bib1" title="" class="ltx_ref">1</a>, <a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>. Mainstream UDA methods rely on a single source domain with labeled data during adaptation. However, in a practical setting, several source datasets may be available, and the datasets may also be collected from multiple domains, e.g., sensors, environment, etc. The simplest way to use UDA with multiple sources of training data is by blending source domain data to form a single labeled source dataset, as shown in <a href="#S1.F1.sf1" title="In Figure 1 ‣ 1 Introduction ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">1(a)</span></a>. However, considering each domain as a separate source allows the OD model to address domain discrepancies between individual source distributions explicitly, and aligning sources during adaptation has been found to provide a higher level of recognition accuracy and robustness <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite>. This setting is referred to as multi-source domain adaptation (MSDA).</p>
</div>
<div id="S1.p3" class="ltx_para">
<p id="S1.p3.1" class="ltx_p">Two methods have been proposed for MSDA in OD – Divide-and-Merge Spindle Network (DMSN) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> and Target-Relevant Knowledge Preservation (TRKP) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>. The overall architecture of both methods can be divided into domain-general and domain-specific model parameters. The initial part of the network learns a domain-invariant representation, while the latter part learns a domain-specific representation. This allows the model to align the features from multiple domains while preserving domain-specific information. As illustrated in <a href="#S1.F1.sf2" title="In Figure 1 ‣ 1 Introduction ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">1(b)</span></a>, DMSN relies on a mean-teacher training framework, with domain-specific student subnets for each source domain. In contrast, as shown in <a href="#S1.F1.sf3" title="In Figure 1 ‣ 1 Introduction ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">1(c)</span></a>, TRKP proposed an adversarial disentanglement method and preserved domain-specific knowledge using a separate detection head for each source domain. The detection results from teacher detection heads are combined to generate pseudo-labels for the student network trained on the target domain. To fully exploit the potential of multiple sources, both methods advocate for learning domain-specific weights associated with each source domain.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p id="S1.p4.1" class="ltx_p">Learning domain-specific weights for each source domain leads to MSDA architectures that are, however, difficult to train for OD since the number of parameters increases rapidly with the number of sources. It has also been observed that the weighted combination of the source domains based on the heuristics of domain similarities is not optimal, where the similarity of each pair of source-target domains is quantified by a weight value <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib30" title="" class="ltx_ref">30</a>]</cite>. Additionally, DMSN and TRKP focus on finding a common representation space between domains through adversarial training <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> and adversarial disentanglement <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>, yet ignore the class-wise alignment of object categories. The appearance, scale, orientation, and other visual characteristics of objects may vary across domains. If objects in the source and target domains exhibit significant differences, it may be challenging to align the features extracted by the OD model to accurately detect objects in the target domain. An increase in the number of source domains in MSDA exacerbates this problem. In this paper, we propose learning domain-specific class prototype vectors to address these issues. We argue that MSDA can be simplified without learning domain-specific parameters for each source domain. Instead, learning domain-specific class prototype vectors is sufficient to encode domain-specific information for each source domain. Additionally, given the use of prototypes, the number of parameters of our method does not increase significantly with the number of source domains, thereby reducing memory issues and possible overfitting on the source data.</p>
</div>
<div id="S1.p5" class="ltx_para">
<p id="S1.p5.1" class="ltx_p">In this paper, a new MSDA method is introduced for OD that is based on mean-teacher <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite> and adversarial training (see <a href="#S1.F1.sf4" title="In Figure 1 ‣ 1 Introduction ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">1(d)</span></a>). Our Prototype Mean Teacher (PMT) method relies on a cost-effective architecture that stores class and domain-specific information using prototypes. To learn domain-invariant features, a multi-class domain discriminator is integrated into the features generated from the OD backbone. To preserve the domain-specific information of all domains, PMT learns class prototypes using the prototype network for all the domains. Additionally, the prototypes are trained using a contrastive loss to perform a class-conditional and domain-specific adaptation of the detector. The resulting PMT method allows adapting detectors to achieve a higher OD accuracy while being conceptually more straightforward than state-of-the-art methods.</p>
</div>
<div id="S1.p6" class="ltx_para ltx_noindent">
<p id="S1.p6.1" class="ltx_p"><span id="S1.p6.1.1" class="ltx_text ltx_font_bold">Our main contributions are summarized as follows.
<br class="ltx_break"></span>(1) A novel Prototype-based Mean Teacher (PMT) method is introduced for the MSDA of ODs. Our approach shows that prototype vectors can elegantly and efficiently encode domain-specific information.
<br class="ltx_break">(2) Using a multi-domain discriminator and a contrastive loss on the prototypes for each domain and class, the proposed PMT can perform class- and domain-conditional adaptation, improving a detector’s performance.
<br class="ltx_break">(3) Our experimental results and ablations show that the PMT method scales well to the number of source domains and can outperform state-of-the-art MSDA methods for OD on benchmark domain adaptation datasets.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Related Works</h2>

<div id="S2.p1" class="ltx_para ltx_noindent">
<p id="S2.p1.1" class="ltx_p"><span id="S2.p1.1.1" class="ltx_text ltx_font_bold">(a) Unsupervised Domain Adaptation.</span>
UDA methods seek to alleviate the problem of domain shift by adapting the detector trained on a labeled source dataset to a target domain using an unlabeled target dataset. Minimizing the domain discrepancy and adversarial learning are the most popular approaches for UDA. In <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>, the authors integrated a domain discriminator into Faster-RCNN to learn domain-invariant feature representations. Later, <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite> proposed strong and weak alignment loss. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib10" title="" class="ltx_ref">10</a>]</cite> proposed a two-step domain alignment using cycle GAN to mitigate the impact of domain shift between the source and target domains. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib32" title="" class="ltx_ref">32</a>]</cite> proposed a graph-based prototype alignment, using contrastive loss. <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite> utilized a combination of adversarial training and the mean teacher paradigm. All these methods were designed for UDA from a single source domain. When the source data itself is coming from multiple domains, modeling the domain discrepancy improves the accuracy and robustness of the target OD model <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>, <a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite>. In our work, we focus on MSDA methods for OD that explicitly consider domain discrepancies among source datasets.</p>
</div>
<div id="S2.p2" class="ltx_para ltx_noindent">
<p id="S2.p2.1" class="ltx_p"><span id="S2.p2.1.1" class="ltx_text ltx_font_bold">(b) Multi-Source Domain Adaptation.</span>
In the MSDA setting, the labeled training data belongs to multiple source domains, and the MSDA method aims to distill the knowledge from these source domains to the target domain.
Only two methods have been proposed for this setting called DMSN <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> and TRKP <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>. Fundamentally, both methods preserve domain-specific information by utilizing specific subnets for each source domain. Thus the parameters of these methods increase linearly as the number of source domains increases. In our method, we preserve domain-specific information using prototypes for each domain which results in a constant size for the MSDA model regardless of the number of source domains.</p>
</div>
<div id="S2.p3" class="ltx_para ltx_noindent">
<p id="S2.p3.1" class="ltx_p"><span id="S2.p3.1.1" class="ltx_text ltx_font_bold">(c) Prototype-based Learning.</span> This learning paradigm is used in different forms for open-world OD <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite>, semi-supervised OD <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite>, domain-adaptive OD <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>]</cite>, and few-shot OD <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>. In open-world OD, prototypes are used to achieve class separation in the feature space and help unknown class identification <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib11" title="" class="ltx_ref">11</a>]</cite>. In semi-supervised OD, prototypes are used for class distribution alignment between pseudo-labels and their highly overlapping proposals <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib14" title="" class="ltx_ref">14</a>]</cite>. In the detection of objects across domains, prototypes are used to align the foreground and background regions between the source and target domains <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib35" title="" class="ltx_ref">35</a>]</cite>. Few-shot OD used universal prototypes to learn the invariant object characteristics across seen and novel classes <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib26" title="" class="ltx_ref">26</a>]</cite>. In contrast, we use prototypes in MSDA settings to simplify domain-specific feature learning.</p>
</div>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>Proposed Method</h2>

<div id="S3.p1" class="ltx_para">
<p id="S3.p1.17" class="ltx_p">In the MSDA setting, we assume that there are <math id="S3.p1.1.m1.1" class="ltx_Math" alttext="N" display="inline"><semantics id="S3.p1.1.m1.1a"><mi id="S3.p1.1.m1.1.1" xref="S3.p1.1.m1.1.1.cmml">N</mi><annotation-xml encoding="MathML-Content" id="S3.p1.1.m1.1b"><ci id="S3.p1.1.m1.1.1.cmml" xref="S3.p1.1.m1.1.1">𝑁</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.1.m1.1c">N</annotation></semantics></math> source domains <math id="S3.p1.2.m2.4" class="ltx_Math" alttext="S_{1},S_{2},…,S_{N}" display="inline"><semantics id="S3.p1.2.m2.4a"><mrow id="S3.p1.2.m2.4.4.3" xref="S3.p1.2.m2.4.4.4.cmml"><msub id="S3.p1.2.m2.2.2.1.1" xref="S3.p1.2.m2.2.2.1.1.cmml"><mi id="S3.p1.2.m2.2.2.1.1.2" xref="S3.p1.2.m2.2.2.1.1.2.cmml">S</mi><mn id="S3.p1.2.m2.2.2.1.1.3" xref="S3.p1.2.m2.2.2.1.1.3.cmml">1</mn></msub><mo id="S3.p1.2.m2.4.4.3.4" xref="S3.p1.2.m2.4.4.4.cmml">,</mo><msub id="S3.p1.2.m2.3.3.2.2" xref="S3.p1.2.m2.3.3.2.2.cmml"><mi id="S3.p1.2.m2.3.3.2.2.2" xref="S3.p1.2.m2.3.3.2.2.2.cmml">S</mi><mn id="S3.p1.2.m2.3.3.2.2.3" xref="S3.p1.2.m2.3.3.2.2.3.cmml">2</mn></msub><mo id="S3.p1.2.m2.4.4.3.5" xref="S3.p1.2.m2.4.4.4.cmml">,</mo><mi mathvariant="normal" id="S3.p1.2.m2.1.1" xref="S3.p1.2.m2.1.1.cmml">…</mi><mo id="S3.p1.2.m2.4.4.3.6" xref="S3.p1.2.m2.4.4.4.cmml">,</mo><msub id="S3.p1.2.m2.4.4.3.3" xref="S3.p1.2.m2.4.4.3.3.cmml"><mi id="S3.p1.2.m2.4.4.3.3.2" xref="S3.p1.2.m2.4.4.3.3.2.cmml">S</mi><mi id="S3.p1.2.m2.4.4.3.3.3" xref="S3.p1.2.m2.4.4.3.3.3.cmml">N</mi></msub></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.2.m2.4b"><list id="S3.p1.2.m2.4.4.4.cmml" xref="S3.p1.2.m2.4.4.3"><apply id="S3.p1.2.m2.2.2.1.1.cmml" xref="S3.p1.2.m2.2.2.1.1"><csymbol cd="ambiguous" id="S3.p1.2.m2.2.2.1.1.1.cmml" xref="S3.p1.2.m2.2.2.1.1">subscript</csymbol><ci id="S3.p1.2.m2.2.2.1.1.2.cmml" xref="S3.p1.2.m2.2.2.1.1.2">𝑆</ci><cn type="integer" id="S3.p1.2.m2.2.2.1.1.3.cmml" xref="S3.p1.2.m2.2.2.1.1.3">1</cn></apply><apply id="S3.p1.2.m2.3.3.2.2.cmml" xref="S3.p1.2.m2.3.3.2.2"><csymbol cd="ambiguous" id="S3.p1.2.m2.3.3.2.2.1.cmml" xref="S3.p1.2.m2.3.3.2.2">subscript</csymbol><ci id="S3.p1.2.m2.3.3.2.2.2.cmml" xref="S3.p1.2.m2.3.3.2.2.2">𝑆</ci><cn type="integer" id="S3.p1.2.m2.3.3.2.2.3.cmml" xref="S3.p1.2.m2.3.3.2.2.3">2</cn></apply><ci id="S3.p1.2.m2.1.1.cmml" xref="S3.p1.2.m2.1.1">…</ci><apply id="S3.p1.2.m2.4.4.3.3.cmml" xref="S3.p1.2.m2.4.4.3.3"><csymbol cd="ambiguous" id="S3.p1.2.m2.4.4.3.3.1.cmml" xref="S3.p1.2.m2.4.4.3.3">subscript</csymbol><ci id="S3.p1.2.m2.4.4.3.3.2.cmml" xref="S3.p1.2.m2.4.4.3.3.2">𝑆</ci><ci id="S3.p1.2.m2.4.4.3.3.3.cmml" xref="S3.p1.2.m2.4.4.3.3.3">𝑁</ci></apply></list></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.2.m2.4c">S_{1},S_{2},…,S_{N}</annotation></semantics></math> and one target domain <math id="S3.p1.3.m3.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S3.p1.3.m3.1a"><mi id="S3.p1.3.m3.1.1" xref="S3.p1.3.m3.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.p1.3.m3.1b"><ci id="S3.p1.3.m3.1.1.cmml" xref="S3.p1.3.m3.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.3.m3.1c">T</annotation></semantics></math>. Each source domain can be represented as <math id="S3.p1.4.m4.1" class="ltx_Math" alttext="S_{j}=\{(x^{j}_{i},y^{j}_{i})\}^{M_{j}}_{i=1}" display="inline"><semantics id="S3.p1.4.m4.1a"><mrow id="S3.p1.4.m4.1.1" xref="S3.p1.4.m4.1.1.cmml"><msub id="S3.p1.4.m4.1.1.3" xref="S3.p1.4.m4.1.1.3.cmml"><mi id="S3.p1.4.m4.1.1.3.2" xref="S3.p1.4.m4.1.1.3.2.cmml">S</mi><mi id="S3.p1.4.m4.1.1.3.3" xref="S3.p1.4.m4.1.1.3.3.cmml">j</mi></msub><mo id="S3.p1.4.m4.1.1.2" xref="S3.p1.4.m4.1.1.2.cmml">=</mo><msubsup id="S3.p1.4.m4.1.1.1" xref="S3.p1.4.m4.1.1.1.cmml"><mrow id="S3.p1.4.m4.1.1.1.1.1.1" xref="S3.p1.4.m4.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.p1.4.m4.1.1.1.1.1.1.2" xref="S3.p1.4.m4.1.1.1.1.1.2.cmml">{</mo><mrow id="S3.p1.4.m4.1.1.1.1.1.1.1.2" xref="S3.p1.4.m4.1.1.1.1.1.1.1.3.cmml"><mo stretchy="false" id="S3.p1.4.m4.1.1.1.1.1.1.1.2.3" xref="S3.p1.4.m4.1.1.1.1.1.1.1.3.cmml">(</mo><msubsup id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.2" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.2.cmml">x</mi><mi id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.3" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.3.cmml">i</mi><mi id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.3" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.3.cmml">j</mi></msubsup><mo id="S3.p1.4.m4.1.1.1.1.1.1.1.2.4" xref="S3.p1.4.m4.1.1.1.1.1.1.1.3.cmml">,</mo><msubsup id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.cmml"><mi id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.2" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.2.cmml">y</mi><mi id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.3" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.3.cmml">i</mi><mi id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.3" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.p1.4.m4.1.1.1.1.1.1.1.2.5" xref="S3.p1.4.m4.1.1.1.1.1.1.1.3.cmml">)</mo></mrow><mo stretchy="false" id="S3.p1.4.m4.1.1.1.1.1.1.3" xref="S3.p1.4.m4.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.p1.4.m4.1.1.1.3" xref="S3.p1.4.m4.1.1.1.3.cmml"><mi id="S3.p1.4.m4.1.1.1.3.2" xref="S3.p1.4.m4.1.1.1.3.2.cmml">i</mi><mo id="S3.p1.4.m4.1.1.1.3.1" xref="S3.p1.4.m4.1.1.1.3.1.cmml">=</mo><mn id="S3.p1.4.m4.1.1.1.3.3" xref="S3.p1.4.m4.1.1.1.3.3.cmml">1</mn></mrow><msub id="S3.p1.4.m4.1.1.1.1.3" xref="S3.p1.4.m4.1.1.1.1.3.cmml"><mi id="S3.p1.4.m4.1.1.1.1.3.2" xref="S3.p1.4.m4.1.1.1.1.3.2.cmml">M</mi><mi id="S3.p1.4.m4.1.1.1.1.3.3" xref="S3.p1.4.m4.1.1.1.1.3.3.cmml">j</mi></msub></msubsup></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.4.m4.1b"><apply id="S3.p1.4.m4.1.1.cmml" xref="S3.p1.4.m4.1.1"><eq id="S3.p1.4.m4.1.1.2.cmml" xref="S3.p1.4.m4.1.1.2"></eq><apply id="S3.p1.4.m4.1.1.3.cmml" xref="S3.p1.4.m4.1.1.3"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.3.1.cmml" xref="S3.p1.4.m4.1.1.3">subscript</csymbol><ci id="S3.p1.4.m4.1.1.3.2.cmml" xref="S3.p1.4.m4.1.1.3.2">𝑆</ci><ci id="S3.p1.4.m4.1.1.3.3.cmml" xref="S3.p1.4.m4.1.1.3.3">𝑗</ci></apply><apply id="S3.p1.4.m4.1.1.1.cmml" xref="S3.p1.4.m4.1.1.1"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.2.cmml" xref="S3.p1.4.m4.1.1.1">subscript</csymbol><apply id="S3.p1.4.m4.1.1.1.1.cmml" xref="S3.p1.4.m4.1.1.1"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.1.2.cmml" xref="S3.p1.4.m4.1.1.1">superscript</csymbol><set id="S3.p1.4.m4.1.1.1.1.1.2.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1"><interval closure="open" id="S3.p1.4.m4.1.1.1.1.1.1.1.3.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2"><apply id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.2">𝑥</ci><ci id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.2.3">𝑗</ci></apply><ci id="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.1.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2">subscript</csymbol><apply id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.1.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2">superscript</csymbol><ci id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.2.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.2">𝑦</ci><ci id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.3.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.2.3">𝑗</ci></apply><ci id="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.3.cmml" xref="S3.p1.4.m4.1.1.1.1.1.1.1.2.2.3">𝑖</ci></apply></interval></set><apply id="S3.p1.4.m4.1.1.1.1.3.cmml" xref="S3.p1.4.m4.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.p1.4.m4.1.1.1.1.3.1.cmml" xref="S3.p1.4.m4.1.1.1.1.3">subscript</csymbol><ci id="S3.p1.4.m4.1.1.1.1.3.2.cmml" xref="S3.p1.4.m4.1.1.1.1.3.2">𝑀</ci><ci id="S3.p1.4.m4.1.1.1.1.3.3.cmml" xref="S3.p1.4.m4.1.1.1.1.3.3">𝑗</ci></apply></apply><apply id="S3.p1.4.m4.1.1.1.3.cmml" xref="S3.p1.4.m4.1.1.1.3"><eq id="S3.p1.4.m4.1.1.1.3.1.cmml" xref="S3.p1.4.m4.1.1.1.3.1"></eq><ci id="S3.p1.4.m4.1.1.1.3.2.cmml" xref="S3.p1.4.m4.1.1.1.3.2">𝑖</ci><cn type="integer" id="S3.p1.4.m4.1.1.1.3.3.cmml" xref="S3.p1.4.m4.1.1.1.3.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.4.m4.1c">S_{j}=\{(x^{j}_{i},y^{j}_{i})\}^{M_{j}}_{i=1}</annotation></semantics></math>, where <math id="S3.p1.5.m5.4" class="ltx_Math" alttext="j=1,2,...,N" display="inline"><semantics id="S3.p1.5.m5.4a"><mrow id="S3.p1.5.m5.4.5" xref="S3.p1.5.m5.4.5.cmml"><mi id="S3.p1.5.m5.4.5.2" xref="S3.p1.5.m5.4.5.2.cmml">j</mi><mo id="S3.p1.5.m5.4.5.1" xref="S3.p1.5.m5.4.5.1.cmml">=</mo><mrow id="S3.p1.5.m5.4.5.3.2" xref="S3.p1.5.m5.4.5.3.1.cmml"><mn id="S3.p1.5.m5.1.1" xref="S3.p1.5.m5.1.1.cmml">1</mn><mo id="S3.p1.5.m5.4.5.3.2.1" xref="S3.p1.5.m5.4.5.3.1.cmml">,</mo><mn id="S3.p1.5.m5.2.2" xref="S3.p1.5.m5.2.2.cmml">2</mn><mo id="S3.p1.5.m5.4.5.3.2.2" xref="S3.p1.5.m5.4.5.3.1.cmml">,</mo><mi mathvariant="normal" id="S3.p1.5.m5.3.3" xref="S3.p1.5.m5.3.3.cmml">…</mi><mo id="S3.p1.5.m5.4.5.3.2.3" xref="S3.p1.5.m5.4.5.3.1.cmml">,</mo><mi id="S3.p1.5.m5.4.4" xref="S3.p1.5.m5.4.4.cmml">N</mi></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.5.m5.4b"><apply id="S3.p1.5.m5.4.5.cmml" xref="S3.p1.5.m5.4.5"><eq id="S3.p1.5.m5.4.5.1.cmml" xref="S3.p1.5.m5.4.5.1"></eq><ci id="S3.p1.5.m5.4.5.2.cmml" xref="S3.p1.5.m5.4.5.2">𝑗</ci><list id="S3.p1.5.m5.4.5.3.1.cmml" xref="S3.p1.5.m5.4.5.3.2"><cn type="integer" id="S3.p1.5.m5.1.1.cmml" xref="S3.p1.5.m5.1.1">1</cn><cn type="integer" id="S3.p1.5.m5.2.2.cmml" xref="S3.p1.5.m5.2.2">2</cn><ci id="S3.p1.5.m5.3.3.cmml" xref="S3.p1.5.m5.3.3">…</ci><ci id="S3.p1.5.m5.4.4.cmml" xref="S3.p1.5.m5.4.4">𝑁</ci></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.5.m5.4c">j=1,2,...,N</annotation></semantics></math> indicates the source domain, and where <math id="S3.p1.6.m6.1" class="ltx_Math" alttext="M_{j}" display="inline"><semantics id="S3.p1.6.m6.1a"><msub id="S3.p1.6.m6.1.1" xref="S3.p1.6.m6.1.1.cmml"><mi id="S3.p1.6.m6.1.1.2" xref="S3.p1.6.m6.1.1.2.cmml">M</mi><mi id="S3.p1.6.m6.1.1.3" xref="S3.p1.6.m6.1.1.3.cmml">j</mi></msub><annotation-xml encoding="MathML-Content" id="S3.p1.6.m6.1b"><apply id="S3.p1.6.m6.1.1.cmml" xref="S3.p1.6.m6.1.1"><csymbol cd="ambiguous" id="S3.p1.6.m6.1.1.1.cmml" xref="S3.p1.6.m6.1.1">subscript</csymbol><ci id="S3.p1.6.m6.1.1.2.cmml" xref="S3.p1.6.m6.1.1.2">𝑀</ci><ci id="S3.p1.6.m6.1.1.3.cmml" xref="S3.p1.6.m6.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.6.m6.1c">M_{j}</annotation></semantics></math> indicates the number of images in the source domain <math id="S3.p1.7.m7.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.p1.7.m7.1a"><mi id="S3.p1.7.m7.1.1" xref="S3.p1.7.m7.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.p1.7.m7.1b"><ci id="S3.p1.7.m7.1.1.cmml" xref="S3.p1.7.m7.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.7.m7.1c">j</annotation></semantics></math>. Here, <math id="S3.p1.8.m8.1" class="ltx_Math" alttext="x^{j}_{i}" display="inline"><semantics id="S3.p1.8.m8.1a"><msubsup id="S3.p1.8.m8.1.1" xref="S3.p1.8.m8.1.1.cmml"><mi id="S3.p1.8.m8.1.1.2.2" xref="S3.p1.8.m8.1.1.2.2.cmml">x</mi><mi id="S3.p1.8.m8.1.1.3" xref="S3.p1.8.m8.1.1.3.cmml">i</mi><mi id="S3.p1.8.m8.1.1.2.3" xref="S3.p1.8.m8.1.1.2.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.p1.8.m8.1b"><apply id="S3.p1.8.m8.1.1.cmml" xref="S3.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.p1.8.m8.1.1.1.cmml" xref="S3.p1.8.m8.1.1">subscript</csymbol><apply id="S3.p1.8.m8.1.1.2.cmml" xref="S3.p1.8.m8.1.1"><csymbol cd="ambiguous" id="S3.p1.8.m8.1.1.2.1.cmml" xref="S3.p1.8.m8.1.1">superscript</csymbol><ci id="S3.p1.8.m8.1.1.2.2.cmml" xref="S3.p1.8.m8.1.1.2.2">𝑥</ci><ci id="S3.p1.8.m8.1.1.2.3.cmml" xref="S3.p1.8.m8.1.1.2.3">𝑗</ci></apply><ci id="S3.p1.8.m8.1.1.3.cmml" xref="S3.p1.8.m8.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.8.m8.1c">x^{j}_{i}</annotation></semantics></math> represents the input image <math id="S3.p1.9.m9.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.p1.9.m9.1a"><mi id="S3.p1.9.m9.1.1" xref="S3.p1.9.m9.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.p1.9.m9.1b"><ci id="S3.p1.9.m9.1.1.cmml" xref="S3.p1.9.m9.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.9.m9.1c">i</annotation></semantics></math> of domain <math id="S3.p1.10.m10.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.p1.10.m10.1a"><mi id="S3.p1.10.m10.1.1" xref="S3.p1.10.m10.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.p1.10.m10.1b"><ci id="S3.p1.10.m10.1.1.cmml" xref="S3.p1.10.m10.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.10.m10.1c">j</annotation></semantics></math>, and <math id="S3.p1.11.m11.1" class="ltx_Math" alttext="y^{j}_{i}" display="inline"><semantics id="S3.p1.11.m11.1a"><msubsup id="S3.p1.11.m11.1.1" xref="S3.p1.11.m11.1.1.cmml"><mi id="S3.p1.11.m11.1.1.2.2" xref="S3.p1.11.m11.1.1.2.2.cmml">y</mi><mi id="S3.p1.11.m11.1.1.3" xref="S3.p1.11.m11.1.1.3.cmml">i</mi><mi id="S3.p1.11.m11.1.1.2.3" xref="S3.p1.11.m11.1.1.2.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.p1.11.m11.1b"><apply id="S3.p1.11.m11.1.1.cmml" xref="S3.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S3.p1.11.m11.1.1.1.cmml" xref="S3.p1.11.m11.1.1">subscript</csymbol><apply id="S3.p1.11.m11.1.1.2.cmml" xref="S3.p1.11.m11.1.1"><csymbol cd="ambiguous" id="S3.p1.11.m11.1.1.2.1.cmml" xref="S3.p1.11.m11.1.1">superscript</csymbol><ci id="S3.p1.11.m11.1.1.2.2.cmml" xref="S3.p1.11.m11.1.1.2.2">𝑦</ci><ci id="S3.p1.11.m11.1.1.2.3.cmml" xref="S3.p1.11.m11.1.1.2.3">𝑗</ci></apply><ci id="S3.p1.11.m11.1.1.3.cmml" xref="S3.p1.11.m11.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.11.m11.1c">y^{j}_{i}</annotation></semantics></math> represents its corresponding annotations (bounding boxes and object categories). The target domain <math id="S3.p1.12.m12.1" class="ltx_Math" alttext="T" display="inline"><semantics id="S3.p1.12.m12.1a"><mi id="S3.p1.12.m12.1.1" xref="S3.p1.12.m12.1.1.cmml">T</mi><annotation-xml encoding="MathML-Content" id="S3.p1.12.m12.1b"><ci id="S3.p1.12.m12.1.1.cmml" xref="S3.p1.12.m12.1.1">𝑇</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.12.m12.1c">T</annotation></semantics></math> can be represented as <math id="S3.p1.13.m13.1" class="ltx_Math" alttext="T=\{{\{x_{i}\}^{M_{T}}_{i=1}}\}" display="inline"><semantics id="S3.p1.13.m13.1a"><mrow id="S3.p1.13.m13.1.1" xref="S3.p1.13.m13.1.1.cmml"><mi id="S3.p1.13.m13.1.1.3" xref="S3.p1.13.m13.1.1.3.cmml">T</mi><mo id="S3.p1.13.m13.1.1.2" xref="S3.p1.13.m13.1.1.2.cmml">=</mo><mrow id="S3.p1.13.m13.1.1.1.1" xref="S3.p1.13.m13.1.1.1.2.cmml"><mo stretchy="false" id="S3.p1.13.m13.1.1.1.1.2" xref="S3.p1.13.m13.1.1.1.2.cmml">{</mo><msubsup id="S3.p1.13.m13.1.1.1.1.1" xref="S3.p1.13.m13.1.1.1.1.1.cmml"><mrow id="S3.p1.13.m13.1.1.1.1.1.1.1.1" xref="S3.p1.13.m13.1.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.p1.13.m13.1.1.1.1.1.1.1.1.2" xref="S3.p1.13.m13.1.1.1.1.1.1.1.2.cmml">{</mo><msub id="S3.p1.13.m13.1.1.1.1.1.1.1.1.1" xref="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.2" xref="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.2.cmml">x</mi><mi id="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.3" xref="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo stretchy="false" id="S3.p1.13.m13.1.1.1.1.1.1.1.1.3" xref="S3.p1.13.m13.1.1.1.1.1.1.1.2.cmml">}</mo></mrow><mrow id="S3.p1.13.m13.1.1.1.1.1.3" xref="S3.p1.13.m13.1.1.1.1.1.3.cmml"><mi id="S3.p1.13.m13.1.1.1.1.1.3.2" xref="S3.p1.13.m13.1.1.1.1.1.3.2.cmml">i</mi><mo id="S3.p1.13.m13.1.1.1.1.1.3.1" xref="S3.p1.13.m13.1.1.1.1.1.3.1.cmml">=</mo><mn id="S3.p1.13.m13.1.1.1.1.1.3.3" xref="S3.p1.13.m13.1.1.1.1.1.3.3.cmml">1</mn></mrow><msub id="S3.p1.13.m13.1.1.1.1.1.1.3" xref="S3.p1.13.m13.1.1.1.1.1.1.3.cmml"><mi id="S3.p1.13.m13.1.1.1.1.1.1.3.2" xref="S3.p1.13.m13.1.1.1.1.1.1.3.2.cmml">M</mi><mi id="S3.p1.13.m13.1.1.1.1.1.1.3.3" xref="S3.p1.13.m13.1.1.1.1.1.1.3.3.cmml">T</mi></msub></msubsup><mo stretchy="false" id="S3.p1.13.m13.1.1.1.1.3" xref="S3.p1.13.m13.1.1.1.2.cmml">}</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.p1.13.m13.1b"><apply id="S3.p1.13.m13.1.1.cmml" xref="S3.p1.13.m13.1.1"><eq id="S3.p1.13.m13.1.1.2.cmml" xref="S3.p1.13.m13.1.1.2"></eq><ci id="S3.p1.13.m13.1.1.3.cmml" xref="S3.p1.13.m13.1.1.3">𝑇</ci><set id="S3.p1.13.m13.1.1.1.2.cmml" xref="S3.p1.13.m13.1.1.1.1"><apply id="S3.p1.13.m13.1.1.1.1.1.cmml" xref="S3.p1.13.m13.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.13.m13.1.1.1.1.1.2.cmml" xref="S3.p1.13.m13.1.1.1.1.1">subscript</csymbol><apply id="S3.p1.13.m13.1.1.1.1.1.1.cmml" xref="S3.p1.13.m13.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.13.m13.1.1.1.1.1.1.2.cmml" xref="S3.p1.13.m13.1.1.1.1.1">superscript</csymbol><set id="S3.p1.13.m13.1.1.1.1.1.1.1.2.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.1.1"><apply id="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.2">𝑥</ci><ci id="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply></set><apply id="S3.p1.13.m13.1.1.1.1.1.1.3.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.3"><csymbol cd="ambiguous" id="S3.p1.13.m13.1.1.1.1.1.1.3.1.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.3">subscript</csymbol><ci id="S3.p1.13.m13.1.1.1.1.1.1.3.2.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.3.2">𝑀</ci><ci id="S3.p1.13.m13.1.1.1.1.1.1.3.3.cmml" xref="S3.p1.13.m13.1.1.1.1.1.1.3.3">𝑇</ci></apply></apply><apply id="S3.p1.13.m13.1.1.1.1.1.3.cmml" xref="S3.p1.13.m13.1.1.1.1.1.3"><eq id="S3.p1.13.m13.1.1.1.1.1.3.1.cmml" xref="S3.p1.13.m13.1.1.1.1.1.3.1"></eq><ci id="S3.p1.13.m13.1.1.1.1.1.3.2.cmml" xref="S3.p1.13.m13.1.1.1.1.1.3.2">𝑖</ci><cn type="integer" id="S3.p1.13.m13.1.1.1.1.1.3.3.cmml" xref="S3.p1.13.m13.1.1.1.1.1.3.3">1</cn></apply></apply></set></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.13.m13.1c">T=\{{\{x_{i}\}^{M_{T}}_{i=1}}\}</annotation></semantics></math>, where <math id="S3.p1.14.m14.1" class="ltx_Math" alttext="M_{T}" display="inline"><semantics id="S3.p1.14.m14.1a"><msub id="S3.p1.14.m14.1.1" xref="S3.p1.14.m14.1.1.cmml"><mi id="S3.p1.14.m14.1.1.2" xref="S3.p1.14.m14.1.1.2.cmml">M</mi><mi id="S3.p1.14.m14.1.1.3" xref="S3.p1.14.m14.1.1.3.cmml">T</mi></msub><annotation-xml encoding="MathML-Content" id="S3.p1.14.m14.1b"><apply id="S3.p1.14.m14.1.1.cmml" xref="S3.p1.14.m14.1.1"><csymbol cd="ambiguous" id="S3.p1.14.m14.1.1.1.cmml" xref="S3.p1.14.m14.1.1">subscript</csymbol><ci id="S3.p1.14.m14.1.1.2.cmml" xref="S3.p1.14.m14.1.1.2">𝑀</ci><ci id="S3.p1.14.m14.1.1.3.cmml" xref="S3.p1.14.m14.1.1.3">𝑇</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.14.m14.1c">M_{T}</annotation></semantics></math> indicates the number of images in the target domain. Here, <math id="S3.p1.15.m15.1" class="ltx_Math" alttext="x_{i}" display="inline"><semantics id="S3.p1.15.m15.1a"><msub id="S3.p1.15.m15.1.1" xref="S3.p1.15.m15.1.1.cmml"><mi id="S3.p1.15.m15.1.1.2" xref="S3.p1.15.m15.1.1.2.cmml">x</mi><mi id="S3.p1.15.m15.1.1.3" xref="S3.p1.15.m15.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.p1.15.m15.1b"><apply id="S3.p1.15.m15.1.1.cmml" xref="S3.p1.15.m15.1.1"><csymbol cd="ambiguous" id="S3.p1.15.m15.1.1.1.cmml" xref="S3.p1.15.m15.1.1">subscript</csymbol><ci id="S3.p1.15.m15.1.1.2.cmml" xref="S3.p1.15.m15.1.1.2">𝑥</ci><ci id="S3.p1.15.m15.1.1.3.cmml" xref="S3.p1.15.m15.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.15.m15.1c">x_{i}</annotation></semantics></math> represents the input image <math id="S3.p1.16.m16.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.p1.16.m16.1a"><mi id="S3.p1.16.m16.1.1" xref="S3.p1.16.m16.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.p1.16.m16.1b"><ci id="S3.p1.16.m16.1.1.cmml" xref="S3.p1.16.m16.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.16.m16.1c">i</annotation></semantics></math> in the target domain. In the work, we assume that all domains have the same <math id="S3.p1.17.m17.1" class="ltx_Math" alttext="K" display="inline"><semantics id="S3.p1.17.m17.1a"><mi id="S3.p1.17.m17.1.1" xref="S3.p1.17.m17.1.1.cmml">K</mi><annotation-xml encoding="MathML-Content" id="S3.p1.17.m17.1b"><ci id="S3.p1.17.m17.1.1.cmml" xref="S3.p1.17.m17.1.1">𝐾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.p1.17.m17.1c">K</annotation></semantics></math> object categories.</p>
</div>
<div id="S3.p2" class="ltx_para">
<p id="S3.p2.1" class="ltx_p">The detailed architectural diagram of our PMT method is illustrated in <a href="#S3.F2" title="In 3 Proposed Method ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">2</span></a>. We use the mean teacher framework with unbiased teacher <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite> for semi-supervised OD as our base model. Training of our model is performed in two stages. First, a supervised-only training called the burn-in stage is performed to help achieve reliable pseudo-labels on the target domain because the teacher network is initialized using these weights. Second, the model is adapted with labeled data from the source domains and unlabeled data from the target domain. With the source data, we continue using the supervised training (as in the burn-in stage). Target domain pseudo-labels are obtained from the teacher to train the model on the target domain. To produce domain invariant features, a discriminator is introduced in the network. Additionally, the prototype network is integrated to preserve domain-specific information, and class-conditioned adaptation is performed using a contrastive loss. The rest of this section details the individual components of our proposed PMT.</p>
</div>
<figure id="S3.F2" class="ltx_figure"><img src="/html/2309.14950/assets/images/pmt_arch.png" id="S3.F2.g1" class="ltx_graphics ltx_img_landscape" width="644" height="314" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F2.2.1.1" class="ltx_text" style="font-size:90%;">Figure 2</span>: </span><span id="S3.F2.3.2" class="ltx_text" style="font-size:90%;">Architectural diagram of the proposed Prototype-based Mean Teacher (PMT) for MSDA. Following the mean-teacher framework, the student is trained with backpropagation, while the teacher is an exponential moving average of the student. The student is trained with images from all domains, and feature alignment is performed at both the image and instance levels using a discriminator and a prototype, respectively. During inference, the teacher model is only employed.</span></figcaption>
</figure>
<section id="S3.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.1 </span>Supervised Learning</h3>

<div id="S3.SS1.p1" class="ltx_para">
<p id="S3.SS1.p1.3" class="ltx_p">In our problem setting, the annotations are available for the source domains, so we use them to train the model in a supervised way. For this, we compute the standard supervised detection loss of the object detector:</p>
<table id="S3.E1" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E1.m1.4" class="ltx_Math" alttext="\mathcal{L}_{\mbox{sup}}=\sum_{j=1}^{N}\sum_{i=1}^{M_{j}}\mathcal{L}_{\mbox{cls}}(x^{j}_{i},y^{j}_{i})+\mathcal{L}_{\mbox{reg}}(x^{j}_{i},y^{j}_{i})" display="block"><semantics id="S3.E1.m1.4a"><mrow id="S3.E1.m1.4.4" xref="S3.E1.m1.4.4.cmml"><msub id="S3.E1.m1.4.4.6" xref="S3.E1.m1.4.4.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.4.4.6.2" xref="S3.E1.m1.4.4.6.2.cmml">ℒ</mi><mtext id="S3.E1.m1.4.4.6.3" xref="S3.E1.m1.4.4.6.3a.cmml">sup</mtext></msub><mo rspace="0.111em" id="S3.E1.m1.4.4.5" xref="S3.E1.m1.4.4.5.cmml">=</mo><mrow id="S3.E1.m1.4.4.4" xref="S3.E1.m1.4.4.4.cmml"><mrow id="S3.E1.m1.2.2.2.2" xref="S3.E1.m1.2.2.2.2.cmml"><munderover id="S3.E1.m1.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.3.cmml"><mo movablelimits="false" rspace="0em" id="S3.E1.m1.2.2.2.2.3.2.2" xref="S3.E1.m1.2.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E1.m1.2.2.2.2.3.2.3" xref="S3.E1.m1.2.2.2.2.3.2.3.cmml"><mi id="S3.E1.m1.2.2.2.2.3.2.3.2" xref="S3.E1.m1.2.2.2.2.3.2.3.2.cmml">j</mi><mo id="S3.E1.m1.2.2.2.2.3.2.3.1" xref="S3.E1.m1.2.2.2.2.3.2.3.1.cmml">=</mo><mn id="S3.E1.m1.2.2.2.2.3.2.3.3" xref="S3.E1.m1.2.2.2.2.3.2.3.3.cmml">1</mn></mrow><mi id="S3.E1.m1.2.2.2.2.3.3" xref="S3.E1.m1.2.2.2.2.3.3.cmml">N</mi></munderover><mrow id="S3.E1.m1.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.cmml"><munderover id="S3.E1.m1.2.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.2.3.cmml"><mo movablelimits="false" id="S3.E1.m1.2.2.2.2.2.3.2.2" xref="S3.E1.m1.2.2.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E1.m1.2.2.2.2.2.3.2.3" xref="S3.E1.m1.2.2.2.2.2.3.2.3.cmml"><mi id="S3.E1.m1.2.2.2.2.2.3.2.3.2" xref="S3.E1.m1.2.2.2.2.2.3.2.3.2.cmml">i</mi><mo id="S3.E1.m1.2.2.2.2.2.3.2.3.1" xref="S3.E1.m1.2.2.2.2.2.3.2.3.1.cmml">=</mo><mn id="S3.E1.m1.2.2.2.2.2.3.2.3.3" xref="S3.E1.m1.2.2.2.2.2.3.2.3.3.cmml">1</mn></mrow><msub id="S3.E1.m1.2.2.2.2.2.3.3" xref="S3.E1.m1.2.2.2.2.2.3.3.cmml"><mi id="S3.E1.m1.2.2.2.2.2.3.3.2" xref="S3.E1.m1.2.2.2.2.2.3.3.2.cmml">M</mi><mi id="S3.E1.m1.2.2.2.2.2.3.3.3" xref="S3.E1.m1.2.2.2.2.2.3.3.3.cmml">j</mi></msub></munderover><mrow id="S3.E1.m1.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.cmml"><msub id="S3.E1.m1.2.2.2.2.2.2.4" xref="S3.E1.m1.2.2.2.2.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.2.2.2.2.2.2.4.2" xref="S3.E1.m1.2.2.2.2.2.2.4.2.cmml">ℒ</mi><mtext id="S3.E1.m1.2.2.2.2.2.2.4.3" xref="S3.E1.m1.2.2.2.2.2.2.4.3a.cmml">cls</mtext></msub><mo lspace="0em" rspace="0em" id="S3.E1.m1.2.2.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.2.2.3.cmml">​</mo><mrow id="S3.E1.m1.2.2.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E1.m1.2.2.2.2.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.2.2.2.3.cmml">(</mo><msubsup id="S3.E1.m1.1.1.1.1.1.1.1.1.1" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.2.cmml">x</mi><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.1.3" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1.3.cmml">i</mi><mi id="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.3.cmml">j</mi></msubsup><mo id="S3.E1.m1.2.2.2.2.2.2.2.2.4" xref="S3.E1.m1.2.2.2.2.2.2.2.3.cmml">,</mo><msubsup id="S3.E1.m1.2.2.2.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2.cmml"><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.2" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.2.cmml">y</mi><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2.3.cmml">i</mi><mi id="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.3" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.E1.m1.2.2.2.2.2.2.2.2.5" xref="S3.E1.m1.2.2.2.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S3.E1.m1.4.4.4.5" xref="S3.E1.m1.4.4.4.5.cmml">+</mo><mrow id="S3.E1.m1.4.4.4.4" xref="S3.E1.m1.4.4.4.4.cmml"><msub id="S3.E1.m1.4.4.4.4.4" xref="S3.E1.m1.4.4.4.4.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E1.m1.4.4.4.4.4.2" xref="S3.E1.m1.4.4.4.4.4.2.cmml">ℒ</mi><mtext id="S3.E1.m1.4.4.4.4.4.3" xref="S3.E1.m1.4.4.4.4.4.3a.cmml">reg</mtext></msub><mo lspace="0em" rspace="0em" id="S3.E1.m1.4.4.4.4.3" xref="S3.E1.m1.4.4.4.4.3.cmml">​</mo><mrow id="S3.E1.m1.4.4.4.4.2.2" xref="S3.E1.m1.4.4.4.4.2.3.cmml"><mo stretchy="false" id="S3.E1.m1.4.4.4.4.2.2.3" xref="S3.E1.m1.4.4.4.4.2.3.cmml">(</mo><msubsup id="S3.E1.m1.3.3.3.3.1.1.1" xref="S3.E1.m1.3.3.3.3.1.1.1.cmml"><mi id="S3.E1.m1.3.3.3.3.1.1.1.2.2" xref="S3.E1.m1.3.3.3.3.1.1.1.2.2.cmml">x</mi><mi id="S3.E1.m1.3.3.3.3.1.1.1.3" xref="S3.E1.m1.3.3.3.3.1.1.1.3.cmml">i</mi><mi id="S3.E1.m1.3.3.3.3.1.1.1.2.3" xref="S3.E1.m1.3.3.3.3.1.1.1.2.3.cmml">j</mi></msubsup><mo id="S3.E1.m1.4.4.4.4.2.2.4" xref="S3.E1.m1.4.4.4.4.2.3.cmml">,</mo><msubsup id="S3.E1.m1.4.4.4.4.2.2.2" xref="S3.E1.m1.4.4.4.4.2.2.2.cmml"><mi id="S3.E1.m1.4.4.4.4.2.2.2.2.2" xref="S3.E1.m1.4.4.4.4.2.2.2.2.2.cmml">y</mi><mi id="S3.E1.m1.4.4.4.4.2.2.2.3" xref="S3.E1.m1.4.4.4.4.2.2.2.3.cmml">i</mi><mi id="S3.E1.m1.4.4.4.4.2.2.2.2.3" xref="S3.E1.m1.4.4.4.4.2.2.2.2.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.E1.m1.4.4.4.4.2.2.5" xref="S3.E1.m1.4.4.4.4.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E1.m1.4b"><apply id="S3.E1.m1.4.4.cmml" xref="S3.E1.m1.4.4"><eq id="S3.E1.m1.4.4.5.cmml" xref="S3.E1.m1.4.4.5"></eq><apply id="S3.E1.m1.4.4.6.cmml" xref="S3.E1.m1.4.4.6"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.6.1.cmml" xref="S3.E1.m1.4.4.6">subscript</csymbol><ci id="S3.E1.m1.4.4.6.2.cmml" xref="S3.E1.m1.4.4.6.2">ℒ</ci><ci id="S3.E1.m1.4.4.6.3a.cmml" xref="S3.E1.m1.4.4.6.3"><mtext mathsize="70%" id="S3.E1.m1.4.4.6.3.cmml" xref="S3.E1.m1.4.4.6.3">sup</mtext></ci></apply><apply id="S3.E1.m1.4.4.4.cmml" xref="S3.E1.m1.4.4.4"><plus id="S3.E1.m1.4.4.4.5.cmml" xref="S3.E1.m1.4.4.4.5"></plus><apply id="S3.E1.m1.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2"><apply id="S3.E1.m1.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.3.1.cmml" xref="S3.E1.m1.2.2.2.2.3">superscript</csymbol><apply id="S3.E1.m1.2.2.2.2.3.2.cmml" xref="S3.E1.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.3.2.1.cmml" xref="S3.E1.m1.2.2.2.2.3">subscript</csymbol><sum id="S3.E1.m1.2.2.2.2.3.2.2.cmml" xref="S3.E1.m1.2.2.2.2.3.2.2"></sum><apply id="S3.E1.m1.2.2.2.2.3.2.3.cmml" xref="S3.E1.m1.2.2.2.2.3.2.3"><eq id="S3.E1.m1.2.2.2.2.3.2.3.1.cmml" xref="S3.E1.m1.2.2.2.2.3.2.3.1"></eq><ci id="S3.E1.m1.2.2.2.2.3.2.3.2.cmml" xref="S3.E1.m1.2.2.2.2.3.2.3.2">𝑗</ci><cn type="integer" id="S3.E1.m1.2.2.2.2.3.2.3.3.cmml" xref="S3.E1.m1.2.2.2.2.3.2.3.3">1</cn></apply></apply><ci id="S3.E1.m1.2.2.2.2.3.3.cmml" xref="S3.E1.m1.2.2.2.2.3.3">𝑁</ci></apply><apply id="S3.E1.m1.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2"><apply id="S3.E1.m1.2.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.2.3.1.cmml" xref="S3.E1.m1.2.2.2.2.2.3">superscript</csymbol><apply id="S3.E1.m1.2.2.2.2.2.3.2.cmml" xref="S3.E1.m1.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.2.3.2.1.cmml" xref="S3.E1.m1.2.2.2.2.2.3">subscript</csymbol><sum id="S3.E1.m1.2.2.2.2.2.3.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.3.2.2"></sum><apply id="S3.E1.m1.2.2.2.2.2.3.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2.3.2.3"><eq id="S3.E1.m1.2.2.2.2.2.3.2.3.1.cmml" xref="S3.E1.m1.2.2.2.2.2.3.2.3.1"></eq><ci id="S3.E1.m1.2.2.2.2.2.3.2.3.2.cmml" xref="S3.E1.m1.2.2.2.2.2.3.2.3.2">𝑖</ci><cn type="integer" id="S3.E1.m1.2.2.2.2.2.3.2.3.3.cmml" xref="S3.E1.m1.2.2.2.2.2.3.2.3.3">1</cn></apply></apply><apply id="S3.E1.m1.2.2.2.2.2.3.3.cmml" xref="S3.E1.m1.2.2.2.2.2.3.3"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.2.3.3.1.cmml" xref="S3.E1.m1.2.2.2.2.2.3.3">subscript</csymbol><ci id="S3.E1.m1.2.2.2.2.2.3.3.2.cmml" xref="S3.E1.m1.2.2.2.2.2.3.3.2">𝑀</ci><ci id="S3.E1.m1.2.2.2.2.2.3.3.3.cmml" xref="S3.E1.m1.2.2.2.2.2.3.3.3">𝑗</ci></apply></apply><apply id="S3.E1.m1.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2"><times id="S3.E1.m1.2.2.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.3"></times><apply id="S3.E1.m1.2.2.2.2.2.2.4.cmml" xref="S3.E1.m1.2.2.2.2.2.2.4"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.2.2.4.1.cmml" xref="S3.E1.m1.2.2.2.2.2.2.4">subscript</csymbol><ci id="S3.E1.m1.2.2.2.2.2.2.4.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.4.2">ℒ</ci><ci id="S3.E1.m1.2.2.2.2.2.2.4.3a.cmml" xref="S3.E1.m1.2.2.2.2.2.2.4.3"><mtext mathsize="70%" id="S3.E1.m1.2.2.2.2.2.2.4.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.4.3">cls</mtext></ci></apply><interval closure="open" id="S3.E1.m1.2.2.2.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2"><apply id="S3.E1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1">subscript</csymbol><apply id="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.2">𝑥</ci><ci id="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1.2.3">𝑗</ci></apply><ci id="S3.E1.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E1.m1.1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E1.m1.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2">subscript</csymbol><apply id="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2">superscript</csymbol><ci id="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.2">𝑦</ci><ci id="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2.2.3">𝑗</ci></apply><ci id="S3.E1.m1.2.2.2.2.2.2.2.2.2.3.cmml" xref="S3.E1.m1.2.2.2.2.2.2.2.2.2.3">𝑖</ci></apply></interval></apply></apply></apply><apply id="S3.E1.m1.4.4.4.4.cmml" xref="S3.E1.m1.4.4.4.4"><times id="S3.E1.m1.4.4.4.4.3.cmml" xref="S3.E1.m1.4.4.4.4.3"></times><apply id="S3.E1.m1.4.4.4.4.4.cmml" xref="S3.E1.m1.4.4.4.4.4"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.4.4.4.1.cmml" xref="S3.E1.m1.4.4.4.4.4">subscript</csymbol><ci id="S3.E1.m1.4.4.4.4.4.2.cmml" xref="S3.E1.m1.4.4.4.4.4.2">ℒ</ci><ci id="S3.E1.m1.4.4.4.4.4.3a.cmml" xref="S3.E1.m1.4.4.4.4.4.3"><mtext mathsize="70%" id="S3.E1.m1.4.4.4.4.4.3.cmml" xref="S3.E1.m1.4.4.4.4.4.3">reg</mtext></ci></apply><interval closure="open" id="S3.E1.m1.4.4.4.4.2.3.cmml" xref="S3.E1.m1.4.4.4.4.2.2"><apply id="S3.E1.m1.3.3.3.3.1.1.1.cmml" xref="S3.E1.m1.3.3.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.3.3.1.1.1.1.cmml" xref="S3.E1.m1.3.3.3.3.1.1.1">subscript</csymbol><apply id="S3.E1.m1.3.3.3.3.1.1.1.2.cmml" xref="S3.E1.m1.3.3.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E1.m1.3.3.3.3.1.1.1.2.1.cmml" xref="S3.E1.m1.3.3.3.3.1.1.1">superscript</csymbol><ci id="S3.E1.m1.3.3.3.3.1.1.1.2.2.cmml" xref="S3.E1.m1.3.3.3.3.1.1.1.2.2">𝑥</ci><ci id="S3.E1.m1.3.3.3.3.1.1.1.2.3.cmml" xref="S3.E1.m1.3.3.3.3.1.1.1.2.3">𝑗</ci></apply><ci id="S3.E1.m1.3.3.3.3.1.1.1.3.cmml" xref="S3.E1.m1.3.3.3.3.1.1.1.3">𝑖</ci></apply><apply id="S3.E1.m1.4.4.4.4.2.2.2.cmml" xref="S3.E1.m1.4.4.4.4.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.4.4.2.2.2.1.cmml" xref="S3.E1.m1.4.4.4.4.2.2.2">subscript</csymbol><apply id="S3.E1.m1.4.4.4.4.2.2.2.2.cmml" xref="S3.E1.m1.4.4.4.4.2.2.2"><csymbol cd="ambiguous" id="S3.E1.m1.4.4.4.4.2.2.2.2.1.cmml" xref="S3.E1.m1.4.4.4.4.2.2.2">superscript</csymbol><ci id="S3.E1.m1.4.4.4.4.2.2.2.2.2.cmml" xref="S3.E1.m1.4.4.4.4.2.2.2.2.2">𝑦</ci><ci id="S3.E1.m1.4.4.4.4.2.2.2.2.3.cmml" xref="S3.E1.m1.4.4.4.4.2.2.2.2.3">𝑗</ci></apply><ci id="S3.E1.m1.4.4.4.4.2.2.2.3.cmml" xref="S3.E1.m1.4.4.4.4.2.2.2.3">𝑖</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E1.m1.4c">\mathcal{L}_{\mbox{sup}}=\sum_{j=1}^{N}\sum_{i=1}^{M_{j}}\mathcal{L}_{\mbox{cls}}(x^{j}_{i},y^{j}_{i})+\mathcal{L}_{\mbox{reg}}(x^{j}_{i},y^{j}_{i})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(1)</span></td>
</tr></tbody>
</table>
<p id="S3.SS1.p1.2" class="ltx_p">where <math id="S3.SS1.p1.1.m1.1" class="ltx_Math" alttext="\mathcal{L}_{\mbox{cls}}" display="inline"><semantics id="S3.SS1.p1.1.m1.1a"><msub id="S3.SS1.p1.1.m1.1.1" xref="S3.SS1.p1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.1.m1.1.1.2" xref="S3.SS1.p1.1.m1.1.1.2.cmml">ℒ</mi><mtext id="S3.SS1.p1.1.m1.1.1.3" xref="S3.SS1.p1.1.m1.1.1.3a.cmml">cls</mtext></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.1.m1.1b"><apply id="S3.SS1.p1.1.m1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.1.m1.1.1.1.cmml" xref="S3.SS1.p1.1.m1.1.1">subscript</csymbol><ci id="S3.SS1.p1.1.m1.1.1.2.cmml" xref="S3.SS1.p1.1.m1.1.1.2">ℒ</ci><ci id="S3.SS1.p1.1.m1.1.1.3a.cmml" xref="S3.SS1.p1.1.m1.1.1.3"><mtext mathsize="70%" id="S3.SS1.p1.1.m1.1.1.3.cmml" xref="S3.SS1.p1.1.m1.1.1.3">cls</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.1.m1.1c">\mathcal{L}_{\mbox{cls}}</annotation></semantics></math> is the cross-entropy loss used for bounding box classification, and <math id="S3.SS1.p1.2.m2.1" class="ltx_Math" alttext="\mathcal{L}_{\mbox{reg}}" display="inline"><semantics id="S3.SS1.p1.2.m2.1a"><msub id="S3.SS1.p1.2.m2.1.1" xref="S3.SS1.p1.2.m2.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.SS1.p1.2.m2.1.1.2" xref="S3.SS1.p1.2.m2.1.1.2.cmml">ℒ</mi><mtext id="S3.SS1.p1.2.m2.1.1.3" xref="S3.SS1.p1.2.m2.1.1.3a.cmml">reg</mtext></msub><annotation-xml encoding="MathML-Content" id="S3.SS1.p1.2.m2.1b"><apply id="S3.SS1.p1.2.m2.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1"><csymbol cd="ambiguous" id="S3.SS1.p1.2.m2.1.1.1.cmml" xref="S3.SS1.p1.2.m2.1.1">subscript</csymbol><ci id="S3.SS1.p1.2.m2.1.1.2.cmml" xref="S3.SS1.p1.2.m2.1.1.2">ℒ</ci><ci id="S3.SS1.p1.2.m2.1.1.3a.cmml" xref="S3.SS1.p1.2.m2.1.1.3"><mtext mathsize="70%" id="S3.SS1.p1.2.m2.1.1.3.cmml" xref="S3.SS1.p1.2.m2.1.1.3">reg</mtext></ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS1.p1.2.m2.1c">\mathcal{L}_{\mbox{reg}}</annotation></semantics></math> is the smooth-L1 loss used for the bounding box regression as in FRCNN.</p>
</div>
</section>
<section id="S3.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.2 </span>Learning with Pseudo-labels</h3>

<div id="S3.SS2.p1" class="ltx_para">
<p id="S3.SS2.p1.2" class="ltx_p">Since annotations are unavailable for the target domain data, we cannot directly proceed with supervised training as with the source domain. We obtain pseudo-labels for images for the target domain using the mean-teacher method <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib23" title="" class="ltx_ref">23</a>]</cite>. For that, two augmented versions of the target-domain images are created, called weak and strong augmentations. The weak augmentation is simply the image rescaling and horizontal flip transformation. The strong augmentation includes color jittering, grayscale, Gaussian blur, and cutout patches, which perform only pixel-level transformations. We followed the scale ranges provided in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite> for the strong augmentation. Then, the weak and strong augmented versions are processed by the teacher and student networks, respectively, as shown in <a href="#S3.F2" title="In 3 Proposed Method ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">2</span></a>. The predictions made by the teacher model are used as pseudo-labels for the training of the student model. To avoid noisy pseudo-labels from the teacher model, confidence thresholding is applied to the teacher network prediction while computing the pseudo-labels. For this, we followed the same settings as in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite>. The used unsupervised training loss for the target domain using labels from the teacher model is:</p>
<table id="S3.E2" class="ltx_equationgroup ltx_eqn_table">
<tbody>
<tr id="S3.E2X" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E2X.2.1.1.m1.4" class="ltx_Math" alttext="\displaystyle\mathcal{L}_{\mbox{unsup}}=\sum_{i=1}^{M_{T}}\mathcal{L}_{\mbox{cls}}(x_{i},\widetilde{y}_{i})+\mathcal{L}_{\mbox{reg}}(x_{i},\widetilde{y}_{i})" display="inline"><semantics id="S3.E2X.2.1.1.m1.4a"><mrow id="S3.E2X.2.1.1.m1.4.4" xref="S3.E2X.2.1.1.m1.4.4.cmml"><msub id="S3.E2X.2.1.1.m1.4.4.6" xref="S3.E2X.2.1.1.m1.4.4.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2X.2.1.1.m1.4.4.6.2" xref="S3.E2X.2.1.1.m1.4.4.6.2.cmml">ℒ</mi><mtext id="S3.E2X.2.1.1.m1.4.4.6.3" xref="S3.E2X.2.1.1.m1.4.4.6.3a.cmml">unsup</mtext></msub><mo id="S3.E2X.2.1.1.m1.4.4.5" xref="S3.E2X.2.1.1.m1.4.4.5.cmml">=</mo><mrow id="S3.E2X.2.1.1.m1.4.4.4" xref="S3.E2X.2.1.1.m1.4.4.4.cmml"><mrow id="S3.E2X.2.1.1.m1.2.2.2.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.cmml"><mstyle displaystyle="true" id="S3.E2X.2.1.1.m1.2.2.2.2.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.cmml"><munderover id="S3.E2X.2.1.1.m1.2.2.2.2.3a" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.cmml"><mo movablelimits="false" id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.cmml"><mi id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.2.cmml">i</mi><mo id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.1" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.1.cmml">=</mo><mn id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.3.cmml">1</mn></mrow><msub id="S3.E2X.2.1.1.m1.2.2.2.2.3.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.3.cmml"><mi id="S3.E2X.2.1.1.m1.2.2.2.2.3.3.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.3.2.cmml">M</mi><mi id="S3.E2X.2.1.1.m1.2.2.2.2.3.3.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.3.3.cmml">T</mi></msub></munderover></mstyle><mrow id="S3.E2X.2.1.1.m1.2.2.2.2.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.cmml"><msub id="S3.E2X.2.1.1.m1.2.2.2.2.2.4" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2X.2.1.1.m1.2.2.2.2.2.4.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.4.2.cmml">ℒ</mi><mtext id="S3.E2X.2.1.1.m1.2.2.2.2.2.4.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.4.3a.cmml">cls</mtext></msub><mo lspace="0em" rspace="0em" id="S3.E2X.2.1.1.m1.2.2.2.2.2.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.3.cmml">​</mo><mrow id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.3.cmml">(</mo><msub id="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1" xref="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.2" xref="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.2.cmml">x</mi><mi id="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.3" xref="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.3.cmml">i</mi></msub><mo id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.4" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.3.cmml">,</mo><msub id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.cmml"><mover accent="true" id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.cmml"><mi id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.2" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.2.cmml">y</mi><mo id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.1" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.1.cmml">~</mo></mover><mi id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.3" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.3.cmml">i</mi></msub><mo stretchy="false" id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.5" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow><mo id="S3.E2X.2.1.1.m1.4.4.4.5" xref="S3.E2X.2.1.1.m1.4.4.4.5.cmml">+</mo><mrow id="S3.E2X.2.1.1.m1.4.4.4.4" xref="S3.E2X.2.1.1.m1.4.4.4.4.cmml"><msub id="S3.E2X.2.1.1.m1.4.4.4.4.4" xref="S3.E2X.2.1.1.m1.4.4.4.4.4.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E2X.2.1.1.m1.4.4.4.4.4.2" xref="S3.E2X.2.1.1.m1.4.4.4.4.4.2.cmml">ℒ</mi><mtext id="S3.E2X.2.1.1.m1.4.4.4.4.4.3" xref="S3.E2X.2.1.1.m1.4.4.4.4.4.3a.cmml">reg</mtext></msub><mo lspace="0em" rspace="0em" id="S3.E2X.2.1.1.m1.4.4.4.4.3" xref="S3.E2X.2.1.1.m1.4.4.4.4.3.cmml">​</mo><mrow id="S3.E2X.2.1.1.m1.4.4.4.4.2.2" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.3.cmml"><mo stretchy="false" id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.3" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.3.cmml">(</mo><msub id="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1" xref="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.cmml"><mi id="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.2" xref="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.2.cmml">x</mi><mi id="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.3" xref="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.3.cmml">i</mi></msub><mo id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.4" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.3.cmml">,</mo><msub id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.cmml"><mover accent="true" id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.cmml"><mi id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.2" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.2.cmml">y</mi><mo id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.1" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.1.cmml">~</mo></mover><mi id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.3" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.3.cmml">i</mi></msub><mo stretchy="false" id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.5" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E2X.2.1.1.m1.4b"><apply id="S3.E2X.2.1.1.m1.4.4.cmml" xref="S3.E2X.2.1.1.m1.4.4"><eq id="S3.E2X.2.1.1.m1.4.4.5.cmml" xref="S3.E2X.2.1.1.m1.4.4.5"></eq><apply id="S3.E2X.2.1.1.m1.4.4.6.cmml" xref="S3.E2X.2.1.1.m1.4.4.6"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.4.4.6.1.cmml" xref="S3.E2X.2.1.1.m1.4.4.6">subscript</csymbol><ci id="S3.E2X.2.1.1.m1.4.4.6.2.cmml" xref="S3.E2X.2.1.1.m1.4.4.6.2">ℒ</ci><ci id="S3.E2X.2.1.1.m1.4.4.6.3a.cmml" xref="S3.E2X.2.1.1.m1.4.4.6.3"><mtext mathsize="70%" id="S3.E2X.2.1.1.m1.4.4.6.3.cmml" xref="S3.E2X.2.1.1.m1.4.4.6.3">unsup</mtext></ci></apply><apply id="S3.E2X.2.1.1.m1.4.4.4.cmml" xref="S3.E2X.2.1.1.m1.4.4.4"><plus id="S3.E2X.2.1.1.m1.4.4.4.5.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.5"></plus><apply id="S3.E2X.2.1.1.m1.2.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2"><apply id="S3.E2X.2.1.1.m1.2.2.2.2.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.2.2.2.2.3.1.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3">superscript</csymbol><apply id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.1.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3">subscript</csymbol><sum id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.2"></sum><apply id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3"><eq id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.1.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.1"></eq><ci id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.2">𝑖</ci><cn type="integer" id="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.2.3.3">1</cn></apply></apply><apply id="S3.E2X.2.1.1.m1.2.2.2.2.3.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.3"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.2.2.2.2.3.3.1.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.3">subscript</csymbol><ci id="S3.E2X.2.1.1.m1.2.2.2.2.3.3.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.3.2">𝑀</ci><ci id="S3.E2X.2.1.1.m1.2.2.2.2.3.3.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.3.3.3">𝑇</ci></apply></apply><apply id="S3.E2X.2.1.1.m1.2.2.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2"><times id="S3.E2X.2.1.1.m1.2.2.2.2.2.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.3"></times><apply id="S3.E2X.2.1.1.m1.2.2.2.2.2.4.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.4"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.2.2.2.2.2.4.1.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.4">subscript</csymbol><ci id="S3.E2X.2.1.1.m1.2.2.2.2.2.4.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.4.2">ℒ</ci><ci id="S3.E2X.2.1.1.m1.2.2.2.2.2.4.3a.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.4.3"><mtext mathsize="70%" id="S3.E2X.2.1.1.m1.2.2.2.2.2.4.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.4.3">cls</mtext></ci></apply><interval closure="open" id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2"><apply id="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.2">𝑥</ci><ci id="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E2X.2.1.1.m1.1.1.1.1.1.1.1.1.3">𝑖</ci></apply><apply id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2">subscript</csymbol><apply id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2"><ci id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.1">~</ci><ci id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.2.2">𝑦</ci></apply><ci id="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.3.cmml" xref="S3.E2X.2.1.1.m1.2.2.2.2.2.2.2.2.3">𝑖</ci></apply></interval></apply></apply><apply id="S3.E2X.2.1.1.m1.4.4.4.4.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4"><times id="S3.E2X.2.1.1.m1.4.4.4.4.3.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.3"></times><apply id="S3.E2X.2.1.1.m1.4.4.4.4.4.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.4"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.4.4.4.4.4.1.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.4">subscript</csymbol><ci id="S3.E2X.2.1.1.m1.4.4.4.4.4.2.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.4.2">ℒ</ci><ci id="S3.E2X.2.1.1.m1.4.4.4.4.4.3a.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.4.3"><mtext mathsize="70%" id="S3.E2X.2.1.1.m1.4.4.4.4.4.3.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.4.3">reg</mtext></ci></apply><interval closure="open" id="S3.E2X.2.1.1.m1.4.4.4.4.2.3.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2"><apply id="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.cmml" xref="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.1.cmml" xref="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1">subscript</csymbol><ci id="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.2.cmml" xref="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.2">𝑥</ci><ci id="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.3.cmml" xref="S3.E2X.2.1.1.m1.3.3.3.3.1.1.1.3">𝑖</ci></apply><apply id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2"><csymbol cd="ambiguous" id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.1.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2">subscript</csymbol><apply id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2"><ci id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.1.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.1">~</ci><ci id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.2.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.2.2">𝑦</ci></apply><ci id="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.3.cmml" xref="S3.E2X.2.1.1.m1.4.4.4.4.2.2.2.3">𝑖</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E2X.2.1.1.m1.4c">\displaystyle\mathcal{L}_{\mbox{unsup}}=\sum_{i=1}^{M_{T}}\mathcal{L}_{\mbox{cls}}(x_{i},\widetilde{y}_{i})+\mathcal{L}_{\mbox{reg}}(x_{i},\widetilde{y}_{i})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(2)</span></td>
</tr>
</tbody>
</table>
<p id="S3.SS2.p1.1" class="ltx_p">where <math id="S3.SS2.p1.1.m1.1" class="ltx_Math" alttext="\widetilde{y}_{i}" display="inline"><semantics id="S3.SS2.p1.1.m1.1a"><msub id="S3.SS2.p1.1.m1.1.1" xref="S3.SS2.p1.1.m1.1.1.cmml"><mover accent="true" id="S3.SS2.p1.1.m1.1.1.2" xref="S3.SS2.p1.1.m1.1.1.2.cmml"><mi id="S3.SS2.p1.1.m1.1.1.2.2" xref="S3.SS2.p1.1.m1.1.1.2.2.cmml">y</mi><mo id="S3.SS2.p1.1.m1.1.1.2.1" xref="S3.SS2.p1.1.m1.1.1.2.1.cmml">~</mo></mover><mi id="S3.SS2.p1.1.m1.1.1.3" xref="S3.SS2.p1.1.m1.1.1.3.cmml">i</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS2.p1.1.m1.1b"><apply id="S3.SS2.p1.1.m1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS2.p1.1.m1.1.1.1.cmml" xref="S3.SS2.p1.1.m1.1.1">subscript</csymbol><apply id="S3.SS2.p1.1.m1.1.1.2.cmml" xref="S3.SS2.p1.1.m1.1.1.2"><ci id="S3.SS2.p1.1.m1.1.1.2.1.cmml" xref="S3.SS2.p1.1.m1.1.1.2.1">~</ci><ci id="S3.SS2.p1.1.m1.1.1.2.2.cmml" xref="S3.SS2.p1.1.m1.1.1.2.2">𝑦</ci></apply><ci id="S3.SS2.p1.1.m1.1.1.3.cmml" xref="S3.SS2.p1.1.m1.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS2.p1.1.m1.1c">\widetilde{y}_{i}</annotation></semantics></math> represents the filtered pseudo-labels generated by the teacher model.</p>
</div>
</section>
<section id="S3.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.3 </span>Domain-invariant Features with Discriminator</h3>

<div id="S3.SS3.p1" class="ltx_para">
<p id="S3.SS3.p1.4" class="ltx_p">The feature representation of a model consists of two parts: domain-invariant and domain-specific. In a domain adaptation problem, we try to promote the domain-invariant feature space. To achieve this, UDA methods add a binary domain discriminator to the output of the backbone <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>, <a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>. This can be extended to MSDA by having multiple such discriminators. But this doesn’t consider the domain discrepancy between the source domain and increases the computational cost <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>, <a href="#bib.bib18" title="" class="ltx_ref">18</a>]</cite>. Instead of using multiple binary discriminators, we overcome these issues by introducing a multi-class discriminator. This discriminator is connected to the network using a gradient reversal layer (GRL) <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib7" title="" class="ltx_ref">7</a>]</cite>. It seeks to classify images according to a domain. When this classification loss is back-propagated, the GRL layer reverses the gradients, so the backbone network will try to increase the classification loss, challenging the ability of the discriminator to distinguish between domains. Gradually, the domain of the image-level features extracted by the backbone network will be indistinguishable from the discriminator. This simple adversarial game between the discriminator and the backbone allows us to learn domain-invariant features <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib3" title="" class="ltx_ref">3</a>]</cite>. The discriminator is trained with the cross-entropy loss between the <math id="S3.SS3.p1.1.m1.1" class="ltx_Math" alttext="\hat{y}^{j}" display="inline"><semantics id="S3.SS3.p1.1.m1.1a"><msup id="S3.SS3.p1.1.m1.1.1" xref="S3.SS3.p1.1.m1.1.1.cmml"><mover accent="true" id="S3.SS3.p1.1.m1.1.1.2" xref="S3.SS3.p1.1.m1.1.1.2.cmml"><mi id="S3.SS3.p1.1.m1.1.1.2.2" xref="S3.SS3.p1.1.m1.1.1.2.2.cmml">y</mi><mo id="S3.SS3.p1.1.m1.1.1.2.1" xref="S3.SS3.p1.1.m1.1.1.2.1.cmml">^</mo></mover><mi id="S3.SS3.p1.1.m1.1.1.3" xref="S3.SS3.p1.1.m1.1.1.3.cmml">j</mi></msup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.1.m1.1b"><apply id="S3.SS3.p1.1.m1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.1.m1.1.1.1.cmml" xref="S3.SS3.p1.1.m1.1.1">superscript</csymbol><apply id="S3.SS3.p1.1.m1.1.1.2.cmml" xref="S3.SS3.p1.1.m1.1.1.2"><ci id="S3.SS3.p1.1.m1.1.1.2.1.cmml" xref="S3.SS3.p1.1.m1.1.1.2.1">^</ci><ci id="S3.SS3.p1.1.m1.1.1.2.2.cmml" xref="S3.SS3.p1.1.m1.1.1.2.2">𝑦</ci></apply><ci id="S3.SS3.p1.1.m1.1.1.3.cmml" xref="S3.SS3.p1.1.m1.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.1.m1.1c">\hat{y}^{j}</annotation></semantics></math>, the <math id="S3.SS3.p1.2.m2.1" class="ltx_Math" alttext="i" display="inline"><semantics id="S3.SS3.p1.2.m2.1a"><mi id="S3.SS3.p1.2.m2.1.1" xref="S3.SS3.p1.2.m2.1.1.cmml">i</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.2.m2.1b"><ci id="S3.SS3.p1.2.m2.1.1.cmml" xref="S3.SS3.p1.2.m2.1.1">𝑖</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.2.m2.1c">i</annotation></semantics></math>-th one-hot vector for the domain <math id="S3.SS3.p1.3.m3.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS3.p1.3.m3.1a"><mi id="S3.SS3.p1.3.m3.1.1" xref="S3.SS3.p1.3.m3.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.3.m3.1b"><ci id="S3.SS3.p1.3.m3.1.1.cmml" xref="S3.SS3.p1.3.m3.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.3.m3.1c">j</annotation></semantics></math>, and the output of the domain discriminator on image <math id="S3.SS3.p1.4.m4.1" class="ltx_Math" alttext="x^{j}_{i}" display="inline"><semantics id="S3.SS3.p1.4.m4.1a"><msubsup id="S3.SS3.p1.4.m4.1.1" xref="S3.SS3.p1.4.m4.1.1.cmml"><mi id="S3.SS3.p1.4.m4.1.1.2.2" xref="S3.SS3.p1.4.m4.1.1.2.2.cmml">x</mi><mi id="S3.SS3.p1.4.m4.1.1.3" xref="S3.SS3.p1.4.m4.1.1.3.cmml">i</mi><mi id="S3.SS3.p1.4.m4.1.1.2.3" xref="S3.SS3.p1.4.m4.1.1.2.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.4.m4.1b"><apply id="S3.SS3.p1.4.m4.1.1.cmml" xref="S3.SS3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.4.m4.1.1.1.cmml" xref="S3.SS3.p1.4.m4.1.1">subscript</csymbol><apply id="S3.SS3.p1.4.m4.1.1.2.cmml" xref="S3.SS3.p1.4.m4.1.1"><csymbol cd="ambiguous" id="S3.SS3.p1.4.m4.1.1.2.1.cmml" xref="S3.SS3.p1.4.m4.1.1">superscript</csymbol><ci id="S3.SS3.p1.4.m4.1.1.2.2.cmml" xref="S3.SS3.p1.4.m4.1.1.2.2">𝑥</ci><ci id="S3.SS3.p1.4.m4.1.1.2.3.cmml" xref="S3.SS3.p1.4.m4.1.1.2.3">𝑗</ci></apply><ci id="S3.SS3.p1.4.m4.1.1.3.cmml" xref="S3.SS3.p1.4.m4.1.1.3">𝑖</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.4.m4.1c">x^{j}_{i}</annotation></semantics></math>:</p>
<table id="S3.E3" class="ltx_equationgroup ltx_eqn_table">
<tbody>
<tr id="S3.E3X" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E3X.2.1.1.m1.1" class="ltx_math_unparsed" alttext="\displaystyle\mathcal{L}_{\mbox{dis}}=-\sum_{j=1}^{N+1}\sum_{i=1}^{M_{i}}\hat{y}^{j}\log(D(G(F(x_{i}^{j})))" display="inline"><semantics id="S3.E3X.2.1.1.m1.1a"><mrow id="S3.E3X.2.1.1.m1.1b"><msub id="S3.E3X.2.1.1.m1.1.1"><mi class="ltx_font_mathcaligraphic" id="S3.E3X.2.1.1.m1.1.1.2">ℒ</mi><mtext id="S3.E3X.2.1.1.m1.1.1.3">dis</mtext></msub><mo rspace="0em" id="S3.E3X.2.1.1.m1.1.2">=</mo><mo lspace="0em" id="S3.E3X.2.1.1.m1.1.3">−</mo><mstyle displaystyle="true" id="S3.E3X.2.1.1.m1.1.4"><munderover id="S3.E3X.2.1.1.m1.1.4a"><mo movablelimits="false" id="S3.E3X.2.1.1.m1.1.4.2.2">∑</mo><mrow id="S3.E3X.2.1.1.m1.1.4.2.3"><mi id="S3.E3X.2.1.1.m1.1.4.2.3.2">j</mi><mo id="S3.E3X.2.1.1.m1.1.4.2.3.1">=</mo><mn id="S3.E3X.2.1.1.m1.1.4.2.3.3">1</mn></mrow><mrow id="S3.E3X.2.1.1.m1.1.4.3"><mi id="S3.E3X.2.1.1.m1.1.4.3.2">N</mi><mo id="S3.E3X.2.1.1.m1.1.4.3.1">+</mo><mn id="S3.E3X.2.1.1.m1.1.4.3.3">1</mn></mrow></munderover></mstyle><mstyle displaystyle="true" id="S3.E3X.2.1.1.m1.1.5"><munderover id="S3.E3X.2.1.1.m1.1.5a"><mo movablelimits="false" id="S3.E3X.2.1.1.m1.1.5.2.2">∑</mo><mrow id="S3.E3X.2.1.1.m1.1.5.2.3"><mi id="S3.E3X.2.1.1.m1.1.5.2.3.2">i</mi><mo id="S3.E3X.2.1.1.m1.1.5.2.3.1">=</mo><mn id="S3.E3X.2.1.1.m1.1.5.2.3.3">1</mn></mrow><msub id="S3.E3X.2.1.1.m1.1.5.3"><mi id="S3.E3X.2.1.1.m1.1.5.3.2">M</mi><mi id="S3.E3X.2.1.1.m1.1.5.3.3">i</mi></msub></munderover></mstyle><msup id="S3.E3X.2.1.1.m1.1.6"><mover accent="true" id="S3.E3X.2.1.1.m1.1.6.2"><mi id="S3.E3X.2.1.1.m1.1.6.2.2">y</mi><mo id="S3.E3X.2.1.1.m1.1.6.2.1">^</mo></mover><mi id="S3.E3X.2.1.1.m1.1.6.3">j</mi></msup><mi id="S3.E3X.2.1.1.m1.1.7">log</mi><mrow id="S3.E3X.2.1.1.m1.1.8"><mo stretchy="false" id="S3.E3X.2.1.1.m1.1.8.1">(</mo><mi id="S3.E3X.2.1.1.m1.1.8.2">D</mi><mrow id="S3.E3X.2.1.1.m1.1.8.3"><mo stretchy="false" id="S3.E3X.2.1.1.m1.1.8.3.1">(</mo><mi id="S3.E3X.2.1.1.m1.1.8.3.2">G</mi><mrow id="S3.E3X.2.1.1.m1.1.8.3.3"><mo stretchy="false" id="S3.E3X.2.1.1.m1.1.8.3.3.1">(</mo><mi id="S3.E3X.2.1.1.m1.1.8.3.3.2">F</mi><mrow id="S3.E3X.2.1.1.m1.1.8.3.3.3"><mo stretchy="false" id="S3.E3X.2.1.1.m1.1.8.3.3.3.1">(</mo><msubsup id="S3.E3X.2.1.1.m1.1.8.3.3.3.2"><mi id="S3.E3X.2.1.1.m1.1.8.3.3.3.2.2.2">x</mi><mi id="S3.E3X.2.1.1.m1.1.8.3.3.3.2.2.3">i</mi><mi id="S3.E3X.2.1.1.m1.1.8.3.3.3.2.3">j</mi></msubsup><mo stretchy="false" id="S3.E3X.2.1.1.m1.1.8.3.3.3.3">)</mo></mrow><mo stretchy="false" id="S3.E3X.2.1.1.m1.1.8.3.3.4">)</mo></mrow><mo stretchy="false" id="S3.E3X.2.1.1.m1.1.8.3.4">)</mo></mrow></mrow></mrow><annotation encoding="application/x-tex" id="S3.E3X.2.1.1.m1.1c">\displaystyle\mathcal{L}_{\mbox{dis}}=-\sum_{j=1}^{N+1}\sum_{i=1}^{M_{i}}\hat{y}^{j}\log(D(G(F(x_{i}^{j})))</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(3)</span></td>
</tr>
</tbody>
</table>
<p id="S3.SS3.p1.8" class="ltx_p">where <math id="S3.SS3.p1.5.m1.1" class="ltx_Math" alttext="F" display="inline"><semantics id="S3.SS3.p1.5.m1.1a"><mi id="S3.SS3.p1.5.m1.1.1" xref="S3.SS3.p1.5.m1.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.5.m1.1b"><ci id="S3.SS3.p1.5.m1.1.1.cmml" xref="S3.SS3.p1.5.m1.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.5.m1.1c">F</annotation></semantics></math> is the CNN feature extractor, <math id="S3.SS3.p1.6.m2.1" class="ltx_Math" alttext="G" display="inline"><semantics id="S3.SS3.p1.6.m2.1a"><mi id="S3.SS3.p1.6.m2.1.1" xref="S3.SS3.p1.6.m2.1.1.cmml">G</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.6.m2.1b"><ci id="S3.SS3.p1.6.m2.1.1.cmml" xref="S3.SS3.p1.6.m2.1.1">𝐺</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.6.m2.1c">G</annotation></semantics></math> is the GRL, and <math id="S3.SS3.p1.7.m3.1" class="ltx_Math" alttext="D" display="inline"><semantics id="S3.SS3.p1.7.m3.1a"><mi id="S3.SS3.p1.7.m3.1.1" xref="S3.SS3.p1.7.m3.1.1.cmml">D</mi><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.7.m3.1b"><ci id="S3.SS3.p1.7.m3.1.1.cmml" xref="S3.SS3.p1.7.m3.1.1">𝐷</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.7.m3.1c">D</annotation></semantics></math> is the multi-domain discriminator.
The summation goes from <math id="S3.SS3.p1.8.m4.3" class="ltx_Math" alttext="j=1,2,...N+1" display="inline"><semantics id="S3.SS3.p1.8.m4.3a"><mrow id="S3.SS3.p1.8.m4.3.3" xref="S3.SS3.p1.8.m4.3.3.cmml"><mi id="S3.SS3.p1.8.m4.3.3.3" xref="S3.SS3.p1.8.m4.3.3.3.cmml">j</mi><mo id="S3.SS3.p1.8.m4.3.3.2" xref="S3.SS3.p1.8.m4.3.3.2.cmml">=</mo><mrow id="S3.SS3.p1.8.m4.3.3.1.1" xref="S3.SS3.p1.8.m4.3.3.1.2.cmml"><mn id="S3.SS3.p1.8.m4.1.1" xref="S3.SS3.p1.8.m4.1.1.cmml">1</mn><mo id="S3.SS3.p1.8.m4.3.3.1.1.2" xref="S3.SS3.p1.8.m4.3.3.1.2.cmml">,</mo><mn id="S3.SS3.p1.8.m4.2.2" xref="S3.SS3.p1.8.m4.2.2.cmml">2</mn><mo id="S3.SS3.p1.8.m4.3.3.1.1.3" xref="S3.SS3.p1.8.m4.3.3.1.2.cmml">,</mo><mrow id="S3.SS3.p1.8.m4.3.3.1.1.1" xref="S3.SS3.p1.8.m4.3.3.1.1.1.cmml"><mrow id="S3.SS3.p1.8.m4.3.3.1.1.1.2" xref="S3.SS3.p1.8.m4.3.3.1.1.1.2.cmml"><mi mathvariant="normal" id="S3.SS3.p1.8.m4.3.3.1.1.1.2.2" xref="S3.SS3.p1.8.m4.3.3.1.1.1.2.2.cmml">…</mi><mo lspace="0em" rspace="0em" id="S3.SS3.p1.8.m4.3.3.1.1.1.2.1" xref="S3.SS3.p1.8.m4.3.3.1.1.1.2.1.cmml">​</mo><mi id="S3.SS3.p1.8.m4.3.3.1.1.1.2.3" xref="S3.SS3.p1.8.m4.3.3.1.1.1.2.3.cmml">N</mi></mrow><mo id="S3.SS3.p1.8.m4.3.3.1.1.1.1" xref="S3.SS3.p1.8.m4.3.3.1.1.1.1.cmml">+</mo><mn id="S3.SS3.p1.8.m4.3.3.1.1.1.3" xref="S3.SS3.p1.8.m4.3.3.1.1.1.3.cmml">1</mn></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS3.p1.8.m4.3b"><apply id="S3.SS3.p1.8.m4.3.3.cmml" xref="S3.SS3.p1.8.m4.3.3"><eq id="S3.SS3.p1.8.m4.3.3.2.cmml" xref="S3.SS3.p1.8.m4.3.3.2"></eq><ci id="S3.SS3.p1.8.m4.3.3.3.cmml" xref="S3.SS3.p1.8.m4.3.3.3">𝑗</ci><list id="S3.SS3.p1.8.m4.3.3.1.2.cmml" xref="S3.SS3.p1.8.m4.3.3.1.1"><cn type="integer" id="S3.SS3.p1.8.m4.1.1.cmml" xref="S3.SS3.p1.8.m4.1.1">1</cn><cn type="integer" id="S3.SS3.p1.8.m4.2.2.cmml" xref="S3.SS3.p1.8.m4.2.2">2</cn><apply id="S3.SS3.p1.8.m4.3.3.1.1.1.cmml" xref="S3.SS3.p1.8.m4.3.3.1.1.1"><plus id="S3.SS3.p1.8.m4.3.3.1.1.1.1.cmml" xref="S3.SS3.p1.8.m4.3.3.1.1.1.1"></plus><apply id="S3.SS3.p1.8.m4.3.3.1.1.1.2.cmml" xref="S3.SS3.p1.8.m4.3.3.1.1.1.2"><times id="S3.SS3.p1.8.m4.3.3.1.1.1.2.1.cmml" xref="S3.SS3.p1.8.m4.3.3.1.1.1.2.1"></times><ci id="S3.SS3.p1.8.m4.3.3.1.1.1.2.2.cmml" xref="S3.SS3.p1.8.m4.3.3.1.1.1.2.2">…</ci><ci id="S3.SS3.p1.8.m4.3.3.1.1.1.2.3.cmml" xref="S3.SS3.p1.8.m4.3.3.1.1.1.2.3">𝑁</ci></apply><cn type="integer" id="S3.SS3.p1.8.m4.3.3.1.1.1.3.cmml" xref="S3.SS3.p1.8.m4.3.3.1.1.1.3">1</cn></apply></list></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS3.p1.8.m4.3c">j=1,2,...N+1</annotation></semantics></math> as we consider the target domain.</p>
</div>
</section>
<section id="S3.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.4 </span>Domain-specific Features with Prototypes</h3>

<div id="S3.SS4.p1" class="ltx_para">
<p id="S3.SS4.p1.1" class="ltx_p">In our PMT method, prototypes are used to preserve domain-specific information. Preserving domain-specific information helps for distilling with confident pseudo labels from individual source domains. To obtain the prototypes, we added a prototype network to the output of the ROI pool features. This network maps the output of the ROI pool to a <math id="S3.SS4.p1.1.m1.1" class="ltx_Math" alttext="d" display="inline"><semantics id="S3.SS4.p1.1.m1.1a"><mi id="S3.SS4.p1.1.m1.1.1" xref="S3.SS4.p1.1.m1.1.1.cmml">d</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p1.1.m1.1b"><ci id="S3.SS4.p1.1.m1.1.1.cmml" xref="S3.SS4.p1.1.m1.1.1">𝑑</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p1.1.m1.1c">d</annotation></semantics></math> dimensional feature space, where class-conditioned feature alignment is performed using a contrastive loss. This aligns representations of the same object categories across different domains and separates representations of different object categories. <a href="#S3.F3" title="In 3.4 Domain-specific Features with Prototypes ‣ 3 Proposed Method ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">3</span></a> illustrates the prototypes working for domain-specific feature alignment. We produce a local prototype for each class (e.g., car, truck, bus in <a href="#S3.F3" title="In 3.4 Domain-specific Features with Prototypes ‣ 3 Proposed Method ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">3</span></a>) in each domain, and these prototypes preserve the domain-specific information. The prototype for each class “across all domains”, called global prototypes, is obtained as the mean of the local prototypes of that class. The contrastive loss on global prototypes pushes them apart in the feature space, resulting in better separation of the classes. It also aligns the local prototypes from all domains for each class, reducing confusion due to appearance variation. Note that the prototype network shares parameters across domains, so its parameter size won’t change regardless of the number of domains used.</p>
</div>
<figure id="S3.F3" class="ltx_figure"><img src="/html/2309.14950/assets/images/prot_alignment.png" id="S3.F3.g1" class="ltx_graphics ltx_img_landscape" width="329" height="142" alt="Refer to caption">
<figcaption class="ltx_caption"><span class="ltx_tag ltx_tag_figure"><span id="S3.F3.2.1.1" class="ltx_text" style="font-size:90%;">Figure 3</span>: </span><span id="S3.F3.3.2" class="ltx_text" style="font-size:90%;">Prototype-based feature alignment with multiple source domains. There are three domains and three classes. Each domain has a prototype for each class. Initially, there is confusion between classes and the intra-class distance to global prototypes from multiple domains is also large. After alignment, class confusion and intra-class distance to global prototypes are reduced.</span></figcaption>
</figure>
<div id="S3.SS4.p2" class="ltx_para">
<p id="S3.SS4.p2.10" class="ltx_p">Let <math id="S3.SS4.p2.1.m1.1" class="ltx_Math" alttext="p_{k}^{j}" display="inline"><semantics id="S3.SS4.p2.1.m1.1a"><msubsup id="S3.SS4.p2.1.m1.1.1" xref="S3.SS4.p2.1.m1.1.1.cmml"><mi id="S3.SS4.p2.1.m1.1.1.2.2" xref="S3.SS4.p2.1.m1.1.1.2.2.cmml">p</mi><mi id="S3.SS4.p2.1.m1.1.1.2.3" xref="S3.SS4.p2.1.m1.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p2.1.m1.1.1.3" xref="S3.SS4.p2.1.m1.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.1.m1.1b"><apply id="S3.SS4.p2.1.m1.1.1.cmml" xref="S3.SS4.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.1.m1.1.1.1.cmml" xref="S3.SS4.p2.1.m1.1.1">superscript</csymbol><apply id="S3.SS4.p2.1.m1.1.1.2.cmml" xref="S3.SS4.p2.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.1.m1.1.1.2.1.cmml" xref="S3.SS4.p2.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.p2.1.m1.1.1.2.2.cmml" xref="S3.SS4.p2.1.m1.1.1.2.2">𝑝</ci><ci id="S3.SS4.p2.1.m1.1.1.2.3.cmml" xref="S3.SS4.p2.1.m1.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p2.1.m1.1.1.3.cmml" xref="S3.SS4.p2.1.m1.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.1.m1.1c">p_{k}^{j}</annotation></semantics></math> denote the local prototype of the <math id="S3.SS4.p2.2.m2.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.p2.2.m2.1a"><mi id="S3.SS4.p2.2.m2.1.1" xref="S3.SS4.p2.2.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.2.m2.1b"><ci id="S3.SS4.p2.2.m2.1.1.cmml" xref="S3.SS4.p2.2.m2.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.2.m2.1c">k</annotation></semantics></math>th class in domain <math id="S3.SS4.p2.3.m3.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS4.p2.3.m3.1a"><mi id="S3.SS4.p2.3.m3.1.1" xref="S3.SS4.p2.3.m3.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.3.m3.1b"><ci id="S3.SS4.p2.3.m3.1.1.cmml" xref="S3.SS4.p2.3.m3.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.3.m3.1c">j</annotation></semantics></math>. The global prototype of class <math id="S3.SS4.p2.4.m4.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.p2.4.m4.1a"><mi id="S3.SS4.p2.4.m4.1.1" xref="S3.SS4.p2.4.m4.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.4.m4.1b"><ci id="S3.SS4.p2.4.m4.1.1.cmml" xref="S3.SS4.p2.4.m4.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.4.m4.1c">k</annotation></semantics></math> is denoted as <math id="S3.SS4.p2.5.m5.1" class="ltx_Math" alttext="P_{k}" display="inline"><semantics id="S3.SS4.p2.5.m5.1a"><msub id="S3.SS4.p2.5.m5.1.1" xref="S3.SS4.p2.5.m5.1.1.cmml"><mi id="S3.SS4.p2.5.m5.1.1.2" xref="S3.SS4.p2.5.m5.1.1.2.cmml">P</mi><mi id="S3.SS4.p2.5.m5.1.1.3" xref="S3.SS4.p2.5.m5.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.5.m5.1b"><apply id="S3.SS4.p2.5.m5.1.1.cmml" xref="S3.SS4.p2.5.m5.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.5.m5.1.1.1.cmml" xref="S3.SS4.p2.5.m5.1.1">subscript</csymbol><ci id="S3.SS4.p2.5.m5.1.1.2.cmml" xref="S3.SS4.p2.5.m5.1.1.2">𝑃</ci><ci id="S3.SS4.p2.5.m5.1.1.3.cmml" xref="S3.SS4.p2.5.m5.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.5.m5.1c">P_{k}</annotation></semantics></math>. Let the number of occurrences of class <math id="S3.SS4.p2.6.m6.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.p2.6.m6.1a"><mi id="S3.SS4.p2.6.m6.1.1" xref="S3.SS4.p2.6.m6.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.6.m6.1b"><ci id="S3.SS4.p2.6.m6.1.1.cmml" xref="S3.SS4.p2.6.m6.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.6.m6.1c">k</annotation></semantics></math> from domain <math id="S3.SS4.p2.7.m7.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS4.p2.7.m7.1a"><mi id="S3.SS4.p2.7.m7.1.1" xref="S3.SS4.p2.7.m7.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.7.m7.1b"><ci id="S3.SS4.p2.7.m7.1.1.cmml" xref="S3.SS4.p2.7.m7.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.7.m7.1c">j</annotation></semantics></math> in a minibatch be <math id="S3.SS4.p2.8.m8.1" class="ltx_Math" alttext="c_{k}^{j}" display="inline"><semantics id="S3.SS4.p2.8.m8.1a"><msubsup id="S3.SS4.p2.8.m8.1.1" xref="S3.SS4.p2.8.m8.1.1.cmml"><mi id="S3.SS4.p2.8.m8.1.1.2.2" xref="S3.SS4.p2.8.m8.1.1.2.2.cmml">c</mi><mi id="S3.SS4.p2.8.m8.1.1.2.3" xref="S3.SS4.p2.8.m8.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p2.8.m8.1.1.3" xref="S3.SS4.p2.8.m8.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.8.m8.1b"><apply id="S3.SS4.p2.8.m8.1.1.cmml" xref="S3.SS4.p2.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.8.m8.1.1.1.cmml" xref="S3.SS4.p2.8.m8.1.1">superscript</csymbol><apply id="S3.SS4.p2.8.m8.1.1.2.cmml" xref="S3.SS4.p2.8.m8.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.8.m8.1.1.2.1.cmml" xref="S3.SS4.p2.8.m8.1.1">subscript</csymbol><ci id="S3.SS4.p2.8.m8.1.1.2.2.cmml" xref="S3.SS4.p2.8.m8.1.1.2.2">𝑐</ci><ci id="S3.SS4.p2.8.m8.1.1.2.3.cmml" xref="S3.SS4.p2.8.m8.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p2.8.m8.1.1.3.cmml" xref="S3.SS4.p2.8.m8.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.8.m8.1c">c_{k}^{j}</annotation></semantics></math>. The prototype update value for class <math id="S3.SS4.p2.9.m9.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.p2.9.m9.1a"><mi id="S3.SS4.p2.9.m9.1.1" xref="S3.SS4.p2.9.m9.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.9.m9.1b"><ci id="S3.SS4.p2.9.m9.1.1.cmml" xref="S3.SS4.p2.9.m9.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.9.m9.1c">k</annotation></semantics></math> from domain <math id="S3.SS4.p2.10.m10.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS4.p2.10.m10.1a"><mi id="S3.SS4.p2.10.m10.1.1" xref="S3.SS4.p2.10.m10.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.10.m10.1b"><ci id="S3.SS4.p2.10.m10.1.1.cmml" xref="S3.SS4.p2.10.m10.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.10.m10.1c">j</annotation></semantics></math> in a minibatch is computed as</p>
<table id="S3.E4" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E4.m1.3" class="ltx_Math" alttext="q_{k}^{j}=\frac{1}{|c_{k}^{j}|}\sum_{r=1}^{c_{k}^{j}}{P}({R}({F}(x^{j}),r))" display="block"><semantics id="S3.E4.m1.3a"><mrow id="S3.E4.m1.3.3" xref="S3.E4.m1.3.3.cmml"><msubsup id="S3.E4.m1.3.3.3" xref="S3.E4.m1.3.3.3.cmml"><mi id="S3.E4.m1.3.3.3.2.2" xref="S3.E4.m1.3.3.3.2.2.cmml">q</mi><mi id="S3.E4.m1.3.3.3.2.3" xref="S3.E4.m1.3.3.3.2.3.cmml">k</mi><mi id="S3.E4.m1.3.3.3.3" xref="S3.E4.m1.3.3.3.3.cmml">j</mi></msubsup><mo id="S3.E4.m1.3.3.2" xref="S3.E4.m1.3.3.2.cmml">=</mo><mrow id="S3.E4.m1.3.3.1" xref="S3.E4.m1.3.3.1.cmml"><mfrac id="S3.E4.m1.1.1" xref="S3.E4.m1.1.1.cmml"><mn id="S3.E4.m1.1.1.3" xref="S3.E4.m1.1.1.3.cmml">1</mn><mrow id="S3.E4.m1.1.1.1.1" xref="S3.E4.m1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E4.m1.1.1.1.1.2" xref="S3.E4.m1.1.1.1.2.1.cmml">|</mo><msubsup id="S3.E4.m1.1.1.1.1.1" xref="S3.E4.m1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.1.1.1.1.1.2.2" xref="S3.E4.m1.1.1.1.1.1.2.2.cmml">c</mi><mi id="S3.E4.m1.1.1.1.1.1.2.3" xref="S3.E4.m1.1.1.1.1.1.2.3.cmml">k</mi><mi id="S3.E4.m1.1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo stretchy="false" id="S3.E4.m1.1.1.1.1.3" xref="S3.E4.m1.1.1.1.2.1.cmml">|</mo></mrow></mfrac><mo lspace="0em" rspace="0em" id="S3.E4.m1.3.3.1.2" xref="S3.E4.m1.3.3.1.2.cmml">​</mo><mrow id="S3.E4.m1.3.3.1.1" xref="S3.E4.m1.3.3.1.1.cmml"><munderover id="S3.E4.m1.3.3.1.1.2" xref="S3.E4.m1.3.3.1.1.2.cmml"><mo movablelimits="false" id="S3.E4.m1.3.3.1.1.2.2.2" xref="S3.E4.m1.3.3.1.1.2.2.2.cmml">∑</mo><mrow id="S3.E4.m1.3.3.1.1.2.2.3" xref="S3.E4.m1.3.3.1.1.2.2.3.cmml"><mi id="S3.E4.m1.3.3.1.1.2.2.3.2" xref="S3.E4.m1.3.3.1.1.2.2.3.2.cmml">r</mi><mo id="S3.E4.m1.3.3.1.1.2.2.3.1" xref="S3.E4.m1.3.3.1.1.2.2.3.1.cmml">=</mo><mn id="S3.E4.m1.3.3.1.1.2.2.3.3" xref="S3.E4.m1.3.3.1.1.2.2.3.3.cmml">1</mn></mrow><msubsup id="S3.E4.m1.3.3.1.1.2.3" xref="S3.E4.m1.3.3.1.1.2.3.cmml"><mi id="S3.E4.m1.3.3.1.1.2.3.2.2" xref="S3.E4.m1.3.3.1.1.2.3.2.2.cmml">c</mi><mi id="S3.E4.m1.3.3.1.1.2.3.2.3" xref="S3.E4.m1.3.3.1.1.2.3.2.3.cmml">k</mi><mi id="S3.E4.m1.3.3.1.1.2.3.3" xref="S3.E4.m1.3.3.1.1.2.3.3.cmml">j</mi></msubsup></munderover><mrow id="S3.E4.m1.3.3.1.1.1" xref="S3.E4.m1.3.3.1.1.1.cmml"><mi id="S3.E4.m1.3.3.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.3.cmml">P</mi><mo lspace="0em" rspace="0em" id="S3.E4.m1.3.3.1.1.1.2" xref="S3.E4.m1.3.3.1.1.1.2.cmml">​</mo><mrow id="S3.E4.m1.3.3.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E4.m1.3.3.1.1.1.1.1.2" xref="S3.E4.m1.3.3.1.1.1.1.1.1.cmml">(</mo><mrow id="S3.E4.m1.3.3.1.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.3.3.1.1.1.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.1.1.1.3.cmml">R</mi><mo lspace="0em" rspace="0em" id="S3.E4.m1.3.3.1.1.1.1.1.1.2" xref="S3.E4.m1.3.3.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.2.cmml"><mo stretchy="false" id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.2.cmml">(</mo><mrow id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.3.cmml">F</mi><mo lspace="0em" rspace="0em" id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.2.cmml">​</mo><mrow id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.cmml">(</mo><msup id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.2" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml">x</mi><mi id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml">j</mi></msup><mo stretchy="false" id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.2.cmml">,</mo><mi id="S3.E4.m1.2.2" xref="S3.E4.m1.2.2.cmml">r</mi><mo stretchy="false" id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.4" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.2.cmml">)</mo></mrow></mrow><mo stretchy="false" id="S3.E4.m1.3.3.1.1.1.1.1.3" xref="S3.E4.m1.3.3.1.1.1.1.1.1.cmml">)</mo></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E4.m1.3b"><apply id="S3.E4.m1.3.3.cmml" xref="S3.E4.m1.3.3"><eq id="S3.E4.m1.3.3.2.cmml" xref="S3.E4.m1.3.3.2"></eq><apply id="S3.E4.m1.3.3.3.cmml" xref="S3.E4.m1.3.3.3"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.3.1.cmml" xref="S3.E4.m1.3.3.3">superscript</csymbol><apply id="S3.E4.m1.3.3.3.2.cmml" xref="S3.E4.m1.3.3.3"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.3.2.1.cmml" xref="S3.E4.m1.3.3.3">subscript</csymbol><ci id="S3.E4.m1.3.3.3.2.2.cmml" xref="S3.E4.m1.3.3.3.2.2">𝑞</ci><ci id="S3.E4.m1.3.3.3.2.3.cmml" xref="S3.E4.m1.3.3.3.2.3">𝑘</ci></apply><ci id="S3.E4.m1.3.3.3.3.cmml" xref="S3.E4.m1.3.3.3.3">𝑗</ci></apply><apply id="S3.E4.m1.3.3.1.cmml" xref="S3.E4.m1.3.3.1"><times id="S3.E4.m1.3.3.1.2.cmml" xref="S3.E4.m1.3.3.1.2"></times><apply id="S3.E4.m1.1.1.cmml" xref="S3.E4.m1.1.1"><divide id="S3.E4.m1.1.1.2.cmml" xref="S3.E4.m1.1.1"></divide><cn type="integer" id="S3.E4.m1.1.1.3.cmml" xref="S3.E4.m1.1.1.3">1</cn><apply id="S3.E4.m1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1"><abs id="S3.E4.m1.1.1.1.2.1.cmml" xref="S3.E4.m1.1.1.1.1.2"></abs><apply id="S3.E4.m1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.1.1.1.1.1">superscript</csymbol><apply id="S3.E4.m1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.1.1.1.1.1.2.1.cmml" xref="S3.E4.m1.1.1.1.1.1">subscript</csymbol><ci id="S3.E4.m1.1.1.1.1.1.2.2.cmml" xref="S3.E4.m1.1.1.1.1.1.2.2">𝑐</ci><ci id="S3.E4.m1.1.1.1.1.1.2.3.cmml" xref="S3.E4.m1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.E4.m1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.1.1.1.1.1.3">𝑗</ci></apply></apply></apply><apply id="S3.E4.m1.3.3.1.1.cmml" xref="S3.E4.m1.3.3.1.1"><apply id="S3.E4.m1.3.3.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.1.2.1.cmml" xref="S3.E4.m1.3.3.1.1.2">superscript</csymbol><apply id="S3.E4.m1.3.3.1.1.2.2.cmml" xref="S3.E4.m1.3.3.1.1.2"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.1.2.2.1.cmml" xref="S3.E4.m1.3.3.1.1.2">subscript</csymbol><sum id="S3.E4.m1.3.3.1.1.2.2.2.cmml" xref="S3.E4.m1.3.3.1.1.2.2.2"></sum><apply id="S3.E4.m1.3.3.1.1.2.2.3.cmml" xref="S3.E4.m1.3.3.1.1.2.2.3"><eq id="S3.E4.m1.3.3.1.1.2.2.3.1.cmml" xref="S3.E4.m1.3.3.1.1.2.2.3.1"></eq><ci id="S3.E4.m1.3.3.1.1.2.2.3.2.cmml" xref="S3.E4.m1.3.3.1.1.2.2.3.2">𝑟</ci><cn type="integer" id="S3.E4.m1.3.3.1.1.2.2.3.3.cmml" xref="S3.E4.m1.3.3.1.1.2.2.3.3">1</cn></apply></apply><apply id="S3.E4.m1.3.3.1.1.2.3.cmml" xref="S3.E4.m1.3.3.1.1.2.3"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.1.2.3.1.cmml" xref="S3.E4.m1.3.3.1.1.2.3">superscript</csymbol><apply id="S3.E4.m1.3.3.1.1.2.3.2.cmml" xref="S3.E4.m1.3.3.1.1.2.3"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.1.2.3.2.1.cmml" xref="S3.E4.m1.3.3.1.1.2.3">subscript</csymbol><ci id="S3.E4.m1.3.3.1.1.2.3.2.2.cmml" xref="S3.E4.m1.3.3.1.1.2.3.2.2">𝑐</ci><ci id="S3.E4.m1.3.3.1.1.2.3.2.3.cmml" xref="S3.E4.m1.3.3.1.1.2.3.2.3">𝑘</ci></apply><ci id="S3.E4.m1.3.3.1.1.2.3.3.cmml" xref="S3.E4.m1.3.3.1.1.2.3.3">𝑗</ci></apply></apply><apply id="S3.E4.m1.3.3.1.1.1.cmml" xref="S3.E4.m1.3.3.1.1.1"><times id="S3.E4.m1.3.3.1.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.1.2"></times><ci id="S3.E4.m1.3.3.1.1.1.3.cmml" xref="S3.E4.m1.3.3.1.1.1.3">𝑃</ci><apply id="S3.E4.m1.3.3.1.1.1.1.1.1.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1"><times id="S3.E4.m1.3.3.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.2"></times><ci id="S3.E4.m1.3.3.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.3">𝑅</ci><interval closure="open" id="S3.E4.m1.3.3.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1"><apply id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1"><times id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.2"></times><ci id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.3">𝐹</ci><apply id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1">superscript</csymbol><ci id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.2">𝑥</ci><ci id="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E4.m1.3.3.1.1.1.1.1.1.1.1.1.1.1.1.3">𝑗</ci></apply></apply><ci id="S3.E4.m1.2.2.cmml" xref="S3.E4.m1.2.2">𝑟</ci></interval></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E4.m1.3c">q_{k}^{j}=\frac{1}{|c_{k}^{j}|}\sum_{r=1}^{c_{k}^{j}}{P}({R}({F}(x^{j}),r))</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(4)</span></td>
</tr></tbody>
</table>
<p id="S3.SS4.p2.26" class="ltx_p">where <math id="S3.SS4.p2.11.m1.1" class="ltx_Math" alttext="P" display="inline"><semantics id="S3.SS4.p2.11.m1.1a"><mi id="S3.SS4.p2.11.m1.1.1" xref="S3.SS4.p2.11.m1.1.1.cmml">P</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.11.m1.1b"><ci id="S3.SS4.p2.11.m1.1.1.cmml" xref="S3.SS4.p2.11.m1.1.1">𝑃</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.11.m1.1c">P</annotation></semantics></math> is the prototype network (a 2-layer MLP), <math id="S3.SS4.p2.12.m2.1" class="ltx_Math" alttext="R" display="inline"><semantics id="S3.SS4.p2.12.m2.1a"><mi id="S3.SS4.p2.12.m2.1.1" xref="S3.SS4.p2.12.m2.1.1.cmml">R</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.12.m2.1b"><ci id="S3.SS4.p2.12.m2.1.1.cmml" xref="S3.SS4.p2.12.m2.1.1">𝑅</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.12.m2.1c">R</annotation></semantics></math> is the faster R-CNN ROI-pooling and <math id="S3.SS4.p2.13.m3.1" class="ltx_Math" alttext="F" display="inline"><semantics id="S3.SS4.p2.13.m3.1a"><mi id="S3.SS4.p2.13.m3.1.1" xref="S3.SS4.p2.13.m3.1.1.cmml">F</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.13.m3.1b"><ci id="S3.SS4.p2.13.m3.1.1.cmml" xref="S3.SS4.p2.13.m3.1.1">𝐹</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.13.m3.1c">F</annotation></semantics></math> is the CNN feature extractor. Thus, <math id="S3.SS4.p2.14.m4.2" class="ltx_Math" alttext="{R}({F}(x^{j}),r)" display="inline"><semantics id="S3.SS4.p2.14.m4.2a"><mrow id="S3.SS4.p2.14.m4.2.2" xref="S3.SS4.p2.14.m4.2.2.cmml"><mi id="S3.SS4.p2.14.m4.2.2.3" xref="S3.SS4.p2.14.m4.2.2.3.cmml">R</mi><mo lspace="0em" rspace="0em" id="S3.SS4.p2.14.m4.2.2.2" xref="S3.SS4.p2.14.m4.2.2.2.cmml">​</mo><mrow id="S3.SS4.p2.14.m4.2.2.1.1" xref="S3.SS4.p2.14.m4.2.2.1.2.cmml"><mo stretchy="false" id="S3.SS4.p2.14.m4.2.2.1.1.2" xref="S3.SS4.p2.14.m4.2.2.1.2.cmml">(</mo><mrow id="S3.SS4.p2.14.m4.2.2.1.1.1" xref="S3.SS4.p2.14.m4.2.2.1.1.1.cmml"><mi id="S3.SS4.p2.14.m4.2.2.1.1.1.3" xref="S3.SS4.p2.14.m4.2.2.1.1.1.3.cmml">F</mi><mo lspace="0em" rspace="0em" id="S3.SS4.p2.14.m4.2.2.1.1.1.2" xref="S3.SS4.p2.14.m4.2.2.1.1.1.2.cmml">​</mo><mrow id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.cmml"><mo stretchy="false" id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.2" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.cmml">(</mo><msup id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.cmml"><mi id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.2" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.2.cmml">x</mi><mi id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.3" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.3.cmml">j</mi></msup><mo stretchy="false" id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.3" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.cmml">)</mo></mrow></mrow><mo id="S3.SS4.p2.14.m4.2.2.1.1.3" xref="S3.SS4.p2.14.m4.2.2.1.2.cmml">,</mo><mi id="S3.SS4.p2.14.m4.1.1" xref="S3.SS4.p2.14.m4.1.1.cmml">r</mi><mo stretchy="false" id="S3.SS4.p2.14.m4.2.2.1.1.4" xref="S3.SS4.p2.14.m4.2.2.1.2.cmml">)</mo></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.14.m4.2b"><apply id="S3.SS4.p2.14.m4.2.2.cmml" xref="S3.SS4.p2.14.m4.2.2"><times id="S3.SS4.p2.14.m4.2.2.2.cmml" xref="S3.SS4.p2.14.m4.2.2.2"></times><ci id="S3.SS4.p2.14.m4.2.2.3.cmml" xref="S3.SS4.p2.14.m4.2.2.3">𝑅</ci><interval closure="open" id="S3.SS4.p2.14.m4.2.2.1.2.cmml" xref="S3.SS4.p2.14.m4.2.2.1.1"><apply id="S3.SS4.p2.14.m4.2.2.1.1.1.cmml" xref="S3.SS4.p2.14.m4.2.2.1.1.1"><times id="S3.SS4.p2.14.m4.2.2.1.1.1.2.cmml" xref="S3.SS4.p2.14.m4.2.2.1.1.1.2"></times><ci id="S3.SS4.p2.14.m4.2.2.1.1.1.3.cmml" xref="S3.SS4.p2.14.m4.2.2.1.1.1.3">𝐹</ci><apply id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.cmml" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.1.cmml" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1">superscript</csymbol><ci id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.2.cmml" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.2">𝑥</ci><ci id="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.3.cmml" xref="S3.SS4.p2.14.m4.2.2.1.1.1.1.1.1.3">𝑗</ci></apply></apply><ci id="S3.SS4.p2.14.m4.1.1.cmml" xref="S3.SS4.p2.14.m4.1.1">𝑟</ci></interval></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.14.m4.2c">{R}({F}(x^{j}),r)</annotation></semantics></math> pools features from the RoI <math id="S3.SS4.p2.15.m5.1" class="ltx_Math" alttext="r" display="inline"><semantics id="S3.SS4.p2.15.m5.1a"><mi id="S3.SS4.p2.15.m5.1.1" xref="S3.SS4.p2.15.m5.1.1.cmml">r</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.15.m5.1b"><ci id="S3.SS4.p2.15.m5.1.1.cmml" xref="S3.SS4.p2.15.m5.1.1">𝑟</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.15.m5.1c">r</annotation></semantics></math> corresponding to the ground-truth box for class <math id="S3.SS4.p2.16.m6.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.p2.16.m6.1a"><mi id="S3.SS4.p2.16.m6.1.1" xref="S3.SS4.p2.16.m6.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.16.m6.1b"><ci id="S3.SS4.p2.16.m6.1.1.cmml" xref="S3.SS4.p2.16.m6.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.16.m6.1c">k</annotation></semantics></math> from domain <math id="S3.SS4.p2.17.m7.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS4.p2.17.m7.1a"><mi id="S3.SS4.p2.17.m7.1.1" xref="S3.SS4.p2.17.m7.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.17.m7.1b"><ci id="S3.SS4.p2.17.m7.1.1.cmml" xref="S3.SS4.p2.17.m7.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.17.m7.1c">j</annotation></semantics></math> in a minibatch. For the target domain without ground-truth annotations, the pseudo-labels obtained from the teacher network are used to compute the update value <math id="S3.SS4.p2.18.m8.1" class="ltx_Math" alttext="q_{k}^{N+1}" display="inline"><semantics id="S3.SS4.p2.18.m8.1a"><msubsup id="S3.SS4.p2.18.m8.1.1" xref="S3.SS4.p2.18.m8.1.1.cmml"><mi id="S3.SS4.p2.18.m8.1.1.2.2" xref="S3.SS4.p2.18.m8.1.1.2.2.cmml">q</mi><mi id="S3.SS4.p2.18.m8.1.1.2.3" xref="S3.SS4.p2.18.m8.1.1.2.3.cmml">k</mi><mrow id="S3.SS4.p2.18.m8.1.1.3" xref="S3.SS4.p2.18.m8.1.1.3.cmml"><mi id="S3.SS4.p2.18.m8.1.1.3.2" xref="S3.SS4.p2.18.m8.1.1.3.2.cmml">N</mi><mo id="S3.SS4.p2.18.m8.1.1.3.1" xref="S3.SS4.p2.18.m8.1.1.3.1.cmml">+</mo><mn id="S3.SS4.p2.18.m8.1.1.3.3" xref="S3.SS4.p2.18.m8.1.1.3.3.cmml">1</mn></mrow></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.18.m8.1b"><apply id="S3.SS4.p2.18.m8.1.1.cmml" xref="S3.SS4.p2.18.m8.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.18.m8.1.1.1.cmml" xref="S3.SS4.p2.18.m8.1.1">superscript</csymbol><apply id="S3.SS4.p2.18.m8.1.1.2.cmml" xref="S3.SS4.p2.18.m8.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.18.m8.1.1.2.1.cmml" xref="S3.SS4.p2.18.m8.1.1">subscript</csymbol><ci id="S3.SS4.p2.18.m8.1.1.2.2.cmml" xref="S3.SS4.p2.18.m8.1.1.2.2">𝑞</ci><ci id="S3.SS4.p2.18.m8.1.1.2.3.cmml" xref="S3.SS4.p2.18.m8.1.1.2.3">𝑘</ci></apply><apply id="S3.SS4.p2.18.m8.1.1.3.cmml" xref="S3.SS4.p2.18.m8.1.1.3"><plus id="S3.SS4.p2.18.m8.1.1.3.1.cmml" xref="S3.SS4.p2.18.m8.1.1.3.1"></plus><ci id="S3.SS4.p2.18.m8.1.1.3.2.cmml" xref="S3.SS4.p2.18.m8.1.1.3.2">𝑁</ci><cn type="integer" id="S3.SS4.p2.18.m8.1.1.3.3.cmml" xref="S3.SS4.p2.18.m8.1.1.3.3">1</cn></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.18.m8.1c">q_{k}^{N+1}</annotation></semantics></math>. When <math id="S3.SS4.p2.19.m9.1" class="ltx_Math" alttext="c_{k}^{j}=0" display="inline"><semantics id="S3.SS4.p2.19.m9.1a"><mrow id="S3.SS4.p2.19.m9.1.1" xref="S3.SS4.p2.19.m9.1.1.cmml"><msubsup id="S3.SS4.p2.19.m9.1.1.2" xref="S3.SS4.p2.19.m9.1.1.2.cmml"><mi id="S3.SS4.p2.19.m9.1.1.2.2.2" xref="S3.SS4.p2.19.m9.1.1.2.2.2.cmml">c</mi><mi id="S3.SS4.p2.19.m9.1.1.2.2.3" xref="S3.SS4.p2.19.m9.1.1.2.2.3.cmml">k</mi><mi id="S3.SS4.p2.19.m9.1.1.2.3" xref="S3.SS4.p2.19.m9.1.1.2.3.cmml">j</mi></msubsup><mo id="S3.SS4.p2.19.m9.1.1.1" xref="S3.SS4.p2.19.m9.1.1.1.cmml">=</mo><mn id="S3.SS4.p2.19.m9.1.1.3" xref="S3.SS4.p2.19.m9.1.1.3.cmml">0</mn></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.19.m9.1b"><apply id="S3.SS4.p2.19.m9.1.1.cmml" xref="S3.SS4.p2.19.m9.1.1"><eq id="S3.SS4.p2.19.m9.1.1.1.cmml" xref="S3.SS4.p2.19.m9.1.1.1"></eq><apply id="S3.SS4.p2.19.m9.1.1.2.cmml" xref="S3.SS4.p2.19.m9.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.p2.19.m9.1.1.2.1.cmml" xref="S3.SS4.p2.19.m9.1.1.2">superscript</csymbol><apply id="S3.SS4.p2.19.m9.1.1.2.2.cmml" xref="S3.SS4.p2.19.m9.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.p2.19.m9.1.1.2.2.1.cmml" xref="S3.SS4.p2.19.m9.1.1.2">subscript</csymbol><ci id="S3.SS4.p2.19.m9.1.1.2.2.2.cmml" xref="S3.SS4.p2.19.m9.1.1.2.2.2">𝑐</ci><ci id="S3.SS4.p2.19.m9.1.1.2.2.3.cmml" xref="S3.SS4.p2.19.m9.1.1.2.2.3">𝑘</ci></apply><ci id="S3.SS4.p2.19.m9.1.1.2.3.cmml" xref="S3.SS4.p2.19.m9.1.1.2.3">𝑗</ci></apply><cn type="integer" id="S3.SS4.p2.19.m9.1.1.3.cmml" xref="S3.SS4.p2.19.m9.1.1.3">0</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.19.m9.1c">c_{k}^{j}=0</annotation></semantics></math> in a minibatch, no updates are performed for the corresponding prototype. The local prototype vector <math id="S3.SS4.p2.20.m10.1" class="ltx_Math" alttext="p_{k}^{j}" display="inline"><semantics id="S3.SS4.p2.20.m10.1a"><msubsup id="S3.SS4.p2.20.m10.1.1" xref="S3.SS4.p2.20.m10.1.1.cmml"><mi id="S3.SS4.p2.20.m10.1.1.2.2" xref="S3.SS4.p2.20.m10.1.1.2.2.cmml">p</mi><mi id="S3.SS4.p2.20.m10.1.1.2.3" xref="S3.SS4.p2.20.m10.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p2.20.m10.1.1.3" xref="S3.SS4.p2.20.m10.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.20.m10.1b"><apply id="S3.SS4.p2.20.m10.1.1.cmml" xref="S3.SS4.p2.20.m10.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.20.m10.1.1.1.cmml" xref="S3.SS4.p2.20.m10.1.1">superscript</csymbol><apply id="S3.SS4.p2.20.m10.1.1.2.cmml" xref="S3.SS4.p2.20.m10.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.20.m10.1.1.2.1.cmml" xref="S3.SS4.p2.20.m10.1.1">subscript</csymbol><ci id="S3.SS4.p2.20.m10.1.1.2.2.cmml" xref="S3.SS4.p2.20.m10.1.1.2.2">𝑝</ci><ci id="S3.SS4.p2.20.m10.1.1.2.3.cmml" xref="S3.SS4.p2.20.m10.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p2.20.m10.1.1.3.cmml" xref="S3.SS4.p2.20.m10.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.20.m10.1c">p_{k}^{j}</annotation></semantics></math> for each class <math id="S3.SS4.p2.21.m11.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.p2.21.m11.1a"><mi id="S3.SS4.p2.21.m11.1.1" xref="S3.SS4.p2.21.m11.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.21.m11.1b"><ci id="S3.SS4.p2.21.m11.1.1.cmml" xref="S3.SS4.p2.21.m11.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.21.m11.1c">k</annotation></semantics></math> and domain <math id="S3.SS4.p2.22.m12.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS4.p2.22.m12.1a"><mi id="S3.SS4.p2.22.m12.1.1" xref="S3.SS4.p2.22.m12.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.22.m12.1b"><ci id="S3.SS4.p2.22.m12.1.1.cmml" xref="S3.SS4.p2.22.m12.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.22.m12.1c">j</annotation></semantics></math> is stored in memory along with a count value <math id="S3.SS4.p2.23.m13.1" class="ltx_Math" alttext="\rho_{k}^{j}" display="inline"><semantics id="S3.SS4.p2.23.m13.1a"><msubsup id="S3.SS4.p2.23.m13.1.1" xref="S3.SS4.p2.23.m13.1.1.cmml"><mi id="S3.SS4.p2.23.m13.1.1.2.2" xref="S3.SS4.p2.23.m13.1.1.2.2.cmml">ρ</mi><mi id="S3.SS4.p2.23.m13.1.1.2.3" xref="S3.SS4.p2.23.m13.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p2.23.m13.1.1.3" xref="S3.SS4.p2.23.m13.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.23.m13.1b"><apply id="S3.SS4.p2.23.m13.1.1.cmml" xref="S3.SS4.p2.23.m13.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.23.m13.1.1.1.cmml" xref="S3.SS4.p2.23.m13.1.1">superscript</csymbol><apply id="S3.SS4.p2.23.m13.1.1.2.cmml" xref="S3.SS4.p2.23.m13.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.23.m13.1.1.2.1.cmml" xref="S3.SS4.p2.23.m13.1.1">subscript</csymbol><ci id="S3.SS4.p2.23.m13.1.1.2.2.cmml" xref="S3.SS4.p2.23.m13.1.1.2.2">𝜌</ci><ci id="S3.SS4.p2.23.m13.1.1.2.3.cmml" xref="S3.SS4.p2.23.m13.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p2.23.m13.1.1.3.cmml" xref="S3.SS4.p2.23.m13.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.23.m13.1c">\rho_{k}^{j}</annotation></semantics></math> that tells how many times <math id="S3.SS4.p2.24.m14.1" class="ltx_Math" alttext="p_{k}^{j}" display="inline"><semantics id="S3.SS4.p2.24.m14.1a"><msubsup id="S3.SS4.p2.24.m14.1.1" xref="S3.SS4.p2.24.m14.1.1.cmml"><mi id="S3.SS4.p2.24.m14.1.1.2.2" xref="S3.SS4.p2.24.m14.1.1.2.2.cmml">p</mi><mi id="S3.SS4.p2.24.m14.1.1.2.3" xref="S3.SS4.p2.24.m14.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p2.24.m14.1.1.3" xref="S3.SS4.p2.24.m14.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.24.m14.1b"><apply id="S3.SS4.p2.24.m14.1.1.cmml" xref="S3.SS4.p2.24.m14.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.24.m14.1.1.1.cmml" xref="S3.SS4.p2.24.m14.1.1">superscript</csymbol><apply id="S3.SS4.p2.24.m14.1.1.2.cmml" xref="S3.SS4.p2.24.m14.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.24.m14.1.1.2.1.cmml" xref="S3.SS4.p2.24.m14.1.1">subscript</csymbol><ci id="S3.SS4.p2.24.m14.1.1.2.2.cmml" xref="S3.SS4.p2.24.m14.1.1.2.2">𝑝</ci><ci id="S3.SS4.p2.24.m14.1.1.2.3.cmml" xref="S3.SS4.p2.24.m14.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p2.24.m14.1.1.3.cmml" xref="S3.SS4.p2.24.m14.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.24.m14.1c">p_{k}^{j}</annotation></semantics></math> has been updated thus far. Given the current update value <math id="S3.SS4.p2.25.m15.1" class="ltx_Math" alttext="q_{k}^{j}" display="inline"><semantics id="S3.SS4.p2.25.m15.1a"><msubsup id="S3.SS4.p2.25.m15.1.1" xref="S3.SS4.p2.25.m15.1.1.cmml"><mi id="S3.SS4.p2.25.m15.1.1.2.2" xref="S3.SS4.p2.25.m15.1.1.2.2.cmml">q</mi><mi id="S3.SS4.p2.25.m15.1.1.2.3" xref="S3.SS4.p2.25.m15.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p2.25.m15.1.1.3" xref="S3.SS4.p2.25.m15.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.25.m15.1b"><apply id="S3.SS4.p2.25.m15.1.1.cmml" xref="S3.SS4.p2.25.m15.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.25.m15.1.1.1.cmml" xref="S3.SS4.p2.25.m15.1.1">superscript</csymbol><apply id="S3.SS4.p2.25.m15.1.1.2.cmml" xref="S3.SS4.p2.25.m15.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.25.m15.1.1.2.1.cmml" xref="S3.SS4.p2.25.m15.1.1">subscript</csymbol><ci id="S3.SS4.p2.25.m15.1.1.2.2.cmml" xref="S3.SS4.p2.25.m15.1.1.2.2">𝑞</ci><ci id="S3.SS4.p2.25.m15.1.1.2.3.cmml" xref="S3.SS4.p2.25.m15.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p2.25.m15.1.1.3.cmml" xref="S3.SS4.p2.25.m15.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.25.m15.1c">q_{k}^{j}</annotation></semantics></math>, local prototype <math id="S3.SS4.p2.26.m16.1" class="ltx_Math" alttext="p_{k}^{j}" display="inline"><semantics id="S3.SS4.p2.26.m16.1a"><msubsup id="S3.SS4.p2.26.m16.1.1" xref="S3.SS4.p2.26.m16.1.1.cmml"><mi id="S3.SS4.p2.26.m16.1.1.2.2" xref="S3.SS4.p2.26.m16.1.1.2.2.cmml">p</mi><mi id="S3.SS4.p2.26.m16.1.1.2.3" xref="S3.SS4.p2.26.m16.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p2.26.m16.1.1.3" xref="S3.SS4.p2.26.m16.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p2.26.m16.1b"><apply id="S3.SS4.p2.26.m16.1.1.cmml" xref="S3.SS4.p2.26.m16.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.26.m16.1.1.1.cmml" xref="S3.SS4.p2.26.m16.1.1">superscript</csymbol><apply id="S3.SS4.p2.26.m16.1.1.2.cmml" xref="S3.SS4.p2.26.m16.1.1"><csymbol cd="ambiguous" id="S3.SS4.p2.26.m16.1.1.2.1.cmml" xref="S3.SS4.p2.26.m16.1.1">subscript</csymbol><ci id="S3.SS4.p2.26.m16.1.1.2.2.cmml" xref="S3.SS4.p2.26.m16.1.1.2.2">𝑝</ci><ci id="S3.SS4.p2.26.m16.1.1.2.3.cmml" xref="S3.SS4.p2.26.m16.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p2.26.m16.1.1.3.cmml" xref="S3.SS4.p2.26.m16.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p2.26.m16.1c">p_{k}^{j}</annotation></semantics></math> is updated as:</p>
<table id="S3.E5" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E5.m1.1" class="ltx_Math" alttext="p_{k}^{j}=\frac{\rho_{k}^{j}p_{k}^{j}+q_{k}^{j}}{\rho_{k}^{j}+1}" display="block"><semantics id="S3.E5.m1.1a"><mrow id="S3.E5.m1.1.1" xref="S3.E5.m1.1.1.cmml"><msubsup id="S3.E5.m1.1.1.2" xref="S3.E5.m1.1.1.2.cmml"><mi id="S3.E5.m1.1.1.2.2.2" xref="S3.E5.m1.1.1.2.2.2.cmml">p</mi><mi id="S3.E5.m1.1.1.2.2.3" xref="S3.E5.m1.1.1.2.2.3.cmml">k</mi><mi id="S3.E5.m1.1.1.2.3" xref="S3.E5.m1.1.1.2.3.cmml">j</mi></msubsup><mo id="S3.E5.m1.1.1.1" xref="S3.E5.m1.1.1.1.cmml">=</mo><mfrac id="S3.E5.m1.1.1.3" xref="S3.E5.m1.1.1.3.cmml"><mrow id="S3.E5.m1.1.1.3.2" xref="S3.E5.m1.1.1.3.2.cmml"><mrow id="S3.E5.m1.1.1.3.2.2" xref="S3.E5.m1.1.1.3.2.2.cmml"><msubsup id="S3.E5.m1.1.1.3.2.2.2" xref="S3.E5.m1.1.1.3.2.2.2.cmml"><mi id="S3.E5.m1.1.1.3.2.2.2.2.2" xref="S3.E5.m1.1.1.3.2.2.2.2.2.cmml">ρ</mi><mi id="S3.E5.m1.1.1.3.2.2.2.2.3" xref="S3.E5.m1.1.1.3.2.2.2.2.3.cmml">k</mi><mi id="S3.E5.m1.1.1.3.2.2.2.3" xref="S3.E5.m1.1.1.3.2.2.2.3.cmml">j</mi></msubsup><mo lspace="0em" rspace="0em" id="S3.E5.m1.1.1.3.2.2.1" xref="S3.E5.m1.1.1.3.2.2.1.cmml">​</mo><msubsup id="S3.E5.m1.1.1.3.2.2.3" xref="S3.E5.m1.1.1.3.2.2.3.cmml"><mi id="S3.E5.m1.1.1.3.2.2.3.2.2" xref="S3.E5.m1.1.1.3.2.2.3.2.2.cmml">p</mi><mi id="S3.E5.m1.1.1.3.2.2.3.2.3" xref="S3.E5.m1.1.1.3.2.2.3.2.3.cmml">k</mi><mi id="S3.E5.m1.1.1.3.2.2.3.3" xref="S3.E5.m1.1.1.3.2.2.3.3.cmml">j</mi></msubsup></mrow><mo id="S3.E5.m1.1.1.3.2.1" xref="S3.E5.m1.1.1.3.2.1.cmml">+</mo><msubsup id="S3.E5.m1.1.1.3.2.3" xref="S3.E5.m1.1.1.3.2.3.cmml"><mi id="S3.E5.m1.1.1.3.2.3.2.2" xref="S3.E5.m1.1.1.3.2.3.2.2.cmml">q</mi><mi id="S3.E5.m1.1.1.3.2.3.2.3" xref="S3.E5.m1.1.1.3.2.3.2.3.cmml">k</mi><mi id="S3.E5.m1.1.1.3.2.3.3" xref="S3.E5.m1.1.1.3.2.3.3.cmml">j</mi></msubsup></mrow><mrow id="S3.E5.m1.1.1.3.3" xref="S3.E5.m1.1.1.3.3.cmml"><msubsup id="S3.E5.m1.1.1.3.3.2" xref="S3.E5.m1.1.1.3.3.2.cmml"><mi id="S3.E5.m1.1.1.3.3.2.2.2" xref="S3.E5.m1.1.1.3.3.2.2.2.cmml">ρ</mi><mi id="S3.E5.m1.1.1.3.3.2.2.3" xref="S3.E5.m1.1.1.3.3.2.2.3.cmml">k</mi><mi id="S3.E5.m1.1.1.3.3.2.3" xref="S3.E5.m1.1.1.3.3.2.3.cmml">j</mi></msubsup><mo id="S3.E5.m1.1.1.3.3.1" xref="S3.E5.m1.1.1.3.3.1.cmml">+</mo><mn id="S3.E5.m1.1.1.3.3.3" xref="S3.E5.m1.1.1.3.3.3.cmml">1</mn></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S3.E5.m1.1b"><apply id="S3.E5.m1.1.1.cmml" xref="S3.E5.m1.1.1"><eq id="S3.E5.m1.1.1.1.cmml" xref="S3.E5.m1.1.1.1"></eq><apply id="S3.E5.m1.1.1.2.cmml" xref="S3.E5.m1.1.1.2"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.2.1.cmml" xref="S3.E5.m1.1.1.2">superscript</csymbol><apply id="S3.E5.m1.1.1.2.2.cmml" xref="S3.E5.m1.1.1.2"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.2.2.1.cmml" xref="S3.E5.m1.1.1.2">subscript</csymbol><ci id="S3.E5.m1.1.1.2.2.2.cmml" xref="S3.E5.m1.1.1.2.2.2">𝑝</ci><ci id="S3.E5.m1.1.1.2.2.3.cmml" xref="S3.E5.m1.1.1.2.2.3">𝑘</ci></apply><ci id="S3.E5.m1.1.1.2.3.cmml" xref="S3.E5.m1.1.1.2.3">𝑗</ci></apply><apply id="S3.E5.m1.1.1.3.cmml" xref="S3.E5.m1.1.1.3"><divide id="S3.E5.m1.1.1.3.1.cmml" xref="S3.E5.m1.1.1.3"></divide><apply id="S3.E5.m1.1.1.3.2.cmml" xref="S3.E5.m1.1.1.3.2"><plus id="S3.E5.m1.1.1.3.2.1.cmml" xref="S3.E5.m1.1.1.3.2.1"></plus><apply id="S3.E5.m1.1.1.3.2.2.cmml" xref="S3.E5.m1.1.1.3.2.2"><times id="S3.E5.m1.1.1.3.2.2.1.cmml" xref="S3.E5.m1.1.1.3.2.2.1"></times><apply id="S3.E5.m1.1.1.3.2.2.2.cmml" xref="S3.E5.m1.1.1.3.2.2.2"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.3.2.2.2.1.cmml" xref="S3.E5.m1.1.1.3.2.2.2">superscript</csymbol><apply id="S3.E5.m1.1.1.3.2.2.2.2.cmml" xref="S3.E5.m1.1.1.3.2.2.2"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.3.2.2.2.2.1.cmml" xref="S3.E5.m1.1.1.3.2.2.2">subscript</csymbol><ci id="S3.E5.m1.1.1.3.2.2.2.2.2.cmml" xref="S3.E5.m1.1.1.3.2.2.2.2.2">𝜌</ci><ci id="S3.E5.m1.1.1.3.2.2.2.2.3.cmml" xref="S3.E5.m1.1.1.3.2.2.2.2.3">𝑘</ci></apply><ci id="S3.E5.m1.1.1.3.2.2.2.3.cmml" xref="S3.E5.m1.1.1.3.2.2.2.3">𝑗</ci></apply><apply id="S3.E5.m1.1.1.3.2.2.3.cmml" xref="S3.E5.m1.1.1.3.2.2.3"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.3.2.2.3.1.cmml" xref="S3.E5.m1.1.1.3.2.2.3">superscript</csymbol><apply id="S3.E5.m1.1.1.3.2.2.3.2.cmml" xref="S3.E5.m1.1.1.3.2.2.3"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.3.2.2.3.2.1.cmml" xref="S3.E5.m1.1.1.3.2.2.3">subscript</csymbol><ci id="S3.E5.m1.1.1.3.2.2.3.2.2.cmml" xref="S3.E5.m1.1.1.3.2.2.3.2.2">𝑝</ci><ci id="S3.E5.m1.1.1.3.2.2.3.2.3.cmml" xref="S3.E5.m1.1.1.3.2.2.3.2.3">𝑘</ci></apply><ci id="S3.E5.m1.1.1.3.2.2.3.3.cmml" xref="S3.E5.m1.1.1.3.2.2.3.3">𝑗</ci></apply></apply><apply id="S3.E5.m1.1.1.3.2.3.cmml" xref="S3.E5.m1.1.1.3.2.3"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.3.2.3.1.cmml" xref="S3.E5.m1.1.1.3.2.3">superscript</csymbol><apply id="S3.E5.m1.1.1.3.2.3.2.cmml" xref="S3.E5.m1.1.1.3.2.3"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.3.2.3.2.1.cmml" xref="S3.E5.m1.1.1.3.2.3">subscript</csymbol><ci id="S3.E5.m1.1.1.3.2.3.2.2.cmml" xref="S3.E5.m1.1.1.3.2.3.2.2">𝑞</ci><ci id="S3.E5.m1.1.1.3.2.3.2.3.cmml" xref="S3.E5.m1.1.1.3.2.3.2.3">𝑘</ci></apply><ci id="S3.E5.m1.1.1.3.2.3.3.cmml" xref="S3.E5.m1.1.1.3.2.3.3">𝑗</ci></apply></apply><apply id="S3.E5.m1.1.1.3.3.cmml" xref="S3.E5.m1.1.1.3.3"><plus id="S3.E5.m1.1.1.3.3.1.cmml" xref="S3.E5.m1.1.1.3.3.1"></plus><apply id="S3.E5.m1.1.1.3.3.2.cmml" xref="S3.E5.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.3.3.2.1.cmml" xref="S3.E5.m1.1.1.3.3.2">superscript</csymbol><apply id="S3.E5.m1.1.1.3.3.2.2.cmml" xref="S3.E5.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.E5.m1.1.1.3.3.2.2.1.cmml" xref="S3.E5.m1.1.1.3.3.2">subscript</csymbol><ci id="S3.E5.m1.1.1.3.3.2.2.2.cmml" xref="S3.E5.m1.1.1.3.3.2.2.2">𝜌</ci><ci id="S3.E5.m1.1.1.3.3.2.2.3.cmml" xref="S3.E5.m1.1.1.3.3.2.2.3">𝑘</ci></apply><ci id="S3.E5.m1.1.1.3.3.2.3.cmml" xref="S3.E5.m1.1.1.3.3.2.3">𝑗</ci></apply><cn type="integer" id="S3.E5.m1.1.1.3.3.3.cmml" xref="S3.E5.m1.1.1.3.3.3">1</cn></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E5.m1.1c">p_{k}^{j}=\frac{\rho_{k}^{j}p_{k}^{j}+q_{k}^{j}}{\rho_{k}^{j}+1}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(5)</span></td>
</tr></tbody>
</table>
</div>
<div id="S3.SS4.p3" class="ltx_para">
<p id="S3.SS4.p3.4" class="ltx_p">The count of updates <math id="S3.SS4.p3.1.m1.1" class="ltx_Math" alttext="\rho_{k}^{j}" display="inline"><semantics id="S3.SS4.p3.1.m1.1a"><msubsup id="S3.SS4.p3.1.m1.1.1" xref="S3.SS4.p3.1.m1.1.1.cmml"><mi id="S3.SS4.p3.1.m1.1.1.2.2" xref="S3.SS4.p3.1.m1.1.1.2.2.cmml">ρ</mi><mi id="S3.SS4.p3.1.m1.1.1.2.3" xref="S3.SS4.p3.1.m1.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p3.1.m1.1.1.3" xref="S3.SS4.p3.1.m1.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.1.m1.1b"><apply id="S3.SS4.p3.1.m1.1.1.cmml" xref="S3.SS4.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.1.m1.1.1.1.cmml" xref="S3.SS4.p3.1.m1.1.1">superscript</csymbol><apply id="S3.SS4.p3.1.m1.1.1.2.cmml" xref="S3.SS4.p3.1.m1.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.1.m1.1.1.2.1.cmml" xref="S3.SS4.p3.1.m1.1.1">subscript</csymbol><ci id="S3.SS4.p3.1.m1.1.1.2.2.cmml" xref="S3.SS4.p3.1.m1.1.1.2.2">𝜌</ci><ci id="S3.SS4.p3.1.m1.1.1.2.3.cmml" xref="S3.SS4.p3.1.m1.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p3.1.m1.1.1.3.cmml" xref="S3.SS4.p3.1.m1.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.1.m1.1c">\rho_{k}^{j}</annotation></semantics></math> is incremented after this operation.
After updating the prototype vectors, the contrastive loss is computed in two parts. The first part aligns the prototypes of the same class from different domains by maximizing their similarity. The second part pushes apart the prototypes of different classes to reduce class confusion. To align the prototypes of the same class from different domains, we need to consider pairwise combinations of the domains: <math id="S3.SS4.p3.2.m2.2" class="ltx_Math" alttext="C=Comb(N+1,2)" display="inline"><semantics id="S3.SS4.p3.2.m2.2a"><mrow id="S3.SS4.p3.2.m2.2.2" xref="S3.SS4.p3.2.m2.2.2.cmml"><mi id="S3.SS4.p3.2.m2.2.2.3" xref="S3.SS4.p3.2.m2.2.2.3.cmml">C</mi><mo id="S3.SS4.p3.2.m2.2.2.2" xref="S3.SS4.p3.2.m2.2.2.2.cmml">=</mo><mrow id="S3.SS4.p3.2.m2.2.2.1" xref="S3.SS4.p3.2.m2.2.2.1.cmml"><mi id="S3.SS4.p3.2.m2.2.2.1.3" xref="S3.SS4.p3.2.m2.2.2.1.3.cmml">C</mi><mo lspace="0em" rspace="0em" id="S3.SS4.p3.2.m2.2.2.1.2" xref="S3.SS4.p3.2.m2.2.2.1.2.cmml">​</mo><mi id="S3.SS4.p3.2.m2.2.2.1.4" xref="S3.SS4.p3.2.m2.2.2.1.4.cmml">o</mi><mo lspace="0em" rspace="0em" id="S3.SS4.p3.2.m2.2.2.1.2a" xref="S3.SS4.p3.2.m2.2.2.1.2.cmml">​</mo><mi id="S3.SS4.p3.2.m2.2.2.1.5" xref="S3.SS4.p3.2.m2.2.2.1.5.cmml">m</mi><mo lspace="0em" rspace="0em" id="S3.SS4.p3.2.m2.2.2.1.2b" xref="S3.SS4.p3.2.m2.2.2.1.2.cmml">​</mo><mi id="S3.SS4.p3.2.m2.2.2.1.6" xref="S3.SS4.p3.2.m2.2.2.1.6.cmml">b</mi><mo lspace="0em" rspace="0em" id="S3.SS4.p3.2.m2.2.2.1.2c" xref="S3.SS4.p3.2.m2.2.2.1.2.cmml">​</mo><mrow id="S3.SS4.p3.2.m2.2.2.1.1.1" xref="S3.SS4.p3.2.m2.2.2.1.1.2.cmml"><mo stretchy="false" id="S3.SS4.p3.2.m2.2.2.1.1.1.2" xref="S3.SS4.p3.2.m2.2.2.1.1.2.cmml">(</mo><mrow id="S3.SS4.p3.2.m2.2.2.1.1.1.1" xref="S3.SS4.p3.2.m2.2.2.1.1.1.1.cmml"><mi id="S3.SS4.p3.2.m2.2.2.1.1.1.1.2" xref="S3.SS4.p3.2.m2.2.2.1.1.1.1.2.cmml">N</mi><mo id="S3.SS4.p3.2.m2.2.2.1.1.1.1.1" xref="S3.SS4.p3.2.m2.2.2.1.1.1.1.1.cmml">+</mo><mn id="S3.SS4.p3.2.m2.2.2.1.1.1.1.3" xref="S3.SS4.p3.2.m2.2.2.1.1.1.1.3.cmml">1</mn></mrow><mo id="S3.SS4.p3.2.m2.2.2.1.1.1.3" xref="S3.SS4.p3.2.m2.2.2.1.1.2.cmml">,</mo><mn id="S3.SS4.p3.2.m2.1.1" xref="S3.SS4.p3.2.m2.1.1.cmml">2</mn><mo stretchy="false" id="S3.SS4.p3.2.m2.2.2.1.1.1.4" xref="S3.SS4.p3.2.m2.2.2.1.1.2.cmml">)</mo></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.2.m2.2b"><apply id="S3.SS4.p3.2.m2.2.2.cmml" xref="S3.SS4.p3.2.m2.2.2"><eq id="S3.SS4.p3.2.m2.2.2.2.cmml" xref="S3.SS4.p3.2.m2.2.2.2"></eq><ci id="S3.SS4.p3.2.m2.2.2.3.cmml" xref="S3.SS4.p3.2.m2.2.2.3">𝐶</ci><apply id="S3.SS4.p3.2.m2.2.2.1.cmml" xref="S3.SS4.p3.2.m2.2.2.1"><times id="S3.SS4.p3.2.m2.2.2.1.2.cmml" xref="S3.SS4.p3.2.m2.2.2.1.2"></times><ci id="S3.SS4.p3.2.m2.2.2.1.3.cmml" xref="S3.SS4.p3.2.m2.2.2.1.3">𝐶</ci><ci id="S3.SS4.p3.2.m2.2.2.1.4.cmml" xref="S3.SS4.p3.2.m2.2.2.1.4">𝑜</ci><ci id="S3.SS4.p3.2.m2.2.2.1.5.cmml" xref="S3.SS4.p3.2.m2.2.2.1.5">𝑚</ci><ci id="S3.SS4.p3.2.m2.2.2.1.6.cmml" xref="S3.SS4.p3.2.m2.2.2.1.6">𝑏</ci><interval closure="open" id="S3.SS4.p3.2.m2.2.2.1.1.2.cmml" xref="S3.SS4.p3.2.m2.2.2.1.1.1"><apply id="S3.SS4.p3.2.m2.2.2.1.1.1.1.cmml" xref="S3.SS4.p3.2.m2.2.2.1.1.1.1"><plus id="S3.SS4.p3.2.m2.2.2.1.1.1.1.1.cmml" xref="S3.SS4.p3.2.m2.2.2.1.1.1.1.1"></plus><ci id="S3.SS4.p3.2.m2.2.2.1.1.1.1.2.cmml" xref="S3.SS4.p3.2.m2.2.2.1.1.1.1.2">𝑁</ci><cn type="integer" id="S3.SS4.p3.2.m2.2.2.1.1.1.1.3.cmml" xref="S3.SS4.p3.2.m2.2.2.1.1.1.1.3">1</cn></apply><cn type="integer" id="S3.SS4.p3.2.m2.1.1.cmml" xref="S3.SS4.p3.2.m2.1.1">2</cn></interval></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.2.m2.2c">C=Comb(N+1,2)</annotation></semantics></math> (including source and target domains). Let <math id="S3.SS4.p3.3.m3.1" class="ltx_Math" alttext="\mathcal{C}" display="inline"><semantics id="S3.SS4.p3.3.m3.1a"><mi class="ltx_font_mathcaligraphic" id="S3.SS4.p3.3.m3.1.1" xref="S3.SS4.p3.3.m3.1.1.cmml">𝒞</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.3.m3.1b"><ci id="S3.SS4.p3.3.m3.1.1.cmml" xref="S3.SS4.p3.3.m3.1.1">𝒞</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.3.m3.1c">\mathcal{C}</annotation></semantics></math> be the cosine similarity between two vectors. The alignment of category <math id="S3.SS4.p3.4.m4.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.p3.4.m4.1a"><mi id="S3.SS4.p3.4.m4.1.1" xref="S3.SS4.p3.4.m4.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.4.m4.1b"><ci id="S3.SS4.p3.4.m4.1.1.cmml" xref="S3.SS4.p3.4.m4.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.4.m4.1c">k</annotation></semantics></math> across different domains is achieved by maximizing the following similarity:</p>
<table id="S3.E6" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E6.m1.2" class="ltx_Math" alttext="\frac{1}{CK}\sum_{k=1}^{K}\sum_{j=1}^{N+1}\sum_{l\neq j}^{N+1}\mathcal{C}(p_{k}^{j},p_{k}^{l})" display="block"><semantics id="S3.E6.m1.2a"><mrow id="S3.E6.m1.2.2" xref="S3.E6.m1.2.2.cmml"><mfrac id="S3.E6.m1.2.2.4" xref="S3.E6.m1.2.2.4.cmml"><mn id="S3.E6.m1.2.2.4.2" xref="S3.E6.m1.2.2.4.2.cmml">1</mn><mrow id="S3.E6.m1.2.2.4.3" xref="S3.E6.m1.2.2.4.3.cmml"><mi id="S3.E6.m1.2.2.4.3.2" xref="S3.E6.m1.2.2.4.3.2.cmml">C</mi><mo lspace="0em" rspace="0em" id="S3.E6.m1.2.2.4.3.1" xref="S3.E6.m1.2.2.4.3.1.cmml">​</mo><mi id="S3.E6.m1.2.2.4.3.3" xref="S3.E6.m1.2.2.4.3.3.cmml">K</mi></mrow></mfrac><mo lspace="0em" rspace="0em" id="S3.E6.m1.2.2.3" xref="S3.E6.m1.2.2.3.cmml">​</mo><mrow id="S3.E6.m1.2.2.2" xref="S3.E6.m1.2.2.2.cmml"><munderover id="S3.E6.m1.2.2.2.3" xref="S3.E6.m1.2.2.2.3.cmml"><mo movablelimits="false" rspace="0em" id="S3.E6.m1.2.2.2.3.2.2" xref="S3.E6.m1.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E6.m1.2.2.2.3.2.3" xref="S3.E6.m1.2.2.2.3.2.3.cmml"><mi id="S3.E6.m1.2.2.2.3.2.3.2" xref="S3.E6.m1.2.2.2.3.2.3.2.cmml">k</mi><mo id="S3.E6.m1.2.2.2.3.2.3.1" xref="S3.E6.m1.2.2.2.3.2.3.1.cmml">=</mo><mn id="S3.E6.m1.2.2.2.3.2.3.3" xref="S3.E6.m1.2.2.2.3.2.3.3.cmml">1</mn></mrow><mi id="S3.E6.m1.2.2.2.3.3" xref="S3.E6.m1.2.2.2.3.3.cmml">K</mi></munderover><mrow id="S3.E6.m1.2.2.2.2" xref="S3.E6.m1.2.2.2.2.cmml"><munderover id="S3.E6.m1.2.2.2.2.3" xref="S3.E6.m1.2.2.2.2.3.cmml"><mo movablelimits="false" rspace="0em" id="S3.E6.m1.2.2.2.2.3.2.2" xref="S3.E6.m1.2.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E6.m1.2.2.2.2.3.2.3" xref="S3.E6.m1.2.2.2.2.3.2.3.cmml"><mi id="S3.E6.m1.2.2.2.2.3.2.3.2" xref="S3.E6.m1.2.2.2.2.3.2.3.2.cmml">j</mi><mo id="S3.E6.m1.2.2.2.2.3.2.3.1" xref="S3.E6.m1.2.2.2.2.3.2.3.1.cmml">=</mo><mn id="S3.E6.m1.2.2.2.2.3.2.3.3" xref="S3.E6.m1.2.2.2.2.3.2.3.3.cmml">1</mn></mrow><mrow id="S3.E6.m1.2.2.2.2.3.3" xref="S3.E6.m1.2.2.2.2.3.3.cmml"><mi id="S3.E6.m1.2.2.2.2.3.3.2" xref="S3.E6.m1.2.2.2.2.3.3.2.cmml">N</mi><mo id="S3.E6.m1.2.2.2.2.3.3.1" xref="S3.E6.m1.2.2.2.2.3.3.1.cmml">+</mo><mn id="S3.E6.m1.2.2.2.2.3.3.3" xref="S3.E6.m1.2.2.2.2.3.3.3.cmml">1</mn></mrow></munderover><mrow id="S3.E6.m1.2.2.2.2.2" xref="S3.E6.m1.2.2.2.2.2.cmml"><munderover id="S3.E6.m1.2.2.2.2.2.3" xref="S3.E6.m1.2.2.2.2.2.3.cmml"><mo movablelimits="false" id="S3.E6.m1.2.2.2.2.2.3.2.2" xref="S3.E6.m1.2.2.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E6.m1.2.2.2.2.2.3.2.3" xref="S3.E6.m1.2.2.2.2.2.3.2.3.cmml"><mi id="S3.E6.m1.2.2.2.2.2.3.2.3.2" xref="S3.E6.m1.2.2.2.2.2.3.2.3.2.cmml">l</mi><mo id="S3.E6.m1.2.2.2.2.2.3.2.3.1" xref="S3.E6.m1.2.2.2.2.2.3.2.3.1.cmml">≠</mo><mi id="S3.E6.m1.2.2.2.2.2.3.2.3.3" xref="S3.E6.m1.2.2.2.2.2.3.2.3.3.cmml">j</mi></mrow><mrow id="S3.E6.m1.2.2.2.2.2.3.3" xref="S3.E6.m1.2.2.2.2.2.3.3.cmml"><mi id="S3.E6.m1.2.2.2.2.2.3.3.2" xref="S3.E6.m1.2.2.2.2.2.3.3.2.cmml">N</mi><mo id="S3.E6.m1.2.2.2.2.2.3.3.1" xref="S3.E6.m1.2.2.2.2.2.3.3.1.cmml">+</mo><mn id="S3.E6.m1.2.2.2.2.2.3.3.3" xref="S3.E6.m1.2.2.2.2.2.3.3.3.cmml">1</mn></mrow></munderover><mrow id="S3.E6.m1.2.2.2.2.2.2" xref="S3.E6.m1.2.2.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E6.m1.2.2.2.2.2.2.4" xref="S3.E6.m1.2.2.2.2.2.2.4.cmml">𝒞</mi><mo lspace="0em" rspace="0em" id="S3.E6.m1.2.2.2.2.2.2.3" xref="S3.E6.m1.2.2.2.2.2.2.3.cmml">​</mo><mrow id="S3.E6.m1.2.2.2.2.2.2.2.2" xref="S3.E6.m1.2.2.2.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E6.m1.2.2.2.2.2.2.2.2.3" xref="S3.E6.m1.2.2.2.2.2.2.2.3.cmml">(</mo><msubsup id="S3.E6.m1.1.1.1.1.1.1.1.1.1" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.2" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.2.cmml">p</mi><mi id="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.3" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.3.cmml">k</mi><mi id="S3.E6.m1.1.1.1.1.1.1.1.1.1.3" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo id="S3.E6.m1.2.2.2.2.2.2.2.2.4" xref="S3.E6.m1.2.2.2.2.2.2.2.3.cmml">,</mo><msubsup id="S3.E6.m1.2.2.2.2.2.2.2.2.2" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2.cmml"><mi id="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.2" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.2.cmml">p</mi><mi id="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.3" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.3.cmml">k</mi><mi id="S3.E6.m1.2.2.2.2.2.2.2.2.2.3" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2.3.cmml">l</mi></msubsup><mo stretchy="false" id="S3.E6.m1.2.2.2.2.2.2.2.2.5" xref="S3.E6.m1.2.2.2.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E6.m1.2b"><apply id="S3.E6.m1.2.2.cmml" xref="S3.E6.m1.2.2"><times id="S3.E6.m1.2.2.3.cmml" xref="S3.E6.m1.2.2.3"></times><apply id="S3.E6.m1.2.2.4.cmml" xref="S3.E6.m1.2.2.4"><divide id="S3.E6.m1.2.2.4.1.cmml" xref="S3.E6.m1.2.2.4"></divide><cn type="integer" id="S3.E6.m1.2.2.4.2.cmml" xref="S3.E6.m1.2.2.4.2">1</cn><apply id="S3.E6.m1.2.2.4.3.cmml" xref="S3.E6.m1.2.2.4.3"><times id="S3.E6.m1.2.2.4.3.1.cmml" xref="S3.E6.m1.2.2.4.3.1"></times><ci id="S3.E6.m1.2.2.4.3.2.cmml" xref="S3.E6.m1.2.2.4.3.2">𝐶</ci><ci id="S3.E6.m1.2.2.4.3.3.cmml" xref="S3.E6.m1.2.2.4.3.3">𝐾</ci></apply></apply><apply id="S3.E6.m1.2.2.2.cmml" xref="S3.E6.m1.2.2.2"><apply id="S3.E6.m1.2.2.2.3.cmml" xref="S3.E6.m1.2.2.2.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.3.1.cmml" xref="S3.E6.m1.2.2.2.3">superscript</csymbol><apply id="S3.E6.m1.2.2.2.3.2.cmml" xref="S3.E6.m1.2.2.2.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.3.2.1.cmml" xref="S3.E6.m1.2.2.2.3">subscript</csymbol><sum id="S3.E6.m1.2.2.2.3.2.2.cmml" xref="S3.E6.m1.2.2.2.3.2.2"></sum><apply id="S3.E6.m1.2.2.2.3.2.3.cmml" xref="S3.E6.m1.2.2.2.3.2.3"><eq id="S3.E6.m1.2.2.2.3.2.3.1.cmml" xref="S3.E6.m1.2.2.2.3.2.3.1"></eq><ci id="S3.E6.m1.2.2.2.3.2.3.2.cmml" xref="S3.E6.m1.2.2.2.3.2.3.2">𝑘</ci><cn type="integer" id="S3.E6.m1.2.2.2.3.2.3.3.cmml" xref="S3.E6.m1.2.2.2.3.2.3.3">1</cn></apply></apply><ci id="S3.E6.m1.2.2.2.3.3.cmml" xref="S3.E6.m1.2.2.2.3.3">𝐾</ci></apply><apply id="S3.E6.m1.2.2.2.2.cmml" xref="S3.E6.m1.2.2.2.2"><apply id="S3.E6.m1.2.2.2.2.3.cmml" xref="S3.E6.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.3.1.cmml" xref="S3.E6.m1.2.2.2.2.3">superscript</csymbol><apply id="S3.E6.m1.2.2.2.2.3.2.cmml" xref="S3.E6.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.3.2.1.cmml" xref="S3.E6.m1.2.2.2.2.3">subscript</csymbol><sum id="S3.E6.m1.2.2.2.2.3.2.2.cmml" xref="S3.E6.m1.2.2.2.2.3.2.2"></sum><apply id="S3.E6.m1.2.2.2.2.3.2.3.cmml" xref="S3.E6.m1.2.2.2.2.3.2.3"><eq id="S3.E6.m1.2.2.2.2.3.2.3.1.cmml" xref="S3.E6.m1.2.2.2.2.3.2.3.1"></eq><ci id="S3.E6.m1.2.2.2.2.3.2.3.2.cmml" xref="S3.E6.m1.2.2.2.2.3.2.3.2">𝑗</ci><cn type="integer" id="S3.E6.m1.2.2.2.2.3.2.3.3.cmml" xref="S3.E6.m1.2.2.2.2.3.2.3.3">1</cn></apply></apply><apply id="S3.E6.m1.2.2.2.2.3.3.cmml" xref="S3.E6.m1.2.2.2.2.3.3"><plus id="S3.E6.m1.2.2.2.2.3.3.1.cmml" xref="S3.E6.m1.2.2.2.2.3.3.1"></plus><ci id="S3.E6.m1.2.2.2.2.3.3.2.cmml" xref="S3.E6.m1.2.2.2.2.3.3.2">𝑁</ci><cn type="integer" id="S3.E6.m1.2.2.2.2.3.3.3.cmml" xref="S3.E6.m1.2.2.2.2.3.3.3">1</cn></apply></apply><apply id="S3.E6.m1.2.2.2.2.2.cmml" xref="S3.E6.m1.2.2.2.2.2"><apply id="S3.E6.m1.2.2.2.2.2.3.cmml" xref="S3.E6.m1.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.2.3.1.cmml" xref="S3.E6.m1.2.2.2.2.2.3">superscript</csymbol><apply id="S3.E6.m1.2.2.2.2.2.3.2.cmml" xref="S3.E6.m1.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.2.3.2.1.cmml" xref="S3.E6.m1.2.2.2.2.2.3">subscript</csymbol><sum id="S3.E6.m1.2.2.2.2.2.3.2.2.cmml" xref="S3.E6.m1.2.2.2.2.2.3.2.2"></sum><apply id="S3.E6.m1.2.2.2.2.2.3.2.3.cmml" xref="S3.E6.m1.2.2.2.2.2.3.2.3"><neq id="S3.E6.m1.2.2.2.2.2.3.2.3.1.cmml" xref="S3.E6.m1.2.2.2.2.2.3.2.3.1"></neq><ci id="S3.E6.m1.2.2.2.2.2.3.2.3.2.cmml" xref="S3.E6.m1.2.2.2.2.2.3.2.3.2">𝑙</ci><ci id="S3.E6.m1.2.2.2.2.2.3.2.3.3.cmml" xref="S3.E6.m1.2.2.2.2.2.3.2.3.3">𝑗</ci></apply></apply><apply id="S3.E6.m1.2.2.2.2.2.3.3.cmml" xref="S3.E6.m1.2.2.2.2.2.3.3"><plus id="S3.E6.m1.2.2.2.2.2.3.3.1.cmml" xref="S3.E6.m1.2.2.2.2.2.3.3.1"></plus><ci id="S3.E6.m1.2.2.2.2.2.3.3.2.cmml" xref="S3.E6.m1.2.2.2.2.2.3.3.2">𝑁</ci><cn type="integer" id="S3.E6.m1.2.2.2.2.2.3.3.3.cmml" xref="S3.E6.m1.2.2.2.2.2.3.3.3">1</cn></apply></apply><apply id="S3.E6.m1.2.2.2.2.2.2.cmml" xref="S3.E6.m1.2.2.2.2.2.2"><times id="S3.E6.m1.2.2.2.2.2.2.3.cmml" xref="S3.E6.m1.2.2.2.2.2.2.3"></times><ci id="S3.E6.m1.2.2.2.2.2.2.4.cmml" xref="S3.E6.m1.2.2.2.2.2.2.4">𝒞</ci><interval closure="open" id="S3.E6.m1.2.2.2.2.2.2.2.3.cmml" xref="S3.E6.m1.2.2.2.2.2.2.2.2"><apply id="S3.E6.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.2">𝑝</ci><ci id="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.E6.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E6.m1.1.1.1.1.1.1.1.1.1.3">𝑗</ci></apply><apply id="S3.E6.m1.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2">superscript</csymbol><apply id="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.2">𝑝</ci><ci id="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.3.cmml" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2.2.3">𝑘</ci></apply><ci id="S3.E6.m1.2.2.2.2.2.2.2.2.2.3.cmml" xref="S3.E6.m1.2.2.2.2.2.2.2.2.2.3">𝑙</ci></apply></interval></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E6.m1.2c">\frac{1}{CK}\sum_{k=1}^{K}\sum_{j=1}^{N+1}\sum_{l\neq j}^{N+1}\mathcal{C}(p_{k}^{j},p_{k}^{l})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(6)</span></td>
</tr></tbody>
</table>
<p id="S3.SS4.p3.5" class="ltx_p">normalized by the total number of pairwise similarities <math id="S3.SS4.p3.5.m1.1" class="ltx_Math" alttext="CK" display="inline"><semantics id="S3.SS4.p3.5.m1.1a"><mrow id="S3.SS4.p3.5.m1.1.1" xref="S3.SS4.p3.5.m1.1.1.cmml"><mi id="S3.SS4.p3.5.m1.1.1.2" xref="S3.SS4.p3.5.m1.1.1.2.cmml">C</mi><mo lspace="0em" rspace="0em" id="S3.SS4.p3.5.m1.1.1.1" xref="S3.SS4.p3.5.m1.1.1.1.cmml">​</mo><mi id="S3.SS4.p3.5.m1.1.1.3" xref="S3.SS4.p3.5.m1.1.1.3.cmml">K</mi></mrow><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.5.m1.1b"><apply id="S3.SS4.p3.5.m1.1.1.cmml" xref="S3.SS4.p3.5.m1.1.1"><times id="S3.SS4.p3.5.m1.1.1.1.cmml" xref="S3.SS4.p3.5.m1.1.1.1"></times><ci id="S3.SS4.p3.5.m1.1.1.2.cmml" xref="S3.SS4.p3.5.m1.1.1.2">𝐶</ci><ci id="S3.SS4.p3.5.m1.1.1.3.cmml" xref="S3.SS4.p3.5.m1.1.1.3">𝐾</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.5.m1.1c">CK</annotation></semantics></math>. To push the prototypes of the different classes apart, we minimize their cosine similarity. For this, we first compute the global prototypes from local prototypes of each domain as their weighted mean:</p>
<table id="S3.E7" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E7.m1.1" class="ltx_Math" alttext="P_{k}=\frac{\sum_{j=1}^{N}\rho_{k}^{j}p_{k}^{j}}{\sum_{j=1}^{N}\rho_{k}^{j}}" display="block"><semantics id="S3.E7.m1.1a"><mrow id="S3.E7.m1.1.1" xref="S3.E7.m1.1.1.cmml"><msub id="S3.E7.m1.1.1.2" xref="S3.E7.m1.1.1.2.cmml"><mi id="S3.E7.m1.1.1.2.2" xref="S3.E7.m1.1.1.2.2.cmml">P</mi><mi id="S3.E7.m1.1.1.2.3" xref="S3.E7.m1.1.1.2.3.cmml">k</mi></msub><mo id="S3.E7.m1.1.1.1" xref="S3.E7.m1.1.1.1.cmml">=</mo><mfrac id="S3.E7.m1.1.1.3" xref="S3.E7.m1.1.1.3.cmml"><mrow id="S3.E7.m1.1.1.3.2" xref="S3.E7.m1.1.1.3.2.cmml"><msubsup id="S3.E7.m1.1.1.3.2.1" xref="S3.E7.m1.1.1.3.2.1.cmml"><mo id="S3.E7.m1.1.1.3.2.1.2.2" xref="S3.E7.m1.1.1.3.2.1.2.2.cmml">∑</mo><mrow id="S3.E7.m1.1.1.3.2.1.2.3" xref="S3.E7.m1.1.1.3.2.1.2.3.cmml"><mi id="S3.E7.m1.1.1.3.2.1.2.3.2" xref="S3.E7.m1.1.1.3.2.1.2.3.2.cmml">j</mi><mo id="S3.E7.m1.1.1.3.2.1.2.3.1" xref="S3.E7.m1.1.1.3.2.1.2.3.1.cmml">=</mo><mn id="S3.E7.m1.1.1.3.2.1.2.3.3" xref="S3.E7.m1.1.1.3.2.1.2.3.3.cmml">1</mn></mrow><mi id="S3.E7.m1.1.1.3.2.1.3" xref="S3.E7.m1.1.1.3.2.1.3.cmml">N</mi></msubsup><mrow id="S3.E7.m1.1.1.3.2.2" xref="S3.E7.m1.1.1.3.2.2.cmml"><msubsup id="S3.E7.m1.1.1.3.2.2.2" xref="S3.E7.m1.1.1.3.2.2.2.cmml"><mi id="S3.E7.m1.1.1.3.2.2.2.2.2" xref="S3.E7.m1.1.1.3.2.2.2.2.2.cmml">ρ</mi><mi id="S3.E7.m1.1.1.3.2.2.2.2.3" xref="S3.E7.m1.1.1.3.2.2.2.2.3.cmml">k</mi><mi id="S3.E7.m1.1.1.3.2.2.2.3" xref="S3.E7.m1.1.1.3.2.2.2.3.cmml">j</mi></msubsup><mo lspace="0em" rspace="0em" id="S3.E7.m1.1.1.3.2.2.1" xref="S3.E7.m1.1.1.3.2.2.1.cmml">​</mo><msubsup id="S3.E7.m1.1.1.3.2.2.3" xref="S3.E7.m1.1.1.3.2.2.3.cmml"><mi id="S3.E7.m1.1.1.3.2.2.3.2.2" xref="S3.E7.m1.1.1.3.2.2.3.2.2.cmml">p</mi><mi id="S3.E7.m1.1.1.3.2.2.3.2.3" xref="S3.E7.m1.1.1.3.2.2.3.2.3.cmml">k</mi><mi id="S3.E7.m1.1.1.3.2.2.3.3" xref="S3.E7.m1.1.1.3.2.2.3.3.cmml">j</mi></msubsup></mrow></mrow><mrow id="S3.E7.m1.1.1.3.3" xref="S3.E7.m1.1.1.3.3.cmml"><msubsup id="S3.E7.m1.1.1.3.3.1" xref="S3.E7.m1.1.1.3.3.1.cmml"><mo id="S3.E7.m1.1.1.3.3.1.2.2" xref="S3.E7.m1.1.1.3.3.1.2.2.cmml">∑</mo><mrow id="S3.E7.m1.1.1.3.3.1.2.3" xref="S3.E7.m1.1.1.3.3.1.2.3.cmml"><mi id="S3.E7.m1.1.1.3.3.1.2.3.2" xref="S3.E7.m1.1.1.3.3.1.2.3.2.cmml">j</mi><mo id="S3.E7.m1.1.1.3.3.1.2.3.1" xref="S3.E7.m1.1.1.3.3.1.2.3.1.cmml">=</mo><mn id="S3.E7.m1.1.1.3.3.1.2.3.3" xref="S3.E7.m1.1.1.3.3.1.2.3.3.cmml">1</mn></mrow><mi id="S3.E7.m1.1.1.3.3.1.3" xref="S3.E7.m1.1.1.3.3.1.3.cmml">N</mi></msubsup><msubsup id="S3.E7.m1.1.1.3.3.2" xref="S3.E7.m1.1.1.3.3.2.cmml"><mi id="S3.E7.m1.1.1.3.3.2.2.2" xref="S3.E7.m1.1.1.3.3.2.2.2.cmml">ρ</mi><mi id="S3.E7.m1.1.1.3.3.2.2.3" xref="S3.E7.m1.1.1.3.3.2.2.3.cmml">k</mi><mi id="S3.E7.m1.1.1.3.3.2.3" xref="S3.E7.m1.1.1.3.3.2.3.cmml">j</mi></msubsup></mrow></mfrac></mrow><annotation-xml encoding="MathML-Content" id="S3.E7.m1.1b"><apply id="S3.E7.m1.1.1.cmml" xref="S3.E7.m1.1.1"><eq id="S3.E7.m1.1.1.1.cmml" xref="S3.E7.m1.1.1.1"></eq><apply id="S3.E7.m1.1.1.2.cmml" xref="S3.E7.m1.1.1.2"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.2.1.cmml" xref="S3.E7.m1.1.1.2">subscript</csymbol><ci id="S3.E7.m1.1.1.2.2.cmml" xref="S3.E7.m1.1.1.2.2">𝑃</ci><ci id="S3.E7.m1.1.1.2.3.cmml" xref="S3.E7.m1.1.1.2.3">𝑘</ci></apply><apply id="S3.E7.m1.1.1.3.cmml" xref="S3.E7.m1.1.1.3"><divide id="S3.E7.m1.1.1.3.1.cmml" xref="S3.E7.m1.1.1.3"></divide><apply id="S3.E7.m1.1.1.3.2.cmml" xref="S3.E7.m1.1.1.3.2"><apply id="S3.E7.m1.1.1.3.2.1.cmml" xref="S3.E7.m1.1.1.3.2.1"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.2.1.1.cmml" xref="S3.E7.m1.1.1.3.2.1">superscript</csymbol><apply id="S3.E7.m1.1.1.3.2.1.2.cmml" xref="S3.E7.m1.1.1.3.2.1"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.2.1.2.1.cmml" xref="S3.E7.m1.1.1.3.2.1">subscript</csymbol><sum id="S3.E7.m1.1.1.3.2.1.2.2.cmml" xref="S3.E7.m1.1.1.3.2.1.2.2"></sum><apply id="S3.E7.m1.1.1.3.2.1.2.3.cmml" xref="S3.E7.m1.1.1.3.2.1.2.3"><eq id="S3.E7.m1.1.1.3.2.1.2.3.1.cmml" xref="S3.E7.m1.1.1.3.2.1.2.3.1"></eq><ci id="S3.E7.m1.1.1.3.2.1.2.3.2.cmml" xref="S3.E7.m1.1.1.3.2.1.2.3.2">𝑗</ci><cn type="integer" id="S3.E7.m1.1.1.3.2.1.2.3.3.cmml" xref="S3.E7.m1.1.1.3.2.1.2.3.3">1</cn></apply></apply><ci id="S3.E7.m1.1.1.3.2.1.3.cmml" xref="S3.E7.m1.1.1.3.2.1.3">𝑁</ci></apply><apply id="S3.E7.m1.1.1.3.2.2.cmml" xref="S3.E7.m1.1.1.3.2.2"><times id="S3.E7.m1.1.1.3.2.2.1.cmml" xref="S3.E7.m1.1.1.3.2.2.1"></times><apply id="S3.E7.m1.1.1.3.2.2.2.cmml" xref="S3.E7.m1.1.1.3.2.2.2"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.2.2.2.1.cmml" xref="S3.E7.m1.1.1.3.2.2.2">superscript</csymbol><apply id="S3.E7.m1.1.1.3.2.2.2.2.cmml" xref="S3.E7.m1.1.1.3.2.2.2"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.2.2.2.2.1.cmml" xref="S3.E7.m1.1.1.3.2.2.2">subscript</csymbol><ci id="S3.E7.m1.1.1.3.2.2.2.2.2.cmml" xref="S3.E7.m1.1.1.3.2.2.2.2.2">𝜌</ci><ci id="S3.E7.m1.1.1.3.2.2.2.2.3.cmml" xref="S3.E7.m1.1.1.3.2.2.2.2.3">𝑘</ci></apply><ci id="S3.E7.m1.1.1.3.2.2.2.3.cmml" xref="S3.E7.m1.1.1.3.2.2.2.3">𝑗</ci></apply><apply id="S3.E7.m1.1.1.3.2.2.3.cmml" xref="S3.E7.m1.1.1.3.2.2.3"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.2.2.3.1.cmml" xref="S3.E7.m1.1.1.3.2.2.3">superscript</csymbol><apply id="S3.E7.m1.1.1.3.2.2.3.2.cmml" xref="S3.E7.m1.1.1.3.2.2.3"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.2.2.3.2.1.cmml" xref="S3.E7.m1.1.1.3.2.2.3">subscript</csymbol><ci id="S3.E7.m1.1.1.3.2.2.3.2.2.cmml" xref="S3.E7.m1.1.1.3.2.2.3.2.2">𝑝</ci><ci id="S3.E7.m1.1.1.3.2.2.3.2.3.cmml" xref="S3.E7.m1.1.1.3.2.2.3.2.3">𝑘</ci></apply><ci id="S3.E7.m1.1.1.3.2.2.3.3.cmml" xref="S3.E7.m1.1.1.3.2.2.3.3">𝑗</ci></apply></apply></apply><apply id="S3.E7.m1.1.1.3.3.cmml" xref="S3.E7.m1.1.1.3.3"><apply id="S3.E7.m1.1.1.3.3.1.cmml" xref="S3.E7.m1.1.1.3.3.1"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.3.1.1.cmml" xref="S3.E7.m1.1.1.3.3.1">superscript</csymbol><apply id="S3.E7.m1.1.1.3.3.1.2.cmml" xref="S3.E7.m1.1.1.3.3.1"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.3.1.2.1.cmml" xref="S3.E7.m1.1.1.3.3.1">subscript</csymbol><sum id="S3.E7.m1.1.1.3.3.1.2.2.cmml" xref="S3.E7.m1.1.1.3.3.1.2.2"></sum><apply id="S3.E7.m1.1.1.3.3.1.2.3.cmml" xref="S3.E7.m1.1.1.3.3.1.2.3"><eq id="S3.E7.m1.1.1.3.3.1.2.3.1.cmml" xref="S3.E7.m1.1.1.3.3.1.2.3.1"></eq><ci id="S3.E7.m1.1.1.3.3.1.2.3.2.cmml" xref="S3.E7.m1.1.1.3.3.1.2.3.2">𝑗</ci><cn type="integer" id="S3.E7.m1.1.1.3.3.1.2.3.3.cmml" xref="S3.E7.m1.1.1.3.3.1.2.3.3">1</cn></apply></apply><ci id="S3.E7.m1.1.1.3.3.1.3.cmml" xref="S3.E7.m1.1.1.3.3.1.3">𝑁</ci></apply><apply id="S3.E7.m1.1.1.3.3.2.cmml" xref="S3.E7.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.3.2.1.cmml" xref="S3.E7.m1.1.1.3.3.2">superscript</csymbol><apply id="S3.E7.m1.1.1.3.3.2.2.cmml" xref="S3.E7.m1.1.1.3.3.2"><csymbol cd="ambiguous" id="S3.E7.m1.1.1.3.3.2.2.1.cmml" xref="S3.E7.m1.1.1.3.3.2">subscript</csymbol><ci id="S3.E7.m1.1.1.3.3.2.2.2.cmml" xref="S3.E7.m1.1.1.3.3.2.2.2">𝜌</ci><ci id="S3.E7.m1.1.1.3.3.2.2.3.cmml" xref="S3.E7.m1.1.1.3.3.2.2.3">𝑘</ci></apply><ci id="S3.E7.m1.1.1.3.3.2.3.cmml" xref="S3.E7.m1.1.1.3.3.2.3">𝑗</ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E7.m1.1c">P_{k}=\frac{\sum_{j=1}^{N}\rho_{k}^{j}p_{k}^{j}}{\sum_{j=1}^{N}\rho_{k}^{j}}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(7)</span></td>
</tr></tbody>
</table>
<p id="S3.SS4.p3.10" class="ltx_p">where the weight <math id="S3.SS4.p3.6.m1.1" class="ltx_Math" alttext="\frac{\rho_{k}^{j}}{\sum_{j=1}^{N}\rho_{k}^{j}}" display="inline"><semantics id="S3.SS4.p3.6.m1.1a"><mfrac id="S3.SS4.p3.6.m1.1.1" xref="S3.SS4.p3.6.m1.1.1.cmml"><msubsup id="S3.SS4.p3.6.m1.1.1.2" xref="S3.SS4.p3.6.m1.1.1.2.cmml"><mi id="S3.SS4.p3.6.m1.1.1.2.2.2" xref="S3.SS4.p3.6.m1.1.1.2.2.2.cmml">ρ</mi><mi id="S3.SS4.p3.6.m1.1.1.2.2.3" xref="S3.SS4.p3.6.m1.1.1.2.2.3.cmml">k</mi><mi id="S3.SS4.p3.6.m1.1.1.2.3" xref="S3.SS4.p3.6.m1.1.1.2.3.cmml">j</mi></msubsup><mrow id="S3.SS4.p3.6.m1.1.1.3" xref="S3.SS4.p3.6.m1.1.1.3.cmml"><mstyle displaystyle="false" id="S3.SS4.p3.6.m1.1.1.3.1" xref="S3.SS4.p3.6.m1.1.1.3.1.cmml"><msubsup id="S3.SS4.p3.6.m1.1.1.3.1a" xref="S3.SS4.p3.6.m1.1.1.3.1.cmml"><mo id="S3.SS4.p3.6.m1.1.1.3.1.2.2" xref="S3.SS4.p3.6.m1.1.1.3.1.2.2.cmml">∑</mo><mrow id="S3.SS4.p3.6.m1.1.1.3.1.2.3" xref="S3.SS4.p3.6.m1.1.1.3.1.2.3.cmml"><mi id="S3.SS4.p3.6.m1.1.1.3.1.2.3.2" xref="S3.SS4.p3.6.m1.1.1.3.1.2.3.2.cmml">j</mi><mo id="S3.SS4.p3.6.m1.1.1.3.1.2.3.1" xref="S3.SS4.p3.6.m1.1.1.3.1.2.3.1.cmml">=</mo><mn id="S3.SS4.p3.6.m1.1.1.3.1.2.3.3" xref="S3.SS4.p3.6.m1.1.1.3.1.2.3.3.cmml">1</mn></mrow><mi id="S3.SS4.p3.6.m1.1.1.3.1.3" xref="S3.SS4.p3.6.m1.1.1.3.1.3.cmml">N</mi></msubsup></mstyle><msubsup id="S3.SS4.p3.6.m1.1.1.3.2" xref="S3.SS4.p3.6.m1.1.1.3.2.cmml"><mi id="S3.SS4.p3.6.m1.1.1.3.2.2.2" xref="S3.SS4.p3.6.m1.1.1.3.2.2.2.cmml">ρ</mi><mi id="S3.SS4.p3.6.m1.1.1.3.2.2.3" xref="S3.SS4.p3.6.m1.1.1.3.2.2.3.cmml">k</mi><mi id="S3.SS4.p3.6.m1.1.1.3.2.3" xref="S3.SS4.p3.6.m1.1.1.3.2.3.cmml">j</mi></msubsup></mrow></mfrac><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.6.m1.1b"><apply id="S3.SS4.p3.6.m1.1.1.cmml" xref="S3.SS4.p3.6.m1.1.1"><divide id="S3.SS4.p3.6.m1.1.1.1.cmml" xref="S3.SS4.p3.6.m1.1.1"></divide><apply id="S3.SS4.p3.6.m1.1.1.2.cmml" xref="S3.SS4.p3.6.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.p3.6.m1.1.1.2.1.cmml" xref="S3.SS4.p3.6.m1.1.1.2">superscript</csymbol><apply id="S3.SS4.p3.6.m1.1.1.2.2.cmml" xref="S3.SS4.p3.6.m1.1.1.2"><csymbol cd="ambiguous" id="S3.SS4.p3.6.m1.1.1.2.2.1.cmml" xref="S3.SS4.p3.6.m1.1.1.2">subscript</csymbol><ci id="S3.SS4.p3.6.m1.1.1.2.2.2.cmml" xref="S3.SS4.p3.6.m1.1.1.2.2.2">𝜌</ci><ci id="S3.SS4.p3.6.m1.1.1.2.2.3.cmml" xref="S3.SS4.p3.6.m1.1.1.2.2.3">𝑘</ci></apply><ci id="S3.SS4.p3.6.m1.1.1.2.3.cmml" xref="S3.SS4.p3.6.m1.1.1.2.3">𝑗</ci></apply><apply id="S3.SS4.p3.6.m1.1.1.3.cmml" xref="S3.SS4.p3.6.m1.1.1.3"><apply id="S3.SS4.p3.6.m1.1.1.3.1.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1"><csymbol cd="ambiguous" id="S3.SS4.p3.6.m1.1.1.3.1.1.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1">superscript</csymbol><apply id="S3.SS4.p3.6.m1.1.1.3.1.2.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1"><csymbol cd="ambiguous" id="S3.SS4.p3.6.m1.1.1.3.1.2.1.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1">subscript</csymbol><sum id="S3.SS4.p3.6.m1.1.1.3.1.2.2.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1.2.2"></sum><apply id="S3.SS4.p3.6.m1.1.1.3.1.2.3.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1.2.3"><eq id="S3.SS4.p3.6.m1.1.1.3.1.2.3.1.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1.2.3.1"></eq><ci id="S3.SS4.p3.6.m1.1.1.3.1.2.3.2.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1.2.3.2">𝑗</ci><cn type="integer" id="S3.SS4.p3.6.m1.1.1.3.1.2.3.3.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1.2.3.3">1</cn></apply></apply><ci id="S3.SS4.p3.6.m1.1.1.3.1.3.cmml" xref="S3.SS4.p3.6.m1.1.1.3.1.3">𝑁</ci></apply><apply id="S3.SS4.p3.6.m1.1.1.3.2.cmml" xref="S3.SS4.p3.6.m1.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS4.p3.6.m1.1.1.3.2.1.cmml" xref="S3.SS4.p3.6.m1.1.1.3.2">superscript</csymbol><apply id="S3.SS4.p3.6.m1.1.1.3.2.2.cmml" xref="S3.SS4.p3.6.m1.1.1.3.2"><csymbol cd="ambiguous" id="S3.SS4.p3.6.m1.1.1.3.2.2.1.cmml" xref="S3.SS4.p3.6.m1.1.1.3.2">subscript</csymbol><ci id="S3.SS4.p3.6.m1.1.1.3.2.2.2.cmml" xref="S3.SS4.p3.6.m1.1.1.3.2.2.2">𝜌</ci><ci id="S3.SS4.p3.6.m1.1.1.3.2.2.3.cmml" xref="S3.SS4.p3.6.m1.1.1.3.2.2.3">𝑘</ci></apply><ci id="S3.SS4.p3.6.m1.1.1.3.2.3.cmml" xref="S3.SS4.p3.6.m1.1.1.3.2.3">𝑗</ci></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.6.m1.1c">\frac{\rho_{k}^{j}}{\sum_{j=1}^{N}\rho_{k}^{j}}</annotation></semantics></math> assigns importance to the prototype of class <math id="S3.SS4.p3.7.m2.1" class="ltx_Math" alttext="k" display="inline"><semantics id="S3.SS4.p3.7.m2.1a"><mi id="S3.SS4.p3.7.m2.1.1" xref="S3.SS4.p3.7.m2.1.1.cmml">k</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.7.m2.1b"><ci id="S3.SS4.p3.7.m2.1.1.cmml" xref="S3.SS4.p3.7.m2.1.1">𝑘</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.7.m2.1c">k</annotation></semantics></math> from domain <math id="S3.SS4.p3.8.m3.1" class="ltx_Math" alttext="j" display="inline"><semantics id="S3.SS4.p3.8.m3.1a"><mi id="S3.SS4.p3.8.m3.1.1" xref="S3.SS4.p3.8.m3.1.1.cmml">j</mi><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.8.m3.1b"><ci id="S3.SS4.p3.8.m3.1.1.cmml" xref="S3.SS4.p3.8.m3.1.1">𝑗</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.8.m3.1c">j</annotation></semantics></math> according to its number of occurrence <math id="S3.SS4.p3.9.m4.1" class="ltx_Math" alttext="\rho_{k}^{j}" display="inline"><semantics id="S3.SS4.p3.9.m4.1a"><msubsup id="S3.SS4.p3.9.m4.1.1" xref="S3.SS4.p3.9.m4.1.1.cmml"><mi id="S3.SS4.p3.9.m4.1.1.2.2" xref="S3.SS4.p3.9.m4.1.1.2.2.cmml">ρ</mi><mi id="S3.SS4.p3.9.m4.1.1.2.3" xref="S3.SS4.p3.9.m4.1.1.2.3.cmml">k</mi><mi id="S3.SS4.p3.9.m4.1.1.3" xref="S3.SS4.p3.9.m4.1.1.3.cmml">j</mi></msubsup><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.9.m4.1b"><apply id="S3.SS4.p3.9.m4.1.1.cmml" xref="S3.SS4.p3.9.m4.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.9.m4.1.1.1.cmml" xref="S3.SS4.p3.9.m4.1.1">superscript</csymbol><apply id="S3.SS4.p3.9.m4.1.1.2.cmml" xref="S3.SS4.p3.9.m4.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.9.m4.1.1.2.1.cmml" xref="S3.SS4.p3.9.m4.1.1">subscript</csymbol><ci id="S3.SS4.p3.9.m4.1.1.2.2.cmml" xref="S3.SS4.p3.9.m4.1.1.2.2">𝜌</ci><ci id="S3.SS4.p3.9.m4.1.1.2.3.cmml" xref="S3.SS4.p3.9.m4.1.1.2.3">𝑘</ci></apply><ci id="S3.SS4.p3.9.m4.1.1.3.cmml" xref="S3.SS4.p3.9.m4.1.1.3">𝑗</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.9.m4.1c">\rho_{k}^{j}</annotation></semantics></math>. Once <math id="S3.SS4.p3.10.m5.1" class="ltx_Math" alttext="P_{k}" display="inline"><semantics id="S3.SS4.p3.10.m5.1a"><msub id="S3.SS4.p3.10.m5.1.1" xref="S3.SS4.p3.10.m5.1.1.cmml"><mi id="S3.SS4.p3.10.m5.1.1.2" xref="S3.SS4.p3.10.m5.1.1.2.cmml">P</mi><mi id="S3.SS4.p3.10.m5.1.1.3" xref="S3.SS4.p3.10.m5.1.1.3.cmml">k</mi></msub><annotation-xml encoding="MathML-Content" id="S3.SS4.p3.10.m5.1b"><apply id="S3.SS4.p3.10.m5.1.1.cmml" xref="S3.SS4.p3.10.m5.1.1"><csymbol cd="ambiguous" id="S3.SS4.p3.10.m5.1.1.1.cmml" xref="S3.SS4.p3.10.m5.1.1">subscript</csymbol><ci id="S3.SS4.p3.10.m5.1.1.2.cmml" xref="S3.SS4.p3.10.m5.1.1.2">𝑃</ci><ci id="S3.SS4.p3.10.m5.1.1.3.cmml" xref="S3.SS4.p3.10.m5.1.1.3">𝑘</ci></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.SS4.p3.10.m5.1c">P_{k}</annotation></semantics></math> for each class is computed, we minimize the following similarity function:</p>
<table id="S3.E8" class="ltx_equation ltx_eqn_table">

<tbody><tr class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_eqn_cell ltx_align_center"><math id="S3.E8.m1.2" class="ltx_Math" alttext="\sum_{k=1}^{K}\sum_{l\neq k}^{K}\mathcal{C}(P_{k},P_{l})" display="block"><semantics id="S3.E8.m1.2a"><mrow id="S3.E8.m1.2.2" xref="S3.E8.m1.2.2.cmml"><munderover id="S3.E8.m1.2.2.3" xref="S3.E8.m1.2.2.3.cmml"><mo movablelimits="false" id="S3.E8.m1.2.2.3.2.2" xref="S3.E8.m1.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E8.m1.2.2.3.2.3" xref="S3.E8.m1.2.2.3.2.3.cmml"><mi id="S3.E8.m1.2.2.3.2.3.2" xref="S3.E8.m1.2.2.3.2.3.2.cmml">k</mi><mo id="S3.E8.m1.2.2.3.2.3.1" xref="S3.E8.m1.2.2.3.2.3.1.cmml">=</mo><mn id="S3.E8.m1.2.2.3.2.3.3" xref="S3.E8.m1.2.2.3.2.3.3.cmml">1</mn></mrow><mi id="S3.E8.m1.2.2.3.3" xref="S3.E8.m1.2.2.3.3.cmml">K</mi></munderover><mrow id="S3.E8.m1.2.2.2" xref="S3.E8.m1.2.2.2.cmml"><munderover id="S3.E8.m1.2.2.2.3" xref="S3.E8.m1.2.2.2.3.cmml"><mo lspace="0.167em" movablelimits="false" id="S3.E8.m1.2.2.2.3.2.2" xref="S3.E8.m1.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E8.m1.2.2.2.3.2.3" xref="S3.E8.m1.2.2.2.3.2.3.cmml"><mi id="S3.E8.m1.2.2.2.3.2.3.2" xref="S3.E8.m1.2.2.2.3.2.3.2.cmml">l</mi><mo id="S3.E8.m1.2.2.2.3.2.3.1" xref="S3.E8.m1.2.2.2.3.2.3.1.cmml">≠</mo><mi id="S3.E8.m1.2.2.2.3.2.3.3" xref="S3.E8.m1.2.2.2.3.2.3.3.cmml">k</mi></mrow><mi id="S3.E8.m1.2.2.2.3.3" xref="S3.E8.m1.2.2.2.3.3.cmml">K</mi></munderover><mrow id="S3.E8.m1.2.2.2.2" xref="S3.E8.m1.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E8.m1.2.2.2.2.4" xref="S3.E8.m1.2.2.2.2.4.cmml">𝒞</mi><mo lspace="0em" rspace="0em" id="S3.E8.m1.2.2.2.2.3" xref="S3.E8.m1.2.2.2.2.3.cmml">​</mo><mrow id="S3.E8.m1.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E8.m1.2.2.2.2.2.2.3" xref="S3.E8.m1.2.2.2.2.2.3.cmml">(</mo><msub id="S3.E8.m1.1.1.1.1.1.1.1" xref="S3.E8.m1.1.1.1.1.1.1.1.cmml"><mi id="S3.E8.m1.1.1.1.1.1.1.1.2" xref="S3.E8.m1.1.1.1.1.1.1.1.2.cmml">P</mi><mi id="S3.E8.m1.1.1.1.1.1.1.1.3" xref="S3.E8.m1.1.1.1.1.1.1.1.3.cmml">k</mi></msub><mo id="S3.E8.m1.2.2.2.2.2.2.4" xref="S3.E8.m1.2.2.2.2.2.3.cmml">,</mo><msub id="S3.E8.m1.2.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.2.2.cmml"><mi id="S3.E8.m1.2.2.2.2.2.2.2.2" xref="S3.E8.m1.2.2.2.2.2.2.2.2.cmml">P</mi><mi id="S3.E8.m1.2.2.2.2.2.2.2.3" xref="S3.E8.m1.2.2.2.2.2.2.2.3.cmml">l</mi></msub><mo stretchy="false" id="S3.E8.m1.2.2.2.2.2.2.5" xref="S3.E8.m1.2.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E8.m1.2b"><apply id="S3.E8.m1.2.2.cmml" xref="S3.E8.m1.2.2"><apply id="S3.E8.m1.2.2.3.cmml" xref="S3.E8.m1.2.2.3"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.3.1.cmml" xref="S3.E8.m1.2.2.3">superscript</csymbol><apply id="S3.E8.m1.2.2.3.2.cmml" xref="S3.E8.m1.2.2.3"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.3.2.1.cmml" xref="S3.E8.m1.2.2.3">subscript</csymbol><sum id="S3.E8.m1.2.2.3.2.2.cmml" xref="S3.E8.m1.2.2.3.2.2"></sum><apply id="S3.E8.m1.2.2.3.2.3.cmml" xref="S3.E8.m1.2.2.3.2.3"><eq id="S3.E8.m1.2.2.3.2.3.1.cmml" xref="S3.E8.m1.2.2.3.2.3.1"></eq><ci id="S3.E8.m1.2.2.3.2.3.2.cmml" xref="S3.E8.m1.2.2.3.2.3.2">𝑘</ci><cn type="integer" id="S3.E8.m1.2.2.3.2.3.3.cmml" xref="S3.E8.m1.2.2.3.2.3.3">1</cn></apply></apply><ci id="S3.E8.m1.2.2.3.3.cmml" xref="S3.E8.m1.2.2.3.3">𝐾</ci></apply><apply id="S3.E8.m1.2.2.2.cmml" xref="S3.E8.m1.2.2.2"><apply id="S3.E8.m1.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.3"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.2.3.1.cmml" xref="S3.E8.m1.2.2.2.3">superscript</csymbol><apply id="S3.E8.m1.2.2.2.3.2.cmml" xref="S3.E8.m1.2.2.2.3"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.2.3.2.1.cmml" xref="S3.E8.m1.2.2.2.3">subscript</csymbol><sum id="S3.E8.m1.2.2.2.3.2.2.cmml" xref="S3.E8.m1.2.2.2.3.2.2"></sum><apply id="S3.E8.m1.2.2.2.3.2.3.cmml" xref="S3.E8.m1.2.2.2.3.2.3"><neq id="S3.E8.m1.2.2.2.3.2.3.1.cmml" xref="S3.E8.m1.2.2.2.3.2.3.1"></neq><ci id="S3.E8.m1.2.2.2.3.2.3.2.cmml" xref="S3.E8.m1.2.2.2.3.2.3.2">𝑙</ci><ci id="S3.E8.m1.2.2.2.3.2.3.3.cmml" xref="S3.E8.m1.2.2.2.3.2.3.3">𝑘</ci></apply></apply><ci id="S3.E8.m1.2.2.2.3.3.cmml" xref="S3.E8.m1.2.2.2.3.3">𝐾</ci></apply><apply id="S3.E8.m1.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2"><times id="S3.E8.m1.2.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.2.3"></times><ci id="S3.E8.m1.2.2.2.2.4.cmml" xref="S3.E8.m1.2.2.2.2.4">𝒞</ci><interval closure="open" id="S3.E8.m1.2.2.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.2.2.2"><apply id="S3.E8.m1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E8.m1.1.1.1.1.1.1.1.1.cmml" xref="S3.E8.m1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E8.m1.1.1.1.1.1.1.1.2.cmml" xref="S3.E8.m1.1.1.1.1.1.1.1.2">𝑃</ci><ci id="S3.E8.m1.1.1.1.1.1.1.1.3.cmml" xref="S3.E8.m1.1.1.1.1.1.1.1.3">𝑘</ci></apply><apply id="S3.E8.m1.2.2.2.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E8.m1.2.2.2.2.2.2.2.1.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E8.m1.2.2.2.2.2.2.2.2.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2.2">𝑃</ci><ci id="S3.E8.m1.2.2.2.2.2.2.2.3.cmml" xref="S3.E8.m1.2.2.2.2.2.2.2.3">𝑙</ci></apply></interval></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E8.m1.2c">\sum_{k=1}^{K}\sum_{l\neq k}^{K}\mathcal{C}(P_{k},P_{l})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation ltx_align_right">(8)</span></td>
</tr></tbody>
</table>
<p id="S3.SS4.p3.11" class="ltx_p">Note that prototypes from the target domain are not considered here because of the noise they induce due to the use of pseudo-labels. The final contrastive loss on prototypes is:</p>
<table id="S3.E9" class="ltx_equationgroup ltx_eqn_table">
<tbody>
<tr id="S3.E9X" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E9X.2.1.1.m1.4" class="ltx_Math" alttext="\displaystyle\mathcal{L}_{\mbox{prot}}=\sum_{k=1}^{K}\sum_{l\neq k}^{K}\mathcal{C}(P_{k},P_{l})-\frac{1}{CK}\sum_{k=1}^{K}\sum_{j=1}^{N+1}\sum_{l\neq j}^{N+1}\mathcal{C}(p_{k}^{j},p_{k}^{l})" display="inline"><semantics id="S3.E9X.2.1.1.m1.4a"><mrow id="S3.E9X.2.1.1.m1.4.4" xref="S3.E9X.2.1.1.m1.4.4.cmml"><msub id="S3.E9X.2.1.1.m1.4.4.6" xref="S3.E9X.2.1.1.m1.4.4.6.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E9X.2.1.1.m1.4.4.6.2" xref="S3.E9X.2.1.1.m1.4.4.6.2.cmml">ℒ</mi><mtext id="S3.E9X.2.1.1.m1.4.4.6.3" xref="S3.E9X.2.1.1.m1.4.4.6.3a.cmml">prot</mtext></msub><mo id="S3.E9X.2.1.1.m1.4.4.5" xref="S3.E9X.2.1.1.m1.4.4.5.cmml">=</mo><mrow id="S3.E9X.2.1.1.m1.4.4.4" xref="S3.E9X.2.1.1.m1.4.4.4.cmml"><mrow id="S3.E9X.2.1.1.m1.2.2.2.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.cmml"><mstyle displaystyle="true" id="S3.E9X.2.1.1.m1.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.cmml"><munderover id="S3.E9X.2.1.1.m1.2.2.2.2.3a" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.cmml"><mo movablelimits="false" id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.cmml"><mi id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.2.cmml">k</mi><mo id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.1" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.1.cmml">=</mo><mn id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.3.cmml">1</mn></mrow><mi id="S3.E9X.2.1.1.m1.2.2.2.2.3.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.3.cmml">K</mi></munderover></mstyle><mrow id="S3.E9X.2.1.1.m1.2.2.2.2.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.cmml"><mstyle displaystyle="true" id="S3.E9X.2.1.1.m1.2.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.cmml"><munderover id="S3.E9X.2.1.1.m1.2.2.2.2.2.3a" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.cmml"><mo movablelimits="false" id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.cmml"><mi id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.2.cmml">l</mi><mo id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.1" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.1.cmml">≠</mo><mi id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.3.cmml">k</mi></mrow><mi id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.3.cmml">K</mi></munderover></mstyle><mrow id="S3.E9X.2.1.1.m1.2.2.2.2.2.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.4" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.4.cmml">𝒞</mi><mo lspace="0em" rspace="0em" id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.3.cmml">​</mo><mrow id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.3.cmml">(</mo><msub id="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1" xref="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.cmml"><mi id="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.2" xref="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.2.cmml">P</mi><mi id="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.3" xref="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.3.cmml">k</mi></msub><mo id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.4" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.3.cmml">,</mo><msub id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.cmml"><mi id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.2" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.2.cmml">P</mi><mi id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.3.cmml">l</mi></msub><mo stretchy="false" id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.5" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow><mo id="S3.E9X.2.1.1.m1.4.4.4.5" xref="S3.E9X.2.1.1.m1.4.4.4.5.cmml">−</mo><mrow id="S3.E9X.2.1.1.m1.4.4.4.4" xref="S3.E9X.2.1.1.m1.4.4.4.4.cmml"><mstyle displaystyle="true" id="S3.E9X.2.1.1.m1.4.4.4.4.4" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.cmml"><mfrac id="S3.E9X.2.1.1.m1.4.4.4.4.4a" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.cmml"><mn id="S3.E9X.2.1.1.m1.4.4.4.4.4.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.2.cmml">1</mn><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.4.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.3.cmml"><mi id="S3.E9X.2.1.1.m1.4.4.4.4.4.3.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.3.2.cmml">C</mi><mo lspace="0em" rspace="0em" id="S3.E9X.2.1.1.m1.4.4.4.4.4.3.1" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.3.1.cmml">​</mo><mi id="S3.E9X.2.1.1.m1.4.4.4.4.4.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.3.3.cmml">K</mi></mrow></mfrac></mstyle><mo lspace="0em" rspace="0em" id="S3.E9X.2.1.1.m1.4.4.4.4.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.3.cmml">​</mo><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.cmml"><mstyle displaystyle="true" id="S3.E9X.2.1.1.m1.4.4.4.4.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.cmml"><munderover id="S3.E9X.2.1.1.m1.4.4.4.4.2.3a" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.cmml"><mo movablelimits="false" id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.2.cmml">∑</mo><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.cmml"><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.2.cmml">k</mi><mo id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.1" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.1.cmml">=</mo><mn id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.3.cmml">1</mn></mrow><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.3.cmml">K</mi></munderover></mstyle><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.cmml"><mstyle displaystyle="true" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.cmml"><munderover id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3a" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.cmml"><mo movablelimits="false" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.cmml"><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.2.cmml">j</mi><mo id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.1" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.1.cmml">=</mo><mn id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.3.cmml">1</mn></mrow><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.cmml"><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.2.cmml">N</mi><mo id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.1" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.1.cmml">+</mo><mn id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.3.cmml">1</mn></mrow></munderover></mstyle><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.cmml"><mstyle displaystyle="true" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.cmml"><munderover id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3a" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.cmml"><mo movablelimits="false" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.2.cmml">∑</mo><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.cmml"><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.2.cmml">l</mi><mo id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.1" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.1.cmml">≠</mo><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.3.cmml">j</mi></mrow><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.cmml"><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.2.cmml">N</mi><mo id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.1" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.1.cmml">+</mo><mn id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.3.cmml">1</mn></mrow></munderover></mstyle><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.4" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.4.cmml">𝒞</mi><mo lspace="0em" rspace="0em" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.3.cmml">​</mo><mrow id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.3.cmml"><mo stretchy="false" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.3.cmml">(</mo><msubsup id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.cmml"><mi id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.2" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.2.cmml">p</mi><mi id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.3" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.3.cmml">k</mi><mi id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.3" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.3.cmml">j</mi></msubsup><mo id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.4" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.3.cmml">,</mo><msubsup id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.cmml"><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.2" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.2.cmml">p</mi><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.3.cmml">k</mi><mi id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.3" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.3.cmml">l</mi></msubsup><mo stretchy="false" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.5" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.3.cmml">)</mo></mrow></mrow></mrow></mrow></mrow></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E9X.2.1.1.m1.4b"><apply id="S3.E9X.2.1.1.m1.4.4.cmml" xref="S3.E9X.2.1.1.m1.4.4"><eq id="S3.E9X.2.1.1.m1.4.4.5.cmml" xref="S3.E9X.2.1.1.m1.4.4.5"></eq><apply id="S3.E9X.2.1.1.m1.4.4.6.cmml" xref="S3.E9X.2.1.1.m1.4.4.6"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.6.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.6">subscript</csymbol><ci id="S3.E9X.2.1.1.m1.4.4.6.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.6.2">ℒ</ci><ci id="S3.E9X.2.1.1.m1.4.4.6.3a.cmml" xref="S3.E9X.2.1.1.m1.4.4.6.3"><mtext mathsize="70%" id="S3.E9X.2.1.1.m1.4.4.6.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.6.3">prot</mtext></ci></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.cmml" xref="S3.E9X.2.1.1.m1.4.4.4"><minus id="S3.E9X.2.1.1.m1.4.4.4.5.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.5"></minus><apply id="S3.E9X.2.1.1.m1.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2"><apply id="S3.E9X.2.1.1.m1.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.2.2.2.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3">superscript</csymbol><apply id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.1.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3">subscript</csymbol><sum id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.2"></sum><apply id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3"><eq id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.1"></eq><ci id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.2">𝑘</ci><cn type="integer" id="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.2.3.3">1</cn></apply></apply><ci id="S3.E9X.2.1.1.m1.2.2.2.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.3.3">𝐾</ci></apply><apply id="S3.E9X.2.1.1.m1.2.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2"><apply id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3">superscript</csymbol><apply id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.1.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3">subscript</csymbol><sum id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.2"></sum><apply id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3"><neq id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.1"></neq><ci id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.2">𝑙</ci><ci id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.2.3.3">𝑘</ci></apply></apply><ci id="S3.E9X.2.1.1.m1.2.2.2.2.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.3.3">𝐾</ci></apply><apply id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2"><times id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.3"></times><ci id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.4.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.4">𝒞</ci><interval closure="open" id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2"><apply id="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.1.cmml" xref="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.2.cmml" xref="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.2">𝑃</ci><ci id="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.3.cmml" xref="S3.E9X.2.1.1.m1.1.1.1.1.1.1.1.1.1.3">𝑘</ci></apply><apply id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.2">𝑃</ci><ci id="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.2.2.2.2.2.2.2.2.2.3">𝑙</ci></apply></interval></apply></apply></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.4.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4"><times id="S3.E9X.2.1.1.m1.4.4.4.4.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.3"></times><apply id="S3.E9X.2.1.1.m1.4.4.4.4.4.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.4"><divide id="S3.E9X.2.1.1.m1.4.4.4.4.4.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.4"></divide><cn type="integer" id="S3.E9X.2.1.1.m1.4.4.4.4.4.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.2">1</cn><apply id="S3.E9X.2.1.1.m1.4.4.4.4.4.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.3"><times id="S3.E9X.2.1.1.m1.4.4.4.4.4.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.3.1"></times><ci id="S3.E9X.2.1.1.m1.4.4.4.4.4.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.3.2">𝐶</ci><ci id="S3.E9X.2.1.1.m1.4.4.4.4.4.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.4.3.3">𝐾</ci></apply></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2"><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3">superscript</csymbol><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3">subscript</csymbol><sum id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.2"></sum><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3"><eq id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.1"></eq><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.2">𝑘</ci><cn type="integer" id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.2.3.3">1</cn></apply></apply><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.3.3">𝐾</ci></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2"><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3">superscript</csymbol><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3">subscript</csymbol><sum id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.2"></sum><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3"><eq id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.1"></eq><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.2">𝑗</ci><cn type="integer" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.2.3.3">1</cn></apply></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3"><plus id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.1"></plus><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.2">𝑁</ci><cn type="integer" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.3.3.3">1</cn></apply></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2"><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3">superscript</csymbol><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3">subscript</csymbol><sum id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.2"></sum><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3"><neq id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.1"></neq><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.2">𝑙</ci><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.2.3.3">𝑗</ci></apply></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3"><plus id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.1"></plus><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.2">𝑁</ci><cn type="integer" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.3.3.3">1</cn></apply></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2"><times id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.3"></times><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.4.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.4">𝒞</ci><interval closure="open" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2"><apply id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.cmml" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.1.cmml" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1">superscript</csymbol><apply id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.cmml" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.1.cmml" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1">subscript</csymbol><ci id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.2.cmml" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.2">𝑝</ci><ci id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.3.cmml" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.2.3">𝑘</ci></apply><ci id="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.3.cmml" xref="S3.E9X.2.1.1.m1.3.3.3.3.1.1.1.1.1.1.1.3">𝑗</ci></apply><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2">superscript</csymbol><apply id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2"><csymbol cd="ambiguous" id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.1.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2">subscript</csymbol><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.2.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.2">𝑝</ci><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.2.3">𝑘</ci></apply><ci id="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.3.cmml" xref="S3.E9X.2.1.1.m1.4.4.4.4.2.2.2.2.2.2.2.3">𝑙</ci></apply></interval></apply></apply></apply></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E9X.2.1.1.m1.4c">\displaystyle\mathcal{L}_{\mbox{prot}}=\sum_{k=1}^{K}\sum_{l\neq k}^{K}\mathcal{C}(P_{k},P_{l})-\frac{1}{CK}\sum_{k=1}^{K}\sum_{j=1}^{N+1}\sum_{l\neq j}^{N+1}\mathcal{C}(p_{k}^{j},p_{k}^{l})</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(9)</span></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="S3.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">3.5 </span>Training Summary </h3>

<div id="S3.SS5.p1" class="ltx_para">
<p id="S3.SS5.p1.4" class="ltx_p">The FRCNN model is initialized with Imagenet pre-trained weights. The weights of the student model are updated using back-propagation. In contrast, the weights of the teacher model are obtained as the EMA of the student model’s weights over time. Training starts with a burn-in training stage, where only the Eq. <a href="#S3.E1" title="Equation 1 ‣ 3.1 Supervised Learning ‣ 3 Proposed Method ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a> is used to train the student model. Then, the teacher model is initialized as a copy of the student model, and then the weights of the student model are adapted using the back-propagation, while the teacher weights are the EMA of the student model’s weights. In the unsupervised MSDA training step, all the above losses are used jointly to adapt the student model. The total loss is:</p>
<table id="S3.E10" class="ltx_equationgroup ltx_eqn_table">
<tbody>
<tr id="S3.E10X" class="ltx_equation ltx_eqn_row ltx_align_baseline">
<td class="ltx_eqn_cell ltx_eqn_center_padleft"></td>
<td class="ltx_td ltx_align_right ltx_eqn_cell"><math id="S3.E10X.2.1.1.m1.1" class="ltx_Math" alttext="\displaystyle\mathcal{L}=\mathcal{L}_{\mbox{sup}}+\alpha\mathcal{L}_{\mbox{unsup}}+\beta\mathcal{L}_{\mbox{dis}}+\gamma\mathcal{L}_{\mbox{prot}}" display="inline"><semantics id="S3.E10X.2.1.1.m1.1a"><mrow id="S3.E10X.2.1.1.m1.1.1" xref="S3.E10X.2.1.1.m1.1.1.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E10X.2.1.1.m1.1.1.2" xref="S3.E10X.2.1.1.m1.1.1.2.cmml">ℒ</mi><mo id="S3.E10X.2.1.1.m1.1.1.1" xref="S3.E10X.2.1.1.m1.1.1.1.cmml">=</mo><mrow id="S3.E10X.2.1.1.m1.1.1.3" xref="S3.E10X.2.1.1.m1.1.1.3.cmml"><msub id="S3.E10X.2.1.1.m1.1.1.3.2" xref="S3.E10X.2.1.1.m1.1.1.3.2.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E10X.2.1.1.m1.1.1.3.2.2" xref="S3.E10X.2.1.1.m1.1.1.3.2.2.cmml">ℒ</mi><mtext id="S3.E10X.2.1.1.m1.1.1.3.2.3" xref="S3.E10X.2.1.1.m1.1.1.3.2.3a.cmml">sup</mtext></msub><mo id="S3.E10X.2.1.1.m1.1.1.3.1" xref="S3.E10X.2.1.1.m1.1.1.3.1.cmml">+</mo><mrow id="S3.E10X.2.1.1.m1.1.1.3.3" xref="S3.E10X.2.1.1.m1.1.1.3.3.cmml"><mi id="S3.E10X.2.1.1.m1.1.1.3.3.2" xref="S3.E10X.2.1.1.m1.1.1.3.3.2.cmml">α</mi><mo lspace="0em" rspace="0em" id="S3.E10X.2.1.1.m1.1.1.3.3.1" xref="S3.E10X.2.1.1.m1.1.1.3.3.1.cmml">​</mo><msub id="S3.E10X.2.1.1.m1.1.1.3.3.3" xref="S3.E10X.2.1.1.m1.1.1.3.3.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E10X.2.1.1.m1.1.1.3.3.3.2" xref="S3.E10X.2.1.1.m1.1.1.3.3.3.2.cmml">ℒ</mi><mtext id="S3.E10X.2.1.1.m1.1.1.3.3.3.3" xref="S3.E10X.2.1.1.m1.1.1.3.3.3.3a.cmml">unsup</mtext></msub></mrow><mo id="S3.E10X.2.1.1.m1.1.1.3.1a" xref="S3.E10X.2.1.1.m1.1.1.3.1.cmml">+</mo><mrow id="S3.E10X.2.1.1.m1.1.1.3.4" xref="S3.E10X.2.1.1.m1.1.1.3.4.cmml"><mi id="S3.E10X.2.1.1.m1.1.1.3.4.2" xref="S3.E10X.2.1.1.m1.1.1.3.4.2.cmml">β</mi><mo lspace="0em" rspace="0em" id="S3.E10X.2.1.1.m1.1.1.3.4.1" xref="S3.E10X.2.1.1.m1.1.1.3.4.1.cmml">​</mo><msub id="S3.E10X.2.1.1.m1.1.1.3.4.3" xref="S3.E10X.2.1.1.m1.1.1.3.4.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E10X.2.1.1.m1.1.1.3.4.3.2" xref="S3.E10X.2.1.1.m1.1.1.3.4.3.2.cmml">ℒ</mi><mtext id="S3.E10X.2.1.1.m1.1.1.3.4.3.3" xref="S3.E10X.2.1.1.m1.1.1.3.4.3.3a.cmml">dis</mtext></msub></mrow><mo id="S3.E10X.2.1.1.m1.1.1.3.1b" xref="S3.E10X.2.1.1.m1.1.1.3.1.cmml">+</mo><mrow id="S3.E10X.2.1.1.m1.1.1.3.5" xref="S3.E10X.2.1.1.m1.1.1.3.5.cmml"><mi id="S3.E10X.2.1.1.m1.1.1.3.5.2" xref="S3.E10X.2.1.1.m1.1.1.3.5.2.cmml">γ</mi><mo lspace="0em" rspace="0em" id="S3.E10X.2.1.1.m1.1.1.3.5.1" xref="S3.E10X.2.1.1.m1.1.1.3.5.1.cmml">​</mo><msub id="S3.E10X.2.1.1.m1.1.1.3.5.3" xref="S3.E10X.2.1.1.m1.1.1.3.5.3.cmml"><mi class="ltx_font_mathcaligraphic" id="S3.E10X.2.1.1.m1.1.1.3.5.3.2" xref="S3.E10X.2.1.1.m1.1.1.3.5.3.2.cmml">ℒ</mi><mtext id="S3.E10X.2.1.1.m1.1.1.3.5.3.3" xref="S3.E10X.2.1.1.m1.1.1.3.5.3.3a.cmml">prot</mtext></msub></mrow></mrow></mrow><annotation-xml encoding="MathML-Content" id="S3.E10X.2.1.1.m1.1b"><apply id="S3.E10X.2.1.1.m1.1.1.cmml" xref="S3.E10X.2.1.1.m1.1.1"><eq id="S3.E10X.2.1.1.m1.1.1.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.1"></eq><ci id="S3.E10X.2.1.1.m1.1.1.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.2">ℒ</ci><apply id="S3.E10X.2.1.1.m1.1.1.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3"><plus id="S3.E10X.2.1.1.m1.1.1.3.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.1"></plus><apply id="S3.E10X.2.1.1.m1.1.1.3.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.2"><csymbol cd="ambiguous" id="S3.E10X.2.1.1.m1.1.1.3.2.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.2">subscript</csymbol><ci id="S3.E10X.2.1.1.m1.1.1.3.2.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.2.2">ℒ</ci><ci id="S3.E10X.2.1.1.m1.1.1.3.2.3a.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.2.3"><mtext mathsize="70%" id="S3.E10X.2.1.1.m1.1.1.3.2.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.2.3">sup</mtext></ci></apply><apply id="S3.E10X.2.1.1.m1.1.1.3.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.3"><times id="S3.E10X.2.1.1.m1.1.1.3.3.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.3.1"></times><ci id="S3.E10X.2.1.1.m1.1.1.3.3.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.3.2">𝛼</ci><apply id="S3.E10X.2.1.1.m1.1.1.3.3.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.3.3"><csymbol cd="ambiguous" id="S3.E10X.2.1.1.m1.1.1.3.3.3.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.3.3">subscript</csymbol><ci id="S3.E10X.2.1.1.m1.1.1.3.3.3.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.3.3.2">ℒ</ci><ci id="S3.E10X.2.1.1.m1.1.1.3.3.3.3a.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.3.3.3"><mtext mathsize="70%" id="S3.E10X.2.1.1.m1.1.1.3.3.3.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.3.3.3">unsup</mtext></ci></apply></apply><apply id="S3.E10X.2.1.1.m1.1.1.3.4.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.4"><times id="S3.E10X.2.1.1.m1.1.1.3.4.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.4.1"></times><ci id="S3.E10X.2.1.1.m1.1.1.3.4.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.4.2">𝛽</ci><apply id="S3.E10X.2.1.1.m1.1.1.3.4.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.4.3"><csymbol cd="ambiguous" id="S3.E10X.2.1.1.m1.1.1.3.4.3.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.4.3">subscript</csymbol><ci id="S3.E10X.2.1.1.m1.1.1.3.4.3.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.4.3.2">ℒ</ci><ci id="S3.E10X.2.1.1.m1.1.1.3.4.3.3a.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.4.3.3"><mtext mathsize="70%" id="S3.E10X.2.1.1.m1.1.1.3.4.3.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.4.3.3">dis</mtext></ci></apply></apply><apply id="S3.E10X.2.1.1.m1.1.1.3.5.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.5"><times id="S3.E10X.2.1.1.m1.1.1.3.5.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.5.1"></times><ci id="S3.E10X.2.1.1.m1.1.1.3.5.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.5.2">𝛾</ci><apply id="S3.E10X.2.1.1.m1.1.1.3.5.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.5.3"><csymbol cd="ambiguous" id="S3.E10X.2.1.1.m1.1.1.3.5.3.1.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.5.3">subscript</csymbol><ci id="S3.E10X.2.1.1.m1.1.1.3.5.3.2.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.5.3.2">ℒ</ci><ci id="S3.E10X.2.1.1.m1.1.1.3.5.3.3a.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.5.3.3"><mtext mathsize="70%" id="S3.E10X.2.1.1.m1.1.1.3.5.3.3.cmml" xref="S3.E10X.2.1.1.m1.1.1.3.5.3.3">prot</mtext></ci></apply></apply></apply></apply></annotation-xml><annotation encoding="application/x-tex" id="S3.E10X.2.1.1.m1.1c">\displaystyle\mathcal{L}=\mathcal{L}_{\mbox{sup}}+\alpha\mathcal{L}_{\mbox{unsup}}+\beta\mathcal{L}_{\mbox{dis}}+\gamma\mathcal{L}_{\mbox{prot}}</annotation></semantics></math></td>
<td class="ltx_eqn_cell ltx_eqn_center_padright"></td>
<td rowspan="1" class="ltx_eqn_cell ltx_eqn_eqno ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equationgroup ltx_align_right">(10)</span></td>
</tr>
</tbody>
</table>
<p id="S3.SS5.p1.3" class="ltx_p">where hyperparameters <math id="S3.SS5.p1.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S3.SS5.p1.1.m1.1a"><mi id="S3.SS5.p1.1.m1.1.1" xref="S3.SS5.p1.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.1.m1.1b"><ci id="S3.SS5.p1.1.m1.1.1.cmml" xref="S3.SS5.p1.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.1.m1.1c">\alpha</annotation></semantics></math>, <math id="S3.SS5.p1.2.m2.1" class="ltx_Math" alttext="\beta" display="inline"><semantics id="S3.SS5.p1.2.m2.1a"><mi id="S3.SS5.p1.2.m2.1.1" xref="S3.SS5.p1.2.m2.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.2.m2.1b"><ci id="S3.SS5.p1.2.m2.1.1.cmml" xref="S3.SS5.p1.2.m2.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.2.m2.1c">\beta</annotation></semantics></math>, and <math id="S3.SS5.p1.3.m3.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S3.SS5.p1.3.m3.1a"><mi id="S3.SS5.p1.3.m3.1.1" xref="S3.SS5.p1.3.m3.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S3.SS5.p1.3.m3.1b"><ci id="S3.SS5.p1.3.m3.1.1.cmml" xref="S3.SS5.p1.3.m3.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S3.SS5.p1.3.m3.1c">\gamma</annotation></semantics></math> weight the contribution of each loss. For inference, only the teacher model is used to predict output detections.</p>
</div>
</section>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Results and Discussion</h2>

<section id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.1 </span>Experimental Methodology</h3>

<div id="S4.SS1.p1" class="ltx_para ltx_noindent">
<p id="S4.SS1.p1.3" class="ltx_p"><span id="S4.SS1.p1.3.1" class="ltx_text ltx_font_bold">Implementation Details.</span> Our experiments follow the same procedure as in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>, <a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite>. The FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite> VGG16 backbone pre-trained with ImageNet was used as the detection framework. Similar to <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib9" title="" class="ltx_ref">9</a>]</cite>, ROI-alignment was used, and the shorter side of the input image was reduced to 600 pixels. For our mean-teacher training, the same setting was used as in <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite>. For filtering the pseudo-labels, we set the confidence threshold of 0.7. The model is trained in the burn-in setting for 15 epochs. Then, the model was trained in the unsupervised DA setting for another 15 epochs. For all settings, the value <math id="S4.SS1.p1.1.m1.1" class="ltx_Math" alttext="\alpha" display="inline"><semantics id="S4.SS1.p1.1.m1.1a"><mi id="S4.SS1.p1.1.m1.1.1" xref="S4.SS1.p1.1.m1.1.1.cmml">α</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.1.m1.1b"><ci id="S4.SS1.p1.1.m1.1.1.cmml" xref="S4.SS1.p1.1.m1.1.1">𝛼</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.1.m1.1c">\alpha</annotation></semantics></math> and <math id="S4.SS1.p1.2.m2.1" class="ltx_Math" alttext="\beta" display="inline"><semantics id="S4.SS1.p1.2.m2.1a"><mi id="S4.SS1.p1.2.m2.1.1" xref="S4.SS1.p1.2.m2.1.1.cmml">β</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.2.m2.1b"><ci id="S4.SS1.p1.2.m2.1.1.cmml" xref="S4.SS1.p1.2.m2.1.1">𝛽</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.2.m2.1c">\beta</annotation></semantics></math> were set to 1 and 0.1, respectively, while the value of <math id="S4.SS1.p1.3.m3.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S4.SS1.p1.3.m3.1a"><mi id="S4.SS1.p1.3.m3.1.1" xref="S4.SS1.p1.3.m3.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S4.SS1.p1.3.m3.1b"><ci id="S4.SS1.p1.3.m3.1.1.cmml" xref="S4.SS1.p1.3.m3.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.SS1.p1.3.m3.1c">\gamma</annotation></semantics></math> was set to 1.2, 0.6, and 0.1 for Sections <a href="#S4.SS2" title="4.2 Cross Time Adaptation ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.2</span></a>, <a href="#S4.SS3" title="4.3 Cross Camera Adaptation ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.3</span></a> and <a href="#S4.SS4" title="4.4 Extension to Mixed Domain Adaptation ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.4</span></a>. The weight smoothing coefficient of EMA is set to 0.9996. All the experiments were conducted on 4 A100 GPUs, with batch size 4 and a learning rate of 0.2. Our approach was implemented using Pytorch<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib19" title="" class="ltx_ref">19</a>]</cite> and Detectron2<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib28" title="" class="ltx_ref">28</a>]</cite>.</p>
</div>
<div id="S4.SS1.p2" class="ltx_para ltx_noindent">
<p id="S4.SS1.p2.1" class="ltx_p"><span id="S4.SS1.p2.1.1" class="ltx_text ltx_font_bold">Quantitative comparison.</span> We compared our approach with the following baseline: (1) Source-Only: FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite> is trained in a supervised manner on source domain data, and no adaptation is performed. (2) UDA Blending: all the source domain data is combined, and UDA methods <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>, <a href="#bib.bib32" title="" class="ltx_ref">32</a>, <a href="#bib.bib29" title="" class="ltx_ref">29</a>, <a href="#bib.bib17" title="" class="ltx_ref">17</a>, <a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite> are used to adapt FRCNN. (3) MSDA: adaptation of FRCNN from independent source datasets. It includes MSDA methods developed for classification <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>, <a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite> and upgraded for OD, as well as MSDA methods developed for OD <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite><cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>. (4) Oracle: Target-Only and All-Combined. In the Target-Only case, we performed supervised training of FRCNN only on labeled target data. In the All-Combined case, supervised training is performed on all source and target data combined. Note that some of the baseline results are taken from <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> and <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>. Class-wise AP is reported in the supplementary material.</p>
</div>
</section>
<section id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.2 </span>Cross Time Adaptation</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p id="S4.SS2.p1.1" class="ltx_p">In this setting, images are collected at different times of the day, so domain shift is caused by changes in illumination. The performance of our method in this setting is evaluated on the BDD100K<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib34" title="" class="ltx_ref">34</a>]</cite> dataset. The dataset consists of data collected at three different times - Daytime, Dusk/Dawn, and Night Time. In our experiments, Daytime and Night are used as the source domains, and Dusk/Dawn as the target domain. The source domain consists of labeled 64,699 (36,728 daytime + 27,971 night) images. In the target domain, we have 5,027 unlabeled images, that are used for training. The evaluation is done on 778 validation set images of Dusk/Dawn. The mAP on 10 classes is reported.</p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p id="S4.SS2.p2.1" class="ltx_p">The mAP performance of our method is compared against the other approaches in Table <a href="#S4.T1" title="Table 1 ‣ 4.2 Cross Time Adaptation ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>. It can be observed that the UDA methods that blend source datasets are able to increase the performance of the detector compared to the Source-Only baseline. However, this increase in performance is not large, as they disregard the inter-source domain shift. It is also interesting to note that two state-of-the-art MSDA classification methods <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>, <a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>, perform worse than the Source-Only baseline. This degradation in performance shows the fundamental difference in MSDA methods for classification and detection and a strong motivation for MSDA for OD. Our method improves the performance of the best-performing MSDA method <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite> by 5.5%. It can also be seen that the performance of our PMT method is much better than the Oracle Target-Only case (because of the small size of the target dataset), and it approached the mAP of the Oracle All-Combined case.</p>
</div>
<figure id="S4.T1" class="ltx_table">
<div id="S4.T1.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:243.5pt;height:171.8pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-56.8pt,40.1pt) scale(0.681700858926614,0.681700858926614) ;">
<table id="S4.T1.1.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S4.T1.1.1.2.1" class="ltx_tr">
<th id="S4.T1.1.1.2.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><span id="S4.T1.1.1.2.1.1.1" class="ltx_text ltx_font_bold">Setting</span></th>
<th id="S4.T1.1.1.2.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t"><span id="S4.T1.1.1.2.1.2.1" class="ltx_text ltx_font_bold">Method</span></th>
<td id="S4.T1.1.1.2.1.3" class="ltx_td ltx_align_center ltx_border_t"><span id="S4.T1.1.1.2.1.3.1" class="ltx_text ltx_font_bold">D</span></td>
<td id="S4.T1.1.1.2.1.4" class="ltx_td ltx_align_center ltx_border_t"><span id="S4.T1.1.1.2.1.4.1" class="ltx_text ltx_font_bold">N</span></td>
<td id="S4.T1.1.1.2.1.5" class="ltx_td ltx_align_center ltx_border_t"><span id="S4.T1.1.1.2.1.5.1" class="ltx_text ltx_font_bold">D+N</span></td>
</tr>
<tr id="S4.T1.1.1.3.2" class="ltx_tr">
<th id="S4.T1.1.1.3.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt">Source Only</th>
<th id="S4.T1.1.1.3.2.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt">FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>
</th>
<td id="S4.T1.1.1.3.2.3" class="ltx_td ltx_align_center ltx_border_tt">30.4</td>
<td id="S4.T1.1.1.3.2.4" class="ltx_td ltx_align_center ltx_border_tt">25.0</td>
<td id="S4.T1.1.1.3.2.5" class="ltx_td ltx_align_center ltx_border_tt">28.9</td>
</tr>
<tr id="S4.T1.1.1.4.3" class="ltx_tr">
<th id="S4.T1.1.1.4.3.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" rowspan="5"><span id="S4.T1.1.1.4.3.1.1" class="ltx_text">UDA Blending</span></th>
<th id="S4.T1.1.1.4.3.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Strong-Weak<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite>
</th>
<td id="S4.T1.1.1.4.3.3" class="ltx_td ltx_align_center ltx_border_t">31.4</td>
<td id="S4.T1.1.1.4.3.4" class="ltx_td ltx_align_center ltx_border_t">26.9</td>
<td id="S4.T1.1.1.4.3.5" class="ltx_td ltx_align_center ltx_border_t">29.9</td>
</tr>
<tr id="S4.T1.1.1.5.4" class="ltx_tr">
<th id="S4.T1.1.1.5.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Graph Prototype<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>
</th>
<td id="S4.T1.1.1.5.4.2" class="ltx_td ltx_align_center">31.8</td>
<td id="S4.T1.1.1.5.4.3" class="ltx_td ltx_align_center">27.6</td>
<td id="S4.T1.1.1.5.4.4" class="ltx_td ltx_align_center">30.6</td>
</tr>
<tr id="S4.T1.1.1.6.5" class="ltx_tr">
<th id="S4.T1.1.1.6.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Cat. Regularization<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite>
</th>
<td id="S4.T1.1.1.6.5.2" class="ltx_td ltx_align_center">31.2</td>
<td id="S4.T1.1.1.6.5.3" class="ltx_td ltx_align_center">28.4</td>
<td id="S4.T1.1.1.6.5.4" class="ltx_td ltx_align_center">30.2</td>
</tr>
<tr id="S4.T1.1.1.7.6" class="ltx_tr">
<th id="S4.T1.1.1.7.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">UMT<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>
</th>
<td id="S4.T1.1.1.7.6.2" class="ltx_td ltx_align_center">33.8</td>
<td id="S4.T1.1.1.7.6.3" class="ltx_td ltx_align_center">21.6</td>
<td id="S4.T1.1.1.7.6.4" class="ltx_td ltx_align_center">33.5</td>
</tr>
<tr id="S4.T1.1.1.8.7" class="ltx_tr">
<th id="S4.T1.1.1.8.7.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Adaptive Teacher<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>
</th>
<td id="S4.T1.1.1.8.7.2" class="ltx_td ltx_align_center">34.9</td>
<td id="S4.T1.1.1.8.7.3" class="ltx_td ltx_align_center">27.8</td>
<td id="S4.T1.1.1.8.7.4" class="ltx_td ltx_align_center">34.6</td>
</tr>
<tr id="S4.T1.1.1.9.8" class="ltx_tr">
<th id="S4.T1.1.1.9.8.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" rowspan="4"><span id="S4.T1.1.1.9.8.1.1" class="ltx_text">MSDA</span></th>
<th id="S4.T1.1.1.9.8.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">MDAN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite>
</th>
<td id="S4.T1.1.1.9.8.3" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T1.1.1.9.8.4" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T1.1.1.9.8.5" class="ltx_td ltx_align_center ltx_border_t">27.6</td>
</tr>
<tr id="S4.T1.1.1.1" class="ltx_tr">
<th id="S4.T1.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">M<sup id="S4.T1.1.1.1.1.1" class="ltx_sup">3</sup>SDA<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>
</th>
<td id="S4.T1.1.1.1.2" class="ltx_td ltx_align_center">-</td>
<td id="S4.T1.1.1.1.3" class="ltx_td ltx_align_center">-</td>
<td id="S4.T1.1.1.1.4" class="ltx_td ltx_align_center">26.5</td>
</tr>
<tr id="S4.T1.1.1.10.9" class="ltx_tr">
<th id="S4.T1.1.1.10.9.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">DMSN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite>
</th>
<td id="S4.T1.1.1.10.9.2" class="ltx_td ltx_align_center">-</td>
<td id="S4.T1.1.1.10.9.3" class="ltx_td ltx_align_center">-</td>
<td id="S4.T1.1.1.10.9.4" class="ltx_td ltx_align_center">35.0</td>
</tr>
<tr id="S4.T1.1.1.11.10" class="ltx_tr">
<th id="S4.T1.1.1.11.10.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">TRKP<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>
</th>
<td id="S4.T1.1.1.11.10.2" class="ltx_td ltx_align_center">-</td>
<td id="S4.T1.1.1.11.10.3" class="ltx_td ltx_align_center">-</td>
<td id="S4.T1.1.1.11.10.4" class="ltx_td ltx_align_center">39.8</td>
</tr>
<tr id="S4.T1.1.1.12.11" class="ltx_tr">
<th id="S4.T1.1.1.12.11.1" class="ltx_td ltx_th ltx_th_row"></th>
<th id="S4.T1.1.1.12.11.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r"><span id="S4.T1.1.1.12.11.2.1" class="ltx_text ltx_font_bold">PMT(ours)</span></th>
<td id="S4.T1.1.1.12.11.3" class="ltx_td ltx_align_center">-</td>
<td id="S4.T1.1.1.12.11.4" class="ltx_td ltx_align_center">-</td>
<td id="S4.T1.1.1.12.11.5" class="ltx_td ltx_align_center"><span id="S4.T1.1.1.12.11.5.1" class="ltx_text ltx_font_bold">45.3</span></td>
</tr>
<tr id="S4.T1.1.1.13.12" class="ltx_tr">
<th id="S4.T1.1.1.13.12.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_t" rowspan="2"><span id="S4.T1.1.1.13.12.1.1" class="ltx_text">Oracle</span></th>
<th id="S4.T1.1.1.13.12.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Target-Only</th>
<td id="S4.T1.1.1.13.12.3" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T1.1.1.13.12.4" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T1.1.1.13.12.5" class="ltx_td ltx_align_center ltx_border_t">26.6</td>
</tr>
<tr id="S4.T1.1.1.14.13" class="ltx_tr">
<th id="S4.T1.1.1.14.13.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r">All-Combined</th>
<td id="S4.T1.1.1.14.13.2" class="ltx_td ltx_align_center ltx_border_b">-</td>
<td id="S4.T1.1.1.14.13.3" class="ltx_td ltx_align_center ltx_border_b">-</td>
<td id="S4.T1.1.1.14.13.4" class="ltx_td ltx_align_center ltx_border_b">45.6</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T1.3.1.1" class="ltx_text" style="font-size:90%;">Table 1</span>: </span><span id="S4.T1.4.2" class="ltx_text" style="font-size:90%;">Detection AP of PMT compared against the baseline, UDA, MSDA, and oracle methods on BDD100K. Source domains are daytime (D) and night (N) subsets and the target is always Dusk/Dawn of BDD100K.
</span></figcaption>
</figure>
</section>
<section id="S4.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.3 </span>Cross Camera Adaptation</h3>

<div id="S4.SS3.p1" class="ltx_para">
<p id="S4.SS3.p1.1" class="ltx_p">In this setting, the data are collected using different cameras, and domain shift is caused by changes in the camera’s resolution and viewpoint. In this setting BDD100K<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib34" title="" class="ltx_ref">34</a>]</cite>, Cityscape<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>, and Kitty<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib8" title="" class="ltx_ref">8</a>]</cite> datasets are used. For our experiments, we used Cityscape and Kitty as the source domains, while the Daytime domain of BDD100k was used as the target domain. For both training and evaluation, we only considered the images with car objects. This provides a source domain that consists of 9,515 (2,831 Cityscapes + 6,684 Kitty) labeled images. In the target domain, we have 36,728 unlabeled images used for training. The evaluation is done on 5,258 validation set images of Daytime. The AP is reported only on the car object category in Table <a href="#S4.T2" title="Table 2 ‣ 4.3 Cross Camera Adaptation ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a>.</p>
</div>
<div id="S4.SS3.p2" class="ltx_para">
<p id="S4.SS3.p2.1" class="ltx_p">Note that in this experiment, there is only one object category (car), so the prototype separation part was removed for our contrastive loss. It can be observed that the variation in the performance is similar to Section <a href="#S4.SS2" title="4.2 Cross Time Adaptation ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.2</span></a>. Our PMT can outperform state-of-the-art methods, but the increase in AP is lower compared to TRKP. We suppose this is due to the removal of the prototype separation part of our contrastive loss. In ablation studies, we showed that every loss component contributed to obtaining the best PMT performance.</p>
</div>
<figure id="S4.T2" class="ltx_table">
<div id="S4.T2.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:243.5pt;height:158.1pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-58.4pt,37.9pt) scale(0.675657424442754,0.675657424442754) ;">
<table id="S4.T2.1.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S4.T2.1.1.2.1" class="ltx_tr">
<th id="S4.T2.1.1.2.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t"><span id="S4.T2.1.1.2.1.1.1" class="ltx_text ltx_font_bold">Setting</span></th>
<th id="S4.T2.1.1.2.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t"><span id="S4.T2.1.1.2.1.2.1" class="ltx_text ltx_font_bold">Method</span></th>
<td id="S4.T2.1.1.2.1.3" class="ltx_td ltx_align_center ltx_border_t"><span id="S4.T2.1.1.2.1.3.1" class="ltx_text ltx_font_bold">C</span></td>
<td id="S4.T2.1.1.2.1.4" class="ltx_td ltx_align_center ltx_border_t"><span id="S4.T2.1.1.2.1.4.1" class="ltx_text ltx_font_bold">K</span></td>
<td id="S4.T2.1.1.2.1.5" class="ltx_td ltx_align_center ltx_border_t"><span id="S4.T2.1.1.2.1.5.1" class="ltx_text ltx_font_bold">C+K</span></td>
</tr>
<tr id="S4.T2.1.1.3.2" class="ltx_tr">
<th id="S4.T2.1.1.3.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_tt">Source Only</th>
<th id="S4.T2.1.1.3.2.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt">FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>
</th>
<td id="S4.T2.1.1.3.2.3" class="ltx_td ltx_align_center ltx_border_tt">44.6</td>
<td id="S4.T2.1.1.3.2.4" class="ltx_td ltx_align_center ltx_border_tt">28.6</td>
<td id="S4.T2.1.1.3.2.5" class="ltx_td ltx_align_center ltx_border_tt">43.2</td>
</tr>
<tr id="S4.T2.1.1.4.3" class="ltx_tr">
<th id="S4.T2.1.1.4.3.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" rowspan="4"><span id="S4.T2.1.1.4.3.1.1" class="ltx_text">UDA Blending</span></th>
<th id="S4.T2.1.1.4.3.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Strong-Weak<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite>
</th>
<td id="S4.T2.1.1.4.3.3" class="ltx_td ltx_align_center ltx_border_t">45.5</td>
<td id="S4.T2.1.1.4.3.4" class="ltx_td ltx_align_center ltx_border_t">29.6</td>
<td id="S4.T2.1.1.4.3.5" class="ltx_td ltx_align_center ltx_border_t">41.9</td>
</tr>
<tr id="S4.T2.1.1.5.4" class="ltx_tr">
<th id="S4.T2.1.1.5.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Cat. Regularization<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite>
</th>
<td id="S4.T2.1.1.5.4.2" class="ltx_td ltx_align_center">46.5</td>
<td id="S4.T2.1.1.5.4.3" class="ltx_td ltx_align_center">30.8</td>
<td id="S4.T2.1.1.5.4.4" class="ltx_td ltx_align_center">43.6</td>
</tr>
<tr id="S4.T2.1.1.6.5" class="ltx_tr">
<th id="S4.T2.1.1.6.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">UMT<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>
</th>
<td id="S4.T2.1.1.6.5.2" class="ltx_td ltx_align_center">47.5</td>
<td id="S4.T2.1.1.6.5.3" class="ltx_td ltx_align_center">35.4</td>
<td id="S4.T2.1.1.6.5.4" class="ltx_td ltx_align_center">47.0</td>
</tr>
<tr id="S4.T2.1.1.7.6" class="ltx_tr">
<th id="S4.T2.1.1.7.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Adaptive Teacher<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>
</th>
<td id="S4.T2.1.1.7.6.2" class="ltx_td ltx_align_center">49.8</td>
<td id="S4.T2.1.1.7.6.3" class="ltx_td ltx_align_center">40.1</td>
<td id="S4.T2.1.1.7.6.4" class="ltx_td ltx_align_center">48.4</td>
</tr>
<tr id="S4.T2.1.1.8.7" class="ltx_tr">
<th id="S4.T2.1.1.8.7.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" rowspan="4"><span id="S4.T2.1.1.8.7.1.1" class="ltx_text">MSDA</span></th>
<th id="S4.T2.1.1.8.7.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">MDAN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite>
</th>
<td id="S4.T2.1.1.8.7.3" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T2.1.1.8.7.4" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T2.1.1.8.7.5" class="ltx_td ltx_align_center ltx_border_t">43.2</td>
</tr>
<tr id="S4.T2.1.1.1" class="ltx_tr">
<th id="S4.T2.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">M<sup id="S4.T2.1.1.1.1.1" class="ltx_sup">3</sup>SDA<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>
</th>
<td id="S4.T2.1.1.1.2" class="ltx_td ltx_align_center">-</td>
<td id="S4.T2.1.1.1.3" class="ltx_td ltx_align_center">-</td>
<td id="S4.T2.1.1.1.4" class="ltx_td ltx_align_center">44.1</td>
</tr>
<tr id="S4.T2.1.1.9.8" class="ltx_tr">
<th id="S4.T2.1.1.9.8.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">DMSN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite>
</th>
<td id="S4.T2.1.1.9.8.2" class="ltx_td ltx_align_center">-</td>
<td id="S4.T2.1.1.9.8.3" class="ltx_td ltx_align_center">-</td>
<td id="S4.T2.1.1.9.8.4" class="ltx_td ltx_align_center">49.2</td>
</tr>
<tr id="S4.T2.1.1.10.9" class="ltx_tr">
<th id="S4.T2.1.1.10.9.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">TRKP<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>
</th>
<td id="S4.T2.1.1.10.9.2" class="ltx_td ltx_align_center">-</td>
<td id="S4.T2.1.1.10.9.3" class="ltx_td ltx_align_center">-</td>
<td id="S4.T2.1.1.10.9.4" class="ltx_td ltx_align_center">58.4</td>
</tr>
<tr id="S4.T2.1.1.11.10" class="ltx_tr">
<th id="S4.T2.1.1.11.10.1" class="ltx_td ltx_th ltx_th_row"></th>
<th id="S4.T2.1.1.11.10.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r"><span id="S4.T2.1.1.11.10.2.1" class="ltx_text ltx_font_bold">PMT(ours)</span></th>
<td id="S4.T2.1.1.11.10.3" class="ltx_td ltx_align_center">-</td>
<td id="S4.T2.1.1.11.10.4" class="ltx_td ltx_align_center">-</td>
<td id="S4.T2.1.1.11.10.5" class="ltx_td ltx_align_center"><span id="S4.T2.1.1.11.10.5.1" class="ltx_text ltx_font_bold">58.7</span></td>
</tr>
<tr id="S4.T2.1.1.12.11" class="ltx_tr">
<th id="S4.T2.1.1.12.11.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_t" rowspan="2"><span id="S4.T2.1.1.12.11.1.1" class="ltx_text">Oracle</span></th>
<th id="S4.T2.1.1.12.11.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Target-Only</th>
<td id="S4.T2.1.1.12.11.3" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T2.1.1.12.11.4" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T2.1.1.12.11.5" class="ltx_td ltx_align_center ltx_border_t">60.2</td>
</tr>
<tr id="S4.T2.1.1.13.12" class="ltx_tr">
<th id="S4.T2.1.1.13.12.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r">All-Combined</th>
<td id="S4.T2.1.1.13.12.2" class="ltx_td ltx_align_center ltx_border_b">-</td>
<td id="S4.T2.1.1.13.12.3" class="ltx_td ltx_align_center ltx_border_b">-</td>
<td id="S4.T2.1.1.13.12.4" class="ltx_td ltx_align_center ltx_border_b">69.7</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T2.4.1.1" class="ltx_text" style="font-size:90%;">Table 2</span>: </span><span id="S4.T2.5.2" class="ltx_text" style="font-size:90%;">AP for the car class. Our proposed method PMT is compared against the baseline, UDA, MSDA, and oracle methods on the <span id="S4.T2.5.2.1" class="ltx_text ltx_font_italic">Daytime</span> domain of BDD100K dataset. C and K refer to Cityscapes and Kitty datasets.</span></figcaption>
</figure>
</section>
<section id="S4.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.4 </span>Extension to Mixed Domain Adaptation</h3>

<div id="S4.SS4.p1" class="ltx_para">
<p id="S4.SS4.p1.1" class="ltx_p">In the MSDA, the domain shift among source data is not always limited to one factor. So, a setting with domain shift with multiple factors is considered for validation. In the source domain, we considered the MS COCO<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib16" title="" class="ltx_ref">16</a>]</cite>, Cityscapes<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib4" title="" class="ltx_ref">4</a>]</cite>, and Synscapes<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib25" title="" class="ltx_ref">25</a>]</cite> datasets, and the Daytime domain of the BDD100K dataset are the target domain. Among the source domains, the domain shift is mixed and there are more classes, making this study a challenging scenario. Also, the number of source domains is increased from two to three. The source domain has 99,724 (2,975 Cityscapes + 71,749 MS COCO + 25,000 Synscapes) labeled images and, the target domain has 36,728 unlabeled images. The evaluation is performed on 5,258 validation set images of Daytime. For training and evaluation, we only employ the images having 7 common object categories between the datasets. From the results reported in Table <a href="#S4.T3" title="Table 3 ‣ 4.4 Extension to Mixed Domain Adaptation ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a>, we can observe that the Source-Only setting performs better than the UDA Blending setting. This is because of the complex domain shift among the source data. When only Cityscapes and MS COCO are used as the source domain, our method outperforms the previous best-performing method by 3.4%. After adding the Synscapes dataset our method still outperforms other methods, including the Oracle Target-Only results.</p>
</div>
<figure id="S4.T3" class="ltx_table">
<div id="S4.T3.2" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:238.5pt;height:87.5pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-77.0pt,28.3pt) scale(0.60757102336393,0.60757102336393) ;">
<table id="S4.T3.2.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T3.2.1.1.1" class="ltx_tr">
<th id="S4.T3.2.1.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_t"><span id="S4.T3.2.1.1.1.1.1" class="ltx_text ltx_font_bold">Setting</span></th>
<th id="S4.T3.2.1.1.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t"><span id="S4.T3.2.1.1.1.2.1" class="ltx_text ltx_font_bold">Method</span></th>
<th id="S4.T3.2.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t"><span id="S4.T3.2.1.1.1.3.1" class="ltx_text ltx_font_bold">C</span></th>
<th id="S4.T3.2.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t"><span id="S4.T3.2.1.1.1.4.1" class="ltx_text ltx_font_bold">C + M</span></th>
<th id="S4.T3.2.1.1.1.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t"><span id="S4.T3.2.1.1.1.5.1" class="ltx_text ltx_font_bold">C + M + S</span></th>
</tr>
<tr id="S4.T3.2.1.2.2" class="ltx_tr">
<th id="S4.T3.2.1.2.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_tt">Source Only</th>
<th id="S4.T3.2.1.2.2.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_tt">FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>
</th>
<th id="S4.T3.2.1.2.2.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">23.4</th>
<th id="S4.T3.2.1.2.2.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">29.7</th>
<th id="S4.T3.2.1.2.2.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_tt">30.9</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T3.2.1.3.1" class="ltx_tr">
<th id="S4.T3.2.1.3.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" rowspan="2"><span id="S4.T3.2.1.3.1.1.1" class="ltx_text">UDA Blending</span></th>
<th id="S4.T3.2.1.3.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Unbiased Teach.<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite>
</th>
<td id="S4.T3.2.1.3.1.3" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T3.2.1.3.1.4" class="ltx_td ltx_align_center ltx_border_t">18.5</td>
<td id="S4.T3.2.1.3.1.5" class="ltx_td ltx_align_center ltx_border_t">25.1</td>
</tr>
<tr id="S4.T3.2.1.4.2" class="ltx_tr">
<th id="S4.T3.2.1.4.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Adaptive Teach.<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>
</th>
<td id="S4.T3.2.1.4.2.2" class="ltx_td ltx_align_center">-</td>
<td id="S4.T3.2.1.4.2.3" class="ltx_td ltx_align_center">22.9</td>
<td id="S4.T3.2.1.4.2.4" class="ltx_td ltx_align_center">29.6</td>
</tr>
<tr id="S4.T3.2.1.5.3" class="ltx_tr">
<th id="S4.T3.2.1.5.3.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_t" rowspan="2"><span id="S4.T3.2.1.5.3.1.1" class="ltx_text">MSDA</span></th>
<th id="S4.T3.2.1.5.3.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">TRKP<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>
</th>
<td id="S4.T3.2.1.5.3.3" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T3.2.1.5.3.4" class="ltx_td ltx_align_center ltx_border_t">35.3</td>
<td id="S4.T3.2.1.5.3.5" class="ltx_td ltx_align_center ltx_border_t">37.1</td>
</tr>
<tr id="S4.T3.2.1.6.4" class="ltx_tr">
<th id="S4.T3.2.1.6.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r"><span id="S4.T3.2.1.6.4.1.1" class="ltx_text ltx_font_bold">PMT(ours)</span></th>
<td id="S4.T3.2.1.6.4.2" class="ltx_td ltx_align_center">-</td>
<td id="S4.T3.2.1.6.4.3" class="ltx_td ltx_align_center"><span id="S4.T3.2.1.6.4.3.1" class="ltx_text ltx_font_bold">38.7</span></td>
<td id="S4.T3.2.1.6.4.4" class="ltx_td ltx_align_center"><span id="S4.T3.2.1.6.4.4.1" class="ltx_text ltx_font_bold">39.7</span></td>
</tr>
<tr id="S4.T3.2.1.7.5" class="ltx_tr">
<th id="S4.T3.2.1.7.5.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_t" rowspan="2"><span id="S4.T3.2.1.7.5.1.1" class="ltx_text">Oracle</span></th>
<th id="S4.T3.2.1.7.5.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Target-Only</th>
<td id="S4.T3.2.1.7.5.3" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T3.2.1.7.5.4" class="ltx_td ltx_align_center ltx_border_t">-</td>
<td id="S4.T3.2.1.7.5.5" class="ltx_td ltx_align_center ltx_border_t">38.6</td>
</tr>
<tr id="S4.T3.2.1.8.6" class="ltx_tr">
<th id="S4.T3.2.1.8.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r">All-Combined</th>
<td id="S4.T3.2.1.8.6.2" class="ltx_td ltx_align_center ltx_border_b">-</td>
<td id="S4.T3.2.1.8.6.3" class="ltx_td ltx_align_center ltx_border_b">47.1</td>
<td id="S4.T3.2.1.8.6.4" class="ltx_td ltx_align_center ltx_border_b">48.2</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T3.4.1.1" class="ltx_text" style="font-size:90%;">Table 3</span>: </span><span id="S4.T3.5.2" class="ltx_text" style="font-size:90%;"> mAP on 7 object categories of our PMT compared against baselines on the <span id="S4.T3.5.2.1" class="ltx_text ltx_font_italic">Daytime</span> domain of BDD100K. C, M, and S refer to Cityscapes, MS COCO, and Synscapes datasets.</span></figcaption>
</figure>
</section>
<section id="S4.SS5" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.5 </span>Ablation Study</h3>

<div id="S4.SS5.p1" class="ltx_para">
<p id="S4.SS5.p1.1" class="ltx_p">The cross-time adaptation setting is used in the ablation studies. The two main components of our method are the prototype network and multi-class discriminator. To clearly disentangle the effect of terms in the contrastive loss for prototypes, we considered them as two separate parts: “prototype separation” and “prototype alignment” part. The prototype separation loss increases the distance between different object categories across domains, whereas the prototype alignment loss aligns the same object category across various domains. The experimental results shown in Table <a href="#S4.T4" title="Table 4 ‣ 4.5 Ablation Study ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a> show that the results without using the discriminator and prototype are better than the Source-Only result of Table <a href="#S4.T1" title="Table 1 ‣ 4.2 Cross Time Adaptation ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a>. This is due to the effectiveness of the mean-teacher framework in MSDA. By adding the discriminator to the network, performance is increased by 10.2%. This result is already better than the previous state of art MSDA methods for OD. By adding both of our prototype loss terms individually, the performance of the model further increases. Note that using the alignment loss performs better than the separation loss because the separation loss only discriminates the categories, and the vanilla FRCNN is already doing it. Finally, when both the prototype loss terms are combined, the performance is further improved.</p>
</div>
<figure id="S4.T4" class="ltx_table">
<div id="S4.T4.9" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:198.7pt;height:113.8pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-10.7pt,6.1pt) scale(0.902835165170328,0.902835165170328) ;">
<table id="S4.T4.9.9" class="ltx_tabular ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S4.T4.9.9.10.1" class="ltx_tr">
<td id="S4.T4.9.9.10.1.1" class="ltx_td ltx_align_center ltx_border_t"><span id="S4.T4.9.9.10.1.1.1" class="ltx_text ltx_font_bold">Multidomain</span></td>
<td id="S4.T4.9.9.10.1.2" class="ltx_td ltx_align_center ltx_border_t"><span id="S4.T4.9.9.10.1.2.1" class="ltx_text ltx_font_bold">Prototype</span></td>
<td id="S4.T4.9.9.10.1.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span id="S4.T4.9.9.10.1.3.1" class="ltx_text ltx_font_bold">Prototype</span></td>
<td id="S4.T4.9.9.10.1.4" class="ltx_td ltx_border_t"></td>
</tr>
<tr id="S4.T4.1.1.1" class="ltx_tr">
<td id="S4.T4.1.1.1.2" class="ltx_td ltx_align_center"><span id="S4.T4.1.1.1.2.1" class="ltx_text ltx_font_bold">Discriminator</span></td>
<td id="S4.T4.1.1.1.3" class="ltx_td ltx_align_center"><span id="S4.T4.1.1.1.3.1" class="ltx_text ltx_font_bold">Separation</span></td>
<td id="S4.T4.1.1.1.4" class="ltx_td ltx_align_center ltx_border_r"><span id="S4.T4.1.1.1.4.1" class="ltx_text ltx_font_bold">Alignment</span></td>
<td id="S4.T4.1.1.1.1" class="ltx_td ltx_align_center"><math id="S4.T4.1.1.1.1.m1.1" class="ltx_Math" alttext="\textrm{AP}_{50}" display="inline"><semantics id="S4.T4.1.1.1.1.m1.1a"><msub id="S4.T4.1.1.1.1.m1.1.1" xref="S4.T4.1.1.1.1.m1.1.1.cmml"><mtext class="ltx_mathvariant_bold" id="S4.T4.1.1.1.1.m1.1.1.2" xref="S4.T4.1.1.1.1.m1.1.1.2a.cmml">AP</mtext><mn id="S4.T4.1.1.1.1.m1.1.1.3" xref="S4.T4.1.1.1.1.m1.1.1.3.cmml">50</mn></msub><annotation-xml encoding="MathML-Content" id="S4.T4.1.1.1.1.m1.1b"><apply id="S4.T4.1.1.1.1.m1.1.1.cmml" xref="S4.T4.1.1.1.1.m1.1.1"><csymbol cd="ambiguous" id="S4.T4.1.1.1.1.m1.1.1.1.cmml" xref="S4.T4.1.1.1.1.m1.1.1">subscript</csymbol><ci id="S4.T4.1.1.1.1.m1.1.1.2a.cmml" xref="S4.T4.1.1.1.1.m1.1.1.2"><mtext class="ltx_mathvariant_bold" id="S4.T4.1.1.1.1.m1.1.1.2.cmml" xref="S4.T4.1.1.1.1.m1.1.1.2">AP</mtext></ci><cn type="integer" id="S4.T4.1.1.1.1.m1.1.1.3.cmml" xref="S4.T4.1.1.1.1.m1.1.1.3">50</cn></apply></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.1.1.1.1.m1.1c">\textrm{AP}_{50}</annotation></semantics></math></td>
</tr>
<tr id="S4.T4.9.9.11.2" class="ltx_tr">
<td id="S4.T4.9.9.11.2.1" class="ltx_td ltx_border_tt"></td>
<td id="S4.T4.9.9.11.2.2" class="ltx_td ltx_border_tt"></td>
<td id="S4.T4.9.9.11.2.3" class="ltx_td ltx_border_r ltx_border_tt"></td>
<td id="S4.T4.9.9.11.2.4" class="ltx_td ltx_align_center ltx_border_tt">31.7</td>
</tr>
<tr id="S4.T4.2.2.2" class="ltx_tr">
<td id="S4.T4.2.2.2.1" class="ltx_td ltx_align_center"><math id="S4.T4.2.2.2.1.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="S4.T4.2.2.2.1.m1.1a"><mi mathvariant="normal" id="S4.T4.2.2.2.1.m1.1.1" xref="S4.T4.2.2.2.1.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="S4.T4.2.2.2.1.m1.1b"><ci id="S4.T4.2.2.2.1.m1.1.1.cmml" xref="S4.T4.2.2.2.1.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.2.2.2.1.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="S4.T4.2.2.2.2" class="ltx_td"></td>
<td id="S4.T4.2.2.2.3" class="ltx_td ltx_border_r"></td>
<td id="S4.T4.2.2.2.4" class="ltx_td ltx_align_center">41.9</td>
</tr>
<tr id="S4.T4.4.4.4" class="ltx_tr">
<td id="S4.T4.3.3.3.1" class="ltx_td ltx_align_center"><math id="S4.T4.3.3.3.1.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="S4.T4.3.3.3.1.m1.1a"><mi mathvariant="normal" id="S4.T4.3.3.3.1.m1.1.1" xref="S4.T4.3.3.3.1.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="S4.T4.3.3.3.1.m1.1b"><ci id="S4.T4.3.3.3.1.m1.1.1.cmml" xref="S4.T4.3.3.3.1.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.3.3.3.1.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="S4.T4.4.4.4.2" class="ltx_td ltx_align_center"><math id="S4.T4.4.4.4.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="S4.T4.4.4.4.2.m1.1a"><mi mathvariant="normal" id="S4.T4.4.4.4.2.m1.1.1" xref="S4.T4.4.4.4.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="S4.T4.4.4.4.2.m1.1b"><ci id="S4.T4.4.4.4.2.m1.1.1.cmml" xref="S4.T4.4.4.4.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.4.4.4.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="S4.T4.4.4.4.3" class="ltx_td ltx_border_r"></td>
<td id="S4.T4.4.4.4.4" class="ltx_td ltx_align_center">43.0</td>
</tr>
<tr id="S4.T4.6.6.6" class="ltx_tr">
<td id="S4.T4.5.5.5.1" class="ltx_td ltx_align_center"><math id="S4.T4.5.5.5.1.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="S4.T4.5.5.5.1.m1.1a"><mi mathvariant="normal" id="S4.T4.5.5.5.1.m1.1.1" xref="S4.T4.5.5.5.1.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="S4.T4.5.5.5.1.m1.1b"><ci id="S4.T4.5.5.5.1.m1.1.1.cmml" xref="S4.T4.5.5.5.1.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.5.5.5.1.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="S4.T4.6.6.6.3" class="ltx_td"></td>
<td id="S4.T4.6.6.6.2" class="ltx_td ltx_align_center ltx_border_r"><math id="S4.T4.6.6.6.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="S4.T4.6.6.6.2.m1.1a"><mi mathvariant="normal" id="S4.T4.6.6.6.2.m1.1.1" xref="S4.T4.6.6.6.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="S4.T4.6.6.6.2.m1.1b"><ci id="S4.T4.6.6.6.2.m1.1.1.cmml" xref="S4.T4.6.6.6.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.6.6.6.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="S4.T4.6.6.6.4" class="ltx_td ltx_align_center">43.4</td>
</tr>
<tr id="S4.T4.9.9.9" class="ltx_tr">
<td id="S4.T4.7.7.7.1" class="ltx_td ltx_align_center ltx_border_b"><math id="S4.T4.7.7.7.1.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="S4.T4.7.7.7.1.m1.1a"><mi mathvariant="normal" id="S4.T4.7.7.7.1.m1.1.1" xref="S4.T4.7.7.7.1.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="S4.T4.7.7.7.1.m1.1b"><ci id="S4.T4.7.7.7.1.m1.1.1.cmml" xref="S4.T4.7.7.7.1.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.7.7.7.1.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="S4.T4.8.8.8.2" class="ltx_td ltx_align_center ltx_border_b"><math id="S4.T4.8.8.8.2.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="S4.T4.8.8.8.2.m1.1a"><mi mathvariant="normal" id="S4.T4.8.8.8.2.m1.1.1" xref="S4.T4.8.8.8.2.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="S4.T4.8.8.8.2.m1.1b"><ci id="S4.T4.8.8.8.2.m1.1.1.cmml" xref="S4.T4.8.8.8.2.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.8.8.8.2.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="S4.T4.9.9.9.3" class="ltx_td ltx_align_center ltx_border_b ltx_border_r"><math id="S4.T4.9.9.9.3.m1.1" class="ltx_Math" alttext="\checkmark" display="inline"><semantics id="S4.T4.9.9.9.3.m1.1a"><mi mathvariant="normal" id="S4.T4.9.9.9.3.m1.1.1" xref="S4.T4.9.9.9.3.m1.1.1.cmml">✓</mi><annotation-xml encoding="MathML-Content" id="S4.T4.9.9.9.3.m1.1b"><ci id="S4.T4.9.9.9.3.m1.1.1.cmml" xref="S4.T4.9.9.9.3.m1.1.1">✓</ci></annotation-xml><annotation encoding="application/x-tex" id="S4.T4.9.9.9.3.m1.1c">\checkmark</annotation></semantics></math></td>
<td id="S4.T4.9.9.9.4" class="ltx_td ltx_align_center ltx_border_b">45.3</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T4.11.1.1" class="ltx_text" style="font-size:90%;">Table 4</span>: </span><span id="S4.T4.12.2" class="ltx_text" style="font-size:90%;">Ablation study on the components of our PMT method.</span></figcaption>
</figure>
</section>
<section id="S4.SS6" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">4.6 </span>Parameter Growth with Number of Domains</h3>

<div id="S4.SS6.p1" class="ltx_para">
<p id="S4.SS6.p1.1" class="ltx_p">One of the important advantages of not using domain-specific weights is the reduction in the number of parameters to learn. While the existing MSDA detectors have a significant linear growth in parameters with the number of domains, the parameter growth of our method is negligible as the number of source domains increases. <a href="#S4.T5" title="In 4.6 Parameter Growth with Number of Domains ‣ 4 Results and Discussion ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Tab.</span> <span class="ltx_text ltx_ref_tag">5</span></a> illustrates this. DMSN <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> makes some part of the feature extractor also domain-specific, thus showing a significantly higher rate of growth compared to other methods. TRKP <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite> makes only the detection heads domain-specific, so the growth rate is less compared to DMSN. Our method has only domain-specific prototypes which require fewer parameters per domain than the other approaches.</p>
</div>
<figure id="S4.T5" class="ltx_table">
<div id="S4.T5.2" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:233.5pt;height:69.2pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-35.0pt,10.4pt) scale(0.769220631737204,0.769220631737204) ;">
<table id="S4.T5.2.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S4.T5.2.1.1.1" class="ltx_tr">
<th id="S4.T5.2.1.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t" rowspan="2"><span id="S4.T5.2.1.1.1.1.1" class="ltx_text ltx_font_bold">Method</span></th>
<th id="S4.T5.2.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t" colspan="5">Number of source domains</th>
</tr>
<tr id="S4.T5.2.1.2.2" class="ltx_tr">
<th id="S4.T5.2.1.2.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t">1</th>
<th id="S4.T5.2.1.2.2.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t">2</th>
<th id="S4.T5.2.1.2.2.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t">3</th>
<th id="S4.T5.2.1.2.2.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t">4</th>
<th id="S4.T5.2.1.2.2.5" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t">5</th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S4.T5.2.1.3.1" class="ltx_tr">
<th id="S4.T5.2.1.3.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_tt">DMSN <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite>
</th>
<td id="S4.T5.2.1.3.1.2" class="ltx_td ltx_align_center ltx_border_tt">45.994</td>
<td id="S4.T5.2.1.3.1.3" class="ltx_td ltx_align_center ltx_border_tt">75.426</td>
<td id="S4.T5.2.1.3.1.4" class="ltx_td ltx_align_center ltx_border_tt">104.858</td>
<td id="S4.T5.2.1.3.1.5" class="ltx_td ltx_align_center ltx_border_tt">134.290</td>
<td id="S4.T5.2.1.3.1.6" class="ltx_td ltx_align_center ltx_border_tt">163.722</td>
</tr>
<tr id="S4.T5.2.1.4.2" class="ltx_tr">
<th id="S4.T5.2.1.4.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">TRKP <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>
</th>
<td id="S4.T5.2.1.4.2.2" class="ltx_td ltx_align_center">45.994</td>
<td id="S4.T5.2.1.4.2.3" class="ltx_td ltx_align_center">59.942</td>
<td id="S4.T5.2.1.4.2.4" class="ltx_td ltx_align_center">73.890</td>
<td id="S4.T5.2.1.4.2.5" class="ltx_td ltx_align_center">87.838</td>
<td id="S4.T5.2.1.4.2.6" class="ltx_td ltx_align_center">101.786</td>
</tr>
<tr id="S4.T5.2.1.5.3" class="ltx_tr">
<th id="S4.T5.2.1.5.3.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r"><span id="S4.T5.2.1.5.3.1.1" class="ltx_text ltx_font_bold">PMT (ours)</span></th>
<td id="S4.T5.2.1.5.3.2" class="ltx_td ltx_align_center ltx_border_b">46.586</td>
<td id="S4.T5.2.1.5.3.3" class="ltx_td ltx_align_center ltx_border_b">46.587</td>
<td id="S4.T5.2.1.5.3.4" class="ltx_td ltx_align_center ltx_border_b">46.588</td>
<td id="S4.T5.2.1.5.3.5" class="ltx_td ltx_align_center ltx_border_b">46.589</td>
<td id="S4.T5.2.1.5.3.6" class="ltx_td ltx_align_center ltx_border_b">46.590</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S4.T5.3.1.1" class="ltx_text" style="font-size:90%;">Table 5</span>: </span><span id="S4.T5.4.2" class="ltx_text" style="font-size:90%;">The growth of model parameter (in millions) as the number of source domains increases. While the parameters of DMSN <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite> and TRKP <cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite> grow quickly, the parameters of our method PMT remain almost constant because the increase is only due to the prototype vectors.</span></figcaption>
</figure>
</section>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Conclusion</h2>

<div id="S5.p1" class="ltx_para">
<p id="S5.p1.1" class="ltx_p">State-of-the-art approaches for MSDA learn domain-invariant and domain-specific parameters for each source domain to effectively adapt DL models from multiple source domains. In this paper, a new MSDA method is proposed, where domain-specific information is encoded using class prototypes. This avoids the need to train a domain-specific subnet for each source domain, simplifying the MSDA architecture significantly. The number of parameters required for our method remains almost constant regardless of the number of source domains, and it is comparable to adaptation with single-source UDA methods, since only prototype vectors are needed for each source domain. Experimental results indicate that our PMT method can effectively exploit multiple domains and outperform state-of-the-art methods on challenging OD baselines.</p>
</div>
<div id="S5.p2" class="ltx_para ltx_noindent">
<p id="S5.p2.1" class="ltx_p"><span id="S5.p2.1.1" class="ltx_text ltx_font_bold">Acknowledgement-</span> This work was supported by the MITACS, Natural Sciences and Engineering Research Council of Canada, and the Digital Research Alliance of Canada.</p>
</div>
</section>
<section id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_title_bibliography" style="font-size:90%;">References</h2>

<ul class="ltx_biblist">
<li id="bib.bib1" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[1]</span>
<span class="ltx_bibblock"><span id="bib.bib1.1.1" class="ltx_text" style="font-size:90%;">
Qi Cai, Yingwei Pan, Chong-Wah Ngo, Xinmei Tian, Lingyu Duan, and Ting Yao.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib1.2.1" class="ltx_text" style="font-size:90%;">Exploring object relation in mean teacher for cross-domain detection, 2019.
</span>
</span>
</li>
<li id="bib.bib2" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[2]</span>
<span class="ltx_bibblock"><span id="bib.bib2.1.1" class="ltx_text" style="font-size:90%;">
N. Carion, F. Massa, G. Synnaeve, N. Usunier, A. Kirillov, and S. Zagoruyko.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib2.2.1" class="ltx_text" style="font-size:90%;">End-to-end object detection with transformers.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib2.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib2.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">ECCV</span><span id="bib.bib2.5.3" class="ltx_text" style="font-size:90%;">, 2020.
</span>
</span>
</li>
<li id="bib.bib3" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[3]</span>
<span class="ltx_bibblock"><span id="bib.bib3.1.1" class="ltx_text" style="font-size:90%;">
Yuhua Chen, Wen Li, Christos Sakaridis, Dengxin Dai, and Luc Van Gool.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib3.2.1" class="ltx_text" style="font-size:90%;">Domain adaptive faster r-cnn for object detection in the wild, 2018.
</span>
</span>
</li>
<li id="bib.bib4" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[4]</span>
<span class="ltx_bibblock"><span id="bib.bib4.1.1" class="ltx_text" style="font-size:90%;">
Marius Cordts, Mohamed Omran, Sebastian Ramos, Timo Rehfeld, Markus Enzweiler, Rodrigo Benenson, Uwe Franke, Stefan Roth, and Bernt Schiele.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib4.2.1" class="ltx_text" style="font-size:90%;">The cityscapes dataset for semantic urban scene understanding.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib4.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib4.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">Proc. of the IEEE Conference on Computer Vision and Pattern Recognition (CVPR)</span><span id="bib.bib4.5.3" class="ltx_text" style="font-size:90%;">, 2016.
</span>
</span>
</li>
<li id="bib.bib5" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[5]</span>
<span class="ltx_bibblock"><span id="bib.bib5.1.1" class="ltx_text" style="font-size:90%;">
Jinhong Deng, Wen Li, Yuhua Chen, and Lixin Duan.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib5.2.1" class="ltx_text" style="font-size:90%;">Unbiased mean teacher for cross-domain object detection, 2021.
</span>
</span>
</li>
<li id="bib.bib6" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[6]</span>
<span class="ltx_bibblock"><span id="bib.bib6.1.1" class="ltx_text" style="font-size:90%;">
M. Everingham, L. Van Gool, C. K. Williams, J. Winn, and A. Zisserman.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib6.2.1" class="ltx_text" style="font-size:90%;">The pascal visual object classes (voc) challenge.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib6.3.1" class="ltx_text ltx_font_italic" style="font-size:90%;">IJCV</span><span id="bib.bib6.4.2" class="ltx_text" style="font-size:90%;">, 2010.
</span>
</span>
</li>
<li id="bib.bib7" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[7]</span>
<span class="ltx_bibblock"><span id="bib.bib7.1.1" class="ltx_text" style="font-size:90%;">
Yaroslav Ganin and Victor Lempitsky.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib7.2.1" class="ltx_text" style="font-size:90%;">Unsupervised domain adaptation by backpropagation, 2015.
</span>
</span>
</li>
<li id="bib.bib8" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[8]</span>
<span class="ltx_bibblock"><span id="bib.bib8.1.1" class="ltx_text" style="font-size:90%;">
Andreas Geiger, Philip Lenz, and Raquel Urtasun.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib8.2.1" class="ltx_text" style="font-size:90%;">Are we ready for autonomous driving? the kitti vision benchmark suite.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib8.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib8.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">Conference on Computer Vision and Pattern Recognition (CVPR)</span><span id="bib.bib8.5.3" class="ltx_text" style="font-size:90%;">, 2012.
</span>
</span>
</li>
<li id="bib.bib9" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[9]</span>
<span class="ltx_bibblock"><span id="bib.bib9.1.1" class="ltx_text" style="font-size:90%;">
Kaiming He, Georgia Gkioxari, Piotr Dollár, and Ross Girshick.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib9.2.1" class="ltx_text" style="font-size:90%;">Mask r-cnn, 2018.
</span>
</span>
</li>
<li id="bib.bib10" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[10]</span>
<span class="ltx_bibblock"><span id="bib.bib10.1.1" class="ltx_text" style="font-size:90%;">
Han-Kai Hsu, Chun-Han Yao, Yi-Hsuan Tsai, Wei-Chih Hung, Hung-Yu Tseng, Maneesh Singh, and Ming-Hsuan Yang.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib10.2.1" class="ltx_text" style="font-size:90%;">Progressive domain adaptation for object detection, 2019.
</span>
</span>
</li>
<li id="bib.bib11" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[11]</span>
<span class="ltx_bibblock"><span id="bib.bib11.1.1" class="ltx_text" style="font-size:90%;">
K J Joseph, Salman Khan, Fahad Shahbaz Khan, and Vineeth N Balasubramanian.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib11.2.1" class="ltx_text" style="font-size:90%;">Towards open world object detection.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib11.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib11.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">Proceedings of the IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR 2021)</span><span id="bib.bib11.5.3" class="ltx_text" style="font-size:90%;">, 2021.
</span>
</span>
</li>
<li id="bib.bib12" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[12]</span>
<span class="ltx_bibblock"><span id="bib.bib12.1.1" class="ltx_text" style="font-size:90%;">
Mehran Khodabandeh, Arash Vahdat, Mani Ranjbar, and William G. Macready.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib12.2.1" class="ltx_text" style="font-size:90%;">A robust learning approach to domain adaptive object detection, 2019.
</span>
</span>
</li>
<li id="bib.bib13" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[13]</span>
<span class="ltx_bibblock"><span id="bib.bib13.1.1" class="ltx_text" style="font-size:90%;">
Seunghyeon Kim, Jaehoon Choi, Taekyung Kim, and Changick Kim.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib13.2.1" class="ltx_text" style="font-size:90%;">Self-training and adversarial background regularization for unsupervised domain adaptive one-stage object detection.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib13.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib13.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">2019 IEEE/CVF International Conference on Computer Vision (ICCV)</span><span id="bib.bib13.5.3" class="ltx_text" style="font-size:90%;">, pages 6091–6100, 2019.
</span>
</span>
</li>
<li id="bib.bib14" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[14]</span>
<span class="ltx_bibblock"><span id="bib.bib14.1.1" class="ltx_text" style="font-size:90%;">
Aoxue Li, Peng Yuan, and Zhenguo Li.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib14.2.1" class="ltx_text" style="font-size:90%;">Semi-supervised object detection via multi-instance alignment with global class prototypes.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib14.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib14.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">2022 IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR)</span><span id="bib.bib14.5.3" class="ltx_text" style="font-size:90%;">, 2022.
</span>
</span>
</li>
<li id="bib.bib15" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[15]</span>
<span class="ltx_bibblock"><span id="bib.bib15.1.1" class="ltx_text" style="font-size:90%;">
Yu-Jhe Li, Xiaoliang Dai, Chih-Yao Ma, Yen-Cheng Liu, Kan Chen, Bichen Wu, Zijian He, Kris Kitani, and Peter Vajda.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib15.2.1" class="ltx_text" style="font-size:90%;">Cross-domain adaptive teacher for object detection.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib15.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib15.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">CVPR</span><span id="bib.bib15.5.3" class="ltx_text" style="font-size:90%;">, 2022.
</span>
</span>
</li>
<li id="bib.bib16" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[16]</span>
<span class="ltx_bibblock"><span id="bib.bib16.1.1" class="ltx_text" style="font-size:90%;">
T.-Y. Lin, M. Maire, S. Belongie, J. Hays, P. Perona, D. Ramanan, P. Dollar, and C. L. Zitnick.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib16.2.1" class="ltx_text" style="font-size:90%;">Microsoft COCO: Common objects in context.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib16.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib16.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">ECCV</span><span id="bib.bib16.5.3" class="ltx_text" style="font-size:90%;">, 2014.
</span>
</span>
</li>
<li id="bib.bib17" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[17]</span>
<span class="ltx_bibblock"><span id="bib.bib17.1.1" class="ltx_text" style="font-size:90%;">
Yen-Cheng Liu, Chih-Yao Ma, Zijian He, Chia-Wen Kuo, Kan Chen, Peizhao Zhang, Bichen Wu, Zsolt Kira, and Peter Vajda.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib17.2.1" class="ltx_text" style="font-size:90%;">Unbiased teacher for semi-supervised object detection, 2021.
</span>
</span>
</li>
<li id="bib.bib18" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[18]</span>
<span class="ltx_bibblock"><span id="bib.bib18.1.1" class="ltx_text" style="font-size:90%;">
G. Park and S. Wan Lee.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib18.2.1" class="ltx_text" style="font-size:90%;">Information-theoretic regularization for multi-source domain adaptation.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib18.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib18.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">2021 IEEE/CVF International Conference on Computer Vision (ICCV)</span><span id="bib.bib18.5.3" class="ltx_text" style="font-size:90%;">, pages 9194–9203, 2021.
</span>
</span>
</li>
<li id="bib.bib19" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[19]</span>
<span class="ltx_bibblock"><span id="bib.bib19.1.1" class="ltx_text" style="font-size:90%;">
Adam Paszke, Sam Gross, Francisco Massa, Adam Lerer, James Bradbury, Gregory Chanan, Trevor Killeen, Zeming Lin, Natalia Gimelshein, Luca Antiga, Alban Desmaison, Andreas Kopf, Edward Yang, Zachary DeVito, Martin Raison, Alykhan Tejani, Sasank Chilamkurthy, Benoit Steiner, Lu Fang, Junjie Bai, and Soumith Chintala.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib19.2.1" class="ltx_text" style="font-size:90%;">Pytorch: An imperative style, high-performance deep learning library.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib19.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib19.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">Advances in Neural Information Processing Systems 32</span><span id="bib.bib19.5.3" class="ltx_text" style="font-size:90%;">, pages 8024–8035. Curran Associates, Inc., 2019.
</span>
</span>
</li>
<li id="bib.bib20" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[20]</span>
<span class="ltx_bibblock"><span id="bib.bib20.1.1" class="ltx_text" style="font-size:90%;">
Xingchao Peng, Qinxun Bai, Xide Xia, Zijun Huang, Kate Saenko, and Bo Wang.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib20.2.1" class="ltx_text" style="font-size:90%;">Moment matching for multi-source domain adaptation, 2019.
</span>
</span>
</li>
<li id="bib.bib21" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[21]</span>
<span class="ltx_bibblock"><span id="bib.bib21.1.1" class="ltx_text" style="font-size:90%;">
S. Ren, K. He, R. Girshick, and J. Sun.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib21.2.1" class="ltx_text" style="font-size:90%;">Faster R-CNN: Towards real-time object detection with region proposal networks.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib21.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib21.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">NeurIPS</span><span id="bib.bib21.5.3" class="ltx_text" style="font-size:90%;">, 2015.
</span>
</span>
</li>
<li id="bib.bib22" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[22]</span>
<span class="ltx_bibblock"><span id="bib.bib22.1.1" class="ltx_text" style="font-size:90%;">
Kuniaki Saito, Yoshitaka Ushiku, Tatsuya Harada, and Kate Saenko.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib22.2.1" class="ltx_text" style="font-size:90%;">Strong-weak distribution alignment for adaptive object detection, 2019.
</span>
</span>
</li>
<li id="bib.bib23" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[23]</span>
<span class="ltx_bibblock"><span id="bib.bib23.1.1" class="ltx_text" style="font-size:90%;">
Antti Tarvainen and Harri Valpola.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib23.2.1" class="ltx_text" style="font-size:90%;">Mean teachers are better role models: Weight-averaged consistency targets improve semi-supervised deep learning results.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib23.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib23.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">NeurIPS</span><span id="bib.bib23.5.3" class="ltx_text" style="font-size:90%;">, 2018.
</span>
</span>
</li>
<li id="bib.bib24" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[24]</span>
<span class="ltx_bibblock"><span id="bib.bib24.1.1" class="ltx_text" style="font-size:90%;">
Zhi Tian, Chunhua Shen, Hao Chen, and Tong He.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib24.2.1" class="ltx_text" style="font-size:90%;">Fcos: Fully convolutional one-stage object detection, 2019.
</span>
</span>
</li>
<li id="bib.bib25" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[25]</span>
<span class="ltx_bibblock"><span id="bib.bib25.1.1" class="ltx_text" style="font-size:90%;">
Magnus Wrenninge and Jonas Unger.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib25.2.1" class="ltx_text" style="font-size:90%;">Synscapes: A photorealistic synthetic dataset for street scene parsing, 2018.
</span>
</span>
</li>
<li id="bib.bib26" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[26]</span>
<span class="ltx_bibblock"><span id="bib.bib26.1.1" class="ltx_text" style="font-size:90%;">
Aming Wu, Yahong Han, Linchao Zhu, Yi Yang, and Cheng Deng.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib26.2.1" class="ltx_text" style="font-size:90%;">Universal-prototype augmentation for few-shot object detection.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib26.3.1" class="ltx_text" style="font-size:90%;">2021.
</span>
</span>
</li>
<li id="bib.bib27" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[27]</span>
<span class="ltx_bibblock"><span id="bib.bib27.1.1" class="ltx_text" style="font-size:90%;">
Jiaxi Wu, Jiaxin Chen, Mengzhe He, Yiru Wang, Bo Li, Bingqi Ma, Weihao Gan, Wei Wu, Yali Wang, and Di Huang.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib27.2.1" class="ltx_text" style="font-size:90%;">Target-relevant knowledge preservation for multi-source domain adaptive object detection, 2022.
</span>
</span>
</li>
<li id="bib.bib28" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[28]</span>
<span class="ltx_bibblock"><span id="bib.bib28.1.1" class="ltx_text" style="font-size:90%;">
Yuxin Wu, Alexander Kirillov, Francisco Massa, Wan-Yen Lo, and Ross Girshick.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib28.2.1" class="ltx_text" style="font-size:90%;">Detectron2.
</span>
</span>
<span class="ltx_bibblock"><a target="_blank" href="https://github.com/facebookresearch/detectron2" title="" class="ltx_ref ltx_url ltx_font_typewriter" style="font-size:90%;">https://github.com/facebookresearch/detectron2</a><span id="bib.bib28.3.1" class="ltx_text" style="font-size:90%;">, 2019.
</span>
</span>
</li>
<li id="bib.bib29" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[29]</span>
<span class="ltx_bibblock"><span id="bib.bib29.1.1" class="ltx_text" style="font-size:90%;">
Chang-Dong Xu, Xing-Ran Zhao, Xin Jin, and Xiu-Shen Wei.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib29.2.1" class="ltx_text" style="font-size:90%;">Exploring categorical regularization for domain adaptive object detection, 2020.
</span>
</span>
</li>
<li id="bib.bib30" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[30]</span>
<span class="ltx_bibblock"><span id="bib.bib30.1.1" class="ltx_text" style="font-size:90%;">
Minghao Xu, Hang Wang, and Bingbing Ni.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib30.2.1" class="ltx_text" style="font-size:90%;">Graphical modeling for multi-source domain adaptation.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib30.3.1" class="ltx_text ltx_font_italic" style="font-size:90%;">IEEE Transactions on Pattern Analysis and Machine Intelligence</span><span id="bib.bib30.4.2" class="ltx_text" style="font-size:90%;">, 2022.
</span>
</span>
</li>
<li id="bib.bib31" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[31]</span>
<span class="ltx_bibblock"><span id="bib.bib31.1.1" class="ltx_text" style="font-size:90%;">
Minghao Xu, Hang Wang, Bingbing Ni, Qi Tian, and Wenjun Zhang.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib31.2.1" class="ltx_text" style="font-size:90%;">Cross-domain detection via graph-induced prototype alignment.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib31.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib31.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">CVPR</span><span id="bib.bib31.5.3" class="ltx_text" style="font-size:90%;">, pages 12355–12364, 2020.
</span>
</span>
</li>
<li id="bib.bib32" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[32]</span>
<span class="ltx_bibblock"><span id="bib.bib32.1.1" class="ltx_text" style="font-size:90%;">
Minghao Xu, Hang Wang, Bingbing Ni, Qi Tian, and Wenjun Zhang.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib32.2.1" class="ltx_text" style="font-size:90%;">Cross-domain detection via graph-induced prototype alignment, 2020.
</span>
</span>
</li>
<li id="bib.bib33" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[33]</span>
<span class="ltx_bibblock"><span id="bib.bib33.1.1" class="ltx_text" style="font-size:90%;">
Xingxu Yao, Sicheng Zhao, Pengfei Xu, and Jufeng Yang.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib33.2.1" class="ltx_text" style="font-size:90%;">Multi-source domain adaptation for object detection, 2021.
</span>
</span>
</li>
<li id="bib.bib34" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[34]</span>
<span class="ltx_bibblock"><span id="bib.bib34.1.1" class="ltx_text" style="font-size:90%;">
Fisher Yu, Haofeng Chen, Xin Wang, Wenqi Xian, Yingying Chen, Fangchen Liu, Vashisht Madhavan, and Trevor Darrell.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib34.2.1" class="ltx_text" style="font-size:90%;">Bdd100k: A diverse driving dataset for heterogeneous multitask learning, 2020.
</span>
</span>
</li>
<li id="bib.bib35" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[35]</span>
<span class="ltx_bibblock"><span id="bib.bib35.1.1" class="ltx_text" style="font-size:90%;">
Yixin Zhang, Zilei Wang, and Yushi Mao.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib35.2.1" class="ltx_text" style="font-size:90%;">Rpn prototype alignment for domain adaptive object detector.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib35.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib35.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">2021 IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR)</span><span id="bib.bib35.5.3" class="ltx_text" style="font-size:90%;">, 2021.
</span>
</span>
</li>
<li id="bib.bib36" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[36]</span>
<span class="ltx_bibblock"><span id="bib.bib36.1.1" class="ltx_text" style="font-size:90%;">
Han Zhao, Shanghang Zhang, Guanhang Wu, José M. F. Moura, Joao P Costeira, and Geoffrey J Gordon.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib36.2.1" class="ltx_text" style="font-size:90%;">Adversarial multiple source domain adaptation.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib36.3.1" class="ltx_text" style="font-size:90%;">In S. Bengio, H. Wallach, H. Larochelle, K. Grauman, N. Cesa-Bianchi, and R. Garnett, editors, </span><span id="bib.bib36.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">Advances in Neural Information Processing Systems</span><span id="bib.bib36.5.3" class="ltx_text" style="font-size:90%;">, volume 31. Curran Associates, Inc., 2018.
</span>
</span>
</li>
<li id="bib.bib37" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[37]</span>
<span class="ltx_bibblock"><span id="bib.bib37.1.1" class="ltx_text" style="font-size:90%;">
Y. Zheng, D. Huang, S. Liu, and Y. Wang.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib37.2.1" class="ltx_text" style="font-size:90%;">Cross-domain object detection through coarse-to-fine feature adaptation.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib37.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib37.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">CVPR</span><span id="bib.bib37.5.3" class="ltx_text" style="font-size:90%;">, 2020.
</span>
</span>
</li>
<li id="bib.bib38" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[38]</span>
<span class="ltx_bibblock"><span id="bib.bib38.1.1" class="ltx_text" style="font-size:90%;">
X. Zhou, R. Girdhar, A. Joulin, and P. Krähenbühl andd I. Misra.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib38.2.1" class="ltx_text" style="font-size:90%;">Detecting twenty-thousand classes using image-level supervision.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib38.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib38.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">ECCV</span><span id="bib.bib38.5.3" class="ltx_text" style="font-size:90%;">, 2022.
</span>
</span>
</li>
<li id="bib.bib39" class="ltx_bibitem">
<span class="ltx_tag ltx_tag_bibitem">[39]</span>
<span class="ltx_bibblock"><span id="bib.bib39.1.1" class="ltx_text" style="font-size:90%;">
Xinge Zhu, Jiangmiao Pang, Ceyuan Yang, Jianping Shi, and Dahua Lin.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib39.2.1" class="ltx_text" style="font-size:90%;">Adapting object detectors via selective cross-domain alignment.
</span>
</span>
<span class="ltx_bibblock"><span id="bib.bib39.3.1" class="ltx_text" style="font-size:90%;">In </span><span id="bib.bib39.4.2" class="ltx_text ltx_font_italic" style="font-size:90%;">2019 IEEE/CVF Conference on Computer Vision and Pattern Recognition (CVPR)</span><span id="bib.bib39.5.3" class="ltx_text" style="font-size:90%;">, pages 687–696, 2019.
</span>
</span>
</li>
</ul>
</section>
<div class="ltx_pagination ltx_role_newpage"></div>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Appendix</h2>

<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.1 </span>Impact of <math id="S6.SS1.1.m1.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S6.SS1.1.m1.1b"><mi id="S6.SS1.1.m1.1.1" xref="S6.SS1.1.m1.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S6.SS1.1.m1.1c"><ci id="S6.SS1.1.m1.1.1.cmml" xref="S6.SS1.1.m1.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.1.m1.1d">\gamma</annotation></semantics></math> on different settings</h3>

<div id="S6.SS1.p1" class="ltx_para">
<p id="S6.SS1.p1.4" class="ltx_p">The main component responsible for simplifying the MSDA problem with our approach is prototype-based learning.
In this study, we investigate the importance of contrastive loss on prototypes by studying the impact of <math id="S6.SS1.p1.1.m1.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S6.SS1.p1.1.m1.1a"><mi id="S6.SS1.p1.1.m1.1.1" xref="S6.SS1.p1.1.m1.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S6.SS1.p1.1.m1.1b"><ci id="S6.SS1.p1.1.m1.1.1.cmml" xref="S6.SS1.p1.1.m1.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p1.1.m1.1c">\gamma</annotation></semantics></math> in different settings. For experiments, we considered the two cases; Cross Time Adaptation and Mixed Domain Adaptation settings. The Cross Time Adaptation setting is much simpler compared to the Mixed Domain Adaptation setting. By choosing these settings, we get an idea of the effect of <math id="S6.SS1.p1.2.m2.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S6.SS1.p1.2.m2.1a"><mi id="S6.SS1.p1.2.m2.1.1" xref="S6.SS1.p1.2.m2.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S6.SS1.p1.2.m2.1b"><ci id="S6.SS1.p1.2.m2.1.1.cmml" xref="S6.SS1.p1.2.m2.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p1.2.m2.1c">\gamma</annotation></semantics></math> on simple and complex MSDA problems. The analysis result is reported in Table <a href="#S6.T6" title="Table 6 ‣ 6.1 Impact of 𝛾 on different settings ‣ 6 Appendix ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">6</span></a>.
It can be observed that for the Cross Time Adaptation setting, the performance of our method increased with the increase in <math id="S6.SS1.p1.3.m3.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S6.SS1.p1.3.m3.1a"><mi id="S6.SS1.p1.3.m3.1.1" xref="S6.SS1.p1.3.m3.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S6.SS1.p1.3.m3.1b"><ci id="S6.SS1.p1.3.m3.1.1.cmml" xref="S6.SS1.p1.3.m3.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p1.3.m3.1c">\gamma</annotation></semantics></math>, while it decreased for the Mixed Domain Adaptation setting. With the increase in value of <math id="S6.SS1.p1.4.m4.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S6.SS1.p1.4.m4.1a"><mi id="S6.SS1.p1.4.m4.1.1" xref="S6.SS1.p1.4.m4.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S6.SS1.p1.4.m4.1b"><ci id="S6.SS1.p1.4.m4.1.1.cmml" xref="S6.SS1.p1.4.m4.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.SS1.p1.4.m4.1c">\gamma</annotation></semantics></math>, the model is forced to learn a class-conditioned aligned feature space. Learning this feature space is much easier if the domain shift among the datasets is not much. But with the increase in domain shift, learning the aligned feature space becomes difficult.</p>
</div>
<figure id="S6.T6" class="ltx_table">
<div id="S6.T6.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:346.9pt;height:317.6pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(65.3pt,-59.8pt) scale(1.60414668621294,1.60414668621294) ;">
<table id="S6.T6.1.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S6.T6.1.1.1" class="ltx_tr">
<th id="S6.T6.1.1.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t"><math id="S6.T6.1.1.1.1.m1.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S6.T6.1.1.1.1.m1.1a"><mi id="S6.T6.1.1.1.1.m1.1.1" xref="S6.T6.1.1.1.1.m1.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S6.T6.1.1.1.1.m1.1b"><ci id="S6.T6.1.1.1.1.m1.1.1.cmml" xref="S6.T6.1.1.1.1.m1.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.T6.1.1.1.1.m1.1c">\gamma</annotation></semantics></math></th>
<th id="S6.T6.1.1.1.2" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S6.T6.1.1.1.2.1" class="ltx_text ltx_font_bold">Source Domain</span></th>
<th id="S6.T6.1.1.1.3" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S6.T6.1.1.1.3.1" class="ltx_text ltx_font_bold">Target Domain</span></th>
<th id="S6.T6.1.1.1.4" class="ltx_td ltx_align_center ltx_th ltx_th_column ltx_border_t"><span id="S6.T6.1.1.1.4.1" class="ltx_text ltx_font_bold">mAP</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S6.T6.1.1.2.1" class="ltx_tr">
<th id="S6.T6.1.1.2.1.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_tt">0.1</th>
<td id="S6.T6.1.1.2.1.2" class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" rowspan="5"><span id="S6.T6.1.1.2.1.2.1" class="ltx_text">D+N</span></td>
<td id="S6.T6.1.1.2.1.3" class="ltx_td ltx_align_center ltx_border_r ltx_border_tt" rowspan="5"><span id="S6.T6.1.1.2.1.3.1" class="ltx_text">Dusk/Dawn</span></td>
<td id="S6.T6.1.1.2.1.4" class="ltx_td ltx_align_center ltx_border_tt">43.6</td>
</tr>
<tr id="S6.T6.1.1.3.2" class="ltx_tr">
<th id="S6.T6.1.1.3.2.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">0.5</th>
<td id="S6.T6.1.1.3.2.2" class="ltx_td ltx_align_center">43.9</td>
</tr>
<tr id="S6.T6.1.1.4.3" class="ltx_tr">
<th id="S6.T6.1.1.4.3.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">0.9</th>
<td id="S6.T6.1.1.4.3.2" class="ltx_td ltx_align_center">44.6</td>
</tr>
<tr id="S6.T6.1.1.5.4" class="ltx_tr">
<th id="S6.T6.1.1.5.4.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">1.2</th>
<td id="S6.T6.1.1.5.4.2" class="ltx_td ltx_align_center">45.3</td>
</tr>
<tr id="S6.T6.1.1.6.5" class="ltx_tr">
<th id="S6.T6.1.1.6.5.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">1.5</th>
<td id="S6.T6.1.1.6.5.2" class="ltx_td ltx_align_center">45.1</td>
</tr>
<tr id="S6.T6.1.1.7.6" class="ltx_tr">
<th id="S6.T6.1.1.7.6.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r ltx_border_t">0.1</th>
<td id="S6.T6.1.1.7.6.2" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" rowspan="5"><span id="S6.T6.1.1.7.6.2.1" class="ltx_text">C+M+S</span></td>
<td id="S6.T6.1.1.7.6.3" class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t" rowspan="5"><span id="S6.T6.1.1.7.6.3.1" class="ltx_text">Daytime</span></td>
<td id="S6.T6.1.1.7.6.4" class="ltx_td ltx_align_center ltx_border_t">39.7</td>
</tr>
<tr id="S6.T6.1.1.8.7" class="ltx_tr">
<th id="S6.T6.1.1.8.7.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">0.5</th>
<td id="S6.T6.1.1.8.7.2" class="ltx_td ltx_align_center">39.1</td>
</tr>
<tr id="S6.T6.1.1.9.8" class="ltx_tr">
<th id="S6.T6.1.1.9.8.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">0.9</th>
<td id="S6.T6.1.1.9.8.2" class="ltx_td ltx_align_center">38.7</td>
</tr>
<tr id="S6.T6.1.1.10.9" class="ltx_tr">
<th id="S6.T6.1.1.10.9.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_r">1.2</th>
<td id="S6.T6.1.1.10.9.2" class="ltx_td ltx_align_center">38.3</td>
</tr>
<tr id="S6.T6.1.1.11.10" class="ltx_tr">
<th id="S6.T6.1.1.11.10.1" class="ltx_td ltx_align_center ltx_th ltx_th_row ltx_border_b ltx_border_r">1.5</th>
<td id="S6.T6.1.1.11.10.2" class="ltx_td ltx_align_center ltx_border_b">38.2</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S6.T6.5.2.1" class="ltx_text" style="font-size:90%;">Table 6</span>: </span><span id="S6.T6.3.1" class="ltx_text" style="font-size:90%;">Effect of <math id="S6.T6.3.1.m1.1" class="ltx_Math" alttext="\gamma" display="inline"><semantics id="S6.T6.3.1.m1.1b"><mi id="S6.T6.3.1.m1.1.1" xref="S6.T6.3.1.m1.1.1.cmml">γ</mi><annotation-xml encoding="MathML-Content" id="S6.T6.3.1.m1.1c"><ci id="S6.T6.3.1.m1.1.1.cmml" xref="S6.T6.3.1.m1.1.1">𝛾</ci></annotation-xml><annotation encoding="application/x-tex" id="S6.T6.3.1.m1.1d">\gamma</annotation></semantics></math> under different domain shift conditions.</span></figcaption>
</figure>
</section>
<section id="S6.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.2 </span>Impact of the Number of Classes</h3>

<div id="S6.SS2.p1" class="ltx_para">
<p id="S6.SS2.p1.1" class="ltx_p">In this ablation, we consider the effect of a different number of object categories for training and evaluation on our PMT. We analyze the performance of a given class when trained with a varying number of other classes and how this affects the final detection performance. As the prototypes are trained with a contrastive loss, we expect that an increased number of classes could help to further improve the overall adaptation.
In <a href="#S6.F4" title="In 6.2 Impact of the Number of Classes ‣ 6 Appendix ‣ Multi-Source Domain Adaptation for Object Detection with Prototype-based Mean Teacher" class="ltx_ref"><span class="ltx_text ltx_ref_tag">Fig.</span> <span class="ltx_text ltx_ref_tag">4</span></a>, we present the AP for the classes Person and Car when trained with 0 to 8 additional classes and Truck and Raider when trained with 2 to 8 extra classes. While for some of the classes (Person and Car), the effect is not clear, for others (Truck and Rider) there is a clear trend in which more classes are used and better the results. We hypothesize that this different behavior could be due to the number of training samples per class. For very common classes with many samples, the model is already quite general, and adding more classes does not help. Instead for classes with fewer data points, contrasting the prototypes with other classes helps to improve detection.</p>
</div>
<figure id="S6.F4" class="ltx_figure"><img src="/html/2309.14950/assets/images/classes.png" id="S6.F4.g1" class="ltx_graphics ltx_centering ltx_img_landscape" width="240" height="185" alt="Refer to caption">
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_figure"><span id="S6.F4.2.1.1" class="ltx_text" style="font-size:90%;">Figure 4</span>: </span><span id="S6.F4.3.2" class="ltx_text" style="font-size:90%;">AP of PMT with a growing number of object categories.</span></figcaption>
</figure>
<figure id="S6.T7" class="ltx_table">
<div id="S6.T7.1" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:447.2pt;height:188.1pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-118.7pt,49.9pt) scale(0.653248762702463,0.653248762702463) ;">
<table id="S6.T7.1.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<thead class="ltx_thead">
<tr id="S6.T7.1.1.2.1" class="ltx_tr">
<th id="S6.T7.1.1.2.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_t"><span id="S6.T7.1.1.2.1.1.1" class="ltx_text ltx_font_bold">Setting</span></th>
<th id="S6.T7.1.1.2.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_t"><span id="S6.T7.1.1.2.1.2.1" class="ltx_text ltx_font_bold">Source</span></th>
<th id="S6.T7.1.1.2.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_th_row ltx_border_r ltx_border_t"><span id="S6.T7.1.1.2.1.3.1" class="ltx_text ltx_font_bold">Method</span></th>
<th id="S6.T7.1.1.2.1.4" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.4.1" class="ltx_text ltx_font_bold">Bike</span></th>
<th id="S6.T7.1.1.2.1.5" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.5.1" class="ltx_text ltx_font_bold">Bus</span></th>
<th id="S6.T7.1.1.2.1.6" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.6.1" class="ltx_text ltx_font_bold">Car</span></th>
<th id="S6.T7.1.1.2.1.7" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.7.1" class="ltx_text ltx_font_bold">Motor</span></th>
<th id="S6.T7.1.1.2.1.8" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.8.1" class="ltx_text ltx_font_bold">Person</span></th>
<th id="S6.T7.1.1.2.1.9" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.9.1" class="ltx_text ltx_font_bold">Rider</span></th>
<th id="S6.T7.1.1.2.1.10" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.10.1" class="ltx_text ltx_font_bold">Light</span></th>
<th id="S6.T7.1.1.2.1.11" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.11.1" class="ltx_text ltx_font_bold">Sign</span></th>
<th id="S6.T7.1.1.2.1.12" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.12.1" class="ltx_text ltx_font_bold">Train</span></th>
<th id="S6.T7.1.1.2.1.13" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_r ltx_border_t"><span id="S6.T7.1.1.2.1.13.1" class="ltx_text ltx_font_bold">Truck</span></th>
<th id="S6.T7.1.1.2.1.14" class="ltx_td ltx_align_left ltx_th ltx_th_column ltx_border_t"><span id="S6.T7.1.1.2.1.14.1" class="ltx_text ltx_font_bold">mAP</span></th>
</tr>
</thead>
<tbody class="ltx_tbody">
<tr id="S6.T7.1.1.3.1" class="ltx_tr">
<th id="S6.T7.1.1.3.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt" rowspan="3"><span id="S6.T7.1.1.3.1.1.1" class="ltx_text">Source Only</span></th>
<th id="S6.T7.1.1.3.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt">D</th>
<th id="S6.T7.1.1.3.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt" rowspan="3"><span id="S6.T7.1.1.3.1.3.1" class="ltx_text">FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite></span></th>
<td id="S6.T7.1.1.3.1.4" class="ltx_td ltx_align_left ltx_border_tt">35.1</td>
<td id="S6.T7.1.1.3.1.5" class="ltx_td ltx_align_left ltx_border_tt">51.7</td>
<td id="S6.T7.1.1.3.1.6" class="ltx_td ltx_align_left ltx_border_tt">52.6</td>
<td id="S6.T7.1.1.3.1.7" class="ltx_td ltx_align_left ltx_border_tt">9.9</td>
<td id="S6.T7.1.1.3.1.8" class="ltx_td ltx_align_left ltx_border_tt">31.9</td>
<td id="S6.T7.1.1.3.1.9" class="ltx_td ltx_align_left ltx_border_tt">17.8</td>
<td id="S6.T7.1.1.3.1.10" class="ltx_td ltx_align_left ltx_border_tt">21.6</td>
<td id="S6.T7.1.1.3.1.11" class="ltx_td ltx_align_left ltx_border_tt">36.3</td>
<td id="S6.T7.1.1.3.1.12" class="ltx_td ltx_align_left ltx_border_tt">-</td>
<td id="S6.T7.1.1.3.1.13" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">47.1</td>
<td id="S6.T7.1.1.3.1.14" class="ltx_td ltx_align_left ltx_border_tt">30.4</td>
</tr>
<tr id="S6.T7.1.1.4.2" class="ltx_tr">
<th id="S6.T7.1.1.4.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">N</th>
<td id="S6.T7.1.1.4.2.2" class="ltx_td ltx_align_left">27.9</td>
<td id="S6.T7.1.1.4.2.3" class="ltx_td ltx_align_left">32.5</td>
<td id="S6.T7.1.1.4.2.4" class="ltx_td ltx_align_left">49.4</td>
<td id="S6.T7.1.1.4.2.5" class="ltx_td ltx_align_left">15.0</td>
<td id="S6.T7.1.1.4.2.6" class="ltx_td ltx_align_left">28.7</td>
<td id="S6.T7.1.1.4.2.7" class="ltx_td ltx_align_left">21.8</td>
<td id="S6.T7.1.1.4.2.8" class="ltx_td ltx_align_left">14.0</td>
<td id="S6.T7.1.1.4.2.9" class="ltx_td ltx_align_left">30.5</td>
<td id="S6.T7.1.1.4.2.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.4.2.11" class="ltx_td ltx_align_left ltx_border_r">30.7</td>
<td id="S6.T7.1.1.4.2.12" class="ltx_td ltx_align_left">25.0</td>
</tr>
<tr id="S6.T7.1.1.5.3" class="ltx_tr">
<th id="S6.T7.1.1.5.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">D+N</th>
<td id="S6.T7.1.1.5.3.2" class="ltx_td ltx_align_left">31.5</td>
<td id="S6.T7.1.1.5.3.3" class="ltx_td ltx_align_left">46.9</td>
<td id="S6.T7.1.1.5.3.4" class="ltx_td ltx_align_left">52.9</td>
<td id="S6.T7.1.1.5.3.5" class="ltx_td ltx_align_left">8.4</td>
<td id="S6.T7.1.1.5.3.6" class="ltx_td ltx_align_left">29.5</td>
<td id="S6.T7.1.1.5.3.7" class="ltx_td ltx_align_left">21.6</td>
<td id="S6.T7.1.1.5.3.8" class="ltx_td ltx_align_left">21.7</td>
<td id="S6.T7.1.1.5.3.9" class="ltx_td ltx_align_left">34.3</td>
<td id="S6.T7.1.1.5.3.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.5.3.11" class="ltx_td ltx_align_left ltx_border_r">42.2</td>
<td id="S6.T7.1.1.5.3.12" class="ltx_td ltx_align_left">28.9</td>
</tr>
<tr id="S6.T7.1.1.6.4" class="ltx_tr">
<th id="S6.T7.1.1.6.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" rowspan="5"><span id="S6.T7.1.1.6.4.1.1" class="ltx_text">UDA Blending</span></th>
<th id="S6.T7.1.1.6.4.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" rowspan="5"><span id="S6.T7.1.1.6.4.2.1" class="ltx_text">D+N</span></th>
<th id="S6.T7.1.1.6.4.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Strong-Weak<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib22" title="" class="ltx_ref">22</a>]</cite>
</th>
<td id="S6.T7.1.1.6.4.4" class="ltx_td ltx_align_left ltx_border_t">29.7</td>
<td id="S6.T7.1.1.6.4.5" class="ltx_td ltx_align_left ltx_border_t">50.0</td>
<td id="S6.T7.1.1.6.4.6" class="ltx_td ltx_align_left ltx_border_t">52.9</td>
<td id="S6.T7.1.1.6.4.7" class="ltx_td ltx_align_left ltx_border_t">11.0</td>
<td id="S6.T7.1.1.6.4.8" class="ltx_td ltx_align_left ltx_border_t">31.4</td>
<td id="S6.T7.1.1.6.4.9" class="ltx_td ltx_align_left ltx_border_t">21.1</td>
<td id="S6.T7.1.1.6.4.10" class="ltx_td ltx_align_left ltx_border_t">23.3</td>
<td id="S6.T7.1.1.6.4.11" class="ltx_td ltx_align_left ltx_border_t">35.1</td>
<td id="S6.T7.1.1.6.4.12" class="ltx_td ltx_align_left ltx_border_t">-</td>
<td id="S6.T7.1.1.6.4.13" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">44.9</td>
<td id="S6.T7.1.1.6.4.14" class="ltx_td ltx_align_left ltx_border_t">29.9</td>
</tr>
<tr id="S6.T7.1.1.7.5" class="ltx_tr">
<th id="S6.T7.1.1.7.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Graph Prototype<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib1" title="" class="ltx_ref">1</a>]</cite>
</th>
<td id="S6.T7.1.1.7.5.2" class="ltx_td ltx_align_left">31.7</td>
<td id="S6.T7.1.1.7.5.3" class="ltx_td ltx_align_left">48.8</td>
<td id="S6.T7.1.1.7.5.4" class="ltx_td ltx_align_left">53.9</td>
<td id="S6.T7.1.1.7.5.5" class="ltx_td ltx_align_left">20.8</td>
<td id="S6.T7.1.1.7.5.6" class="ltx_td ltx_align_left">32.0</td>
<td id="S6.T7.1.1.7.5.7" class="ltx_td ltx_align_left">21.6</td>
<td id="S6.T7.1.1.7.5.8" class="ltx_td ltx_align_left">20.5</td>
<td id="S6.T7.1.1.7.5.9" class="ltx_td ltx_align_left">33.7</td>
<td id="S6.T7.1.1.7.5.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.7.5.11" class="ltx_td ltx_align_left ltx_border_r">43.1</td>
<td id="S6.T7.1.1.7.5.12" class="ltx_td ltx_align_left">30.6</td>
</tr>
<tr id="S6.T7.1.1.8.6" class="ltx_tr">
<th id="S6.T7.1.1.8.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Cat. Regularization<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib29" title="" class="ltx_ref">29</a>]</cite>
</th>
<td id="S6.T7.1.1.8.6.2" class="ltx_td ltx_align_left">25.3</td>
<td id="S6.T7.1.1.8.6.3" class="ltx_td ltx_align_left">51.3</td>
<td id="S6.T7.1.1.8.6.4" class="ltx_td ltx_align_left">52.1</td>
<td id="S6.T7.1.1.8.6.5" class="ltx_td ltx_align_left">17.0</td>
<td id="S6.T7.1.1.8.6.6" class="ltx_td ltx_align_left">33.4</td>
<td id="S6.T7.1.1.8.6.7" class="ltx_td ltx_align_left">18.9</td>
<td id="S6.T7.1.1.8.6.8" class="ltx_td ltx_align_left">20.7</td>
<td id="S6.T7.1.1.8.6.9" class="ltx_td ltx_align_left">34.8</td>
<td id="S6.T7.1.1.8.6.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.8.6.11" class="ltx_td ltx_align_left ltx_border_r">47.9</td>
<td id="S6.T7.1.1.8.6.12" class="ltx_td ltx_align_left">30.2</td>
</tr>
<tr id="S6.T7.1.1.9.7" class="ltx_tr">
<th id="S6.T7.1.1.9.7.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">UMT<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib5" title="" class="ltx_ref">5</a>]</cite>
</th>
<td id="S6.T7.1.1.9.7.2" class="ltx_td ltx_align_left">42.3</td>
<td id="S6.T7.1.1.9.7.3" class="ltx_td ltx_align_left">48.1</td>
<td id="S6.T7.1.1.9.7.4" class="ltx_td ltx_align_left">56.4</td>
<td id="S6.T7.1.1.9.7.5" class="ltx_td ltx_align_left">13.5</td>
<td id="S6.T7.1.1.9.7.6" class="ltx_td ltx_align_left">35.3</td>
<td id="S6.T7.1.1.9.7.7" class="ltx_td ltx_align_left">26.9</td>
<td id="S6.T7.1.1.9.7.8" class="ltx_td ltx_align_left">31.1</td>
<td id="S6.T7.1.1.9.7.9" class="ltx_td ltx_align_left">41.7</td>
<td id="S6.T7.1.1.9.7.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.9.7.11" class="ltx_td ltx_align_left ltx_border_r">40.1</td>
<td id="S6.T7.1.1.9.7.12" class="ltx_td ltx_align_left">33.5</td>
</tr>
<tr id="S6.T7.1.1.10.8" class="ltx_tr">
<th id="S6.T7.1.1.10.8.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Adaptive Teacher<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>
</th>
<td id="S6.T7.1.1.10.8.2" class="ltx_td ltx_align_left">43.1</td>
<td id="S6.T7.1.1.10.8.3" class="ltx_td ltx_align_left">48.9</td>
<td id="S6.T7.1.1.10.8.4" class="ltx_td ltx_align_left">56.9</td>
<td id="S6.T7.1.1.10.8.5" class="ltx_td ltx_align_left">14.7</td>
<td id="S6.T7.1.1.10.8.6" class="ltx_td ltx_align_left">36.0</td>
<td id="S6.T7.1.1.10.8.7" class="ltx_td ltx_align_left">27.1</td>
<td id="S6.T7.1.1.10.8.8" class="ltx_td ltx_align_left">32.7</td>
<td id="S6.T7.1.1.10.8.9" class="ltx_td ltx_align_left">43.8</td>
<td id="S6.T7.1.1.10.8.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.10.8.11" class="ltx_td ltx_align_left ltx_border_r">42.7</td>
<td id="S6.T7.1.1.10.8.12" class="ltx_td ltx_align_left">34.6</td>
</tr>
<tr id="S6.T7.1.1.11.9" class="ltx_tr">
<th id="S6.T7.1.1.11.9.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" rowspan="5"><span id="S6.T7.1.1.11.9.1.1" class="ltx_text">MSDA</span></th>
<th id="S6.T7.1.1.11.9.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" rowspan="5"><span id="S6.T7.1.1.11.9.2.1" class="ltx_text">D+N</span></th>
<th id="S6.T7.1.1.11.9.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">MDAN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib36" title="" class="ltx_ref">36</a>]</cite>
</th>
<td id="S6.T7.1.1.11.9.4" class="ltx_td ltx_align_left ltx_border_t">37.1</td>
<td id="S6.T7.1.1.11.9.5" class="ltx_td ltx_align_left ltx_border_t">29.9</td>
<td id="S6.T7.1.1.11.9.6" class="ltx_td ltx_align_left ltx_border_t">52.8</td>
<td id="S6.T7.1.1.11.9.7" class="ltx_td ltx_align_left ltx_border_t">15.8</td>
<td id="S6.T7.1.1.11.9.8" class="ltx_td ltx_align_left ltx_border_t">35.1</td>
<td id="S6.T7.1.1.11.9.9" class="ltx_td ltx_align_left ltx_border_t">21.6</td>
<td id="S6.T7.1.1.11.9.10" class="ltx_td ltx_align_left ltx_border_t">24.7</td>
<td id="S6.T7.1.1.11.9.11" class="ltx_td ltx_align_left ltx_border_t">38.8</td>
<td id="S6.T7.1.1.11.9.12" class="ltx_td ltx_align_left ltx_border_t">-</td>
<td id="S6.T7.1.1.11.9.13" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">20.1</td>
<td id="S6.T7.1.1.11.9.14" class="ltx_td ltx_align_left ltx_border_t">27.6</td>
</tr>
<tr id="S6.T7.1.1.1" class="ltx_tr">
<th id="S6.T7.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">M<sup id="S6.T7.1.1.1.1.1" class="ltx_sup">3</sup>SDA<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib20" title="" class="ltx_ref">20</a>]</cite>
</th>
<td id="S6.T7.1.1.1.2" class="ltx_td ltx_align_left">36.9</td>
<td id="S6.T7.1.1.1.3" class="ltx_td ltx_align_left">25.9</td>
<td id="S6.T7.1.1.1.4" class="ltx_td ltx_align_left">51.9</td>
<td id="S6.T7.1.1.1.5" class="ltx_td ltx_align_left">15.1</td>
<td id="S6.T7.1.1.1.6" class="ltx_td ltx_align_left">35.7</td>
<td id="S6.T7.1.1.1.7" class="ltx_td ltx_align_left">20.5</td>
<td id="S6.T7.1.1.1.8" class="ltx_td ltx_align_left">24.7</td>
<td id="S6.T7.1.1.1.9" class="ltx_td ltx_align_left">38.1</td>
<td id="S6.T7.1.1.1.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.1.11" class="ltx_td ltx_align_left ltx_border_r">15.9</td>
<td id="S6.T7.1.1.1.12" class="ltx_td ltx_align_left">26.5</td>
</tr>
<tr id="S6.T7.1.1.12.10" class="ltx_tr">
<th id="S6.T7.1.1.12.10.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">DMSN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib33" title="" class="ltx_ref">33</a>]</cite>
</th>
<td id="S6.T7.1.1.12.10.2" class="ltx_td ltx_align_left">36.5</td>
<td id="S6.T7.1.1.12.10.3" class="ltx_td ltx_align_left">54.3</td>
<td id="S6.T7.1.1.12.10.4" class="ltx_td ltx_align_left">55.5</td>
<td id="S6.T7.1.1.12.10.5" class="ltx_td ltx_align_left">20.4</td>
<td id="S6.T7.1.1.12.10.6" class="ltx_td ltx_align_left">36.9</td>
<td id="S6.T7.1.1.12.10.7" class="ltx_td ltx_align_left">27.7</td>
<td id="S6.T7.1.1.12.10.8" class="ltx_td ltx_align_left">26.4</td>
<td id="S6.T7.1.1.12.10.9" class="ltx_td ltx_align_left">41.6</td>
<td id="S6.T7.1.1.12.10.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.12.10.11" class="ltx_td ltx_align_left ltx_border_r">50.8</td>
<td id="S6.T7.1.1.12.10.12" class="ltx_td ltx_align_left">35.0</td>
</tr>
<tr id="S6.T7.1.1.13.11" class="ltx_tr">
<th id="S6.T7.1.1.13.11.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">TRKP<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>
</th>
<td id="S6.T7.1.1.13.11.2" class="ltx_td ltx_align_left">48.4</td>
<td id="S6.T7.1.1.13.11.3" class="ltx_td ltx_align_left">56.3</td>
<td id="S6.T7.1.1.13.11.4" class="ltx_td ltx_align_left">61.4</td>
<td id="S6.T7.1.1.13.11.5" class="ltx_td ltx_align_left">22.5</td>
<td id="S6.T7.1.1.13.11.6" class="ltx_td ltx_align_left">41.5</td>
<td id="S6.T7.1.1.13.11.7" class="ltx_td ltx_align_left">27.0</td>
<td id="S6.T7.1.1.13.11.8" class="ltx_td ltx_align_left">41.1</td>
<td id="S6.T7.1.1.13.11.9" class="ltx_td ltx_align_left">47.9</td>
<td id="S6.T7.1.1.13.11.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.13.11.11" class="ltx_td ltx_align_left ltx_border_r">51.9</td>
<td id="S6.T7.1.1.13.11.12" class="ltx_td ltx_align_left">39.8</td>
</tr>
<tr id="S6.T7.1.1.14.12" class="ltx_tr">
<th id="S6.T7.1.1.14.12.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r"><span id="S6.T7.1.1.14.12.1.1" class="ltx_text ltx_font_bold">PMT(ours)</span></th>
<td id="S6.T7.1.1.14.12.2" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.2.1" class="ltx_text ltx_font_bold">55.3</span></td>
<td id="S6.T7.1.1.14.12.3" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.3.1" class="ltx_text ltx_font_bold">59.8</span></td>
<td id="S6.T7.1.1.14.12.4" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.4.1" class="ltx_text ltx_font_bold">67.6</span></td>
<td id="S6.T7.1.1.14.12.5" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.5.1" class="ltx_text ltx_font_bold">29.9</span></td>
<td id="S6.T7.1.1.14.12.6" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.6.1" class="ltx_text ltx_font_bold">47.6</span></td>
<td id="S6.T7.1.1.14.12.7" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.7.1" class="ltx_text ltx_font_bold">32.7</span></td>
<td id="S6.T7.1.1.14.12.8" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.8.1" class="ltx_text ltx_font_bold">46.3</span></td>
<td id="S6.T7.1.1.14.12.9" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.9.1" class="ltx_text ltx_font_bold">56.0</span></td>
<td id="S6.T7.1.1.14.12.10" class="ltx_td ltx_align_left">-</td>
<td id="S6.T7.1.1.14.12.11" class="ltx_td ltx_align_left ltx_border_r"><span id="S6.T7.1.1.14.12.11.1" class="ltx_text ltx_font_bold">57.7</span></td>
<td id="S6.T7.1.1.14.12.12" class="ltx_td ltx_align_left"><span id="S6.T7.1.1.14.12.12.1" class="ltx_text ltx_font_bold">45.3</span></td>
</tr>
<tr id="S6.T7.1.1.15.13" class="ltx_tr">
<th id="S6.T7.1.1.15.13.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_t" rowspan="2"><span id="S6.T7.1.1.15.13.1.1" class="ltx_text">Oracle</span></th>
<th id="S6.T7.1.1.15.13.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_t" rowspan="2"><span id="S6.T7.1.1.15.13.2.1" class="ltx_text">D+N</span></th>
<th id="S6.T7.1.1.15.13.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Target Only</th>
<td id="S6.T7.1.1.15.13.4" class="ltx_td ltx_align_left ltx_border_t">27.2</td>
<td id="S6.T7.1.1.15.13.5" class="ltx_td ltx_align_left ltx_border_t">39.6</td>
<td id="S6.T7.1.1.15.13.6" class="ltx_td ltx_align_left ltx_border_t">51.9</td>
<td id="S6.T7.1.1.15.13.7" class="ltx_td ltx_align_left ltx_border_t">12.7</td>
<td id="S6.T7.1.1.15.13.8" class="ltx_td ltx_align_left ltx_border_t">29.0</td>
<td id="S6.T7.1.1.15.13.9" class="ltx_td ltx_align_left ltx_border_t">15.2</td>
<td id="S6.T7.1.1.15.13.10" class="ltx_td ltx_align_left ltx_border_t">20.0</td>
<td id="S6.T7.1.1.15.13.11" class="ltx_td ltx_align_left ltx_border_t">33.1</td>
<td id="S6.T7.1.1.15.13.12" class="ltx_td ltx_align_left ltx_border_t">-</td>
<td id="S6.T7.1.1.15.13.13" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">37.5</td>
<td id="S6.T7.1.1.15.13.14" class="ltx_td ltx_align_left ltx_border_t">26.6</td>
</tr>
<tr id="S6.T7.1.1.16.14" class="ltx_tr">
<th id="S6.T7.1.1.16.14.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r">All-Combined</th>
<td id="S6.T7.1.1.16.14.2" class="ltx_td ltx_align_left ltx_border_b">56.4</td>
<td id="S6.T7.1.1.16.14.3" class="ltx_td ltx_align_left ltx_border_b">59.9</td>
<td id="S6.T7.1.1.16.14.4" class="ltx_td ltx_align_left ltx_border_b">67.3</td>
<td id="S6.T7.1.1.16.14.5" class="ltx_td ltx_align_left ltx_border_b">30.8</td>
<td id="S6.T7.1.1.16.14.6" class="ltx_td ltx_align_left ltx_border_b">47.9</td>
<td id="S6.T7.1.1.16.14.7" class="ltx_td ltx_align_left ltx_border_b">33.9</td>
<td id="S6.T7.1.1.16.14.8" class="ltx_td ltx_align_left ltx_border_b">47.2</td>
<td id="S6.T7.1.1.16.14.9" class="ltx_td ltx_align_left ltx_border_b">57.8</td>
<td id="S6.T7.1.1.16.14.10" class="ltx_td ltx_align_left ltx_border_b">-</td>
<td id="S6.T7.1.1.16.14.11" class="ltx_td ltx_align_left ltx_border_b ltx_border_r">54.8</td>
<td id="S6.T7.1.1.16.14.12" class="ltx_td ltx_align_left ltx_border_b">45.3</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S6.T7.3.1.1" class="ltx_text" style="font-size:90%;">Table 7</span>: </span><span id="S6.T7.4.2" class="ltx_text" style="font-size:90%;">Class-wise AP of PMT compared against the baseline,
UDA, MSDA, and oracle methods on BDD100K. Source domains
are daytime (D) and night (N) subsets and the target is always
Dusk/Dawn of BDD100K</span></figcaption>
</figure>
<figure id="S6.T8" class="ltx_table">
<div id="S6.T8.2" class="ltx_inline-block ltx_align_center ltx_transformed_outer" style="width:447.2pt;height:199.6pt;vertical-align:-0.0pt;"><span class="ltx_transformed_inner" style="transform:translate(-78.8pt,35.2pt) scale(0.739288592043484,0.739288592043484) ;">
<table id="S6.T8.2.1" class="ltx_tabular ltx_guessed_headers ltx_align_middle">
<tbody class="ltx_tbody">
<tr id="S6.T8.2.1.1.1" class="ltx_tr">
<th id="S6.T8.2.1.1.1.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S6.T8.2.1.1.1.1.1" class="ltx_text ltx_font_bold">Setting</span></th>
<th id="S6.T8.2.1.1.1.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t"><span id="S6.T8.2.1.1.1.2.1" class="ltx_text ltx_font_bold">Source</span></th>
<th id="S6.T8.2.1.1.1.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t"><span id="S6.T8.2.1.1.1.3.1" class="ltx_text ltx_font_bold">Method</span></th>
<td id="S6.T8.2.1.1.1.4" class="ltx_td ltx_align_left ltx_border_t"><span id="S6.T8.2.1.1.1.4.1" class="ltx_text ltx_font_bold">Person</span></td>
<td id="S6.T8.2.1.1.1.5" class="ltx_td ltx_align_left ltx_border_t"><span id="S6.T8.2.1.1.1.5.1" class="ltx_text ltx_font_bold">Car</span></td>
<td id="S6.T8.2.1.1.1.6" class="ltx_td ltx_align_left ltx_border_t"><span id="S6.T8.2.1.1.1.6.1" class="ltx_text ltx_font_bold">Rider</span></td>
<td id="S6.T8.2.1.1.1.7" class="ltx_td ltx_align_left ltx_border_t"><span id="S6.T8.2.1.1.1.7.1" class="ltx_text ltx_font_bold">Truck</span></td>
<td id="S6.T8.2.1.1.1.8" class="ltx_td ltx_align_left ltx_border_t"><span id="S6.T8.2.1.1.1.8.1" class="ltx_text ltx_font_bold">Motor</span></td>
<td id="S6.T8.2.1.1.1.9" class="ltx_td ltx_align_left ltx_border_t"><span id="S6.T8.2.1.1.1.9.1" class="ltx_text ltx_font_bold">Bicycle</span></td>
<td id="S6.T8.2.1.1.1.10" class="ltx_td ltx_align_left ltx_border_r ltx_border_t"><span id="S6.T8.2.1.1.1.10.1" class="ltx_text ltx_font_bold">Bike</span></td>
<td id="S6.T8.2.1.1.1.11" class="ltx_td ltx_align_left ltx_border_t"><span id="S6.T8.2.1.1.1.11.1" class="ltx_text ltx_font_bold">mAP</span></td>
</tr>
<tr id="S6.T8.2.1.2.2" class="ltx_tr">
<th id="S6.T8.2.1.2.2.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt">Source Only</th>
<th id="S6.T8.2.1.2.2.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_tt">C</th>
<th id="S6.T8.2.1.2.2.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_tt">FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>
</th>
<td id="S6.T8.2.1.2.2.4" class="ltx_td ltx_align_left ltx_border_tt">26.9</td>
<td id="S6.T8.2.1.2.2.5" class="ltx_td ltx_align_left ltx_border_tt">44.7</td>
<td id="S6.T8.2.1.2.2.6" class="ltx_td ltx_align_left ltx_border_tt">22.1</td>
<td id="S6.T8.2.1.2.2.7" class="ltx_td ltx_align_left ltx_border_tt">17.4</td>
<td id="S6.T8.2.1.2.2.8" class="ltx_td ltx_align_left ltx_border_tt">17.1</td>
<td id="S6.T8.2.1.2.2.9" class="ltx_td ltx_align_left ltx_border_tt">18.8</td>
<td id="S6.T8.2.1.2.2.10" class="ltx_td ltx_align_left ltx_border_r ltx_border_tt">16.7</td>
<td id="S6.T8.2.1.2.2.11" class="ltx_td ltx_align_left ltx_border_tt">23.4</td>
</tr>
<tr id="S6.T8.2.1.3.3" class="ltx_tr">
<th id="S6.T8.2.1.3.3.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t">Source Only</th>
<th id="S6.T8.2.1.3.3.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" rowspan="5"><span id="S6.T8.2.1.3.3.2.1" class="ltx_text">C+M</span></th>
<th id="S6.T8.2.1.3.3.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>
</th>
<td id="S6.T8.2.1.3.3.4" class="ltx_td ltx_align_left ltx_border_t">35.2</td>
<td id="S6.T8.2.1.3.3.5" class="ltx_td ltx_align_left ltx_border_t">49.5</td>
<td id="S6.T8.2.1.3.3.6" class="ltx_td ltx_align_left ltx_border_t">26.1</td>
<td id="S6.T8.2.1.3.3.7" class="ltx_td ltx_align_left ltx_border_t">25.8</td>
<td id="S6.T8.2.1.3.3.8" class="ltx_td ltx_align_left ltx_border_t">18.9</td>
<td id="S6.T8.2.1.3.3.9" class="ltx_td ltx_align_left ltx_border_t">26.1</td>
<td id="S6.T8.2.1.3.3.10" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">26.5</td>
<td id="S6.T8.2.1.3.3.11" class="ltx_td ltx_align_left ltx_border_t">29.7</td>
</tr>
<tr id="S6.T8.2.1.4.4" class="ltx_tr">
<th id="S6.T8.2.1.4.4.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">UDA Blending</th>
<th id="S6.T8.2.1.4.4.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Unbiased Teach.<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite>
</th>
<td id="S6.T8.2.1.4.4.3" class="ltx_td ltx_align_left">30.7</td>
<td id="S6.T8.2.1.4.4.4" class="ltx_td ltx_align_left">28.0</td>
<td id="S6.T8.2.1.4.4.5" class="ltx_td ltx_align_left">3.9</td>
<td id="S6.T8.2.1.4.4.6" class="ltx_td ltx_align_left">11.2</td>
<td id="S6.T8.2.1.4.4.7" class="ltx_td ltx_align_left">19.2</td>
<td id="S6.T8.2.1.4.4.8" class="ltx_td ltx_align_left">17.8</td>
<td id="S6.T8.2.1.4.4.9" class="ltx_td ltx_align_left ltx_border_r">18.7</td>
<td id="S6.T8.2.1.4.4.10" class="ltx_td ltx_align_left">18.5</td>
</tr>
<tr id="S6.T8.2.1.5.5" class="ltx_tr">
<th id="S6.T8.2.1.5.5.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">UDA Blending</th>
<th id="S6.T8.2.1.5.5.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Adaptive Teacher<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>
</th>
<td id="S6.T8.2.1.5.5.3" class="ltx_td ltx_align_left">31.2</td>
<td id="S6.T8.2.1.5.5.4" class="ltx_td ltx_align_left">31.7</td>
<td id="S6.T8.2.1.5.5.5" class="ltx_td ltx_align_left">15.1</td>
<td id="S6.T8.2.1.5.5.6" class="ltx_td ltx_align_left">16.4</td>
<td id="S6.T8.2.1.5.5.7" class="ltx_td ltx_align_left">17.1</td>
<td id="S6.T8.2.1.5.5.8" class="ltx_td ltx_align_left">20.9</td>
<td id="S6.T8.2.1.5.5.9" class="ltx_td ltx_align_left ltx_border_r">27.9</td>
<td id="S6.T8.2.1.5.5.10" class="ltx_td ltx_align_left">22.9</td>
</tr>
<tr id="S6.T8.2.1.6.6" class="ltx_tr">
<th id="S6.T8.2.1.6.6.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">MSDA</th>
<th id="S6.T8.2.1.6.6.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">TRKP<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>
</th>
<td id="S6.T8.2.1.6.6.3" class="ltx_td ltx_align_left">39.2</td>
<td id="S6.T8.2.1.6.6.4" class="ltx_td ltx_align_left">53.2</td>
<td id="S6.T8.2.1.6.6.5" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.6.6.5.1" class="ltx_text ltx_font_bold">32.4</span></td>
<td id="S6.T8.2.1.6.6.6" class="ltx_td ltx_align_left">28.7</td>
<td id="S6.T8.2.1.6.6.7" class="ltx_td ltx_align_left">25.5</td>
<td id="S6.T8.2.1.6.6.8" class="ltx_td ltx_align_left">31.1</td>
<td id="S6.T8.2.1.6.6.9" class="ltx_td ltx_align_left ltx_border_r">37.4</td>
<td id="S6.T8.2.1.6.6.10" class="ltx_td ltx_align_left">35.3</td>
</tr>
<tr id="S6.T8.2.1.7.7" class="ltx_tr">
<th id="S6.T8.2.1.7.7.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">MSDA</th>
<th id="S6.T8.2.1.7.7.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r"><span id="S6.T8.2.1.7.7.2.1" class="ltx_text ltx_font_bold">PMT(ours)</span></th>
<td id="S6.T8.2.1.7.7.3" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.7.7.3.1" class="ltx_text ltx_font_bold">41.1</span></td>
<td id="S6.T8.2.1.7.7.4" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.7.7.4.1" class="ltx_text ltx_font_bold">53.5</span></td>
<td id="S6.T8.2.1.7.7.5" class="ltx_td ltx_align_left">31.2</td>
<td id="S6.T8.2.1.7.7.6" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.7.7.6.1" class="ltx_text ltx_font_bold">31.9</span></td>
<td id="S6.T8.2.1.7.7.7" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.7.7.7.1" class="ltx_text ltx_font_bold">33.7</span></td>
<td id="S6.T8.2.1.7.7.8" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.7.7.8.1" class="ltx_text ltx_font_bold">34.9</span></td>
<td id="S6.T8.2.1.7.7.9" class="ltx_td ltx_align_left ltx_border_r"><span id="S6.T8.2.1.7.7.9.1" class="ltx_text ltx_font_bold">44.6</span></td>
<td id="S6.T8.2.1.7.7.10" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.7.7.10.1" class="ltx_text ltx_font_bold">38.7</span></td>
</tr>
<tr id="S6.T8.2.1.8.8" class="ltx_tr">
<th id="S6.T8.2.1.8.8.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t">Source Only</th>
<th id="S6.T8.2.1.8.8.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t" rowspan="5"><span id="S6.T8.2.1.8.8.2.1" class="ltx_text">C+M+S</span></th>
<th id="S6.T8.2.1.8.8.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">FRCNN<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib21" title="" class="ltx_ref">21</a>]</cite>
</th>
<td id="S6.T8.2.1.8.8.4" class="ltx_td ltx_align_left ltx_border_t">36.6</td>
<td id="S6.T8.2.1.8.8.5" class="ltx_td ltx_align_left ltx_border_t">49.0</td>
<td id="S6.T8.2.1.8.8.6" class="ltx_td ltx_align_left ltx_border_t">22.8</td>
<td id="S6.T8.2.1.8.8.7" class="ltx_td ltx_align_left ltx_border_t">24.9</td>
<td id="S6.T8.2.1.8.8.8" class="ltx_td ltx_align_left ltx_border_t">26.9</td>
<td id="S6.T8.2.1.8.8.9" class="ltx_td ltx_align_left ltx_border_t">28.4</td>
<td id="S6.T8.2.1.8.8.10" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">27.7</td>
<td id="S6.T8.2.1.8.8.11" class="ltx_td ltx_align_left ltx_border_t">30.9</td>
</tr>
<tr id="S6.T8.2.1.9.9" class="ltx_tr">
<th id="S6.T8.2.1.9.9.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">UDA Blending</th>
<th id="S6.T8.2.1.9.9.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Unbiased Teach.<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib17" title="" class="ltx_ref">17</a>]</cite>
</th>
<td id="S6.T8.2.1.9.9.3" class="ltx_td ltx_align_left">32.7</td>
<td id="S6.T8.2.1.9.9.4" class="ltx_td ltx_align_left">39.6</td>
<td id="S6.T8.2.1.9.9.5" class="ltx_td ltx_align_left">6.6</td>
<td id="S6.T8.2.1.9.9.6" class="ltx_td ltx_align_left">21.2</td>
<td id="S6.T8.2.1.9.9.7" class="ltx_td ltx_align_left">21.3</td>
<td id="S6.T8.2.1.9.9.8" class="ltx_td ltx_align_left">25.7</td>
<td id="S6.T8.2.1.9.9.9" class="ltx_td ltx_align_left ltx_border_r">28.5</td>
<td id="S6.T8.2.1.9.9.10" class="ltx_td ltx_align_left">25.1</td>
</tr>
<tr id="S6.T8.2.1.10.10" class="ltx_tr">
<th id="S6.T8.2.1.10.10.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">UDA Blending</th>
<th id="S6.T8.2.1.10.10.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">Adaptive Teacher<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib15" title="" class="ltx_ref">15</a>]</cite>
</th>
<td id="S6.T8.2.1.10.10.3" class="ltx_td ltx_align_left">36.3</td>
<td id="S6.T8.2.1.10.10.4" class="ltx_td ltx_align_left">42.6</td>
<td id="S6.T8.2.1.10.10.5" class="ltx_td ltx_align_left">19.7</td>
<td id="S6.T8.2.1.10.10.6" class="ltx_td ltx_align_left">23.4</td>
<td id="S6.T8.2.1.10.10.7" class="ltx_td ltx_align_left">24.8</td>
<td id="S6.T8.2.1.10.10.8" class="ltx_td ltx_align_left">27.1</td>
<td id="S6.T8.2.1.10.10.9" class="ltx_td ltx_align_left ltx_border_r">33.2</td>
<td id="S6.T8.2.1.10.10.10" class="ltx_td ltx_align_left">29.6</td>
</tr>
<tr id="S6.T8.2.1.11.11" class="ltx_tr">
<th id="S6.T8.2.1.11.11.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">MSDA</th>
<th id="S6.T8.2.1.11.11.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">TRKP<cite class="ltx_cite ltx_citemacro_cite">[<a href="#bib.bib27" title="" class="ltx_ref">27</a>]</cite>
</th>
<td id="S6.T8.2.1.11.11.3" class="ltx_td ltx_align_left">40.2</td>
<td id="S6.T8.2.1.11.11.4" class="ltx_td ltx_align_left">53.9</td>
<td id="S6.T8.2.1.11.11.5" class="ltx_td ltx_align_left">31.0</td>
<td id="S6.T8.2.1.11.11.6" class="ltx_td ltx_align_left">30.8</td>
<td id="S6.T8.2.1.11.11.7" class="ltx_td ltx_align_left">30.4</td>
<td id="S6.T8.2.1.11.11.8" class="ltx_td ltx_align_left">34.0</td>
<td id="S6.T8.2.1.11.11.9" class="ltx_td ltx_align_left ltx_border_r">39.3</td>
<td id="S6.T8.2.1.11.11.10" class="ltx_td ltx_align_left">37.1</td>
</tr>
<tr id="S6.T8.2.1.12.12" class="ltx_tr">
<th id="S6.T8.2.1.12.12.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">MSDA</th>
<th id="S6.T8.2.1.12.12.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r"><span id="S6.T8.2.1.12.12.2.1" class="ltx_text ltx_font_bold">PMT(ours)</span></th>
<td id="S6.T8.2.1.12.12.3" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.12.12.3.1" class="ltx_text ltx_font_bold">43.3</span></td>
<td id="S6.T8.2.1.12.12.4" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.12.12.4.1" class="ltx_text ltx_font_bold">54.1</span></td>
<td id="S6.T8.2.1.12.12.5" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.12.12.5.1" class="ltx_text ltx_font_bold">32.0</span></td>
<td id="S6.T8.2.1.12.12.6" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.12.12.6.1" class="ltx_text ltx_font_bold">32.6</span></td>
<td id="S6.T8.2.1.12.12.7" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.12.12.7.1" class="ltx_text ltx_font_bold">35.1</span></td>
<td id="S6.T8.2.1.12.12.8" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.12.12.8.1" class="ltx_text ltx_font_bold">36.1</span></td>
<td id="S6.T8.2.1.12.12.9" class="ltx_td ltx_align_left ltx_border_r"><span id="S6.T8.2.1.12.12.9.1" class="ltx_text ltx_font_bold">44.8</span></td>
<td id="S6.T8.2.1.12.12.10" class="ltx_td ltx_align_left"><span id="S6.T8.2.1.12.12.10.1" class="ltx_text ltx_font_bold">39.7</span></td>
</tr>
<tr id="S6.T8.2.1.13.13" class="ltx_tr">
<th id="S6.T8.2.1.13.13.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_t" rowspan="3"><span id="S6.T8.2.1.13.13.1.1" class="ltx_text">Oracle</span></th>
<th id="S6.T8.2.1.13.13.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_t">C+M</th>
<th id="S6.T8.2.1.13.13.3" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r ltx_border_t">Target Only</th>
<td id="S6.T8.2.1.13.13.4" class="ltx_td ltx_align_left ltx_border_t">35.3</td>
<td id="S6.T8.2.1.13.13.5" class="ltx_td ltx_align_left ltx_border_t">53.9</td>
<td id="S6.T8.2.1.13.13.6" class="ltx_td ltx_align_left ltx_border_t">33.2</td>
<td id="S6.T8.2.1.13.13.7" class="ltx_td ltx_align_left ltx_border_t">46.3</td>
<td id="S6.T8.2.1.13.13.8" class="ltx_td ltx_align_left ltx_border_t">25.6</td>
<td id="S6.T8.2.1.13.13.9" class="ltx_td ltx_align_left ltx_border_t">29.3</td>
<td id="S6.T8.2.1.13.13.10" class="ltx_td ltx_align_left ltx_border_r ltx_border_t">46.7</td>
<td id="S6.T8.2.1.13.13.11" class="ltx_td ltx_align_left ltx_border_t">38.6</td>
</tr>
<tr id="S6.T8.2.1.14.14" class="ltx_tr">
<th id="S6.T8.2.1.14.14.1" class="ltx_td ltx_align_left ltx_th ltx_th_row">C+M</th>
<th id="S6.T8.2.1.14.14.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_r">All-Combined</th>
<td id="S6.T8.2.1.14.14.3" class="ltx_td ltx_align_left">40.2</td>
<td id="S6.T8.2.1.14.14.4" class="ltx_td ltx_align_left">60.1</td>
<td id="S6.T8.2.1.14.14.5" class="ltx_td ltx_align_left">47.1</td>
<td id="S6.T8.2.1.14.14.6" class="ltx_td ltx_align_left">60.0</td>
<td id="S6.T8.2.1.14.14.7" class="ltx_td ltx_align_left">29.2</td>
<td id="S6.T8.2.1.14.14.8" class="ltx_td ltx_align_left">36.3</td>
<td id="S6.T8.2.1.14.14.9" class="ltx_td ltx_align_left ltx_border_r">56.9</td>
<td id="S6.T8.2.1.14.14.10" class="ltx_td ltx_align_left">47.1</td>
</tr>
<tr id="S6.T8.2.1.15.15" class="ltx_tr">
<th id="S6.T8.2.1.15.15.1" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b">C+M+S</th>
<th id="S6.T8.2.1.15.15.2" class="ltx_td ltx_align_left ltx_th ltx_th_row ltx_border_b ltx_border_r">All-Combined</th>
<td id="S6.T8.2.1.15.15.3" class="ltx_td ltx_align_left ltx_border_b">41.7</td>
<td id="S6.T8.2.1.15.15.4" class="ltx_td ltx_align_left ltx_border_b">63.9</td>
<td id="S6.T8.2.1.15.15.5" class="ltx_td ltx_align_left ltx_border_b">49.5</td>
<td id="S6.T8.2.1.15.15.6" class="ltx_td ltx_align_left ltx_border_b">58.1</td>
<td id="S6.T8.2.1.15.15.7" class="ltx_td ltx_align_left ltx_border_b">31.6</td>
<td id="S6.T8.2.1.15.15.8" class="ltx_td ltx_align_left ltx_border_b">39.1</td>
<td id="S6.T8.2.1.15.15.9" class="ltx_td ltx_align_left ltx_border_b ltx_border_r">53.5</td>
<td id="S6.T8.2.1.15.15.10" class="ltx_td ltx_align_left ltx_border_b">48.2</td>
</tr>
</tbody>
</table>
</span></div>
<figcaption class="ltx_caption ltx_centering"><span class="ltx_tag ltx_tag_table"><span id="S6.T8.3.1.1" class="ltx_text" style="font-size:90%;">Table 8</span>: </span><span id="S6.T8.4.2" class="ltx_text" style="font-size:90%;">Class-wise AP of PMT compared against the baselines on Daytime domain of BDD100K. C, M, and S refer to Cityscapes, MS COCO, and Synscapes datasets.</span></figcaption>
</figure>
</section>
</section>
</article>
</div>
<div class="ar5iv-footer"><a href="/html/2309.14949" class="ar5iv-nav-button ar5iv-nav-button-prev">◄</a>
    <a class="ar5iv-home-button" href="/"><img height="40" alt="ar5iv homepage" src="/assets/ar5iv.png"></a>
    <a href="/feeling_lucky" class="ar5iv-text-button">Feeling<br>lucky?</a>
    <a href="/log/2309.14950" class="ar5iv-text-button ar5iv-severity-warning">Conversion<br>report</a>
    <a class="ar5iv-text-button" target="_blank" href="https://github.com/dginev/ar5iv/issues/new?template=improve-article--arxiv-id-.md&title=Improve+article+2309.14950">Report<br>an issue</a>
    <a href="https://arxiv.org/abs/2309.14950" class="ar5iv-text-button arxiv-ui-theme">View&nbsp;original<br>on&nbsp;arXiv</a><a href="/html/2309.14951" class="ar5iv-nav-button ar5iv-nav-button-next">►</a>
</div><footer class="ltx_page_footer">
<a class="ar5iv-toggle-color-scheme" href="javascript:toggleColorScheme()" title="Toggle ar5iv color scheme"><span class="color-scheme-icon"></span></a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/license" target="_blank">Copyright</a>
<a class="ar5iv-footer-button" href="https://arxiv.org/help/policies/privacy_policy" target="_blank">Privacy Policy</a>

<div class="ltx_page_logo">Generated  on Wed Feb 28 14:36:44 2024 by <a target="_blank" href="http://dlmf.nist.gov/LaTeXML/" class="ltx_LaTeXML_logo"><span style="letter-spacing:-0.2em; margin-right:0.1em;">L<span class="ltx_font_smallcaps" style="position:relative; bottom:2.2pt;">a</span>T<span class="ltx_font_smallcaps" style="font-size:120%;position:relative; bottom:-0.2ex;">e</span></span><span style="font-size:90%; position:relative; bottom:-0.2ex;">XML</span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="Mascot Sammy"></a>
</div></footer>
</div>

    <script>
      var canMathML = typeof(MathMLElement) == "function";
      if (!canMathML) {
        var body = document.querySelector("body");
        body.firstElementChild.setAttribute('style', 'opacity: 0;');
        var loading = document.createElement("div");
        loading.setAttribute("id", "mathjax-loading-spinner");
        var message = document.createElement("div");
        message.setAttribute("id", "mathjax-loading-message");
        message.innerText = "Typesetting Equations...";
        body.prepend(loading);
        body.prepend(message);

        var el = document.createElement("script");
        el.src = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js";
        document.querySelector("head").appendChild(el);

        window.MathJax = {
          startup: {
            pageReady: () => {
              return MathJax.startup.defaultPageReady().then(() => {
                body.removeChild(loading);
                body.removeChild(message);
                body.firstElementChild.removeAttribute('style');
              }); } } };
      }
    </script>
    <script>
    // Auxiliary function, building the preview feature when
    // an inline citation is clicked
    function clicked_cite(e) {
      e.preventDefault();
      let cite = this.closest('.ltx_cite');
      let next = cite.nextSibling;
      if (next && next.nodeType == Node.ELEMENT_NODE && next.getAttribute('class') == "ar5iv-bibitem-preview") {
        next.remove();
        return; }
      // Before adding a preview modal,
      // cleanup older previews, in case they're still open
      document.querySelectorAll('span.ar5iv-bibitem-preview').forEach(function(node) {
        node.remove();
      })

      // Create the preview
      preview = document.createElement('span');
      preview.setAttribute('class','ar5iv-bibitem-preview');
      let target = document.getElementById(this.getAttribute('href').slice(1));
      target.childNodes.forEach(function (child) {
        preview.append(child.cloneNode(true));
      });
      let close_x = document.createElement('button');
      close_x.setAttribute("aria-label","Close modal for bibliography item preview");
      close_x.textContent = "×";
      close_x.setAttribute('class', 'ar5iv-button-close-preview');
      close_x.setAttribute('onclick','this.parentNode.remove()');
      preview.append(close_x);
      preview.querySelectorAll('.ltx_tag_bibitem').forEach(function(node) {
        node.remove();
      });
      cite.parentNode.insertBefore(preview, cite.nextSibling);
      return;
    }
    // Global Document initialization:
    // - assign the preview feature to all inline citation links
    document.querySelectorAll(".ltx_cite .ltx_ref").forEach(function (link) {
      link.addEventListener("click", clicked_cite);
    });
    </script>
    </body>
</html>
